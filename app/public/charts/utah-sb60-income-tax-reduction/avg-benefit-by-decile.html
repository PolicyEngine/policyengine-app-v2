<html>
  <head>
    <meta charset="utf-8" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body style="margin: 0; padding: 0;">
    <div>
      <script type="text/javascript">
        window.PlotlyConfig = { MathJaxConfig: 'local' };
      </script>
      <script
        charset="utf-8"
        src="https://cdn.plot.ly/plotly-2.27.0.min.js"
      ></script>
      <div
        id="chart"
        class="plotly-graph-div"
        style="height: 600px; width: 100%"
      ></div>
      <script type="text/javascript">
        // Data from statewide.py
        const deciles = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        const avgImpact = [5, 12, 23, 35, 52, 84, 155, 254, 297, 583];

        const data = [{
          x: deciles,
          y: avgImpact,
          type: 'bar',
          marker: { color: '#319795' },
          text: avgImpact.map(x => '$' + x),
          textposition: 'outside',
          textfont: { family: 'Roboto Serif, serif', size: 10, color: '#333' },
          hovertemplate: 'Income decile: %{x}<br>Average impact: $%{y:,.0f}<extra></extra>'
        }];

        const layout = {
          title: {
            text: 'Figure 3: Average benefit of Utah SB60 by income decile',
            font: { family: 'Roboto Serif, serif', size: 16 }
          },
          font: { family: 'Roboto Serif, serif', color: '#000' },
          xaxis: {
            title: { text: 'Income decile' },
            tickvals: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
            fixedrange: true
          },
          yaxis: {
            title: { text: 'Absolute change in household income' },
            tickformat: ',',
            tickprefix: '$',
            fixedrange: true,
            gridcolor: '#e0e0e0'
          },
          margin: { l: 80, r: 40, t: 80, b: 80 },
          showlegend: false,
          plot_bgcolor: '#fff',
          paper_bgcolor: '#fff',
          images: [{
            source: 'https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal-square.png',
            xref: 'paper',
            yref: 'paper',
            x: 1.02,
            y: -0.15,
            sizex: 0.08,
            sizey: 0.08,
            xanchor: 'right',
            yanchor: 'bottom'
          }]
        };

        Plotly.newPlot('chart', data, layout, { responsive: true, displayModeBar: false });
      </script>
    </div>
  </body>
</html>
