# PolicyEngine Research Archive

> Complete archive of PolicyEngine research articles.

---
# How a £2,000 salary sacrifice cap would affect workers
Slug: uk-salary-sacrifice-cap
Date: 2025-11-27
Authors: Max Ghenis, Vahid Ahmadi
Tags: uk, policy
Description: Capping salary sacrifice pension contributions at £2,000 would raise £3.3-7.6 billion in 2029-30 depending on behavioural responses, with impacts concentrated on higher earners.

---

Salary sacrifice arrangements allow employees to exchange part of their salary for non-cash benefits before tax and National Insurance are calculated. The Financial Times [reported](https://www.ft.com/content/11602ac1-44fc-4b58-8b17-af5e851f5c95) that the government is considering capping the amount that can be put into pension salary sacrifice schemes at £2,000 annually without paying National Insurance. Above this threshold, standard NI rates would apply. UK government guidance [defines](https://www.gov.uk/guidance/salary-sacrifice-and-the-effects-on-paye) salary sacrifice as an arrangement where an employee gives up the right to part of their cash pay, usually in return for a non-cash benefit.

HMRC's research [shows](https://www.gov.uk/government/publications/understanding-the-attitudes-and-behaviours-of-employers-towards-salary-sacrifice-for-pensions/understanding-the-attitudes-and-behaviours-of-employers-towards-salary-sacrifice-for-pensions) that salary sacrifice is widely used when it is available: in 2019, 30% of private-sector employees and 9% of public-sector employees in organisations offering salary sacrifice contributed to pensions through these arrangements.

The government announced this policy in the Autumn Budget 2025. The OBR estimates the cap would raise £4.9 billion (static) or £4.7 billion (post-behavioural) in 2029-30, when the policy takes effect. This analysis examines the cap's impact on households, government revenue, and income distribution.

### Data

This analysis uses salary sacrifice pension contribution data from the Family Resources Survey (FRS), enhanced through calibration to match administrative totals. PolicyEngine's microsimulation identifies 4.9 million workers with salary sacrifice pension contributions (15% of employees). Among these contributors, average annual contributions are £4,631. Total salary sacrifice contributions amount to £22.7 billion, consistent with external estimates based on NI relief costs. For more information on PolicyEngine's data methodology, see the [PolicyEngine UK data documentation](https://policyengine.github.io/policyengine-uk-data/).

### Assumptions

This analysis models the cap's effects under the following assumptions:

1. **Continued pension saving**: Employees currently using salary sacrifice maintain their desire to contribute the same total amount to pensions.

2. **Contribution redirection**: Contributions exceeding the £2,000 cap shift from salary sacrifice to regular employee pension contributions (which receive income tax relief but not National Insurance relief).

3. **Broad-based employer response**: Employers spread the increased National Insurance costs across all employees, maintaining cost neutrality. This is more defensible than assuming employers can target only affected workers, since if employers could identify and reduce compensation for specific individuals, those workers could simply restructure their benefits to avoid the targeting. With £13.8 billion in excess contributions generating £2.1 billion in additional employer NI (at 15%), this translates to a 0.16% reduction in employment income across all workers.

4. **No changes to other benefits**: Employer pension matching rates and other employment benefits remain unchanged.

## Household impact

Under current law, when an employee makes pension contributions through salary sacrifice, both the employee and employer save on National Insurance contributions on the sacrificed amount. As an example, consider an employee earning £50,000 who contributes £5,000 to their pension through salary sacrifice. The table below shows the tax calculation:

**Table 1: Current system - £50,000 earner with £5,000 pension contribution via salary sacrifice**

| Component                           | Amount      | Calculation               |
| :---------------------------------- | :---------- | :------------------------ |
| Gross salary                        | £50,000     |                           |
| Salary sacrifice                    | £5,000      |                           |
| Taxable salary                      | £45,000     | £50,000 - £5,000          |
| Employee NI (8% on £12,570-£45,000) | £2,594      | 8% × (£45,000 - £12,570)  |
| Employer NI (15% on above £9,100)   | £5,385      | 15% × (£45,000 - £9,100)  |
| Income tax (20% on £12,570-£45,000) | £6,486      | 20% × (£45,000 - £12,570) |
| **Take-home pay**                   | **£35,920** | £45,000 - £2,594 - £6,486 |

### Impact of the proposed cap

With the cap in place, an employee previously contributing £5,000 via salary sacrifice faces the following changes under the broad-based employer response: the £3,000 excess becomes taxable income, and the employee redirects it to regular employee pension contributions. The employer spreads its increased NI costs (0.058% of payroll) across all workers, resulting in a £29 reduction for this worker. The employee now pays NI on the £3,000 excess (£240 at 8%), reducing take-home pay from £35,920 to £35,651.

**Table 2: With £2,000 cap - £50,000 earner with broad-based employer response**

| Component                           | Amount      | Calculation                        |
| :---------------------------------- | :---------- | :--------------------------------- |
| Original gross salary               | £50,000     |                                    |
| Broad-based haircut (0.058%)        | £29         | 0.058% × £50,000                   |
| Adjusted gross salary               | £49,971     | £50,000 - £29                      |
| Salary sacrifice                    | £2,000      | Capped at £2,000                   |
| Taxable salary                      | £47,971     | £49,971 - £2,000                   |
| Employee pension contribution       | £3,000      | Full excess redirected             |
| Taxable income (for IT)             | £44,971     | £47,971 - £3,000                   |
| Employee NI (8% on £12,570-£47,971) | £2,832      | 8% × (£47,971 - £12,570)           |
| Income tax (20% on £12,570-£44,971) | £6,480      | 20% × (£44,971 - £12,570)          |
| **Take-home pay**                   | **£35,659** | £47,971 - £3,000 - £2,832 - £6,480 |
| **Total pension contribution**      | **£5,000**  | £2,000 + £3,000                    |

Under the broad-based model, the affected worker maintains their full £5,000 pension contribution, but pays £240 more in employee NI on the excess. Unaffected workers see a £17-£58 annual reduction depending on their salary.

## Government revenue impact

PolicyEngine's microsimulation estimates that 4.9 million people make pension contributions through salary sacrifice arrangements. Of these, 3.3 million (68%) would exceed the £2,000 cap.

Under baseline policy, total salary sacrifice contributions amount to £22.7 billion. With the cap in place, £13.8 billion in excess contributions would shift to regular employee pension contributions.

The policy is scheduled to take effect from April 2029. PolicyEngine estimates the cap would raise **£3.3 billion** in 2029-30 under our baseline assumptions (employers spread costs, employees maintain pension contributions), compared to the OBR's estimate of £4.9 billion (static) or £4.7 billion (post-behavioural). Revenue estimates vary significantly based on behavioural assumptions:

[Interactive: revenue by year]

PolicyEngine's baseline estimate of £3.3 billion is 32% below the OBR's static estimate of £4.9 billion. This reflects differences in behavioural assumptions: PolicyEngine's baseline assumes employees maintain their pension contributions (shifting excess to regular schemes) and employers spread costs across all workers, while the OBR's post-behavioural estimate of £4.7 billion may assume greater take-up of taxable cash.

## Distributional analysis

The cap is progressive: lower-income households are largely unaffected while higher earners bear the burden. This reflects both the concentration of salary sacrifice usage among higher earners and the tendency for high earners to contribute amounts exceeding the £2,000 cap.

[Interactive: distributional impact]

Under the baseline scenario (employers spread costs, employees maintain pension contributions), the top income decile experiences an average 0.65% reduction in disposable income (£200/year), while lower deciles see minimal impact. Toggle between scenarios to see how different behavioural assumptions affect the distributional pattern.

## Conclusion

The cap would raise approximately £3.3 billion annually when it takes effect in April 2029, affecting 3.3 million workers who currently contribute above £2,000. This compares to the OBR's estimates of £4.9 billion (static) or £4.7 billion (post-behavioural).

The impact is progressive: higher earners experience larger reductions while lower-income households are largely unaffected.

## Appendix: Data construction methodology

The Family Resources Survey (FRS) asks a subset of respondents whether their pension contributions are made through salary sacrifice (the SALSAC question). In FRS 2023-24, approximately 4,000 respondents were asked this question, while around 13,000 were not asked. To construct a complete picture of salary sacrifice usage, we use the following methodology:

### Imputation approach

1. **Training data**: We use the ~4,000 FRS respondents who were asked about salary sacrifice as training data. This includes both participants (with reported contribution amounts) and non-participants (with zero contributions).

2. **Predict salary sacrifice amounts**: Using this training set, we fit a quantile random forest model to predict salary sacrifice pension contribution amounts based on age and employment income.

3. **Impute for non-respondents**: We apply this model to impute salary sacrifice amounts for respondents who were not asked the question, generating a complete picture of salary sacrifice usage across the population.

### Calibration

After imputation, we calibrate the dataset using PolicyEngine's standard [reweighting methodology](https://policyengine.github.io/policyengine-uk-data/) to match administrative totals. This salary sacrifice-enhanced dataset is available alongside PolicyEngine's standard UK datasets for researchers who wish to analyse salary sacrifice reforms.

### Limitations

The imputation approach assumes that salary sacrifice usage patterns among non-respondents are similar to those among respondents with similar characteristics. If employers systematically offer salary sacrifice to workers with unobservable characteristics that differ from our predictors, our estimates may be biased. The difference between PolicyEngine's estimates and OBR figures likely reflects differences in behavioural assumptions about employer and employee responses to the cap.



---

---
# OBR November 2025 economic projections: what changed
Slug: obr-november-2025-projections
Date: 2025-11-26 18:00:00
Authors: Max Ghenis
Tags: uk, policy, technical
Description: The OBR revised up inflation and earnings forecasts in the November 2025 Autumn Budget. We compare the new projections to March 2025.

---

The Office for Budget Responsibility (OBR) released its [November 2025 Economic and Fiscal Outlook](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/) alongside the Autumn Budget. This forecast updates the March 2025 projections with revisions to inflation and earnings growth.

PolicyEngine uses these OBR projections to uprate monetary values across our UK tax-benefit model, affecting calculations for benefits, tax thresholds, and policy impacts.

## Key changes

The November 2025 forecast shows higher inflation and earnings growth in the near term compared to March:

- **Higher CPI inflation in 2025-26**: CPI revised up from 3.2% to 3.5% in 2025, and from 2.1% to 2.5% in 2026. The OBR attributes this to higher energy prices and the inflationary impact of the employer National Insurance increases announced in the Budget.
- **Higher earnings growth through 2026**: Average earnings growth revised up from 4.3% to 5.2% in 2025—a 0.9 percentage point increase. This reflects stronger-than-expected wage growth and the impact of the National Living Wage increase.
- **Higher RPI through 2027**: RPI projections revised upward, reflecting the CPI revisions plus continued housing cost pressures. RPI matters particularly for student loan repayments and some pension uprating.
- **Lower private rent growth, mixed mortgage outlook**: Private rent growth revised down from 6.5% to 5.5% in 2025 and from 3.9% to 3.3% in 2026. Mortgage interest costs show a mixed picture: lower in 2025 (11.0% vs 14.2%) but higher in 2026 (14.4% vs 13.3%), reflecting expectations about Bank of England rate decisions. Social rent, which follows CPI+1% with a one-year lag, rises to 4.5% in 2026 (up from 4.2% projected in March).
- **Convergence to long-run assumptions by 2030**: Despite near-term revisions, both forecasts converge toward the same long-run equilibrium: 2% CPI (the Bank of England's target) and around 2.3% RPI.[^1]

[^1]: The OBR also revised historical outturn data back to 2022 as final ONS estimates became available (e.g., 2023 CPI from 5.7% to 7.3%). The March 2025 forecast only projected housing, income, and council tax variables through 2029, while November 2025 extends these to 2030. We updated all values in [policyengine-uk PR #1377](https://github.com/PolicyEngine/policyengine-uk/pull/1377).

## Interactive comparison

Explore how the OBR's projections changed between March and November 2025:

<center>[Interactive: obr comparison]</center>

## What we updated in PolicyEngine

We've updated the following OBR-derived parameters in [policyengine-uk](https://github.com/PolicyEngine/policyengine-uk):

**Inflation indices** (from Economy Table 1.7):
- **CPI growth**: Used for benefit uprating, poverty thresholds, and real-terms analysis
- **RPI growth**: Used for student loan interest rates and some pension calculations
- **CPIH growth**: Consumer prices including owner occupiers' housing costs

**Labour market** (from Economy Table 1.6):
- **Average earnings growth**: Used for projecting employment income and State Pension triple lock calculations

**Housing** (from Economy Tables 1.7 and 1.16):
- **House price growth**: Used for property-related calculations including stamp duty projections
- **Rent growth**: Used for housing benefit and Universal Credit housing element calculations
- **Mortgage interest growth**: Used for housing cost projections
- **Social rent growth**: Derived from CPI+1% with one-year lag

**Income components** (from Economy Table 1.12):
- **Non-labour income growth**: Used for projecting investment and property income
- **Per capita GDP growth**: Used for scaling aggregate statistics
- **Per capita mixed income growth**: Used for self-employment income projections
- **Per capita non-labour income growth**: Used for household income projections

**Local taxes** (from Expenditure Table 4.1):
- **Council tax receipt growth**: Separate forecasts for England, Scotland, and Wales

All projections now extend to 2030, with clear annotations distinguishing outturn data (2009-2024) from OBR forecasts (2025-2030) and long-run equilibrium assumptions (2031+).

These parameters affect both household-level calculations and economy-wide budget impact estimates.

## Implications for PolicyEngine users

These updated projections affect several PolicyEngine calculations:

1. **Benefit uprating**: Most working-age benefits are uprated by September CPI each April. The higher 2025-26 CPI forecasts mean larger benefit increases in April 2026 and 2027, improving support for low-income households.

2. **Tax threshold freezes**: The higher inflation forecasts increase the real cost of frozen income tax thresholds. With the personal allowance frozen at £12,570 and higher rate threshold frozen, more income gets pushed into higher tax bands—a phenomenon known as "fiscal drag."

3. **State Pension**: The triple lock guarantees pensions rise by the highest of CPI inflation, average earnings growth, or 2.5%. The higher earnings growth forecast (5.2% vs 4.3% in 2025) suggests larger State Pension increases.

4. **Earnings projections**: Our household simulations use earnings growth to project future incomes, affecting multi-year policy impact estimates. Higher near-term earnings growth means higher projected incomes.

5. **Real terms analysis**: When presenting results in real terms, we deflate using these CPI projections. Higher inflation means slower real income growth even if nominal incomes rise.

6. **Housing costs**: Updated rent and house price forecasts affect calculations for housing-related benefits and property taxes.

## Data sources

- [OBR Economic and Fiscal Outlook - November 2025](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/)
- [OBR Economic and Fiscal Outlook - March 2025](https://obr.uk/efo/economic-and-fiscal-outlook-march-2025/)
- [OBR Detailed forecast tables](https://obr.uk/download/november-2025-economic-and-fiscal-outlook-detailed-forecast-tables-zip-file/)
- [OBR long-run RPI-CPI wedge methodology](https://obr.uk/box/the-long-run-difference-between-rpi-and-cpi-inflation/)



---

---
# Impact of the Autumn Budget fuel duty freeze
Slug: fuel-duty-freeze-2025
Date: 2025-11-26 10:00:00
Authors: Vahid Ahmadi
Tags: uk, autumn-budget, featured
Description: PolicyEngine estimates that the fuel duty freeze costs £2.8 billion in 2026-27 and raises net income for 46.7% of people.

---

In the Autumn Budget 2025, the Government [announced](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/) a five-month freeze to fuel duty rates until September 2026, at which point the five pence cut first introduced in 2022 will be reversed through a staggered approach. From April 2027, the Government has stated that fuel duty rates will then be uprated annually by RPI. Previously announced increases to fuel duty rates have now been postponed for 16 consecutive years. The total cost of fuel duty freezes from 2010-11 to 2026-27 has risen to £120 billion.

To understand the impact of this policy, we follow OBR methodology to compare it against a baseline that assumes the five pence cut would have ended in March 2026 as previously planned. Table 1 shows how fuel duty rates differ between these two scenarios across different time periods.

**Table 1: Fuel duty rates under baseline and announced policy (pence per litre)**

| Period                     | Baseline | Announced policy |
| -------------------------- | -------- | ---------------- |
| Jan 1 - Mar 22, 2026       | 52.95    | 52.95            |
| Mar 23 - Mar 31, 2026      | 57.95    | 52.95            |
| Apr 1 - Aug 31, 2026       | 60.33    | 52.95            |
| Sep 1 - Nov 30, 2026       | 60.33    | 53.95            |
| Dec 1, 2026 - Feb 28, 2027 | 60.33    | 55.95            |
| Mar 1 - Mar 31, 2027       | 60.33    | 57.95            |
| Apr 1, 2027 - Mar 31, 2028 | 62.26    | 59.80            |
| Apr 1, 2028 - Mar 31, 2029 | 64.06    | 61.54            |
| Apr 1, 2029 onwards        | 65.92    | 63.34            |

The baseline assumes the 5p cut ends on March 22, 2026, returning the rate to 57.95p, followed by RPI uprating from April 2026 onwards (4.1% in 2026-27, 3.2% in 2027-28, 2.9% in 2028-29, and 2.9% in 2029-30). The announced policy maintains the freeze at 52.95p until September 2026, then implements a staggered reversal with increases of 1p, 2p, and 2p over three-month periods, reaching 57.95p by March 2027. Both policies then apply the same annual RPI uprating from April 2027 onwards.

In the following sections, we [estimate](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) the revenue impact and distributional effects of the fuel duty freeze across income deciles, examine how the policy affects income inequality, and analyse impacts across UK constituencies.

## Economic impacts

### Revenue impact

We [estimate](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) the revenue impact of the fuel duty freeze policy across fiscal years and compare our estimates with official OBR projections. Table 2 shows the cost of maintaining frozen rates rather than implementing the planned policy trajectory.

**Table 2: Revenue impact of fuel duty freeze (£ billion)**

| Source                                                                                                                                                                      | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | ------- | ------- | ------- | ------- |
| [PolicyEngine](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) | 0.0     | -2.8    | -0.7    | -0.7    | -0.7    |
| [OBR](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/)                                                                                                        | 0.0     | -2.4    | -0.9    | -0.9    | -0.9    |

PolicyEngine estimates the freeze reduces revenue by £2.8 billion in 2026-27, followed by £0.7 billion annually from 2027-28 onwards. The OBR projects revenue reductions of £2.4 billion in 2026-27 and £0.9 billion annually thereafter.

### Distributional impact

Figure 1 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) the relative change in household income by income decile from the fuel duty freeze in 2026-27.

**Relative change in household income by income decile, 2026-27**

[Chart: Relative change in household income by income decile, 2026-27]

In 2026-27, the lowest income decile gains 0.30% and the highest decile gains 0.11%. The gains decline progressively across higher income deciles, reflecting that fuel duty represents a larger share of expenditure for lower-income households. Deciles 3-7 experience gains between 0.17% and 0.21%.

### Winners and losers

Figure 2 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) the distribution of impacts across the population in 2026-27, categorising households by the magnitude of income changes they experience. The chart displays the share of the population in each income decile that gains more than 5%, gains less than 5%, experiences no change, loses less than 5%, or loses more than 5% of their household income.

**Population share by income change from fuel duty freeze, 2026-27**

[Chart: Population share by income change from fuel duty freeze, 2026-27]

In 2026-27, 46.7% of the population gains from the freeze, with around half of households experiencing no change. The majority of beneficiaries experience income increases of less than 5%.

### Inequality impact

The fuel duty freeze [reduces](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) income inequality in 2026-27, as measured by changes in the Gini index. In 2026-27, the Gini index declines by 0.18%, indicating a reduction in income inequality.

### Constituency impact

Figure 3 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=95140&region=uk&timePeriod=2026&baseline=95147&uk_local_areas_beta=true) the average net income change across UK parliamentary constituencies from the fuel duty freeze in 2026-27.

**Figure 3: The fuel duty freeze raises net income on average in a majority of the 650 parliamentary constituencies in 2026-27**

![](/assets/posts/uk-fuel-duty-freeze-2025/uk-fuel-duty-freeze-2025.png)

Average net income changes vary across constituencies, with all experiencing positive impacts. The distribution ranges from increases of 0.09% to 0.24%. The five constituencies with the largest gains are Cardiff East (0.24%), Swansea West (0.24%), Cardiff South and Penarth (0.23%), Torfaen (0.23%), and Vale of Glamorgan (0.23%).

## Conclusion

PolicyEngine estimates the fuel duty freeze costs £2.8 billion in 2026-27. The policy benefits 46.7% of the population, with the lowest income decile gaining 0.30% and the highest income decile gaining 0.11%. The freeze reduces income inequality by 0.18% as measured by the Gini index.



---

---
# Impact of the Autumn Budget rail fares freeze
Slug: rail-fares-freeze-2025
Date: 2025-11-27 10:00:00
Authors: Vahid Ahmadi
Tags: uk, autumn-budget, policy
Description: PolicyEngine estimates that the rail fares freeze reduces revenue by £145 million in 2026-27.

---

In the Autumn Budget 2025, the Government announced a freeze on all regulated rail fares in England for one year starting from March 2026. This is the first freeze on regulated rail fares in 30 years. The freeze applies to season tickets, peak return fares for commuters, and off-peak returns between major cities, holding these fares at their current levels until March 2027.

## Revenue impact

Table 1 shows the cost of freezing fares rather than implementing the planned 5.8% increase. PolicyEngine estimates align closely with official HM Treasury projections.

**Table 1: Revenue impact of rail fares freeze (£ million)**

| Source       | 2026-27 | 2027-28 | 2028-29 | 2029-30 |
| ------------ | ------- | ------- | ------- | ------- |
| PolicyEngine | -145    | -155    | -160    | -165    |
| [HM Treasury](https://www.gov.uk/government/publications/rail-fares-freeze-passenger-savings-estimate)  | -145    | -150    | -155    | -160    |

PolicyEngine estimates the freeze reduces revenue by £145 million in 2026-27, rising to £165 million by 2029-30 as baseline fare increases compound. This closely matches HM Treasury projections of £145 million in 2026-27, rising to £160 million by 2029-30.

## Distributional impact

Figure 1 shows the average change in household net income by income decile from the rail fares freeze in 2026-27. The distributional pattern reflects how rail usage varies across the income distribution.

**Average change in household income by income decile, 2026-27**

[Chart: Average change in household income by income decile, 2026-27]

In 2026-27, the average household benefit ranges from £1.76 per year for the highest decile to £17.58 for the eighth decile. The eighth decile sees the largest benefit, likely reflecting middle-to-upper-middle income commuters who rely heavily on rail travel. Lower and middle deciles see more modest benefits of £2-5 per household, while the top decile benefits least in absolute terms despite higher incomes.

## Appendix: Methodology

### Baseline scenario

Without the freeze, regulated rail fares would have increased by [5.8%](https://www.gov.uk/government/publications/rail-fares-freeze-passenger-savings-estimate) in March 2026 under the existing [fare formula](https://www.gov.uk/government/publications/railways-bill/railways-bill-fares), which sets annual fare increases at July RPI plus 1 percentage point. HM Treasury's passenger savings methodology document uses July 2025 RPI of 4.8%, yielding the 5.8% baseline increase. Subsequent years would follow the same formula, with fare increases compounding annually.

### Fiscal cost estimation

We calibrate our aggregate fiscal cost to [HM Treasury estimates](https://www.gov.uk/government/publications/rail-fares-freeze-passenger-savings-estimate). The freeze requires additional government subsidy to compensate train operating companies for foregone fare revenue, estimated at £145 million in 2026-27 rising to £775 million cumulative by 2030-31. Costs rise in subsequent years as the gap between frozen fares and the counterfactual baseline widens with each year of foregone increases.

### Household-level distribution

To estimate distributional impacts, we use household rail expenditure data from the [Family Resources Survey](https://www.gov.uk/government/collections/family-resources-survey--2) (FRS). The FRS records annual spending on rail travel for each sampled household, which we use as a proxy for rail usage intensity.

We distribute the aggregate Treasury cost estimate to households in proportion to their share of total weighted rail expenditure. Each household's benefit equals the total cost multiplied by their share of weighted rail spending across all households.

This approach assumes the benefit of frozen fares accrues proportionally to existing rail usage patterns. Households that spend more on rail travel receive a larger absolute benefit from the freeze.

### Limitations

Our distributional estimates have several limitations:

1. **Static behaviour**: We assume rail usage patterns remain unchanged. In practice, the freeze may induce additional rail travel, particularly among price-sensitive households.

2. **Regulated fares only**: The freeze applies only to regulated fares (season tickets, some returns). Unregulated fares set by train operators may still increase.

3. **Survey coverage**: The FRS may undercount very high rail spending (e.g., long-distance commuters with expensive season tickets) due to survey design and response patterns.

4. **Geographic variation**: Benefits concentrate among households with access to rail services, primarily in urban areas and along commuter corridors.



---

---
# High value council tax surcharge: constituency-level impact
Slug: high-value-council-tax-surcharge
Date: 2025-11-26 12:00:00
Authors: Max Ghenis
Tags: uk, policy, tax, autumn-budget, featured
Description: The top 10 constituencies account for 35% of the £400 million annual revenue from the new surcharge on properties over £2 million.

---

In the [November 2025 Autumn Budget](https://www.gov.uk/government/collections/budget-2025), the UK government announced a new high value council tax surcharge on properties valued over £2 million. The Office for Budget Responsibility (OBR) [estimates](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/) this measure will raise £400 million in 2029-30.

Using 2024 Land Registry sales data, we estimate how this revenue will be distributed across Westminster constituencies.

Key findings:
- We estimate 553 of 650 constituencies have properties that would be subject to the surcharge
- The top 10 constituencies account for 35% of the estimated revenue
- Cities of London and Westminster alone accounts for 10% (£42 million)
- London constituencies account for 47% of total revenue

[Explore the interactive map](#geographic-distribution) | [Download the data](https://github.com/PolicyEngine/uk-mansion-tax)

## The policy

From April 2028, owners of properties in England and Wales valued over £2 million (in 2026 prices) will pay an annual surcharge in addition to their existing council tax. The policy applies to properties valued by the Valuation Office Agency; it does not apply to Scotland or Northern Ireland, which have separate property tax systems. According to the [OBR](https://obr.uk/efo/economic-and-fiscal-outlook-november-2025/):

> There will be four price bands with the surcharge rising from £2,500 for a property valued in the lowest £2 million to £2.5 million band, to £7,500 for a property valued in the highest band of £5 million or more, all uprated by CPI inflation each year.

The OBR does not specify the thresholds or surcharge amounts for the two middle bands. [Bloomberg reports](https://www.bloomberg.com/news/articles/2025-11-26/reeves-hits-uk-property-with-mansion-tax-on-2-million-homes) the middle threshold as either £3 million or £3.5 million (the article contains a typo with overlapping bands), with surcharges of £3,500 and £5,000, though does not cite a source.

For this analysis, we assume the following band structure:

| Property value | Annual surcharge | Source |
|----------------|------------------|--------|
| £2m - £2.5m | £2,500 | OBR |
| £2.5m - £3m | £3,500 | Assumed |
| £3m - £5m | £5,000 | Assumed |
| £5m+ | £7,500 | OBR |

The revenue flows to central government rather than local authorities.

## Constituency-level estimates

We estimate each constituency's share of the £400 million total by modelling the distribution of high-value properties using 2024 Land Registry sales data. We uprate sale prices to April 2028 levels using OBR house price forecasts (10.7% cumulative growth from 2024), apply the surcharge band structure (with thresholds uprated by CPI from 2026 to 2028), and allocate the OBR's total estimate proportionally based on each constituency's share of modelled revenue.

### Top 20 constituencies by estimated revenue

| Rank | Constituency | Estimated annual revenue | Share of total |
|------|--------------|--------------------------|----------------|
| 1 | Cities of London and Westminster | £41.9m | 10.5% |
| 2 | Kensington and Bayswater | £29.4m | 7.4% |
| 3 | Chelsea and Fulham | £17.9m | 4.5% |
| 4 | Hampstead and Highgate | £12.0m | 3.0% |
| 5 | Richmond Park | £7.0m | 1.8% |
| 6 | Battersea | £6.4m | 1.6% |
| 7 | Islington South and Finsbury | £6.1m | 1.5% |
| 8 | Holborn and St Pancras | £7.4m | 1.8% |
| 9 | Hammersmith and Chiswick | £5.5m | 1.4% |
| 10 | Finchley and Golders Green | £5.6m | 1.4% |
| 11 | Runnymede and Weybridge | £5.0m | 1.3% |
| 12 | Wimbledon | £4.3m | 1.1% |
| 13 | Ealing Central and Acton | £3.6m | 0.9% |
| 14 | Queen's Park and Maida Vale | £3.7m | 0.9% |
| 15 | Windsor | £4.0m | 1.0% |
| 16 | Esher and Walton | £3.1m | 0.8% |
| 17 | Dulwich and West Norwood | £2.3m | 0.6% |
| 18 | Harpenden and Berkhamsted | £2.0m | 0.5% |
| 19 | Hornsey and Friern Barnet | £1.8m | 0.5% |
| 20 | Chesham and Amersham | £2.1m | 0.5% |

The top 20 constituencies account for 43% of the estimated revenue while comprising 3% of all constituencies.

## Geographic distribution

The map below shows the estimated revenue allocation by constituency. Darker shading indicates higher estimated revenue from the surcharge.

<center>[Interactive: surcharge_map_by_revenue]</center>

The concentration in London and the Home Counties reflects the geography of UK property wealth. Of the 553 constituencies we estimate have properties subject to the surcharge:
- 56 are in Greater London (accounting for 47% of estimated revenue)
- The remaining 497 constituencies share 53% of estimated revenue

London constituencies account for 47% of the estimated revenue while comprising 9% of all constituencies.

### Distribution by surcharge band

Revenue is concentrated in the highest-value properties:

| Band (2028 prices) | Share of affected properties | Revenue contribution |
|--------------------|------------------------------|---------------------|
| £2.09m - £2.61m | 31% | 17% |
| £2.61m - £3.14m | 18% | 13% |
| £3.14m - £5.23m | 27% | 29% |
| £5.23m+ | 25% | 41% |

Properties valued over £5.23 million (in 2028 prices) represent an estimated 25% of affected properties but contribute 41% of the estimated revenue due to the £7,500 annual surcharge rate.

## Methodology and limitations

### Data sources

- **Property sales**: UK Land Registry Price Paid Data for 2024 (881,757 transactions)
- **Revenue estimate**: OBR Economic and Fiscal Outlook, November 2025 (£400 million in 2029-30)
- **House price growth**: OBR November 2025 forecasts (2.9% in 2025, 2.5% in 2026-27, 2.4% in 2028)
- **Constituency boundaries**: MySoc 2025 Westminster constituencies

### Surcharge band assumptions

As noted above, the OBR confirms only the lowest and highest band rates. Our assumed middle band structure (£3,500 for £2.5m-£3m; £5,000 for £3m-£5m) is broadly consistent with Bloomberg's reporting. Since we allocate the OBR's total revenue estimate proportionally by constituency, these assumptions affect the distribution of revenue across bands but not the total or constituency-level allocations.

### Uprating methodology

The policy takes effect in April 2028. We uprate 2024 sale prices to 2028 using OBR house price forecasts (10.7% cumulative growth). We also uprate the thresholds from their 2026 base values using OBR CPI forecasts (4.5% cumulative from 2026 to 2028). This means the £2m threshold becomes approximately £2.09m in 2028 prices, and the band boundaries are similarly adjusted.

This approach captures the properties that would actually be subject to the surcharge when it comes into effect, accounting for both house price appreciation and the inflation-linked adjustment to the thresholds.

### Key assumption: sales as proxy for stock

This analysis uses property sales data to model the distribution of high-value properties across constituencies. We assume that the geographic distribution of high-value sales is representative of the geographic distribution of the high-value housing stock.

The OBR's £400 million estimate is based on Valuation Office data covering all properties, not just those sold in a given year. We allocate this total proportionally based on each constituency's share of modelled revenue from the sales data.

This approach is valid if high-value properties turn over at similar rates across constituencies. Annual property turnover rates of 5-10% of housing stock are typical, and there is no strong evidence that turnover rates vary systematically by constituency for high-value properties.

### Behavioural effects

The OBR's £400 million estimate incorporates behavioural responses including:
- Full pass-through of the surcharge into property prices
- Price bunching just below band boundaries
- Non-compliance and appeals

The OBR notes that these behavioural effects reduce revenue from other property taxes (stamp duty land tax, capital gains tax), which partly offsets the gross surcharge revenue in the early years of implementation.

## Conclusion

The high value council tax surcharge concentrates revenue collection in a small number of constituencies. The top 10 constituencies—all in London—account for over a third of the estimated £400 million annual revenue. This geographic concentration reflects the distribution of properties valued over £2 million, which are heavily concentrated in London and the South East.

---

*Analysis by PolicyEngine. Data and code available on [GitHub](https://github.com/PolicyEngine/uk-mansion-tax).*



---

---
# Estimating the constituency distribution of a mansion tax
Slug: uk-mansion-tax-autumn-budget
Date: 2025-11-25 12:00:00
Authors: Daphne Hansell
Tags: uk, policy, tax, autumn-budget, featured
Description: Three central London constituencies account for a fifth of property sales above £2 million.

---

The Times [reports](https://www.thetimes.com/article/b43b7639-6a3b-4180-baa2-b1c249d8a30a?shareToken=2b69490f2c227849a9d6446b1f6c477e) that Chancellor Rachel Reeves plans to raise up to £450 million from a levy on homes worth over £2 million, affecting over 100,000 properties. Earlier speculation suggested a £1.5 million threshold, which would have affected 300,000 homes.

To illustrate where a mansion tax would have the greatest impact, we mapped 2024 Land Registry sales above these thresholds by parliamentary constituency. Sales data serves as a proxy for the stock of high-value homes; turnover rates vary by area, so these figures show the relative geographic concentration rather than the total number of homes that would be affected.

## Key findings

Raising the threshold from £1.5 million to £2 million nearly halves the number of affected properties:

| Threshold | Sales | Share of all sales |
|:----------|:-----:|:------------------:|
| £1.5 million | 14,820 | 1.7% |
| £2 million | 8,213 | 0.9% |

Three central London constituencies—Cities of London and Westminster, Kensington and Bayswater, and Chelsea and Fulham—account for 16% of affected properties at the £1.5m threshold and 21% at the £2m threshold. The median constituency saw 10 sales above £1.5m or 6 above £2m.

London constituencies account for 45-46% of all affected properties. Outside London, the constituencies with the most high-value sales are Runnymede and Weybridge (183), Queen's Park and Maida Vale (166), Esher and Walton (163), Windsor (134), and Chesham and Amersham (127).

## Interactive map

Use the toggle to switch between £1.5m and £2m thresholds.

<center>[Interactive: mansion_tax_d3]</center>

The top 10 constituencies account for 30% of sales above £1.5m and 36% above £2m. All are in London or the commuter belt.

**Top 10 constituencies by share of nationwide high-value sales**

| Constituency | £1.5m | £2m |
|:-------------|:-----:|:---:|
| Cities of London and Westminster | 6.7% | 9.5% |
| Kensington and Bayswater | 5.5% | 7.0% |
| Chelsea and Fulham | 4.2% | 4.6% |
| Hampstead and Highgate | 2.7% | 3.0% |
| Battersea | 2.2% | 1.7% |
| Richmond Park | 2.0% | 1.9% |
| Islington South and Finsbury | 1.7% | 1.7% |
| Hammersmith and Chiswick | 1.7% | 1.6% |
| Holborn and St Pancras | 1.5% | 1.7% |
| Finchley and Golders Green | 1.3% | 1.4% |

## Methodology

We identified 2024 property sales exceeding £1.5 million and £2 million from [Land Registry Price Paid Data](https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads), which includes postcodes for each transaction. We mapped postcodes to parliamentary constituencies using [MySociety's 2025 constituency lookup](https://github.com/mysociety/2025-constituencies), then uprated prices to 2026-27 values using the OBR house price index forecast (+3.56%) from the [October 2024 Economic and Fiscal Outlook](https://obr.uk/efo/economic-and-fiscal-outlook-october-2024/).

**Limitations**: We use sales as a proxy for housing stock, apply the national house price index uniformly (regional growth may vary), and properties near thresholds may be revalued.

[Download the constituency dataset (CSV)](/assets/posts/uk-mansion-tax/mansion_tax_constituency_data.csv) | [View code on GitHub](https://github.com/PolicyEngine/uk-mansion-tax)



---

---
# Analysing alternative income tax and National Insurance reform options for the UK
Slug: uk-income-tax-ni-reforms-2025
Date: 2025-11-20 11:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured
Description: PolicyEngine analysis of alternative tax reform options: raising basic and higher income tax rates, cutting NI, and extending the threshold freeze.

---

The Times [reported](https://www.thetimes.com/uk/politics/article/rachel-reeves-budget-watchdog-raise-income-tax-plan-sr2wd8mp7) that Chancellor Rachel Reeves informed the Office for Budget Responsibility on November 6 that she planned to increase the basic and higher income tax rates by 2 percentage points (from 20% to 22% and from 40% to 42%), reduce National Insurance contributions from 8% to 6%, and extend the income tax threshold freeze to 2029-30; current law already [freezes](https://www.gov.uk/government/publications/the-personal-allowance-and-basic-rate-limit-for-income-tax-and-certain-national-insurance-contributions-nics-thresholds-from-6-april-2026-to-5-apr/income-tax-personal-allowance-and-the-basic-rate-limit-and-certain-national-insurance-contributions-thresholds-from-6-april-2026-to-5-april-2028) thresholds until 2027-28. The Financial Times subsequently [reported](https://www.ft.com/content/6cbb46b1-c075-453b-a9f9-7eb1e9120d9b) that Reeves did not include the income tax and National Insurance changes in her November 13 submission to the OBR, ahead of the November 26 Autumn Budget. Together, the first two reforms would raise net revenue of £6.9 billion in 2026-27: workers would face partially offsetting changes (lower National Insurance, higher income tax), while pensioners and landlords would pay only the income tax increase. The threshold freeze would raise revenue through fiscal drag as inflation pushes more income into higher tax brackets.

This analysis examines each reform option using PolicyEngine's microsimulation model to assess their potential impacts on government revenue, household finances, and poverty rates. Revenue impacts are modelled sequentially to capture interaction effects between reforms, while distributional impacts show each reform independently to understand their distinct effects on different income groups.

## Household impact

To understand how these reforms affect households, we first look at a step-by-step calculation for a specific example, and then examine how the impact varies with income.

### Example calculation

Consider a single earner with a gross income of £60,000 who contributes £10,000 (approx. 16.7%) to a workplace pension. We calculate their tax liabilities for the 2026-27 tax year under both the baseline (current law) and the proposed reform package. Note that in 2026-27, the proposed threshold freeze extension has not yet taken effect, so we focus on the rate changes: National Insurance (NI) reducing from 8% to 6%, and Income Tax (IT) increasing by 2 percentage points (20% to 22% basic, 40% to 42% higher).

**Table 1: Example tax calculation for a single earner (£60k gross, £10k pension)**

| Tax                                                  | Baseline (current law)                                   | Reform package                                           | Change                       |
| :--------------------------------------------------- | :------------------------------------------------------- | :------------------------------------------------------- | :--------------------------- |
| **National Insurance**<br>_(Gross earnings £60,000)_ | **£3,210.60**<br>8% on £12,570–£50,270<br>2% on >£50,270 | **£2,456.60**<br>6% on £12,570–£50,270<br>2% on >£50,270 | **-£754.00**<br>_(Tax cut)_  |
| **Income Tax**<br>_(Taxable income £50,000)_         | **£7,486.00**<br>20% on £12,570–£50,270                  | **£8,234.60**<br>22% on £12,570–£50,270                  | **+£748.60**<br>_(Tax rise)_ |
| **Total net impact**                                 |                                                          |                                                          | **+£5.40**<br>_(Better off)_ |

_Note: Pension contributions of £10,000 reduce taxable income for Income Tax but not for National Insurance._

### Varying earnings

The combined reform creates different outcomes for households depending on their income level. [Figure 1 shows how the net income change varies with gross household income](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=94911&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=false&household=56492), assuming a single earner making a £10,000 pension contribution.

**Change in household net income by gross income (with £10k pension contribution), 2026-27**

[Chart: Change in household net income by gross income (with £10k pension contribution), 2026-27]

At low to moderate income levels (where the NI cut applies to most taxable earnings), households gain. However, as income rises, the Income Tax increase (which applies to all taxable income above the allowance) begins to outweigh the NI reduction (which is capped at the Upper Earnings Limit of £50,270).

Pension contributions affect how the reforms impact households. While they reduce taxable income for Income Tax, they do _not_ reduce earnings for National Insurance (except in salary sacrifice arrangements, which are not assumed here). A pension contribution lowers the amount of income exposed to the 2 percentage point Income Tax increase, while the household receives the National Insurance cut on their gross earnings. As a result, households with pension contributions face a smaller net tax increase than those without.

## Budgetary impact

Figure 2 shows the change in government revenue from each reform across fiscal years 2026-27 through 2029-30, using a stacking methodology where each reform is applied on top of the previous ones to capture interaction effects. The first reform, extending the threshold freeze to 2029-30, would raise [£3.5 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=83092&region=uk&timePeriod=2028&baseline=1) in 2028-29, when thresholds would otherwise be unfrozen. The second reform, reducing the National Insurance rate from 8% to 6% applied on top of the freeze, would cost an additional [£11.7 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94938&region=uk&timePeriod=2026&baseline=83092) in 2026-27. The third reform, increasing the basic and higher income tax rates by 2 percentage points applied on top of both the freeze and NI reduction, would raise an additional [£18.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94911&region=uk&timePeriod=2026&baseline=94938) in 2026-27.

**Change in government revenue by reform, 2026-27 to 2029-30**

[Chart: Change in government revenue by reform, 2026-27 to 2029-30]

The Times [reported](https://www.thetimes.com/uk/politics/article/rachel-reeves-budget-watchdog-raise-income-tax-plan-sr2wd8mp7) that an expected Office for Budget Responsibility productivity forecast downgrade would create an estimated £30 billion shortfall in fiscal headroom—the amount needed to meet fiscal rules while maintaining adequate buffers against future economic shocks—that Reeves sought to address with these options. Following standard budget analysis practice, we apply a stacking methodology: each reform is modeled sequentially with the prior reforms already in effect, ensuring the individual components add to the combined total and capturing how reforms interact. The stacked bars show each reform's contribution, with the line showing the net combined effect. The combined package would raise [£6.9 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.budgetaryImpact&reform=94911&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=false&simYears=5) in 2026-27, rising to £15.4 billion by 2029-30, with the threshold freeze extension contributing additional revenue in later years as fiscal drag increases.

## Distributional impact

The following distributional analyses show each reform independently against the baseline.

### National Insurance rate reduction (8% to 6%)

Figure 3 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94906&region=uk&timePeriod=2026&baseline=1) the relative change in household income by income decile from reducing the National Insurance rate from 8% to 6% in 2026-27. Higher-income deciles experience larger percentage increases, with deciles 8 and 9 each gaining 1.1% in household income, while the lowest income decile gains 0.1%.

**Change in household income by income decile from National Insurance rate reduction, 2026-27**

[Chart: Change in household income by income decile from National Insurance rate reduction, 2026-27]

### Income tax rate increase (basic and higher rates +2pp)

Figure 4 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94910&region=uk&timePeriod=2026&baseline=1) the relative change in household income by income decile from increasing the basic and higher income tax rates by 2 percentage points in 2026-27. All income deciles experience decreases in household income, with deciles 8 and 9 seeing the largest reductions of 1.5% to 1.6%, while the lowest income decile decreases by 0.2%.

**Change in household income by income decile from basic and higher rate income tax increase, 2026-27**

[Chart: Change in household income by income decile from basic and higher rate income tax increase, 2026-27]

### Threshold freeze extension

Figure 5 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=83092&region=uk&timePeriod=2028&baseline=1) the relative change in household income by income decile from extending the threshold freeze to 2029-30. All income deciles experience decreases in household income, with decile 9 seeing the largest reduction of 0.32%, while the lowest income decile decreases by 0.08%.

**Change in household income by income decile from threshold freeze extension, 2028-29**

[Chart: Change in household income by income decile from threshold freeze extension, 2028-29]

### Combined reform impact

Figure 6 shows the relative change in household income by income decile from each reform component across fiscal years 2026-27 through 2029-30. The stacked bars show individual reform contributions: the threshold freeze extension (green), the National Insurance reduction (gray), and the income tax increase (blue). The line [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=94911&region=uk&timePeriod=2029&baseline=1&uk_local_areas_beta=false) the net combined effect across deciles. Use the play button to animate between years or drag the slider to view a specific year.

**Change in household income by reform component, 2026-27 to 2029-30**

[Chart: Change in household income by reform component, 2026-27 to 2029-30]

## Winners and losers

Winner and loser status varies within income deciles based on individual circumstances, particularly pension contributions. National Insurance applies to gross earnings before pension contributions, while income tax applies to earnings after pension contributions. Individuals with higher pension contribution rates gain more from National Insurance reductions and lose less from income tax increases compared to those with lower contribution rates at the same gross income level.

### National Insurance rate reduction (8% to 6%)

Figure 7 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94906&region=uk&timePeriod=2026&baseline=1) the distribution of income changes from reducing the National Insurance rate across fiscal years 2026-27 through 2029-30. In 2026-27, 3% gain more than 5% in income, 60% gain less than 5%, and 37% experience no change.

**Population share by income change from National Insurance rate reduction, 2026-27 to 2029-30**

[Chart: Population share by income change from National Insurance rate reduction, 2026-27 to 2029-30]

### Income tax rate increase (basic and higher rates +2pp)

Figure 8 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94910&region=uk&timePeriod=2026&baseline=1) the distribution of income changes from increasing the basic and higher income tax rates across fiscal years 2026-27 through 2029-30. In 2026-27, 26% experience no change, 64% lose less than 5%, and 10% lose more than 5%.

**Population share by income change from basic and higher rate income tax increase, 2026-27 to 2029-30**

[Chart: Population share by income change from basic and higher rate income tax increase, 2026-27 to 2029-30]

### Threshold freeze extension

Figure 9 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=83092&region=uk&timePeriod=2028&baseline=1) the distribution of income changes from extending the threshold freeze across fiscal years 2026-27 through 2029-30. The threshold freeze extension only applies from 2028-29 onward (current law already freezes thresholds through 2027-28). In 2028-29, 20% experience no change, 77% lose less than 5%, and 3% lose more than 5%.

**Population share by income change from threshold freeze extension, 2026-27 to 2029-30**

[Chart: Population share by income change from threshold freeze extension, 2026-27 to 2029-30]

### Combined reform impact

Figure 10 [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=94911&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=false) the distribution of income changes from the combined reform package (income tax increase, National Insurance reduction, and threshold freeze extension) across fiscal years 2026-27 through 2029-30. In 2026-27, 1% gain more than 5%, 20% gain less than 5%, 36% experience no change, 39% lose less than 5%, and 4% lose more than 5%.

**Population share by income change from combined reform, 2026-27 to 2029-30**

[Chart: Population share by income change from combined reform, 2026-27 to 2029-30]

## Poverty impact

Table 1 shows the change in absolute before-housing-costs poverty rate for each reform. Reducing the National Insurance rate from 8% to 6% would have [no impact](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=94906&region=uk&timePeriod=2026&baseline=1) on the overall poverty rate in 2026-27. Increasing the basic and higher income tax rates by 2 percentage points would raise the overall poverty rate by [0.2 percentage points](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94910&region=uk&timePeriod=2026&baseline=1) in 2026-27. Extending the threshold freeze to 2029-30 would have [no impact](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=83092&region=uk&timePeriod=2028&baseline=1) on the overall poverty rate in 2028-29 (current law already freezes thresholds until 2027-28).

**Table 1: Poverty impact by reform**

| Reform                                            | Fiscal year | Change in poverty rate (pp)                                                                                                              |
| ------------------------------------------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| NI rate reduction (8% to 6%)                      | 2026-27     | [0pp](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=94906&region=uk&timePeriod=2026&baseline=1)      |
| Income tax increase (basic and higher rates +2pp) | 2026-27     | [+0.2pp](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94910&region=uk&timePeriod=2026&baseline=1) |
| Threshold freeze extension                        | 2028-29     | [0pp](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=83092&region=uk&timePeriod=2028&baseline=1)      |

Table 2 shows the net poverty impact from the combined reform package across fiscal years 2026-27 through 2029-30. The [combined package](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=94911&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=false) would have no impact on absolute before-housing-costs poverty in 2026-27, with the poverty impact increasing to 0.2 percentage points by 2029-30 as the threshold freeze extension effect accumulates alongside the income tax and National Insurance reforms.

**Table 2: Net poverty impact from combined reform package**

| Fiscal year | Change in poverty rate (pp) |
| ----------- | --------------------------- |
| 2026-27     | 0pp                         |
| 2027-28     | 0pp                         |
| 2028-29     | +0.1pp                      |
| 2029-30     | +0.2pp                      |

## Inequality impact

The three reforms show minimal change in the Gini index, with the National Insurance rate reduction producing a [0.1%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=94906&region=uk&timePeriod=2026&baseline=1) increase in 2026-27, the income tax increase producing a [0.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=94910&region=uk&timePeriod=2026&baseline=1) decrease in 2026-27, and the threshold freeze extension having [no impact](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=83092&region=uk&timePeriod=2028&baseline=1) on income inequality in 2028-29 (current law already freezes thresholds until 2027-28).

## Conclusion

Increasing the basic and higher income tax rates by 2 percentage points would raise £18.6 billion in 2026-27 but increase absolute before-housing-costs poverty by 0.2 percentage points and reduce the Gini index by 0.3%, while reducing National Insurance from 8% to 6% would cost £11.7 billion with no change in poverty. Extending the threshold freeze to 2029-30 would raise £3.5 billion in 2028-29 with no change in poverty.



---

---
# PolicyEngine London event 2025
Slug: policyengine-2-event-report
Date: 2025-11-10
Authors: Vahid Ahmadi
Tags: uk, event, featured
Description: PolicyEngine hosted an event in London that presented new updates and capabilities, real-world policy research applications, local area modelling, and how to use AI in policy research.

---

On November 3, 2025, PolicyEngine hosted an event at Central Hall Westminster in London to showcase PolicyEngine 2.0 and explore the future of public policy analysis. The afternoon brought together policymakers, researchers, and practitioners to examine how technology and AI are reshaping evidence-based policymaking. [View the presentation slides](https://policyengine.github.io/policyengine-uk-event-2025/).

## Event overview

The event featured presentations from PolicyEngine's team and external speakers, covering technical capabilities, real-world applications, and future directions for the platform. Supported by the Nuffield Foundation, the gathering demonstrated PolicyEngine's expanding role in UK policy analysis.

## PolicyEngine's journey and vision

Max Ghenis, Founder and CEO of PolicyEngine, opened the event by tracing PolicyEngine's evolution from its origins at the UBI Centre in 2020 to its establishment as an independent nonprofit in 2021. Key milestones included early UK policy scoring demonstrations, US expansion in March 2022, development of economic simulation with representative datasets, and the launch of multiple access surfaces including the Python package and AI summarisation in 2023.

Adoption has grown across organisations including the Green Party, Centre for Policy Studies, NIESR, IEA, Social Market Foundation, Liberal Democrats, and UK in a Changing Europe. In March 2025, HM Treasury began piloting PolicyEngine UK. The Nuffield Foundation's grant supports expansion with childcare integration, public services modelling, local datasets, validation dashboards, and AI-enhanced design.

## Technology and AI infrastructure

Nikhil Woodruff, Co-founder, CTO and UK Country Director, demonstrated how PolicyEngine applies artificial intelligence and modern software architecture for UK policy analysis. Built on OpenFisca-Core, the platform processes policy simulations in real-time. The AI-powered explanation system, launched in 2024, translates tax and benefit calculations into clear language. Machine learning addresses data limitations, particularly the Family Resources Survey's undersampling of higher-income households, while maintaining efficiency across millions of policy configurations.

## Model scope and capabilities

Vahid Ahmadi, UK Research Associate, presented PolicyEngine UK's modelling scope, covering tax and benefit rules from income tax and National Insurance to Universal Credit, Council Tax support, and childcare programmes. The platform maintains current policy while enabling simulation of hypothetical reforms through its OpenFisca-based architecture.

Data enhancement capabilities address under-sampling and measurement errors through machine learning. Using random forest imputation and gradient descent reweighting, PolicyEngine fuses the Family Resources Survey with the Wealth and Assets Survey and Living Costs and Food Survey. Behavioural response modelling captures labour supply and capital gains tax effects. For Capital Gains Tax analysis, behavioural modelling projected lower five-year revenue than static analysis.

## Local area analysis

Nikhil Woodruff and Ben Ogorek, Senior Data Scientist, presented PolicyEngine's local area modelling framework, estimating tax and benefit policy impacts at the parliamentary constituency and local authority level. The system reweights Family Resources Survey data to match administrative statistics from HMRC, ONS, ASHE, and the House of Commons Library, using gradient-based optimisation across 11,000 targets covering income, age, and employment patterns.

The [interactive dashboard](https://uk-local-areas-dashboard-578039519715.us-central1.run.app/) enables MPs to understand constituency-specific effects and helps local authorities assess benefit changes. PolicyEngine US builds upon this infrastructure by cloning households for each local area rather than reweighting, revealing programme participation patterns at the congressional district level. The underlying software will be made available for usage beyond PolicyEngine. PolicyEngine plans to incorporate this approach into UK data in 2026.

## User experience design

Biniam Gebre, Co-Founder of Citizen Codex, and MaSara Myers, Creative Director of Citizen Codex, presented the user experience research behind PolicyEngine 2.0. Through interviews with policymakers, researchers, journalists, and citizens, they gathered insights about needs and pain points. These insights shaped design decisions, from information architecture to visual design, ensuring microsimulation results are both accurate and comprehensible. The speakers showcased design patterns for distributional analysis, budget impacts, and household-level effects.

## Platform demonstration

Anthony Volk, Software Engineer, demonstrated the redesigned PolicyEngine 2.0 platform. The new interface clarifies the separation of PolicyEngine's fundamental concepts: policies, households, and dynamics, and integrates these into simulations and reports. Users can easily save and view past versions of each element to combine into novel insights.

## Applications in practice

### NIESR's living standards review

Max Mosley, Senior Economist at the New Economics Foundation and formerly at NIESR, [presented](https://docs.google.com/presentation/d/1qSPVxdCdz9kIP5O4YWVw7kfQR5jzCu9y/edit?usp=sharing&ouid=106351675150319968795&rtpof=true&sd=true) how PolicyEngine supported NIESR's [UK Living Standards Review 2025](https://niesr.ac.uk/publications/uk-living-standards-review-2025?type=report). PolicyEngine enabled NIESR to analyse policy interventions, particularly poverty reduction measures. Analysis compared cost per person lifted from poverty of policies such as removing the two-child limit. PolicyEngine's accessibility improved the efficiency of NIESR's analysis and communication of findings.

### Carbon dividend analysis

Malcolm Torry, formerly at the Basic Income Earth Network and London School of Economics, [presented](https://docs.google.com/presentation/d/19yRatNQKqzKwT5v1HlCtpHjksXRBGddb/edit?usp=sharing&ouid=106351675150319968795&rtpof=true&sd=true) PolicyEngine's application to [carbon tax and dividend proposals](/uk/research/uk-carbon-tax-dividend), where carbon tax revenue funds unconditional payments. Two scenarios were analysed: a £100 per tonne tax funding £18.60 per week dividends, and a £200 per tonne tax funding £37.40 per week. While both scenarios redistribute from higher-income to lower-income households, some households on lower incomes would experience losses. Microsimulation shows precisely which households gain and lose under different approaches.

### VAT analysis with firm microdata

Vahid Ahmadi [presented](https://uk-vatlab-app1j7s6o-policy-engine.vercel.app/) PolicyEngine's firm-level microsimulation for VAT policy, analysing threshold changes between £70,000 and £120,000 for 2026-27. Using synthetic firm microdata calibrated to ONS and HMRC statistics, the model captures firms by industry, turnover, employees, and VAT liability.

PolicyEngine's estimates deviate an average of 12.3% from HMRC projections. Raising the threshold to £100,000 would remove 48,000 firms from VAT registration and reduce revenue by £371 million, while a £70,000 threshold would add 109,000 firms and generate £642 million.

### US policy analysis tools

David Trimmer, Policy Research Fellow, and Daphne Hansell, Research Associate, demonstrated PolicyEngine US's household-level analysis tools through two recent applications.

Trimmer presented the [household-by-household interactive](https://policyengine.github.io/obbba-household-by-household/) for the One Big Beautiful Bill Act (OBBBA), which allows users to explore the legislation's effects on over 40,000 representative households using PolicyEngine's Enhanced Current Population Survey data. The interactive's "Get Random Household" function reveals how the same policy affects different families across America's diverse population, with each household weighted by population representation.

Hansell demonstrated a tool for simulating the extension of enhanced premium tax credits, which expire after 2025. The tool shows how different extension scenarios affect health insurance subsidy impacts at the individual household level. These tools make policy impacts tangible by showing real effects on specific family types rather than aggregate statistics alone.

## Panel discussion on evidence-based policymaking

Max Ghenis moderated a panel discussion with Arun Advani, Director of CenTax and Professor of Economics at the University of Warwick, and Anvar Sarygulov, Research Grants and Programmes Manager at the Nuffield Foundation, exploring the evolving landscape of evidence-based policymaking. The conversation examined how open models, administrative data, and artificial intelligence are reshaping policy analysis, bringing together perspectives from academic research, philanthropy, and open-source tool development.

## AI roadmap

Max Ghenis and Nikhil Woodruff presented PolicyEngine's AI roadmap across three pillars: building software, improving models, and augmenting software.

For building software, they announced the beta launch of the [policyengine-claude plugin](https://github.com/policyengine/policyengine-claude), providing custom commands, specialised agents, and domain knowledge for PolicyEngine development. They demonstrated a scientific approach to rules-as-code automation: creating golden pull requests with manually verified code, using AI to generate implementations from policy descriptions, then iteratively adjusting prompts to maximise alignment between AI-produced and golden code.

The team demonstrated multi-agent workflows for policy research, building on Vahid Ahmadi's [Testing multi-agent AI workflows for policy research](/uk/research/multi-agent-workflows-policy-research). The demonstration showed specialised agents handling data fetching, Python script writing, and report generation. For standard distributional analyses calculating poverty rates and decile-level impacts, the agents produced output matching manual approaches while maintaining PolicyEngine's writing standards. Complex benefit programme interactions requiring understanding of coordination logic between multiple programmes remain challenging for agents. The team positions these workflows as handling routine policy updates where analysis structure stays constant, allowing human researchers to focus on questions requiring policy expertise.

For improving models, two priorities were presented: continuing US local area modelling work with enhanced calibration methods while transferring these to UK constituencies and local authorities, and exploring synthetic panel generation to enable lifetime programme simulation (such as US Social Security solvency) where current cross-sectional survey data provides only snapshots.

For augmenting software, they previewed PolicyEngine App v2's natural language capabilities: LLM extraction to pull relevant insights from the database based on natural language queries, and flexible visualisations to present insights through adaptive charts on an extensible report canvas. The presentation concluded with reflections on AI's potential to enable policy analysis that is more comprehensive, accurate, and accessible, balanced against challenges as AI transforms society through changing income patterns and creating new demands for policy research aligned with societal values.

## Looking ahead

The event demonstrated PolicyEngine's technical capabilities and growing adoption across policy research, think tanks, and government. With integration of AI technologies, PolicyEngine aims to expand access to policy analysis while maintaining accuracy and transparency in its modelling approach.



---

---
# Marginal tax rates in California's proposed billionaire tax
Slug: california-billionaire-tax-marginal-rates
Date: 2025-10-25
Authors: Max Ghenis
Tags: us
Description: The 5% tax creates marginal tax rates between 50% and 60% on wealth between $1 billion and $1.1 billion.

---

On October 21, 2025, labor union SEIU United Healthcare Workers West submitted the ["2026 Billionaire Tax Act"](https://oag.ca.gov/system/files/initiatives/pdfs/25-0024%20%28Billionaire%20Tax%20%29.pdf) (California Initiative 25-0024) to California Attorney General Rob Bonta for title and summary preparation. The initiative would impose a one-time 5% tax on the net worth as of December 31, 2026 of California residents with wealth exceeding $1 billion.

The tax structure creates marginal tax rates on wealth between 50% and 60% during the $1.0-$1.1 billion phase-in range. This occurs because the tax applies to total wealth rather than only wealth exceeding $1 billion, causing rate increases to affect all accumulated wealth.

## The phase-in mechanism

The statutory text specifies:

> For individuals and trusts on whom tax is imposed... the tax imposed is 5 percent of the net worth of such individual or trust. In the case of an individual (other than a trust) having net worth less than $1.1 billion ($1,100,000,000), the tax imposed by this Section shall be reduced by 0.1 percentage point (but not below zero) for each $2 million ($2,000,000) by which such person's net worth falls below $1.1 billion ($1,100,000,000).

[Interactive: phase in]

This creates a stepwise rate schedule. At exactly $1.0 billion, the tax rate is 0% and total tax is $0. At $1.1 billion, the rate reaches 5% and total tax is $55 million. Taxpayers can spread payments over five years, though the liability remains based on wealth as of December 31, 2026 regardless of subsequent wealth changes.

## Total tax liability

Multiplying wealth by the tax rate yields total tax liability. For example, at $1.1 billion, the 5% rate produces $55 million in tax ($1.1B × 5% = $55M). At $2.0 billion, the tax is $100 million ($2.0B × 5% = $100M). The chart below shows the full tax liability schedule.

[Interactive: liability]

## Marginal tax rates

The marginal tax rate measures how much additional tax results from a wealth increase. It equals the change in tax divided by the change in wealth.

Because the tax applies to total wealth rather than only wealth above $1 billion, each 0.1 percentage point rate increase applies to all accumulated wealth, creating marginal rates between 50% and 60% in the phase-in range.

| Initial wealth | Initial rate | Initial tax | New wealth | New rate | New tax | Change in wealth | Change in tax | Marginal rate |
| -------------- | ------------ | ----------- | ---------- | -------- | ------- | ---------------- | ------------- | ------------- |
| $1.000B        | 0.0%         | $0M         | $1.1B      | 5.0%     | $55.0M  | $100M            | $55.0M        | 55%           |
| $1.000B        | 0.0%         | $0M         | $1.002B    | 0.1%     | $1.0M   | $2M              | $1.0M         | 50%           |
| $1.098B        | 4.9%         | $53.8M      | $1.100B    | 5.0%     | $55.0M  | $2M              | $1.2M         | 60%           |
| $1.100B        | 5.0%         | $55.0M      | $1.102B    | 5.0%     | $55.1M  | $2M              | $0.1M         | 5%            |

[Interactive: mtr]

The marginal rate increases from 50% to 60% across the 50 discrete $2 million increments in the phase-in range, averaging 55%. Above $1.1 billion, the marginal rate drops to 5%.

The initiative requires [874,641 valid signatures](https://ballotpedia.org/California_2026_ballot_propositions) by June 25, 2026 to qualify for the November 2026 ballot.



---

---
# Comparing PolicyEngine and official UK poverty rates
Slug: uk-poverty-analysis
Date: 2025-10-10 11:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured
Description: We compare PolicyEngine poverty estimates with official DWP statistics and explain the methodological factors behind the differences.

---

This analysis compares PolicyEngine's poverty estimates against official figures for 2023/24 using the Family Resources Survey (FRS). To understand the differences, we first describe how official statistics are produced.

### Official methodology

The Department for Work and Pensions (DWP) [produces](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2024) official poverty statistics through the Households Below Average Income (HBAI) series. The methodology uses the FRS with enhancements including replacing high earners' incomes with HMRC tax data, applying [CALMAR](https://www.gov.uk/government/publications/initial-review-of-the-family-resources-survey-weighting-scheme/initial-review-of-the-family-resources-survey-weighting-scheme) calibration weighting to match Census totals, and adjusting benefit amounts using administrative records. Poverty is measured as relative (60% of median income) and absolute (2010/11 threshold uprated by inflation), both before and after housing costs.

### PolicyEngine methodology

PolicyEngine [uses](https://www.gov.uk/government/collections/family-resources-survey--2) two versions of the Family Resources Survey (FRS) microdata. The standard FRS [uses](https://policyengine.github.io/policyengine-uk-data/) data as collected by the Office for National Statistics, applying the original FRS household weights without additional calibration, with income components extracted directly from survey responses and benefits used as reported without administrative data adjustments. We also construct the [Enhanced FRS](https://policyengine.github.io/policyengine-uk-data/methodology/), which [incorporates](https://github.com/PolicyEngine/policyengine-uk-data/blob/24c1bd6fabe91b05da652cdb4776e25c01927e50/policyengine_uk_data/datasets/create_datasets.py) additional data sources and adjustments, reweights survey responses to match external benchmarks from HMRC tax records and DWP benefit statistics, and replaces or supplements survey-reported income with administrative data where available, particularly for benefits, tax credits, and pension income.

Both approaches calculate relative and absolute poverty thresholds using the same definitions as official statistics, measuring household income both before and after housing costs. The following sections compare poverty rates for the total population and by age group, and describe methodological factors explaining the differences.[^1]

## Overall poverty rates

The table below compares PolicyEngine's [estimates](https://gist.github.com/vahid-ahmadi/c8bb92c92a3b3a5f42eff36e26b7b7a9) with official [DWP figures](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2024) for 2023/24:

| Measure                | DWP   | PE Standard FRS   | PE Enhanced FRS   |
| ---------------------- | ----- | ----------------- | ----------------- |
| Relative poverty (BHC) | 17.2% | 18.0%<br>(+0.8pp) | 16.6%<br>(-0.6pp) |
| Relative poverty (AHC) | 21.1% | 22.9%<br>(+1.8pp) | 20.7%<br>(-0.4pp) |
| Absolute poverty (BHC) | 15.0% | 17.2%<br>(+2.2pp) | 12.8%<br>(-2.2pp) |
| Absolute poverty (AHC) | 18.3% | 20.5%<br>(+2.2pp) | 17.9%<br>(-0.4pp) |

_BHC = Before Housing Costs, AHC = After Housing Costs_

The total population is 67.5 million in the DWP figures, 67.5 million in the standard FRS, and 67.3 million in the Enhanced FRS. The standard FRS estimates run +0.8pp to +2.2pp higher than official figures, with AHC poverty showing larger deviations than BHC. The Enhanced FRS matches official relative poverty closely but diverges on absolute poverty.

## Poverty rates by age group

The tables below break down poverty rates by age group.

### Children

The table below shows poverty rates for children:

| Measure                | DWP   | PE Standard FRS   | PE Enhanced FRS   |
| ---------------------- | ----- | ----------------- | ----------------- |
| Relative poverty (BHC) | 23.2% | 24.6%<br>(+1.4pp) | 22.7%<br>(-0.5pp) |
| Relative poverty (AHC) | 30.5% | 33.5%<br>(+3.0pp) | 29.5%<br>(-1.0pp) |
| Absolute poverty (BHC) | 20.0% | 23.6%<br>(+3.6pp) | 17.9%<br>(-2.1pp) |
| Absolute poverty (AHC) | 26.4% | 30.2%<br>(+3.8pp) | 25.4%<br>(-1.0pp) |

The children population is 14.6 million in the DWP figures, 14.4 million in the standard FRS, and 14.2 million in the Enhanced FRS. Children show the highest poverty rates and largest deviations, with the standard FRS estimates +1.4pp to +3.8pp higher than official figures. The Enhanced FRS reduces these deviations to -0.5pp to -2.1pp.

### Working-age adults (16-64)

The table below shows poverty rates for working-age adults:

| Measure                | DWP   | PE Standard FRS   | PE Enhanced FRS   |
| ---------------------- | ----- | ----------------- | ----------------- |
| Relative poverty (BHC) | 14.7% | 15.7%<br>(+1.0pp) | 16.1%<br>(+1.4pp) |
| Relative poverty (AHC) | 19.4% | 21.2%<br>(+1.9pp) | 21.0%<br>(+1.6pp) |
| Absolute poverty (BHC) | 12.9% | 15.1%<br>(+2.1pp) | 12.2%<br>(-0.8pp) |
| Absolute poverty (AHC) | 16.9% | 19.2%<br>(+2.4pp) | 18.6%<br>(+1.7pp) |

The working-age adult population is 40.9 million in the DWP figures, 41.8 million in the standard FRS, and 43.2 million in the Enhanced FRS. The standard FRS deviations range from +1.0pp to +2.4pp, with larger AHC gaps reflecting Housing Benefit under-reporting among renters. The Enhanced FRS deviations range from -0.8pp to +1.7pp.

### Pensioners (State Pension age and over)

The table below shows poverty rates for pensioners:

| Measure                | DWP   | PE Standard FRS   | PE Enhanced FRS   |
| ---------------------- | ----- | ----------------- | ----------------- |
| Relative poverty (BHC) | 18.6% | 19.1%<br>(+0.5pp) | 12.1%<br>(-6.6pp) |
| Relative poverty (AHC) | 15.7% | 17.8%<br>(+2.2pp) | 10.5%<br>(-5.2pp) |
| Absolute poverty (BHC) | 16.0% | 18.0%<br>(+2.0pp) | 9.4%<br>(-6.6pp)  |
| Absolute poverty (AHC) | 13.2% | 14.6%<br>(+1.5pp) | 7.4%<br>(-5.8pp)  |

The pensioner population is 12.1 million in the DWP figures, 12.0 million in the standard FRS, and 10.8 million in the Enhanced FRS. The standard FRS deviations range from +0.5pp to +2.2pp. The Enhanced FRS deviations range from -6.6pp to -5.2pp, with all measures showing lower poverty rates than official statistics.

## Methodological differences

The DWP and PolicyEngine use the same FRS data, but process it differently. The following sections explain the key methodological factors that produce the observed differences.

### 1. Survey of Personal Incomes adjustment for high earners

The DWP [replaces](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2023/households-below-average-income-series-quality-and-methodology-information-report-fye-2023) high earners' incomes with HMRC tax data through the Survey of Personal Incomes (SPI) adjustment (above £361,200 for working-age adults or £107,800 for pensioners). PolicyEngine [incorporates](https://github.com/PolicyEngine/policyengine-us-data/tree/main/paper) SPI data differently: rather than directly replacing individual incomes, it augments the FRS with synthetic individuals trained on SPI data and reweights the combined dataset to match HMRC income distribution targets across multiple income bands and sources.

### 2. Survey weighting and grossing methodology

The DWP uses [CALMAR](https://www.gov.uk/government/publications/initial-review-of-the-family-resources-survey-weighting-scheme/initial-review-of-the-family-resources-survey-weighting-scheme) calibration weighting to match Census population totals across demographic dimensions including age-sex-region combinations, benefit unit composition, council tax bands, and tenure. PolicyEngine's standard FRS uses original FRS weights without calibration, producing a population estimate of 67.5 million matching official figures. The Enhanced FRS reweights to match hundreds of targets from multiple administrative data sources—including OBR tax and benefit aggregates, ONS demographic statistics, HMRC income distributions, DWP benefit caseloads, and VOA council tax records—at both national and constituency levels. Different weights alter which household types are weighted up or down.

### 3. Benefit measurement

The DWP adjusts benefit amounts using administrative records, though the methodology is not publicly documented. PolicyEngine's standard FRS uses benefit amounts as reported in the survey. The Enhanced FRS incorporates HMRC and DWP administrative data. These different approaches produce different household income estimates, affecting measured poverty rates for households receiving means-tested benefits like Universal Credit and Housing Benefit.

### 4. Housing costs and Housing Benefit measurement

Both methods define housing costs identically but face Housing Benefit under-reporting in the FRS. The DWP [adjusts](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2023/households-below-average-income-series-quality-and-methodology-information-report-fye-2023) Housing Benefit using administrative records. PolicyEngine's standard FRS uses reported Housing Benefit without adjustment, while the Enhanced FRS reweights to match official Housing Benefit expenditure and claimant count targets. Under-reporting in the standard FRS means net housing costs appear higher, lowering income after housing costs and raising AHC poverty.

### 5. Children-specific income components

The DWP [assigns](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2023/households-below-average-income-series-quality-and-methodology-information-report-fye-2023) cash-equivalent values to in-kind benefits like free school meals and childcare, and may adjust Child Benefit using administrative data. PolicyEngine's standard FRS calculates benefits from survey data using legislative rules without administrative adjustments.

### 6. Enhanced FRS pensioner poverty adjustments

Administrative data adjustments may better capture pension income from multiple sources where survey self-reporting is less accurate. The Enhanced FRS pensioner population is 10.8 million versus 12.0 million in the standard FRS and 12.1 million official. The Enhanced FRS targets older age bands (60-70, 70-80, 80-90) by region along with pension income and benefit aggregates, but the reweighting optimization produces this lower pensioner count as a trade-off to better match other targets.

## Conclusion

This analysis compared PolicyEngine's poverty estimates against the DWP statistics for 2023/24 using both standard and Enhanced FRS data. The standard FRS deviations range from +0.5pp to +3.8pp across all measures and demographic groups, with AHC poverty showing larger deviations than BHC. The largest differences are for child poverty AHC measures.

[^1]: Official statistics from DWP Households Below Average Income (HBAI) Tables 1.3a, 1.3b, 1.4a, 1.4b, 1.5a, 1.5b, 1.6a, and 1.6b.



---

---
# How removing the two-child benefit limit would affect the UK
Slug: uk-two-child-limit
Date: 2025-10-06 11:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured
Description: Removing the two-child limit would cost £2.8 billion in 2026-27 and reduce child poverty by 15.7%.

---

Chancellor Rachel Reeves is [expected](https://www.theguardian.com/society/2025/sep/30/rachel-reeves-lift-two-child-benefit-cap-november-budget) to lift the two-child benefit cap in the November 2025 Budget. The cap, introduced in 2017, prevents parents from claiming Universal Credit or Child Tax Credit for more than two children born after April 2017. The policy affected [1.5 million](https://www.gov.uk/government/statistics/universal-credit-and-child-tax-credit-claimants-statistics-related-to-the-policy-to-provide-support-for-a-maximum-of-2-children-april-2023) children in the UK in April 2023. Treasury officials are exploring alternatives to a complete removal of the cap.

In this analysis, we examine the impact of removing the two-child limit on household incomes, government spending, income distribution, poverty rates, income inequality, and geographic variation across parliamentary constituencies.

## Household impact

The reform would increase Universal Credit or Child Tax Credit payments for affected families by removing the restriction on child elements. For a sample household of two parents with three children aged 3, 5, and 7 in 2026-27, Figure 1 [shows](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=93219&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=true&household=56008) how household net income changes across different employment income levels.

**Household net income by employment income**

[Chart: Household net income by employment income]

At lower income ranges, the reform delivers larger increases in household net income due to higher Universal Credit entitlements when the two-child limit is removed. As employment income rises, Universal Credit tapers off under both scenarios, reducing the relative benefit of the reform.

## Budgetary impact

PolicyEngine estimates that removing the two-child limit would cost £2.7 billion in 2025-26, rising to £3.1 billion by 2029-30. The cost increases over time as more children are born after April 2017, when the cap was introduced, making fewer families eligible for transitional protection. See the Appendix for a comparison of cost estimates from different organisations across years.

## Distributional impact

By income decile, removing the two-child limit would provide the largest relative benefits to lower-income households, as shown in Figure 2. The lowest income decile would see household income rise by 1.4%, while the second decile would see a 1.3% increase.

**Change in household income by income decile, 2026-27**

[Chart: Change in household income by income decile, 2026-27]

### Winners and losers

Figure 3 shows that 4.6% of the population would see income gains from removing the two-child limit, with the largest share of winners concentrated in the lowest income deciles. The lowest income decile sees 11% of households gain income, with 10.5% gaining more than 5% and 0.6% gaining less than 5%. The second decile sees 14.8% gain, with 14.2% gaining more than 5%.

**Population share by income change, 2026-27**

[Chart: Population share by income change, 2026-27]

## Poverty impact

By age group, removing the two-child limit would reduce poverty rates most for children across all years. Using the absolute poverty measure before housing costs, the child poverty rate would fall by 13.6% in 2025-26 and by 15.5% in 2029-30, while the overall poverty rate would decline by 6.5% in 2025-26 and by 7.3% in 2029-30.

| Year | Children                                                                                                                               | All                                                                                                                                   |
| ---- | -------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| 2025 | [-13.6%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2025&baseline=1) | [-6.5%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2025&baseline=1) |
| 2026 | [-15.7%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2026&baseline=1) | [-7.4%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2026&baseline=1) |
| 2027 | [-15.8%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2027&baseline=1) | [-7.4%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2027&baseline=1) |
| 2028 | [-16.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2028&baseline=1) | [-7.8%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2028&baseline=1) |
| 2029 | [-15.5%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2029&baseline=1) | [-7.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=93219&region=uk&timePeriod=2029&baseline=1) |

## Inequality impact

Removing the two-child limit in 2026-27 would reduce income inequality. The Gini index would fall by 0.6%, while the top 10% income share would decrease by 0.1% and the top 1% income share would decline by 0.1%.

| Metric        | Change                                                                                                                                   |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| Gini index    | [-0.6%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=93219&region=uk&timePeriod=2026&baseline=1) |
| Top 10% share | [-0.1%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=93219&region=uk&timePeriod=2026&baseline=1) |
| Top 1% share  | [-0.1%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=93219&region=uk&timePeriod=2026&baseline=1) |

## Geographic impact

The impact of removing the two-child limit [varies](https://legacy.policyengine.org/uk/policy?focus=policyOutput.constituencies.relative&reform=93219&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=true&household=56008) across parliamentary constituencies, as shown in Figure 4.

**Figure 4: Geographic distribution of relative income change by parliamentary constituency**

![](/images/posts/two-child-limit/map-impact.png)

The constituencies experiencing the largest relative income gains include Bradford East, Birmingham Hodge Hill and Solihull North, Bradford South, Luton North, and Birmingham Hall Green and Moseley. The constituencies with the smallest gains include South Down, Lagan Valley, Upper Bann, Glasgow East, and Cities of London and Westminster.

## Conclusion

Removing the two-child benefit limit would cost £2.7 billion in 2025-26, rising to £3.1 billion by 2029-30. The reform would reduce absolute child poverty (before housing costs) by 13.6% and overall absolute poverty by 6.5% in 2025-26.

We invite you to explore the [PolicyEngine webapp](https://legacy.policyengine.org/) to model your own customised reforms.

## Appendix: Cost estimates by organisation and year

The following table compares cost estimates for abolishing the two-child limit from different organisations.

| Year              | PolicyEngine                                                                                                                             | IFS        | JRF        | Resolution Foundation |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ---------- | ---------- | --------------------- |
| 2024-25           | —                                                                                                                                        | —          | —          | £2.5bn                |
| 2025-26           | [£2.7bn](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=93219&region=uk&timePeriod=2025&baseline=1) | —          | £2.7bn[^1] | —                     |
| 2026-27           | [£2.8bn](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=93219&region=uk&timePeriod=2026&baseline=1) | —          | —          | —                     |
| 2027-28           | [£2.9bn](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=93219&region=uk&timePeriod=2027&baseline=1) | —          | —          | —                     |
| 2028-29           | [£3.0bn](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=93219&region=uk&timePeriod=2028&baseline=1) | —          | —          | —                     |
| 2029-30           | [£3.1bn](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=93219&region=uk&timePeriod=2029&baseline=1) | —          | £2.8bn[^2] | —                     |
| Long run          | —                                                                                                                                        | £2.5bn[^3] | —          | —                     |
| Full coverage[^4] | —                                                                                                                                        | —          | —          | £3.6bn                |

[^1]: JRF estimate includes both two-child limit and benefit cap removal. Source: JRF analysis using IPPR tax-benefit model (Parkes et al 2025). JRF's earlier estimate from May 2025 showed £2.0bn for two-child limit only in 2025/26

[^2]: JRF estimate for two-child limit only. JRF's earlier estimate from May 2025 also showed £2.8bn for 2029/30

[^3]: IFS estimate from October 2024 report "Child poverty: trends and policy options". Would cost £3.3bn if household benefit cap also removed

[^4]: Full coverage expected around 2035 when all children potentially affected

Sources:

- PolicyEngine: This analysis
- IFS: [The two-child limit: poverty, incentives and cost](https://ifs.org.uk/articles/two-child-limit-poverty-incentives-and-cost)
- JRF: [Getting the child poverty strategy we need](https://www.ippr.org/articles/getting-the-child-poverty-strategy-we-need) (IPPR/JRF collaboration), [Two policies to boost family living standards and reduce child poverty](https://www.jrf.org.uk/child-poverty/two-policies-to-boost-family-living-standards-and-reduce-child-poverty), and [Three policies to reduce child poverty this parliament](https://www.jrf.org.uk/child-poverty/three-policies-to-reduce-child-poverty-this-parliament)
- Resolution Foundation: [Catastrophic caps](https://www.resolutionfoundation.org/publications/catastophic-caps/)



---

---
# How we used Claude Code to choose our DC office
Slug: dc-office-ai-coding
Date: 2025-10-05
Authors: Max Ghenis, Daphne Hansell
Tags: us, org, ai
Description: We used Claude Code to build an interactive comparison tool for choosing our DC office. The winner: Open Gov Hub. Join us Oct 22 to celebrate!

---

When we needed a new DC office, we started like most organizations do: a Google Doc listing pros and cons of different coworking spaces. Then we realized we could make a better decision by turning it into a software project.

## From spreadsheet to interactive comparison

Using Claude Code, we built a [complete microsite](https://policyengine.github.io/dc-office-comparison/) to compare eight DC coworking spaces. The site includes interactive maps, detailed comparison tables, and transit analysis for our team members' commute patterns.

The most interesting feature: we used the Google Maps API to calculate actual travel times from our core DC team members' locations. This transformed subjective "centrally located" claims into objective data we could compare across options.

## What AI coding agents unlocked

This continues a pattern we've observed: when you frame any problem as a software project, AI coding agents can unleash their full creative potential. Instead of static notes, we got:

- Interactive Leaflet.js maps showing each space's location
- Structured comparison data across price, amenities, and accessibility
- Real commute time calculations for our team
- A reusable tool for future office decisions

One unexpected challenge: Claude Code (using Opus 4.1 at the time) developed a strong preference for Open Gov Hub. We had to explicitly request more objective analysis to get balanced comparisons. The newer Sonnet 4.5 model we now use shows less of this behavior.

## The result

We moved into the [Open Gov Hub](https://www.opengovhub.org/). The [microsite](https://policyengine.github.io/dc-office-comparison/) helped us make the decision systematically. Open Gov Hub stood out for its mission alignment—housing 40+ civic tech and policy organizations—combined with practical advantages: central location with 23-minute metro access from our Arlington team members, 10-minute bike ride from our DC-based staff, competitive pricing for dedicated desks, and membership in a global coworking network. The space includes a balcony and conference rooms, and we're already planning policy-focused events with the other organizations in the building.

![PolicyEngine team at the Open Gov Hub](/images/posts/open-gov-hub-team.jpg)

## Join us

Our DC team (Max, Daphne, Pavel, and David) is hosting an officewarming with bites and drinks. This one's just for fun.

**When:** Wednesday, October 22, 5:30-7:30 PM

**Where:** Open Gov Hub, 1100 13th St NW, Washington, DC 20005

[RSVP here](https://luma.com/lnrzph2h)



---

---
# Introducing ACA-Calc: Calculate your household's premium tax credits
Slug: introducing-aca-calc
Date: 2025-09-30
Authors: Daphne Hansell
Tags: us, policy, featured, healthcare, interactives
Description: New interactive calculator shows how Affordable Care Act subsidies affect households under current enhanced schedule and original schedule.

---

The enhanced Affordable Care Act premium tax credits are set to expire at the end of 2025. We're launching [**ACA-Calc**](../aca-calc) — an interactive calculator that estimates premium tax credits for individual households.

[**_Calculate your household's premium tax credits here._**](../aca-calc)

## What the tool does

ACA-Calc allows users to estimate Affordable Care Act premium tax credits for any household configuration. The tool calculates subsidies under the enhanced schedule (the subsidies enacted through the American Rescue Plan Act and extended through 2025) and the original schedule (the subsidy levels that would apply if enhancements expire). The tool shows side-by-side comparisons of how the two policy scenarios affect household premiums and subsidy eligibility.

## Example

Consider a married couple in West Virginia, ages 60 and 64, with no dependents and an annual household income of $63,450.

Their base Second Lowest Cost Silver Plan is $49,687 per year ($4,141 per month).

Under the enhanced schedule (2026 with IRA), they would receive $45,880 in annual premium tax credits. Under the original schedule (2026 after expiration), they would receive $43,659 in annual premium tax credits.

When the IRA enhancements expire, their premium tax credits would decrease by $2,221 per year ($185 per month).

**Healthcare Assistance by Household Income showing premium tax credits with and without IRA enhancements**

![](/images/posts/aca-calc-chart.png)

## Key features

The calculator accepts detailed household information including location (state and county for accurate benchmark premium data), household Modified Adjusted Gross Income, family composition (number and ages of household members), and filing status (single or married).

Users can compare outcomes across two scenarios: the enhanced schedule (current law through 2025) and the original schedule (pre-2021 baseline if enhancements expire).

For each scenario, the tool displays the annual premium tax credit (total subsidy amount), monthly premium tax credit (subsidy divided across 12 months), premium percentage cap (maximum premium as percentage of income), benchmark premium (second-lowest-cost Silver plan in your area), and required contribution (amount paid toward premiums).

The tool provides instant recalculation as you adjust household income levels, number of household members, ages of family members, and geographic location. ACA-Calc includes benchmark premium data for all counties across the United States.

## How it works

The calculator implements the ACA premium tax credit formula using PolicyEngine's validated rules engine. First, it determines household size and income relative to the Federal Poverty Line. Next, it looks up the benchmark premium (second-lowest-cost Silver plan) for your county. The calculator then calculates the applicable percentage from the premium cap schedule and computes your required contribution as that percentage of income. Finally, it subtracts your contribution from the benchmark premium to determine the credit amount.

The tool applies the same calculation methods used in PolicyEngine's full microsimulation model, which has been validated against official sources including Internal Revenue Service data.

## Policy context

The enhanced premium tax credits are set to expire at the end of 2025. The Congressional Budget Office estimates that if the enhancements expire, marketplace enrollment would decrease by approximately 3.4 million people.

For households purchasing coverage through ACA marketplaces, the difference between the enhanced and original subsidy schedules affects annual subsidy amounts, premium contribution requirements as a percentage of income, and subsidy eligibility thresholds.

## Get started

ACA-Calc is available at [**policyengine.org/us/aca-calc**](../aca-calc). To use the calculator, enter your household's basic information (state, county, income, size), review your premium tax credit under each schedule, compare the enhanced versus original subsidy amounts, and adjust household parameters to see how credits change.



---

---
# How carbon tax and dividend policies affect UK households
Slug: uk-carbon-tax-dividend
Date: 2025-09-30 11:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured
Description: PolicyEngine analysis of £100/200 per tonne carbon taxes with full dividend redistribution shows approximately 71% of UK residents would gain.

---

This report examines how carbon tax and dividend policies would affect UK households under two scenarios: £100 and £200 per tonne of CO2. We analyse how carbon prices impact household incomes when all tax revenue is returned as equal dividends to every resident.

In this policy experiment, the government applies carbon taxes at £100 and £200 per tonne of CO2 equivalent, generating revenue based on emissions and consumption patterns. We calculate average household net income under baseline conditions (no carbon tax) and reform conditions (with carbon tax). The government redistributes all tax revenue as equal per-person dividends to UK residents. We categorise household income changes by gain and loss thresholds and analyse distributional effects across income deciles.

## Carbon tax revenue

The following table presents the total revenue generated from carbon taxation under each scenario in 2026-27:

| Carbon tax rate | Total revenue                                                                                                                                    | Dividend amount (per person per week) |
| :-------------- | :----------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------ |
| £100/tonne      | [£67.3 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=75542&region=uk&timePeriod=2026&baseline=1)  | £19                                   |
| £200/tonne      | [£134.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92939&region=uk&timePeriod=2026&baseline=1) | £37                                   |

The Department for Environment, Food & Rural Affairs [reports](https://www.gov.uk/government/statistics/uks-carbon-footprint/carbon-footprint-for-the-uk-and-england-to-2022) greenhouse gas emissions associated with consumption in 2022 at 740 MtCO2e. At the rate of £100/tonne, the revenue estimation in 2022 would be £74 billion.

For the following analysis, we assume that revenue generated from the carbon tax is redistributed amongst people at a flat rate per person as a carbon dividend.

## Distributional analysis

This section examines how carbon dividend policies affect households across the income distribution, showing relative changes in household income by income decile. Figures 1 and 2 show the percentage change in household income by income decile for each scenario in 2026-27:

### £100/tonne carbon dividend:

**Figure 1**: Change in household income by income decile

[Chart: type: bar]

### £200/tonne carbon dividend:

**Figure 2**: Change in household income by income decile

[Chart: type: bar]

As shown in Figures 1 and 2, income deciles 1-6 consistently gain from the carbon dividend policy across both scenarios. The magnitude of gains decreases with income level, with decile 1 households seeing the largest improvements. Income deciles 8-10 experience net losses. The £200/tonne rate approximately doubles both the gains for lower deciles and losses for higher deciles compared to the £100/tonne rate.

## Winner-loser analysis

This section analyses the population distribution across different income change categories, showing what proportion of households gain or lose under each scenario. At both levels, 71% of UK residents would benefit financially on a net basis, while 28% would pay more in the carbon tax than they receive in the dividend. Figures 3 and 4 display the distribution of households by income change category for each scenario in 2026-27:

### £100/tonne carbon dividend:

**Figure 3**: Distribution of households by income change

[Chart: type: bar]

### £200/tonne carbon dividend:

**Figure 4**: Distribution of households by income change

[Chart: type: bar]

As illustrated in Figures 3 and 4, the distribution indicates that lower income deciles have a higher proportion of households gaining more than 5%, while higher income deciles are more likely to experience losses.

## Poverty impact analysis

This section examines how carbon dividend policies affect poverty rates across different demographic groups. Poverty is measured as absolute before housing costs. The following table shows the relative change in poverty rates by demographic group for each scenario in 2026-27:

| Demographic group  | £100/tonne                                                                                                                               | £200/tonne                                                                                                                               |
| :----------------- | :--------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------- |
| Children           | [\-0.5%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-0.7%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |
| Working-age adults | [\-0.2%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-0.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |
| Seniors            | [\-0.6%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-0.6%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |
| All populations    | [\-0.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-0.5%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |

The carbon dividend policy shows poverty-reducing effects across all demographic groups, with the largest improvements for children at £200/tonne (-0.7%). The £200/tonne rate produces more poverty reduction.

## Inequality impact analysis

This section analyses how carbon dividend policies affect income inequality using standard inequality measures. The following table presents the relative change in inequality measures for each scenario in 2026-27:

| Inequality measure | £100/tonne                                                                                                                               | £200/tonne                                                                                                                               |
| :----------------- | :--------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------- |
| Gini index         | [\-0.2%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\+0.4%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |
| Top 10% share      | [\-1.2%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-1.2%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |
| Top 1% share       | [\-0.7%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92873&region=uk&timePeriod=2026&baseline=1) | [\-1.1%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=92996&region=uk&timePeriod=2026&baseline=1) |

The analysis shows that the Gini coefficient decreases by 0.2% at £100/tonne but increases by 0.4% at £200/tonne. The income share of the top 10% and top 1% declines under both scenarios.

## Constituency-level analysis

This section presents a geographical analysis of how carbon dividend policies affect different UK constituencies. Figures 5-8 illustrate the distribution of income changes across UK constituencies for each scenario in 2026-27.

### £100/tonne carbon dividend:

The £100/tonne carbon dividend [shows](https://legacy.policyengine.org/uk/policy?focus=policyOutput.constituencies.relative&reform=92873&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=true) geographically concentrated benefits, with urban constituencies experiencing the largest gains.

**Figure 5**: £100/tonne carbon dividend constituency map

![](/images/posts/uk-carbon-tax/carbon-tax-100.png)

The regional breakdown shows that England benefits most from the £100/tonne carbon dividend, while Wales faces losses across all constituencies.

**Figure 6**: Constituency distribution by region

[Chart: type: bar]

### £200/tonne carbon dividend:

The higher carbon tax rate [amplifies](https://legacy.policyengine.org/uk/policy?focus=policyOutput.constituencies.relative&reform=92996&region=uk&timePeriod=2026&baseline=1&uk_local_areas_beta=true) the geographical patterns, with more constituencies experiencing gains.

**Figure 7**: £200/tonne carbon dividend constituency map

![](/images/posts/uk-carbon-tax/carbon-tax-200.png)

At the £200/tonne rate, 294 constituencies gain compared to 265 at the £100/tonne rate, with 60 constituencies showing no change.

**Figure 8**: Constituency distribution by region

[Chart: type: bar]

The constituency analysis shown in Figures 5-8 reveals geographical variation in policy impacts. Wales consistently shows negative impacts, with all 32 constituencies experiencing losses in both scenarios. England shows the greatest number of benefiting constituencies, with 245 gaining at £100/tonne and 269 gaining at £200/tonne. Scotland shows mixed results with 13-18 constituencies gaining, while Northern Ireland has 7 constituencies gaining under both scenarios.

### Areas with largest gains and losses

The constituencies experiencing the largest gains (as a share of net income) include urban areas such as Birmingham Ladywood, Bradford West, Bradford East, Nottingham East, and Leeds South. Conversely, constituencies in Wales and affluent areas face the largest losses (as a share of net income), including Monmouthshire, Cardiff North, and Vale of Glamorgan. This geographical variation reflects differences in local income distributions and carbon consumption patterns across UK constituencies.

## Conclusion

Our analysis shows that carbon dividend policies would benefit approximately 71% of UK residents across both £100/tonne and £200/tonne scenarios in 2026-27. The £100/tonne rate would reduce poverty by 0.3% overall, while the £200/tonne rate would reduce poverty by 0.5% overall.

Lower-income households in deciles 1-6 would see net income gains under both scenarios, while higher-income households in deciles 8-10 would experience net losses. The geographic distribution reveals 265 constituencies gaining at £100/tonne and 294 at £200/tonne in 2026-27.

We invite you to explore the [PolicyEngine webapp](https://legacy.policyengine.org/) to model your own customised carbon tax and dividend reforms.



---

---
# Enhanced Premium Tax Credits: Analyzing Household Impacts of an Extension Beyond 2025
Slug: enhanced-premium-tax-credits-extension
Date: 2025-09-30
Authors: Daphne Hansell
Tags: us, policy, featured, healthcare
Description: PolicyEngine analyzes extending the enhanced premium tax credits enacted through the American Rescue Plan Act beyond their 2025 expiration.

---

In March 2021, President Joe Biden signed into law the [American Rescue Plan Act ](https://www.congress.gov/bill/117th-congress/house-bill/1319), which temporarily enhanced premium tax credits for Affordable Care Act marketplace coverage. The [Inflation Reduction Act of 2022](https://www.congress.gov/bill/117th-congress/house-bill/5376/text) then extended these enhancements through December 31, 2025. On September 4, 14 representatives introduced H.R.5145, the [Bipartisan Premium Tax Credit Extension Act](https://www.congress.gov/bill/119th-congress/house-bill/5145), which would extend the enhanced subsidies through 2026. Additionally, Representative Rosa DeLauro (D-CT) introduced a [continuing resolution](https://www.congress.gov/bill/119th-congress/house-bill/5450) to extend current government funding levels through October 31, 2025, while permanently extending the enhanced subsidies.

In this report, we use the [PolicyEngine ACA microsimulation model](https://github.com/PolicyEngine/policyengine-us/blob/master/docs/gov/hhs/aca.md) to simulate extending the enhanced premium tax credits in 2026, showing their effects on archetypical households' net income and marginal tax rates.

_See how this reform would affect your household [here](https://legacy.policyengine.org/us/household?focus=intro&region=us&timePeriod=2025&baseline=2&reform=83726)_

## Background

The American Rescue Plan Act (ARPA), and then the Inflation Reduction Act (IRA), made two primary changes to the Premium Tax Credit (PTC) structure:

1. **Removed the 400% Federal Poverty Line income eligibility limit**: Pre-2021 law restricted PTCs to households with incomes at or below 400% of the federal poverty level. The enhancement extended eligibility to all income levels with a cap on premium contributions.

1. **Modified the applicable percentage table**: The enhancement reduced the percentage of income that households must contribute toward benchmark plan premiums across all income levels, as shown in Table 1.

**Table 1: Applicable-percentage schedule used to calculate Marketplace premium tax credits**

| Household Income (% FPL) | Premium Cap - Original Schedule | Premium Cap - Enhanced (2021-2025) |
| ------------------------ | ------------------------------- | ---------------------------------- |
| Under 133%               | 2.10%                           | 0%                                 |
| 133% to 150%             | 3.14% to 4.19%                  | 0% to 2%                           |
| 150% - <200%             | 4.19% to 6.60%                  | 0% to 2%                           |
| 200% - <250%             | 6.60% to 8.44%                  | 2% to 4%                           |
| 250% - <300%             | 8.44% to 9.96%                  | 4% to 6%                           |
| 300% - ≤400%             | 9.96%                           | 6% to 8.5%                         |
| >400%                    | Not eligible for PTC            | 8.5%                               |

## Household Impacts

Household impacts vary by state, age, and household composition, because the Affordable Care Act (ACA) sets subsidies based on the price of the Second Lowest Cost Silver Plan (SLCSP) in a given rating area (ordinarily a group of counties).

These examples represent opposite ends of ACA implementation across states. Texas demonstrates the simplest case: without Medicaid expansion, only federal PTCs apply, allowing us to isolate the impact of enhanced credit expiration. New York shows the most complex interactions: with Medicaid expansion, households navigate between Medicaid, the Children's Health Insurance Program (CHIP), and PTCs as income rises, with eligibility thresholds creating distinct coverage cliffs at different income levels.

## Example 1: 25 and 28 year old married couple in Austin, Texas

Because [Texas has not expanded Medicaid to the adult population](https://www.kff.org/status-of-state-medicaid-expansion-decisions/), this two-person household receives no healthcare benefits until their income reaches 138% of the federal poverty line ($29,187). Without children, they also do not qualify for CHIP. Table 2 below shows the PTC level at select levels of the poverty line.

**Table 2: Net Income Change for Texas Household**

| Percentage of the Federal Poverty Line | Income  | ACA PTC under Expiration | ACA PTC under Extension | Difference In Premium Tax Credit | Notes                        |
| -------------------------------------- | ------- | ------------------------ | ----------------------- | -------------------------------- | ---------------------------- |
| 138%                                   | $29,187 | $9,128                   | $10,090                 | $962                             | Lowest eligible income       |
| 300%                                   | $63,450 | $4,062                   | $6,283                  | $2,221                           | Enhanced subsidies           |
| 400%                                   | $84,600 | $0                       | $2,899                  | $2,899                           | Ineligible under current law |

Figure 1 shows these PTC values in 2026 under current law and extension of enhanced subsidies for income levels through $200,000. They would be eligible for a nonzero PTC at income of $84,600 under current law, and $119,162 under extension.

_Code for the Figures can be found [here](https://github.com/daphnehanse11/analysis-notebooks/blob/nyt-health/us/medicaid/aca_reform_households.ipynb)_

**Figure 1: Change in Healthcare Benefits Based on Household Earnings (2026) **

![](https://cdn-images-1.medium.com/max/2700/1*Kj67fxnHvs9m62xRSauF5Q.png)

Figure 2 shows the additional PTC resulting from extension, peaking at $2,899 at $84,600 income, the 400% income level where they lose eligibility under current law.

**Figure 2: Change in Net Income Including Health Benefits (2026)**

![](https://cdn-images-1.medium.com/max/2700/1*xm0-iuhMCvk5hFiicvFTtw.png)

Finally, Figure 3 shows the marginal tax rate (MTR) under each scenario. Extending the enhanced subsidies would reduce MTRs in the current phase-out range, since it phases out more slowly, while increasing them in the income range where they are ineligible under current law but still phasing out under extension.

_Note: The household faces a negative infinite MTR at 138% FPL, where they become eligible for the PTC in both scenarios, and a positive infinite MTR at 400% FPL under current law, where they become ineligible for the PTC._

**Figure 3: Change in Marginal Tax Rates Including Healthcare Benefits Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2700/1*xPYVAV4wuytKmLgqobh5Ww.png)

## Example 2: A family of 3 in New York with two 40 year old married parents and one 3 year old dependent

Because [New York expanded Medicaid to adults,](https://www.health.ny.gov/health_care/medicaid/publications/adm/13adm3.htm) this family's healthcare coverage varies by income level:

**Below 154% FPL ($41,041):** The entire family qualifies for Medicaid. We value this coverage at $16,480 based on New York's per-capita Medicaid costs for each enrollment group (adults and children). No PTC is available since they have Medicaid coverage.

**At 200% FPL ($53,300):** Parents remain on Medicaid ($12,930) while the child transitions to CHIP ($2,489). No PTC is available.

**At 300% FPL ($79,950):** Parents lose Medicaid eligibility. Under current law, the family receives $13,847 in PTCs (65% of their $21,442 benchmark premium). With the extension, PTCs increase to $16,645 (78% of premium). The child is still eligible for CHIP ($2,489).

**At 406% FPL ($111,000):** Current law eliminates all PTC support — the family pays the full premium. The child is no longer eligible for CHIP. The extension would provide $21,135 in PTCs for the entire family (57% of premium costs).

Table 3 below shows the households healthcare benefits at select levels of the poverty line.

**Table 3: Net Income Change for New York Household**

| Income   | Percentage of the Federal Poverty Line | ACA PTC under Expiration | ACA PTC under Extension | Medicaid Expenditure | CHIP Expenditure per Capita | Difference In Premium Tax Credit | Notes                                                |
| -------- | -------------------------------------- | ------------------------ | ----------------------- | -------------------- | --------------------------- | -------------------------------- | ---------------------------------------------------- |
| $41,100  | 154%                                   | $0                       | $0                      | $16,480              | $0                          | $0                               | Entire Family on Medicaid                            |
| $53,300  | 200%                                   | $0                       | $0                      | $12,930              | $2,489                      | $0                               | Child in CHIP                                        |
| $79,950  | 300%                                   | $13,847                  | $16,645                 | $0                   | $2,489                      | $2,798                           | Parents in ACA, Child in CHIP                        |
| $111,000 | 406%                                   | $0                       | $21,135                 | $0                   | $0                          | $21,135                          | Ineligible for any health benefits under current law |

Figure 4 shows these elements as a continuous function of earnings.

**Figure 4: Change in Healthcare Benefits Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2700/1*jsNet9bhFayg7EjtUgFm9w.png)

Figure 5 shows the additional PTC resulting from extension, and how it interacts with other healthcare benefits. The household's PTC peaks at 406% of the federal poverty level, when the child loses CHIP eligibility. They would be eligible for a nonzero PTC at income of $111,000 under current law and $359,000 under extension.

**Figure 5: Change in Healthcare Benefits Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2700/1*rG9ozTvBHduuihneLKwqEA.png)

Figure 6 shows the marginal tax rate (MTR) under each scenario. Extending the enhanced subsidies would reduce MTRs in the current phase-out range, while increasing them in the income range where they are ineligible under current law but still phasing out under extension. The family faces two high marginal tax rates under the baseline, one at 400% of the federal poverty level when the parents lose ACA eligibility, and the other at 405% of the federal poverty level when the child loses CHIP eligibility.

**Figure 6: Change in Marginal Tax Rates Including Healthcare Benefits Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2700/1*McWhTwfZGLE2H_7Gb0xxTQ.png)

## Conclusion

Extension of the enhanced premium tax credits beyond 2025 would increase subsidies across all eligible income levels and maintain eligibility for households above 400% of the federal poverty line. Our PolicyEngine microsimulation shows varying impacts by state and household composition: the Texas couple would gain $2,899 in annual credits at 400% FPL, while the New York family would gain $12,268 at 405% FPL.

In future reports, we will estimate the budgetary and distributional impacts of this and other ACA-related reform proposals.



---

---
# Event: PolicyEngine 2.0 and the Future of Public Policy Analysis
Slug: sep-2025-london-event
Date: 2025-09-12
Authors: Max Ghenis
Tags: uk, org, featured, event
Description: Join us on the afternoon of November 3rd in London for an exclusive showcase of PolicyEngine's latest innovations in evidence-based policy analysis, featuring live demos and networking.

---

Join us at Central Hall Westminster in London on Monday, 3 November 2025, from 12:00-18:00 for an exclusive showcase of PolicyEngine 2.0 and our latest innovations in evidence-based policy analysis. Register now on [Eventbrite](https://www.eventbrite.co.uk/e/policyengine-20-and-the-future-of-public-policy-analysis-tickets-1673065246189).

## Event overview

PolicyEngine is hosting a special event to demonstrate our cutting-edge research, tools, and features that are transforming how policymakers and researchers analyse tax and benefit reforms. This gathering brings together professionals at the forefront of computational policy modelling and evidence-based policymaking technology.

## What to expect

### Revolutionary platform updates

Experience the unveiling of PolicyEngine v2, our next-generation policy analysis platform, with a live demonstration by our engineering team. See firsthand how our enhanced interface and capabilities make complex policy analysis more accessible and powerful than ever.

### Hyperlocal policy analysis

Discover our breakthrough capability to estimate policy impacts at the parliamentary constituency and local authority level. Our UK Country Director Nikhil Woodruff will demonstrate how our revolutionary microdata construction enables unprecedented granularity in understanding policy effects across the UK, expanding on the methodologies described in our [Enhanced CPS launch](/us/blog/enhanced-cps-launch).

### Cutting-edge research presentations

Learn about our latest research innovations, including:

- **VAT analysis with synthetic firm microdata**: Our UK Research Associate Vahid Ahmadi presents groundbreaking work on modelling VAT reforms using fully synthetic firm-level data, building on our recent [analysis of VAT threshold changes](/uk/blog/uk-vat-thresholds)
- **US policy modelling expansion**: Insights from our federal and state-level policy analysis work across the Atlantic, powered by our [Enhanced Current Population Survey](/us/blog/enhanced-cps-launch) microdata
- **AI-powered policy analysis**: How we're deploying large language models and agentic systems to transform policy research workflows

### Networking opportunities

Connect with policy researchers, government officials, think tank professionals, academic researchers, and data scientists working in public policy. The event includes dedicated networking time during registration, tea break, and an evening reception.

## Full agenda

- **12:00-13:00** | Registration, Lunch & Networking
- **13:00-13:15** | Welcome & Vision - Max Ghenis, Co-founder & CEO
- **13:15-13:30** | Technology for UK Policymaking - Nikhil Woodruff, Co-founder, CTO & UK Country Director
- **13:30-14:00** | Live Demo: PolicyEngine v2 Platform - Anthony Volk, Software Engineer
- **14:00-14:30** | Localising Policy Impact - Nikhil Woodruff
- **14:30-15:00** | VAT Analysis with Synthetic Firm Microdata - Vahid Ahmadi, UK Research Associate
- **15:00-15:30** | Tea Break & Networking
- **15:30-16:00** | PolicyEngine US: Federal & State Policy Modelling - Max Ghenis
- **16:00-16:30** | Panel Discussion: The Future of Evidence-Based Policymaking
- **16:30-17:00** | Looking Ahead: AI-Powered Policy Analysis - Max Ghenis & Nikhil Woodruff
- **17:00-18:00** | Reception & Networking

## Acknowledgments

This event is made possible by the generous support of the Nuffield Foundation, whose commitment to evidence-based social policy aligns perfectly with PolicyEngine's mission to democratise policy analysis. Our work building sustainable open-source ecosystems is also supported by the [National Science Foundation's POSE program](/us/blog/nsf-pose-phase-1-grant).

## Event Details

**Date:** Monday, 3 November 2025  
**Time:** 12:00-18:00 GMT  
**Venue:** Central Hall Westminster  
**Address:** Storey's Gate, London SW1H 9NH

## Registration

Space is limited for this exclusive event. [Register now on Eventbrite](https://www.eventbrite.co.uk/e/policyengine-20-and-the-future-of-public-policy-analysis-tickets-1673065246189) to secure your place at this pioneering gathering in computational policy analysis.

## About PolicyEngine

PolicyEngine is a non-profit organisation building free, open-source software to compute the impact of public policy. Our platform enables anyone to design tax and benefit reforms and see their effects on society and individual households. Learn more at [policyengine.org](https://legacy.policyengine.org).



---

---
# PolicyEngine and NBER sign memorandum of understanding for TAXSIM emulator development
Slug: policyengine-nber-mou-taxsim
Date: 2025-09-05
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, org, featured
Description: Partnership ensures continuity of tax microsimulation capabilities for the research community through open-source development.

---

We're excited to announce that PolicyEngine has partnered with the [National Bureau of Economic Research (NBER)](https://nber.org) to ensure researchers worldwide continue to have access to critical tax microsimulation tools. Through our [memorandum of understanding](https://drive.google.com/file/d/1V5TJk7C01CLYP_FXUZTmHEdLk-WCV4WN/view?usp=sharing), we're building an open-source emulator of [TAXSIM](https://taxsim.nber.org), NBER's tax calculator that has powered academic research and government policy analysis for nearly five decades.

## Why TAXSIM matters

Since the 1970s, TAXSIM has set the gold standard for tax microsimulation. Daniel Feenberg, NBER's IT Director, created and maintains this tool that enables groundbreaking research on everything from tax reform impacts to income inequality. [Over 1,200 papers](https://scholar.google.com/scholar?cites=14430205938320153579&as_sdt=20000005&sciodt=0,21&hl=en) have applied TAXSIM, based on citations of the [Feenberg and Coutts (1993)](https://taxsim.nber.org/feenberg-coutts.pdf) paper that introduces the model. Beyond academic citations, major think tanks rely on TAXSIM — researchers at Brookings [use it extensively](https://www.brookings.edu/research/simulating-income-tax-liabilities-in-the-survey-of-consumer-finances/) to analyze tax policy impacts. Federal agencies also depend on TAXSIM: the Bureau of Labor Statistics [uses it for the Consumer Expenditure Survey](https://www.bls.gov/opub/mlr/2015/article/improving-data-quality-in-ce-with-taxsim.htm), and the Census Bureau has evaluated it for the Supplemental Poverty Measure.

TAXSIM35, the current version, accepts 35 input variables covering demographics, labor income, capital income, deductions, and credits. It calculates not just federal and state tax liabilities but also taxable income, specific credits, payroll taxes, and other detailed tax components. With coverage of federal tax law from 1960 to present and state tax laws from 1977 onward, TAXSIM helps researchers understand exactly how tax changes affect real families across six decades of American tax policy.

## Our collaboration with NBER

We're working directly with Daniel Feenberg and James Poterba, President and CEO of NBER, to build the next generation of tax microsimulation tools. This MOU formalizes the validation work we've been doing against TAXSIM for over three years while building state tax models across the country. Dr. Feenberg also serves as an external mentor through our [NSF POSE Phase I grant](https://policyengine.org/us/research/nsf-pose-phase-1-grant), helping us build a robust open-source ecosystem for policy analysis.

Our partnership ensures that:

- Researchers maintain uninterrupted access to tax microsimulation capabilities
- The tool evolves with modern features while preserving backward compatibility
- The codebase becomes open-source, enabling community contributions and transparency

## What we're building

We're developing the TAXSIM emulator as a fully open-source project on [GitHub](https://github.com/PolicyEngine/policyengine-taxsim). The emulator leverages PolicyEngine's existing US federal and state tax calculator to replicate TAXSIM's functionality.

**Key features of the emulator:**

- Full compatibility with TAXSIM's existing input and output formats
- Open-source codebase for transparency and community contributions
- Built on PolicyEngine's validated state and federal tax models from 2021 onward
- Integration with TAXSIM to provide a unified interface across all years (1960-present)
- A new dashboard for comparing results across thousands of tax scenarios

Both organizations rigorously validate the emulator to ensure it matches TAXSIM's outputs exactly. Dr. Feenberg provides technical guidance throughout the development process, ensuring we capture every detail that makes TAXSIM so valuable to the research community.

Through this detailed validation process, we've already identified opportunities to improve how both TAXSIM and PolicyEngine encode complex tax laws — not just at the federal level, but across all 50 states and DC. This collaboration strengthens both tools, ensuring researchers get the most accurate tax calculations possible.

## The path forward

Our organizations designed a smooth transition plan. The integrated system will combine TAXSIM and the PolicyEngine-based emulator, allowing researchers to use a familiar interface for any year from 1960 to present. Behind the scenes, the system will route calculations to TAXSIM for historical years and to the open-source emulator for recent years (2021 onward).

We aim to launch this integrated tool later this year, along with a dashboard that will allow users to compare results across thousands of tax scenarios. Researchers will experience no disruption — they'll continue using the same interface while gaining access to open-source capabilities for recent tax years.

## What this means for the research community

This partnership goes beyond maintaining existing tools — we're expanding access to rigorous policy analysis. Making tax microsimulation open-source and adding modern features allows us to:

- Enable more researchers to contribute to and validate the codebase
- Help new researchers learn and use these tools more easily
- Ensure these capabilities remain available for decades to come
- Create opportunities for innovation in tax policy analysis

We're honored to work with NBER to carry forward Dr. Feenberg's decades of work on TAXSIM. Together, we're ensuring that the next generation of researchers and policymakers have even better tools to understand how tax policies affect families across the income spectrum.

Stay tuned for updates as we continue development. If you're interested in contributing or have questions about the project, visit our [GitHub repository](https://github.com/PolicyEngine/policyengine-taxsim) or reach out to us directly.



---

---
# National Science Foundation awards PolicyEngine $300,000 grant
Slug: nsf-pose-phase-1-grant
Date: 2025-08-18
Authors: Max Ghenis
Tags: us, uk, org, featured
Description: NSF's Pathways to Enable Open-Source Ecosystems program will support PolicyEngine's work to expand access to policy analysis tools.

---

PolicyEngine has been awarded a $300,000 Phase I grant from the National Science Foundation's [Pathways to Enable Open-Source Ecosystems (POSE) program](https://new.nsf.gov/funding/opportunities/pathways-enable-open-source-ecosystems-pose) ([Award No. 2518372](https://www.nsf.gov/awardsearch/showAward?AWD_ID=2518372)). This grant will support our work to strengthen and expand the open-source ecosystem around economic policy analysis tools.

## Award abstract

This Pathways to Enable Open-Source Ecosystems (POSE) project increases access to sophisticated economic policy analysis tools, enabling evidence-based decision-making across all levels of American society. The project transforms tax-benefit microsimulations into open-source infrastructure accessible to local governments, nonprofits, and citizens. This innovation enhances scientific understanding by making policy models transparent and reproducible, allowing researchers to validate assumptions and build upon existing work. The OSE provides durable competitive advantage by establishing the United States as the global leader in open-source policy modeling. The model leverages distributed open-source development, where commercial users fund expansions that benefit the entire ecosystem. Primary beneficiaries include households accessing benefits, local governments analyzing policy impacts, and researchers advancing economic science.

This POSE project addresses the critical gap between sophisticated policy analysis capabilities and organizational infrastructure needed for sustainable open-source development. While the team has built comprehensive tax-benefit microsimulation tools with a strong user base, transitioning to a self-sustaining ecosystem requires systematic organizational development. The project's objectives include: 1) conducting ecosystem discovery to map stakeholder needs; 2) establishing a new governance structure; and 3) building contributor infrastructure including documentation, mentorship programs, and community engagement frameworks. The effort involves surveying stakeholders, conducting focus groups, developing governance bylaws, creating contributor onboarding systems, and launching a dashboard tracking ecosystem health. Technical goals include a comprehensive ecosystem landscape report, formalized intellectual property frameworks (e.g., AGPL-3.0 code, trademark protection, contributor agreements), documented partnership models, and quantitative metrics showing increasing contribution rates and growth in monthly users. This organizational infrastructure ensures PolicyEngine's technical capabilities, including state and congressional district-level analysis powered by machine learning calibration, can sustainably serve community interests and drive development.

## About the POSE program

The NSF POSE program helps open-source projects develop robust ecosystems with strong governance, community engagement, and technical infrastructure. Phase I focuses on ecosystem discovery and planning, while Phase II provides implementation funding for projects ready to scale their impact.

## Project activities

Our grant activities focus on three key areas:

### Ecosystem discovery and research

- Conduct 100+ stakeholder interviews to understand the needs of policy researchers, government agencies, nonprofits, and academic institutions
- Map the landscape of policy analysis tools and identify gaps in current capabilities
- Study successful open-source economic modeling projects to learn best practices

### Community building and engagement

- Attend and present at key conferences to engage with the policy analysis community
- Develop partnerships with organizations that can contribute to and benefit from our tools
- Create documentation and resources to lower barriers for new contributors

### Governance development

- Design governance structures that support transparent decision-making and community involvement
- Develop sustainable funding models that align with our open-source mission
- Create processes for managing contributions and maintaining code quality

## Learning from TAXSIM's success

Dr. Dan Feenberg, creator of TAXSIM (cited in over 1,100 academic publications), will serve as our external mentor through the I-Corps for POSE training. TAXSIM has successfully built a large user community at the National Bureau of Economic Research, and we'll learn from their decades of experience creating an ecosystem around tax microsimulation tools. Many current TAXSIM users are potential PolicyEngine users, and Dr. Feenberg is helping us understand how to best serve this community's needs.

## Conference participation

As part of our ecosystem discovery efforts, we'll be attending and presenting at major conferences in economics, public policy, and open-source software development. These events will help us engage with potential users and contributors, learn from other projects, and share our work with the broader community.

## Application materials

You can view our complete NSF POSE Phase I application materials, including our project proposal and supporting documents, in our [public Google Drive folder](https://drive.google.com/drive/folders/1QzAXCGQJ-Z0Mn1OSx6qKMDJvEup7RKpH?usp=drive_link).

## Get involved

We invite researchers, developers, and policy analysts to join our open-source community. Visit our [GitHub repositories](https://github.com/PolicyEngine) to contribute, or explore our platform at [policyengine.org](https://legacy.policyengine.org) to see how we're democratizing policy analysis.

The NSF POSE Phase I grant will help PolicyEngine strengthen its open-source ecosystem and expand access to sophisticated policy analysis tools for researchers, policymakers, and citizens alike.

---

_This material is based upon work supported by the National Science Foundation under Award No. 2518372. Any opinions, findings and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation._



---

---
# Analysis of the American Worker Rebate Act of 2025
Slug: american-worker-rebate-act
Date: 2025-08-13
Authors: David Trimmer
Tags: us, tariffs, featured
Description: The bill would cost $141 billion and benefit 80% of American residents.

---

On July 29th, Senator Josh Hawley [introduced](https://www.hawley.senate.gov/wp-content/uploads/2025/07/Hawley-American-Worker-Rebate-Act-Bill-Text.pdf) the American Worker Rebate Act (AWRA) of 2025. The legislation would send a "tariff rebate" of at least $600 per person to households below certain income thresholds and with a valid Social Security Number (SSN).[^1] We at PolicyEngine have analyzed this bill and determined its impact on American households and the overall economy.

Our microsimulation model, assuming no changes to economic conditions, projects these impacts:

- Estimated federal cost of $141 billion

- Would benefit 80% of U.S. residents

- Projected to reduce the Supplemental Poverty Measure by 6.9%

- Expected to reduce the Gini index of inequality by 1.1%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462)._

## How the rebate works

The American Worker Rebate Act of 2025 follows a similar structure to the economic impact payments (commonly known as "stimulus checks") disbursed in 2020 and 2021. Families would receive direct payments in 2026 based on their 2024 tax return (or 2023 if that information is unavailable). For our analysis, we simulate over the tax year 2024 and assume every tax unit filed a return that year.

The head of each household must have a valid SSN in order for their tax unit to be eligible for any benefits. For married couples, both spouses must have an SSN, unless one is in the armed services. In this case, only one spouse needs an SSN.[^2] Children without a valid SSN cannot receive individual payments, but this does not disqualify the rest of the tax unit from receiving benefits.

Eligible households receive the full payment if their adjusted gross income (AGI) falls below $112,500 for head-of-household filers, $150,000 for joint filers, and $75,000 for all other filing statuses. Payments are reduced by $5 for every $100 of income above these thresholds. The base rebate is $600 per person; however, if total tariff revenue generates more than $600 per capita nationwide, the rebate amount would be increased to match this higher figure. We use the $600 rebate value for our analysis.

## Household impacts

Let's examine how the AWRA's tariff rebates could affect a hypothetical U.S. family. A married couple in Florida with two children earning $100,000 would receive the [full $2,400 rebate](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462&household=55185) in 2026, assuming all family members have valid SSNs. However, if one parent does not meet the SSN requirement and does not qualify for the armed services exception, the entire household is ineligible and [receives no benefit](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462&household=55186). If one child lacks a valid SSN, the household still qualifies [for $1,800](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462&household=55197), the full amount minus $600 for the ineligible child.

Additionally, if household earnings were to rise to $160,000, then the $2,400 benefit would [fall to $1,900](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462&household=55199) as the rebate phaseout would now apply. The entire benefit would phase out once the household's AGI [reaches $198,000](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462&household=55200).[^3] Table 1 summarizes the benefit amounts for each household scenario.

**Table 1: Summary of Household Impacts for a Married Couple with Two Children**

| Earnings | Both Adults Have Valid SSNs? | Children Have Valid SSN? | Rebate Amount |
| -------- | ---------------------------- | ------------------------ | ------------- |
| $100,000 | Yes                          | Yes                      | $2,400        |
| $100,000 | No                           | Yes                      | $0            |
| $100,000 | Yes                          | Only one child           | $1,800        |
| $160,000 | Yes                          | Yes                      | $1,900        |
| $198,000 | Yes                          | Yes                      | $0            |

Figure 1 displays how net income varies as employment income rises from $0 to $200,000 for the examined tax unit. The household receives the $2,400 tariff rebate until reaching $150,000, when the phase-out begins. Reducing by 5%, the rebate falls to zero at $198,000 of AGI, leaving net income unchanged above this point.

**Figure 1: Net Income by Household Income for a Married Couple with Two Children**

![](https://cdn-images-1.medium.com/max/2000/0*hnuDJEzEZ3ozxnWR)

Figure 2 shows how the AWRA alters the household's marginal tax rates. The household would see its marginal tax rates rise from 29.7% to 34.7% once its AGI reaches $150,000 and 5% phase-out applies. Once AGI reaches $198,000 and the rebate is fully phased out, their change in marginal tax rates reverts to 23.4%, the current value under the baseline.

**Figure 2: Household Marginal Tax Rates for a Married Couple with Two Children Under the AWRA**

![](https://cdn-images-1.medium.com/max/2000/0*V2roDkUrDQB1zWNI)

## Microsimulation results

Using data from tax year 2024, the American Worker Rebate Act of 2025 [would cost $141.3 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462), according to PolicyEngine's static modeling. Due to interactions with state tax codes, the AWRA would also raise $58.9 million in state and local tax revenue.

The legislation would [raise the net income of 80.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462) of residents in the U.S, though the degree to which they benefit varies by income decile. Overall, 30% of residents would experience a gain of more than 5% of their net income, including 93% of those in the lowest income decile. In the top income decile, 41% of residents would see a gain (all amounting to less than 5% in their net income).

**Figure 3: Winners of the AWRA's Tariff Rebates**

![](https://cdn-images-1.medium.com/max/2000/0*uFiy--rmBE7w_6L-)

The [average household benefit](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462) of the AWRA would be $973. The decile experiencing the largest gain is the seventh ($1,273), while the tenth would benefit the least with an average benefit of $469. This is due to the phaseout of the rebates.

**Figure 4: Average Benefit of the AWRA's Tariff Rebates**

![](https://cdn-images-1.medium.com/max/2000/0*bIQjYwzSnpQLt6Iw)

We project the AWRA to [lower poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462), as defined by the Supplemental Poverty Measure, by 6.9%, with seniors seeing the largest reduction at 11.7%. Deep poverty would [fall by 7.5%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462), including a 15.2% reduction in deep child poverty.

**Figure 5: Poverty Impact of the AWRA' Tariff Rebates**

![](https://cdn-images-1.medium.com/max/2000/0*qSsl1Vo4_4slkDjA)

The proposed legislation would also [lower the Gini index of inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&region=us&timePeriod=2024&baseline=2&dataset=enhanced_cps&reform=89462) by 1.07%, and lower the share of net income held by the top 10% and 1% households by 0.8% and 0.84%, respectively.

## Conclusion

The American Worker Rebate Act of 2025 would send direct payments to qualifying families, which would cost $141.3 billion, using data from tax year 2024. The tariff rebates would provide an average benefit of $973 to households, with those in the seventh decile experiencing the largest gain. The bill is expected to reduce the Supplemental Poverty Measure by 6.9% and lower the Gini index of income inequality by 1.07%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

[^1]: Qualifying persons include the head and spouse of the household and any CTC-qualifying children. Adult dependents are not eligible for payments.

[^2]: Our analysis does not include the armed services exemption. We assume that if a head or spouse does not have a valid SSN, their tax unit is ineligible for the rebates.

[^3]: The rebate phases out at 5% above the joint income threshold for the examined household. At $160,000, the household rebate value falls by $500 since their AGI is $10,000 over the limit (5% of $10,000 is $500). At $198,000 of AGI, their rebate falls to zero (5% of $48,000 is $2,400).



---

---
# Enhanced CPS full launch: Comprehensive microdata for policy analysis
Slug: enhanced-cps-launch
Date: 2025-08-11
Authors: Max Ghenis, Nikhil Woodruff, Ben Ogorek, Maria Juaristi
Tags: us, data, featured
Description: The Enhanced Current Population Survey now includes tip, overtime, and auto loan interest imputations, plus upcoming state and congressional district calibration.

---

We're excited to announce the full launch of the Enhanced Current Population Survey (Enhanced CPS). This comprehensive dataset powers PolicyEngine's microsimulation modeling with unprecedented accuracy, enabling precise analysis of tax and benefit reforms across the United States.

Building on extensive development and testing since our [beta launch](/us/research/enhanced-cps-beta), the Enhanced CPS now includes sophisticated imputation models for income sources and household characteristics that were previously unavailable or underreported in survey data. These improvements provide a more complete picture of American households' economic circumstances. Learn more about our [methodology](https://policyengine.github.io/policyengine-us-data/methodology) and [data sources](https://policyengine.github.io/policyengine-us-data/data).

## New features

### Income source imputations

The Enhanced CPS now includes machine learning-based imputations for income sources that are frequently underreported in surveys:

**Tip income**: Using employer-reported data from the Survey of Income and Program Participation (SIPP), we impute tip income based on employment income, age, and household composition. This enhancement enables accurate analysis of proposals to exempt tips from taxation. See our [imputation methodology documentation](https://policyengine.github.io/policyengine-us-data/methodology#imputation) for technical details.

**Overtime premiums**: We calculate overtime income using hours worked, occupation codes, and Fair Labor Standards Act exemption status, allowing accurate modeling of overtime exemption proposals.

**Auto loan interest**: Imputed from the Survey of Consumer Finances (SCF), this addition enables analysis of proposals to make auto loan interest deductible.

### Immigration status imputation

We've implemented the ASEC Undocumented Algorithm to impute Social Security Number card types, enabling more accurate modeling of policies with citizenship or work authorization requirements. This process-of-elimination approach examines 14 conditions to identify likely undocumented individuals, calibrated to match external population estimates. Details are available in our [demographic imputation section](https://policyengine.github.io/policyengine-us-data/methodology#demographic-imputation).

### Technical infrastructure improvements

**Two-stage methodology**: Our approach combines sophisticated imputation with advanced reweighting techniques. First, we use Quantile Regression Forests (QRF) to impute missing variables from multiple data sources, preserving realistic variation and capturing conditional distribution tails. Second, we apply gradient-based optimization with PyTorch to reweight households, matching administrative targets while maintaining the survey's statistical properties.

![Enhanced CPS methodology flowchart showing the two-stage process of imputation and reweighting](/images/posts/enhanced-cps-launch-flowchart.png)

The process flow integrates five source datasets (CPS ASEC, IRS PUF, SIPP, SCF, ACS) that are aged to the target year. Through QRF imputation, we create two enhanced CPS variants: one with missing PUF variables filled in, and another with existing variables replaced by PUF values. These datasets then undergo reweighting optimization to produce the final Enhanced CPS dataset. [View our detailed methodology documentation](https://policyengine.github.io/policyengine-us-data/methodology).

**Microimpute package**: We've developed and adopted [`microimpute`](https://github.com/PolicyEngine/microimpute), a new open-source Python package that automates our QRF-based imputation methods. This package makes our imputation methodology more transparent and reusable.

**Advanced reweighting with L0 regularization**: Our reweighting process uses log-transformed weights with dropout regularization and incorporates an L0 penalty for sparsity. This ensures positive weights while preventing overfitting and maintaining interpretability. The optimization minimizes mean squared relative error using the Adam optimizer.

**Enhanced validation**: Our [calibration process](https://policyengine.github.io/policyengine-us-data/methodology#calibration) targets 9,168 administrative totals from sources including IRS SOI, Census, CBO/Treasury, and JCT data, ensuring the Enhanced CPS accurately represents:

- Income components by source
- Benefit program enrollment
- Demographic distributions
- Geographic population counts

## Upcoming developments

### State and local calibration

With support from [Arnold Ventures](https://www.arnoldventures.org/), we're extending the Enhanced CPS to provide accurate estimates for every state and congressional district. This follows our successful implementation of local-area microsimulation in the UK, funded by the [Nuffield Foundation](https://www.nuffieldfoundation.org/).

Once complete, the Enhanced CPS will become the default for state-level analysis as well, and PolicyEngine users will be able to analyze the impacts of federal and state policy reforms on:

- Poverty rates by state and congressional district
- Income inequality measures for local areas
- Winners and losers from reforms in specific districts
- Distributional impacts by income decile for each state

### Microcalibrate package

We're developing [`microcalibrate`](https://github.com/PolicyEngine/microcalibrate), a next-generation reweighting package that enhances our current gradient descent approach. This package will offer:

- Faster convergence to calibration targets
- Better preservation of the original survey's covariance structure
- More flexible loss functions for different use cases
- Easier extension to multi-area calibration

### Additional data enhancements

We currently integrate data from the Survey of Consumer Finances (for auto loan interest) and American Community Survey (for housing costs). Future enhancements will expand these integrations:

- **Wealth modeling from SCF**: Comprehensive asset and debt data for modeling asset limits in SNAP, SSI, and other means-tested programs, similar to our [wealth modeling in the UK](https://policyengine.org/uk/research/uk-the-new-policyengine)
- **Consumer Expenditure Survey**: Consumption patterns for modeling sales taxes, carbon pricing, and other consumption-based policies
- **Expanded ACS integration**: Additional geographic and demographic detail for state and local policy analysis

## Using the Enhanced CPS

The Enhanced CPS is now the exclusive dataset for nationwide PolicyEngine US analyses. We've removed the dataset selector to streamline the user experience—the Enhanced CPS automatically powers all federal policy simulations, while state-specific analyses continue to use the standard CPS until our local calibration is complete.

You can access the Enhanced CPS through:

**Web interface**: The Enhanced CPS powers all nationwide calculations at [policyengine.org/us](https://legacy.policyengine.org/us)

**Python package**: Works by default for our `Microsimulation` calls.

**Direct download**: For Python users, the data automatically downloads from our Hugging Face repository when you instantiate a simulation. The files are stored at [`hf://policyengine/policyengine-us-data`](https://huggingface.co/policyengine/policyengine-us-data)

## Technical details

For researchers interested in our methodology:

- **Full technical documentation**: [PolicyEngine US Data documentation](https://policyengine.github.io/policyengine-us-data)
- **Data integration methodology**: [Imputation and fusion techniques](https://policyengine.github.io/policyengine-us-data/methodology#data-fusion)
- **Calibration approach**: [Reweighting methodology](https://policyengine.github.io/policyengine-us-data/methodology#reweighting)
- **Validation results**: [Comparison with administrative data](https://policyengine.github.io/policyengine-us-data/discussion)
- **Implementation code**: [Microimpute package](https://github.com/PolicyEngine/microimpute)
- **Source code**: [Enhanced CPS on GitHub](https://github.com/PolicyEngine/policyengine-us-data/tree/main/policyengine_us_data/datasets/cps)

## Conclusion

The Enhanced CPS represents a major advancement in open-source microsimulation data. By [combining the demographic richness of the Current Population Survey with tax detail from IRS records](https://policyengine.github.io/policyengine-us-data/background) and sophisticated imputation techniques, we've created a dataset that supports comprehensive analysis of both tax and benefit policies.

As we expand to state and local calibration, the Enhanced CPS will enable unprecedented granularity in policy analysis—empowering lawmakers, researchers, and citizens to understand how proposed reforms would affect their communities.

We welcome feedback and collaboration as we continue improving this foundational infrastructure for evidence-based policymaking. For questions or to contribute to development, please visit our [GitHub repositories](https://github.com/PolicyEngine) or [contact us](mailto:hello@policyengine.org).



---

---
# Analysis of individual income tax provisions in the final reconciliation bill
Slug: final-2025-reconciliation-tax
Date: 2025-07-04
Authors: David Trimmer, Pavel Makarchuk
Tags: us, policy, featured, reconciliation
Description: Our simulation projects a reduction in federal revenues of $3.8 trillion from 2026 to 2035 compared to current law.

---

Yesterday, the House of Representatives passed H.R. 1, also known as the “One Big Beautiful Bill Act” (OBBB), after the [Senate](https://www.congress.gov/amendment/119th-congress/senate-amendment/2360) amended and approved it on July 1st. The reconciliation package now heads to President Donald Trump’s desk who is expected to sign the legislation into law. [H.R. 1](https://www.congress.gov/bill/119th-congress/house-bill/1) extends and expands several provisions of the Tax Cuts and Jobs Act of 2017 (TCJA), while adding new individual income tax provisions such as deductions for tips and overtime.

Applying the PolicyEngine microsimulation model to most of these provisions, we find that the bill’s individual income tax provisions — compared to current law in which Tax Cuts and Jobs Act provisions expire after 2025 — would:

- Reduce federal revenues by $3.8 trillion between 2026 and 2035

- Benefit 76% of Americans, while reducing net income for 8% of the population in 2026

- Reduce poverty and deep poverty by 5.5% and 6.1%, respectively in 2026

- Increase the Gini index of inequality by 0.4% in 2026

This report details these results and shows the effects on hypothetical households.

## Income Tax Provisions

While similar to the tax provisions passed by the House of Representatives in May, the final version of the OBBB contains some key differences. In general, the latest bill text makes permanent more tax provisions compared to the bill in May, which implemented temporary boosts throughout the current presidential term. For example, in the bill text from May, the CTC is temporarily boosted to $2,500 before falling to a lower value in 2029. In the latest text, the Child Tax Credit (CTC) is increased to $2,200 and then indexed for inflation thereafter. This shift from temporarily enhancing provisions to permanent increases is also found in the standard deduction provision.

The approved bill also places explicit limits on the tips and overtime income exemptions. In the May draft, both provisions were only accessible to those with less than $160,000 of adjusted gross income. In the final bill text, tips are limited to $25,000 per filer, and the overtime exemption has a cap of $12,500 for single filers and $25,000 for married couples. Each limit then phases down at a 10% rate beginning at $150,000 and $300,000 for single and joint filers, respectively.

The bill versions also treat the state and local tax (SALT) deduction differently. Following a compromise between the House SALT Caucus and Republican leadership, the SALT deduction is set to $40,000 and phased down to $10,000 once adjusted gross income reaches $500,000. This structure was permanent in the May bill text, and each parameter would grow by 1 percent over the budget window in perpetuity. In the final bill, this structure is preserved until 2030, when the SALT cap drops to its current policy value of $10,000.

Compared to the House bill, the final bill also:

- Freezes the first two income tax bracket thresholds from 2025 onwards.

- Requires only one parent to have a valid SSN to claim the CTC (rather than both in the May bill text).

- Resets only the inflation adjustment for the phaseout threshold of the alternative minimum tax (AMT) and increases the phase-out rate to 50%.

- Limits all itemized deductions at the 35% bracket, rather than having a separate limitation at the 32% bracket for the SALT deduction.

- Sets a qualified business income deduction rate of 20% and creates a minimum deduction of $400 for taxpayers with qualified business income of at least $1,000.

- Increases the senior deduction amount to $6,000 and the phaseout rate to 6%.

- Increases the charitable deduction for non-itemizers to $1,000 and $2,000 for joint filers, while also making the provision permanent.

- Increases the maximum match of the Child and Dependent Care Tax Credit and implements a two-tier phase-down structure.

- Excludes 0.5% of a filer’s adjusted gross income from their deductible charitable contributions.

Each of these discussed provisions and all differences between the versions, for all provisions we model, are summarized in Appendix 1. Let’s examine a few household examples to understand the tax provisions’ effect on specific tax units.

## Household impacts

In 2026, when most provisions are active, households would experience a change in net income dependent on their composition and income sources.

### Elderly couple in Texas

An elderly couple with $80,000 in employment income from Texas would see their [net income rise by $2,835](https://legacy.policyengine.org/us/household?reform=87626&focus=householdOutput.netIncome&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54569). While they would benefit from the TCJA extension compared to current law, this couple would also qualify for the additional senior deduction of $12,000 ($6,000 for each elderly member). This paired with the existing additional deduction for senior couples ($3,200) and the extension of the TCJA standard deduction ($32,600 in 2026) prevents this couple from paying any income tax on their first $47,800 of earnings compared to $30,400 under current law.

Figure 1 shows this household’s change in net income over household earnings. Once earnings exceed $30,400, the household begins to see an increase in their net income before plateauing at $47,800. When annual income surpasses $54,500, net income begins to rise again.

**Figure 1: Change in Net Income for an Elderly Couple Between $0 and $200,000 of Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*4f25YJdN_Haep-Qk)

### Single undocumented parent in New York

A single parent in New York with two children and $40,000 of earnings would be in line to benefit from the increased CTC compared to current law. However, due to the new SSN requirement for parents under the Senate bill, if they did not have a valid SSN, their net income would [fall by $2,335](https://legacy.policyengine.org/us/household?reform=87626&focus=householdOutput.netIncome&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54580) as they would become ineligible for the CTC valued at $1,000 per child under current law. The additional loss of $335 stems from their combined personal exemptions and standard deduction under current law exceeding OBBB’s standard deduction by $3,550. As this makes them face the 10% income bracket, their tax liability increases by $355.

Figure 2 shows that their net income falls at any earnings level between $3,000 and $100,000, and the maximum loss occurs at $45,500 earnings.

**Figure 2: Change in Net Income for an Undocumented Single Parent in New York Between $0 and $200,000 Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2912/0*u0PxhTtBOcZmMdW_)

### Single adult in Montana with tip income

A single adult from Montana with $50,000 of salaries including $4,000 from tips would [gain $1,903](https://legacy.policyengine.org/us/household?reform=87626&focus=householdOutput.netIncome&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54621) from the Senate tax provisions. As the filer’s income falls below the tip income exemption cap, they can fully deduct their $4,000 of tipped income from their federal tax return. In addition to also benefitting from the TCJA extensions, Montana ties its standard deduction to the federal amount by statute, resulting in a lower state tax liability of $731 (included in the total benefit).

Figure 3 shows that the filer’s benefit increases with earnings, for earnings above $8,000.

**Figure 3: Change in Net Income for a Single Adult in Montana with Tip Income, Between $0 and $200,000 Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2936/0*-bXd498VQFidVuKe)

### High-income couple with two children in California

For a joint filer with two children in California with $1 million of annual income and $60,000 of itemized deductions across several sources, household net income would [drop by $9,627](https://legacy.policyengine.org/us/household?reform=87626&focus=householdOutput.netIncome&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54592) compared to current law. While this filer would benefit from the extensions of the reduced income tax rates, floor exclusion of charitable contributions, and the $40,000 SALT cap all reduce the tax savings the household would be eligible under current law.

In Figure 4, the filer from California benefits from the OBBB seeing its highest increase in net income near $505,000 of earnings. However, at higher earnings levels, the bill limits their itemized deductions, resulting in increasing net losses at earnings levels above $885,000 (including those beyond the $2 million viewable area in Figure 4).

**Figure 4: Change in Net Income for a Married Couple of Two Children and Several Itemized Deductions Between $0 and $2 Million of Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*PnOhbQrRm8wFFp1k)

Table 1 below summarizes each filer’s characteristics and their change in net income for tax year 2026.

**Table 1: Change in Net Income Based on Household Composition**

|   State    | Marital Status | 65+? | Number of Children | Wages and salaries |  Additional income   |                                  Itemized Deductions                                  | SSN Status | 2026 Net Income Change |
| :--------: | :------------: | :--: | :----------------: | :----------------: | :------------------: | :-----------------------------------------------------------------------------------: | :--------: | :--------------------: |
|   Texas    |    Married     | Yes  |         0          |      $80,000       |         None         |                                         None                                          |   Valid    |        \+$2,835        |
|  New York  |     Single     |  No  |         2          |      $40,000       |         None         |                                         None                                          | Not Valid  |        \-$2,335        |
|  Montana   |     Single     |  No  |         0          |      $46,000       | $4,000 of tip income |                                         None                                          |   Valid    |        \+$1,903        |
| California |    Married     |  No  |         2          |     $1,000,000     |         None         | 10,000 charitable non-cash donations, 30,000 property taxes, 20,000 mortgage interest |   Valid    |        \-$9,627        |

## Microsimulation Results

### Budgetary impact

Using PolicyEngine’s static microsimulation model, we project that the Senate tax provisions of the One Big Beautiful Big Act would cost $3.8 trillion from 2026 to 2035. Additionally, because several proposed changes go into effect this tax year, it would [reduce federal revenues by $63.8 billion](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.budgetaryImpact.overall&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps&household=54592) in 2025.

**Table 2: Annual Federal Revenue Impact of the Income Tax Provisions in the OBBB.**

|     Year      | Federal Revenue Impact in Billions of $ (Static) |
| :-----------: | :----------------------------------------------: |
|     2026      |                      411.1                       |
|     2027      |                      394.5                       |
|     2028      |                      394.2                       |
|     2029      |                      383.7                       |
|     2030      |                      358.9                       |
|     2031      |                      364.8                       |
|     2032      |                      366.2                       |
|     2033      |                      370.1                       |
|     2034      |                      369.7                       |
|     2035      |                      371.4                       |
| **2026-2035** |                   **3,785.0**                    |

### Distributional impact

Our distributional analysis includes the OBBB’s effect on federal taxes, as well as state and local taxes resulting from statutory references to the federal code (e.g., Montana applying the federal standard deduction).

The bill would increase the net income of [76% of U.S. residents](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.winnersAndLosers.incomeDecile&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54592) in 2026. The percentage of U.S. residents would vary by income decile, as the highest income decile would have the highest percentage of residents benefiting at 93.5%, while the lowest would have 33.1% of residents see an increase in their net income. Additionally, 7.7% of the U.S. population would be worse off under the tax provisions in 2026. The reduction of net income for residents can be attributed to the SSN requirements for parents to claim the CTC (mostly affecting lower to middle-income households) and limitations on itemized deductions (mostly affecting higher-income tax units).

**Figure 5: Winners and Losers of the Income Tax Provisions in the OBBB (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*mh1vTI7opHP-XQsL)

In 2026, households in the bottom deciles would gain an average of [$342](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.distributionalImpact.incomeDecile.average&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54592), while those in the top decile would gain an average of $13,231.

**Figure 6: Average Household Impact of the Income Tax Provisions in the OBBB (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*19Jo603gE9K6iCTs)

The bill would increase the net income of the top decile by [3.1%](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.distributionalImpact.incomeDecile.relative&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54592) on average, the largest gain across deciles.

**Figure 7: Average Relative Household Impact of the Income Tax Provisions in the OBBB (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*wz-eg22GXsF1OdlO)

The OBBB tax provisions would reduce [poverty](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.povertyImpact.regular.byAge&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=54592) and [deep poverty](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.povertyImpact.deep.byAge&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps) by 5.5% and 6.1%, respectively. The age group with the largest reduction in poverty would be seniors at 10%, while child poverty would fall by 6.6%, mainly attributable to the increased CTC.

**Figure 8: Poverty Impact of the Income Tax Provisions in the OBBB (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*cp2U8KbQ9fdfftJB)

In terms of [income inequality](https://legacy.policyengine.org/us/policy?reform=87626&focus=policyOutput.inequalityImpact&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps), the income tax provisions would increase the Gini index by 0.4% in 2026. Furthermore, the bill increases the top 1%’s net income by 1.9%, less than the overall 2.6%, reducing their share of net income would fall by 0.2%.

**Figure 9: Inequality Impact of the Senate Tax Provisions in the OBBB (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*vclazXXwGlVASvYQ)

## Conclusion

The individual income tax reforms as part of HR 1 would cost $3.8 trillion over the 2026–2035 budget window. Considering the state and local effects, we project the bill to benefit 76% of American residents and reduce net income for 8% of the population; the top income decile gains most on an absolute and relative basis. HR 1 would reduce poverty by 5.5% in 2026, while increasing the Gini index of inequality by 0.4%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix 1: Summary of Provisions

|                  Individual Provisions                  |                       Current Law (2026)                       |                                   May Bill Text (2026)                                   |                                   Final Bill (2026)                                    |
| :-----------------------------------------------------: | :------------------------------------------------------------: | :--------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------: |
|                        Tax Rates                        |            10%, 15%, 25%, 28%, 33%, 35%, and 39.6%             |                          10%, 12%, 22%, 24%, 32%, 35%, and 37%                           |                         10%, 12%, 22%, 24%, 32%, 35%, and 37%                          |
|                      Tax Brackets                       | Revert to 2017 Thresholds (Indexed for Inflation Since 2017)\* |                   2025 Thresholds (Indexed for Inflation for 2026)[^1]                   | 2025 Thresholds (Indexed for Inflation for 2026; exception for the first two brackets) |
|            Personal and Dependent Exemption             |                            $5,300\*                            |                                         Inactive                                         |                                        Inactive                                        |
|                     CTC Base Amount                     |                             $1,000                             |                        $2,500\*[^2]$2,000 \+ inflation from 2029                         |                                        $2,200\*                                        |
|              CTC Maximum Refundable Amount              |                             $1,000                             |                                         $1,700\*                                         |                                        $1,700\*                                        |
|                   CTC Phase-in Start                    |                             $3,000                             |                                          $2,500                                          |                                         $2,500                                         |
|                   CTC Phase-out Start                   |                        $75,000/$110,000                        |                                    $200,000/$400,000                                     |                                   $200,000/$400,000                                    |
|                 Adult Dependent Credit                  |                            Inactive                            |                                           $500                                           |                                          $500                                          |
|                Standard Deduction Amount                |                        $8,300/$16,600\*                        |                                    $16,150/$32,300\*                                     |                                   $16,300/$32,600\*                                    |
|                    Pease Limitation                     |                             Active                             |                                         Inactive                                         |                                        Inactive                                        |
|        Overall Limitation on Itemized Deduction         |                            Inactive                            | Limit for taxpayers in top bracket (32% for SALT, 35% for all other itemized deductions) |          Limit for taxpayers in top bracket (35% for all itemized deductions)          |
|                  AMT Exemption Amount                   |                       $70,500/$109,700\*                       |                                    $70,300/$109,400\*                                    |                                   $89,400/$139,050\*                                   |
|                   AMT Phase-out Start                   |                      $156,700/$209,000\*                       |                                  $500,000/$1,000,000\*                                   |                                 $500,000/$1,000,000\*                                  |
|                   AMT Phase-out Rate                    |                              25%                               |                                           25%                                            |                                          50%                                           |
|                        QBID Rate                        |                            Inactive                            |                                           23%                                            |                                          20%                                           |
|       Alternative QBID Rate on Business Property        |                            Inactive                            |                                           2.5%                                           |                                          2.5%                                          |
|                 QBID Rate on W-2 Wages                  |                            Inactive                            |                                           50%                                            |                                          50%                                           |
|           Alternative QBID Rate on W-2 Wages            |                            Inactive                            |                                           25%                                            |                                          25%                                           |
|             QBID Limitation Phase-in Amount             |                            Inactive                            |                                           75%                                            |                                          75%                                           |
|              QBID Minimum Deduction Amount              |                            Inactive                            |                                         Inactive                                         |                                          $400                                          |
|                  QBID Phase-out Start                   |                            Inactive                            |                                   $200,300/$400,500\*                                    |                                  $200,300/$400,500\*                                   |
|            Tip income exemption (2025-2028)             |                            Inactive                            |                                          Active                                          |          Active capped at $25,000 Phases out at 10% for AGI over $150k/$300k           |
|          Overtime income exemption (2025-2028)          |                            Inactive                            |                                          Active                                          |                           Active (capped at $12,500/$25,000)                           |
|        Auto loan interest deduction (2025-2028)         |                            Inactive                            |                                Active (capped at $10,000)                                |          Active capped at $10,000 Phases out at 10% for AGI over $150k/$300k           |
|  Additional Standard Deduction for Seniors (2025-2028)  |                            Inactive                            |            Additional $4,000 deduction; 4% phase out beginning at $75k/$150k             |      Additional $6,000 deduction; 6% phase out beginning at $75k/$150k; 2025-2028      |
|         Charitable Deduction for Non-Itemizers          |                            Inactive                            |                                  $150/$300 (2025-2028)                                   |                               $1,000/$2,000 (permanent)                                |
|               Charitable Deduction Floor                |                            Inactive                            |                                         Inactive                                         |                                      0.5% of AGI                                       |
|              Charitable Deduction Ceiling               |                           50% of AGI                           |                                        50% of AGI                                        |                                       60% of AGI                                       |
| Charitable Deduction Ceiling for non-cash contributions |                           30% of AGI                           |                                        30% of AGI                                        |                                       50% of AGI                                       |
|             Child and Dependent Care Credit             |                          Current law                           |                                       Current law                                        | Increases match to 50% for filers under $15k; implements two-tier phase-down structure |

\*Indexed for Inflation

[^1]: The May bill text adjusts the year at which the 35% tax bracket is uprated changing it from 2017 to 2016, thereby raising the bracket threshold higher than previously.

[^2]: In 2029, the maximum value of the CTC would drop as the temporary $500 boost expires. However, since the CTC is adjusted for inflation afterwards using 2024 as the base year, the credit’s value would fall to $2,200 rather than $2,000.



---

---
# Introducing the OBBBA Household Explorer
Slug: introducing-obbba-household-explorer
Date: 2025-07-03
Authors: Max Ghenis, Pavel Makarchuk, Elena Cura
Tags: us, policy, featured, reconciliation
Description: New interactive tool reveals household-level impacts of the One Big Beautiful Bill Act.

---

Following the Senate's July 1st passage of the One Big Beautiful Bill Act (OBBBA), we're launching the [**OBBBA Household Explorer**](../obbba-household-explorer) — an interactive dashboard that shows how this reconciliation bill would affect individual households across America.

[**_Explore Households with our new tool here._**](../obbba-household-explorer)

## What the tool does

The OBBBA Household Explorer allows users to explore the bill’s impacts on over 40,000 representative households from PolicyEngine’s [Enhanced Current Population Survey](https://policyengine.org/us/research/enhanced-cps-beta) (CPS) dataset. This dataset integrates and calibrates multiple data sources using machine learning techniques — the same foundation that powers PolicyEngine’s simulations of policy effects on poverty, inequality, and government budgets, when paired with our comprehensive model of federal, state, and local income tax and benefit programs.

The OBBBA extends provisions of the 2017 Tax Cuts and Jobs Act set to expire at the end of 2025, while introducing new elements including:

- Tax exemptions for tip and overtime income

- Modifications to the Child Tax Credit

- Changes to the SALT deduction cap

- Cuts to SNAP, Medicaid, and Affordable Care Act Premium Tax Credits

By capturing these and more as of 2026, we show the breadth of the bills’ impacts on households that collectively represent the nation.

## Examples

To illustrate the tool’s capabilities, let’s explore two households. While both are couples around 60 years old, varying attributes and analysis configurations shows how results vary.

### Couple in Montana, Senate bill against current law

First consider household **#66994**, a couple in Montana, ages 53 and 61, with $214,850 income.

![Screenshot of OBBBA Household Explorer interface showing household selection screen with filters set to Random Shuffle method and household #66994 selected](https://cdn-images-1.medium.com/max/3200/0*femrvCx4TOJ3ea_3)

Comparing the Senate bill to current law, they would gain $13,577, paying $11,831 less in federal tax and $1,746 less in state tax.

![Financial impact breakdown table showing: Market Income $214,850, Federal Taxes -$11,831 (-24.5%), State Taxes -$1,746 (-16.0%), Benefits $0 (0.0%), Net Income $13,577 (+4.8%)](https://cdn-images-1.medium.com/max/3200/0*_xZhF7_TUE_RT5Eh)

That $13,577 gain results from reforms to the tax brackets, standard deduction, qualified business income deduction, and overtime income exemption, less a $2,332 loss from the repeal of exemptions.

![Waterfall chart titled "Impact of Senate OBBBA Against Current Law by Provision on Net Income" showing baseline net income of $118,311, increases from tax rate reform ($4,754), standard deduction reform ($4,515), QBID reform ($3,125), overtime income exempt ($3,514), offset by exemption reform (-$2,332), resulting in final net income of $131,888](https://cdn-images-1.medium.com/max/3200/0*42RcvRHuC_8TJdD2)

We can also select state taxes to explore the $1,746 gain, finding that it results from the standard deduction reform. Beginning in 2024, Montana adopted the federal standard deduction by statute. PolicyEngine's [TAXSIM](http://taxsim.nber.org)-validated tax model captures these interactions between federal and state policy.

![Waterfall chart titled "Impact of Senate OBBBA Against Current Law by Provision on State Taxes" showing baseline state taxes of $10,620, with a $1,746 reduction from standard deduction reform, resulting in final state taxes of $8,874](https://cdn-images-1.medium.com/max/3200/0*PmdWaNAceYNyVgMW)

### Couple in Georgia, House bill against current policy

Next let's consider household **#43826**, a Georgia couple with $71,820 income.

![Screenshot of OBBBA Household Explorer interface showing household attributes for Georgia couple, including state GA, household size 2, marital status married, and market income $71,820](https://cdn-images-1.medium.com/max/3200/0*0tcLOTIau2vDApZe)

This household would pay $1,023 less in federal tax, while losing $1,971 in benefits, for a net loss of $947.

![Financial impact breakdown table showing: Baseline Value $71,820, Absolute Change -$947, % Change -1.4%, with details showing Market Income $71,820, Federal Taxes -$1,023 (-24.5%), State Taxes $0 (-10.0%), Benefits -$1,971 (-18.0%), Net Income -$947 (-1.4%)](https://cdn-images-1.medium.com/max/3200/0*038Eb7mHdWpDA3Kg)

Like the Montana couple, this couple benefits from the standard deduction reform and overtime exemption.

![Waterfall chart titled "Impact of House OBBBA Against Current Policy by Provision on Federal Taxes" showing baseline federal taxes of $4,176, with reductions from standard deduction reform ($521) and overtime income exempt ($502), resulting in final federal taxes of $3,153](https://cdn-images-1.medium.com/max/3200/0*y8DvE7OXLVAZvd7R)

However, they lose $1,971 in Affordable Care Act Premium Tax Credits, whose enhancements (which are part of current policy) expire at the end of 2025.

![Waterfall chart titled "Impact of House OBBBA Against Current Policy by Provision on Benefits" showing baseline benefits of $7,981, with a $1,971 reduction from ACA Enhanced Subsidies Reform, resulting in final benefits of $6,010](https://cdn-images-1.medium.com/max/3200/0*QZQGbe-JhdRw7ifM)

PolicyEngine counts premium tax credits as benefits since they are subsidized premiums throughout the year. Our rules engine calculates these credits to the dollar. Additionally, our rules engine calculates the dollar impacts of households modeled to lose SNAP and Medicaid access, per projections from the Congressional Budget Office.

## Key features

To go beyond these examples (and household **#118944** for this report’s cover image), you can leverage the tool’s full set of features.

### 🎲 Quick exploration

The **Get Random Household** button lets you instantly explore impacts across America’s diverse population. Each click reveals a different household, weighted by population representation — allowing rapid exploration of how impacts vary by circumstance.

### 📊 Comprehensive analysis

The tool analyzes impacts on:

- **Federal taxes**: Changes from tax rate adjustments, deductions, and credits

- **State taxes**: How federal changes affect state income tax liability

- **Benefits**: Changes to programs like SNAP, Medicaid, and ACA subsidies

- **Net income**: Combined effect on take-home pay

### 🔍 Detailed filtering

Find households similar to your situation by:

- State

- Income level

- Marital status

- Number of dependents

- Age of household head

- Household weight (population representation)

### 📈 Provision-by-provision breakdown

Interactive waterfall charts show exactly how each reform component contributes to the total impact:

- Tax rate changes

- Standard deduction modifications

- Child Tax Credit changes

- SALT cap adjustments

- AMT reforms

- Tip and overtime exemptions

- Over a dozen other provisions

### Multiple baselines and versions

Users can compare impacts against:

- **Current law baseline**: What happens if TCJA provisions expire

- **Current policy baseline**: What happens if TCJA provisions are extended

And analyze both:

- **House version**: Passed May 22, 2025

- **Senate version**: Passed July 1, 2025

### Representative data you can trust

The tool uses PolicyEngine’s Enhanced CPS dataset, which represents the full diversity of American households. This allows exploration of impacts across different:

- Geographic regions

- Income levels

- Family structures

- Employment situations

- Benefit receipt patterns

Whether examining a restaurant worker benefiting from tip exemptions, a family affected by Child Tax Credit changes, or a household navigating SALT cap modifications, the tool provides detailed impact analysis.

## Get started

The OBBBA Household Explorer is available now at [**policyengine.org/us/obbba-household-explorer**](../obbba-household-explorer).

Start exploring by:

1. Using the **Get Random Household** button to quickly survey diverse impacts

1. Applying filters to find households similar to yours

1. Selecting specific household IDs for detailed analysis

1. Finding “interesting cases” — households with the largest positive or negative impacts

As Congress continues to debate the final form of this legislation, the OBBBA Household Explorer provides a window into how these policy changes would affect real American households.



---

---
# The 2025 American Family Act
Slug: american-family-act-2025
Date: 2025-06-16
Authors: David Trimmer
Tags: us, policy, featured, child-tax-credit
Description: The Child Tax Credit expansion would cost the federal government $2.5 trillion over ten years and lower child poverty by 25%.

---

On April 9th, a group of Democratic Senators and House members [reintroduced the American Family Act](https://www.bennet.senate.gov/2025/04/09/bennet-booker-warnock-cortez-masto-durbin-wyden-senate-colleagues-reintroduce-the-american-family-act-to-expand-the-child-tax-credit/) (AFA). [The bill](https://www.bennet.senate.gov/wp-content/uploads/2025/04/American-Family-Act-2025.pdf#page=8), similar to previous versions of the AFA and Kamala Harris’s Child Tax Credit (CTC) proposal during the 2024 presidential election, would expand the credit’s size and reach for tax year 2025 and beyond.

We at PolicyEngine have updated our model to reflect the American Family Act’s proposed changes and analyzed its effect on the United States and its residents.

Key results (static):

- Costs $2.5 trillion from 2025 to 2034

- Benefits 42% of Americans in 2025 and 47% in 2026

- Lowers the Supplemental Poverty Measure by 11.4% and child poverty by 25.2%

- Reduces the Gini index of income inequality by 2.4%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps)._

## History of Democrats’ Push to Expand the CTC

In the past decade, Democratic lawmakers have supported several proposals to expand the Child Tax Credit. Senator Michael Bennet [released his first iteration](https://www.bennet.senate.gov/2017/10/26/press-releases-id-143425d3-e065-d861-babf-1b9c90cebf54/) of the American Family Act in 2017, which would make the CTC fully refundable and increase the credit to $3,600 for children under 6 and $3,000 for kids 6 to 17. In 2021, President Joe Biden signed the American Rescue Plan Act (ARPA), which included the AFA for the 2021 tax year only. Senator Michael Bennet, alongside Rep. Rosa DeLauro in the House of Representatives, [reintroduced the AFA in 2023](https://delauro.house.gov/sites/evo-subsites/delauro.house.gov/files/evo-media-document/fact-sheet-american-family-act-of-2023.pdf), with similar parameters passed in ARPA. During her presidential campaign, Vice President Kamala Harris introduced a CTC proposal that mirrored the ARPA expansion while including a baby bonus provision that increases the credit amount for families with newborns. Neither the 2023 AFA nor Kamala Harris’ proposal was implemented, leaving the CTC at its current maximum of $2,000 under the Tax Cuts and Jobs Act of 2017. In 2026, the CTC is scheduled to revert to its pre-TCJA value of $1,000.

## The American Family Act’s Provisions

The 2025 American Family Act makes several changes to the Child Tax Credit (CTC). While the 2025 AFA shares a structure with previous versions and [Harris’s CTC plan](https://policyengine.org/us/research/harris-ctc) and the [American Rescue Plan Act CTC](https://policyengine.org/us/research/restoration-of-the-american-rescue-plan-acts-expanded-child-tax-credit), it offers larger benefits than these other CTC proposals.

Under the 2025 AFA, children under the age of six are eligible for a maximum credit of $4,320 ($360 per month), while children aged 6 to 17 would receive $3,600 ($300 per month). The 2025 AFA also contains a baby bonus where parents of newborns can claim $2,400 for the first month instead of the standard $360 monthly credit for young children. This means families with newborn children would receive a total of $6,360 during the baby’s first year. Additionally, the 2025 AFA extends the $500 nonrefundable adult dependent credit beyond its scheduled 2026 expiration date, preserving a benefit that was originally enacted in the Tax Cuts and Jobs Act of 2017.

Like the previous proposals, the 2025 AFA implements a phase-out structure with two tiers. The CTC would initially begin to decrease at $112,500 adjusted gross income ($150,000 joint). At this level, the credit’s value drops by $50 for each $1,000 of income above the threshold until reaching $2,000 for each child claimed. At $300,000 AGI ($400,000 joint), the CTC would continue to decrease at the same rate until it reaches zero. The adult dependent credit only begins its phase-out at the second threshold, where it also reduces by $50 for each $1,000 over the limit. Under the AFA, the adult dependent credit phases out simultaneously with the CTC, unlike under the TCJA, where the CTC and the adult dependent credit values are combined and then phased out. Lastly, the American Family Act eliminates the TCJA provision that requires children to have a valid Social Security Number to receive the credit; under the AFA, children with an individual taxpayer identification number (ITIN) would now be eligible.

Table 1 summarizes the key parameters of the 2025 AFA compared against the previous version of the bill and Kamala Harris’s CTC proposal.

**Table 1: 2025 American Family Act, 2023 American Family Act, and Kamala Harris’s CTC Proposal Parameters**

|             Parameters             | Current Policy (2025) |  Current Law (2026)   |      ARPA (2021)      |       2025 AFA        |       2023 AFA        |      Harris CTC       |
| :--------------------------------: | :-------------------: | :-------------------: | :-------------------: | :-------------------: | :-------------------: | :-------------------: |
|           **Baby Bonus**           |          $0           |          $0           |          $0           |        $2,040         |        $1,700         |        $2,400         |
|     **Credit Value<br>(0-5)**      |        $2,000         |        $1,000         |        $3,600         |        $4,320         |        $3,600         |        $3,600         |
|     **Credit Value<br>(6-17)**     |        $2,000         |        $1,000         |        $3,000         |        $3,600         |        $3,000         |        $3,000         |
| **Initial Thresholds (HoH/Joint)** |          N/A          |          N/A          | $75,000/<br>$150,000  | $112,500/<br>$150,000 | $112,500/<br>$150,000 | $75,000/<br>$150,000  |
|       **Second Thresholds**        | $200,000/<br>$400,000 | $200,000/<br>$400,000 | $200,000/<br>$400,000 | $300,000/<br>$400,000 | $300,000/<br>$400,000 | $200,000/<br>$400,000 |
|        **Phaseout Amount**         |          $50          |          $50          |          $50          |          $50          |          $50          |          $50          |
|       **Phaseout Increment**       |        $1,000         |        $1,000         |        $1,000         |        $1,000         |        $1,000         |        $1,000         |

## Household Impacts

Since the 2025 AFA makes the CTC fully refundable, households with no household earnings would now be eligible for the entire credit, raising their net income. For example, a single parent with a newborn and no income currently receives no CTC. However, with the fully refundable CTC and baby bonus component, their [net income would increase by $6,360](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=82820&region=us&timePeriod=2028&baseline=2&dataset=enhanced_cps&household=53124), the highest gain of any household with one child.

Middle-income families with qualifying children will also see a boost to their net income. For example, a married couple with two children (ages 4 and 8) with $80,000 of annual earnings [would gain $3,920](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=82820&region=us&timePeriod=2028&baseline=2&dataset=enhanced_cps&household=53129). Their new CTC allotment would reach $7,920, increasing from $4,000 today.

As income rises, households will be subject to the initial phase-out. A single parent with one older child and $135,000 of earnings will receive $2,450 from the CTC, [resulting in a gain of $450 to their net income](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=82820&region=us&timePeriod=2028&baseline=2&dataset=enhanced_cps&household=53141). As this household’s income exceeds the lower threshold of $112,500 for head of household filers, the CTC value is reduced, falling by $1,150 from its $3,600 maximum. If this family’s income fell between $150,000 and $300,000, they would receive $2,000 as the initial threshold cannot reduce the benefit lower than $2,000 per child.

However, because the current CTC begins to fully phase out at $200,000 for head of household filers, this household with $250,000 of annual earnings would see a [$2,000 increase to their net income](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=82820&region=us&timePeriod=2028&baseline=2&dataset=enhanced_cps&household=53143) as the AFA raises the higher phaseout threshold to $300,000. Once household income reaches $340,000, the CTC fully phases out, and their change in net income falls back to $0.

The AFA leaves some married filers with both adult and child dependents worse off: consider a couple with earnings of $425,000, an adult dependent, and an 8-year-old child. As the AFA phases out — the adult dependent credit and CTC simultaneously — joint filers see a decrease in net income until the entirety of the CTC and adult dependent credit value phases out, as under current law. For this household, net income begins to fall at $400,000 before plateauing at [a $500 decrease](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=82820&region=us&timePeriod=2028&baseline=2&dataset=enhanced_cps&household=54174). Once the current CTC is phased out at $440,000, net income begins to rise as the remaining $500 adult dependent credit begins to phase out. At $450,000, net income stabilizes at $0. The AFA’s increased head of household phase-out threshold prevents unmarried filers from paying higher tax.

Figure 1 displays the value of the CTC under the AFA compared to current law, while Figure 2 shows the change in net income for a single parent with one older child as annual earnings vary.

**Figure 1: CTC Value of 2025 AFA for a Single Parent with One Child Age 6–17 Compared to Current Law Based on Household Earnings**

![](https://cdn-images-1.medium.com/max/3076/0*eekdiXs1iHa4jeXA)

**Figure 2: Change in Net Income of 2025 AFA for a Single Parent with One Child Age 6–17 Based on Household Earnings**

![](https://cdn-images-1.medium.com/max/2000/0*vS5mshr0GOE530CD)

Table 2 summarizes the change in net income for each household discussed above.

**Table 2: Change in Net Income by Household Composition**

|                 Household Composition                  | Change in Net Income |
| :----------------------------------------------------: | :------------------: |
|                  Single, Newborn, $0                   |        $6,360        |
|        Married, Two Children (4 and 8), $80,000        |        $3,920        |
|           Single, One Older Child, $135,000            |         $450         |
|           Single, One Older Child, $150,000            |          $0          |
|           Single, One Older Child, $250,000            |        $2,000        |
|           Single, One Older Child, $340,000            |          $0          |
| Married, One Older Child and Adult Dependent, $425,000 |        \-$500        |

## Microsimulation Results

Using PolicyEngine’s static microsimulation model, we project that the American Family Act will cost the federal government [$167.2 billion in 2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps). Over a ten-year period (2025–2034), the legislation will reduce federal tax revenues by $2.5 trillion.

**Table 3: Annual Federal Budgetary Impact of the AFA**

|     Year      | Federal Budgetary Impact in billions of $ (Static) |
| :-----------: | :------------------------------------------------: |
|     2025      |                       167.2                        |
|     2026      |                       230.0                        |
|     2027      |                       239.5                        |
|     2028      |                       249.3                        |
|     2029      |                       249.0                        |
|     2030      |                       258.7                        |
|     2031      |                       268.0                        |
|     2032      |                       267.7                        |
|     2033      |                       277.0                        |
|     2034      |                       286.7                        |
| **2025-2034** |                    **2,493.1**                     |

Because the TCJA’s CTC provisions expire for tax year 2026, the cost of the AFA increases as the CTC’s value is projected to fall to $1,000 compared to its current maximum of $2,000. In addition to the federal budgetary impact, the AFA will reduce state revenues by $35 billion over ten years due to interactions with the CTC provisions.

The AFA will [raise the net income of 42.1% of American residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps) in 2025, including 25% of those in the top income decile and 54% of those in the fifth decile. Additionally, 1.7% of people in the top income decile would see their net incomes decline due to the adult dependent phasing out independently of the CTC rather than as one combined value. In 2026, when the TCJA expires, the AFA will increase the net income of [46.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=82820&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps) of people, while leaving no households worse off, since the adult dependent credit expires with the TCJA.

**Figure 2: Winners of the AFA (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*WD5Kayp8qBK35MiO)

The AFA is projected to provide an average benefit of [$1,115 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps). Families in the fifth decile would see the highest average benefit at $1,491, while the top decile would see the lowest gain of $524, due to the credit phaseouts. When examining average benefit by percent of net income, the [first decile receives the largest gain](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps), then decreases by each subsequent decile. In 2026, the average household benefit [increases to $1,540](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=82820&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps).

**Figure 3: Average Benefit of the AFA by Decile (2025 and 2026)**

![](https://cdn-images-1.medium.com/max/2000/0*ge7UUoqD7bSVBD-M)

The child tax credit expansion would [reduce poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps) (as defined by the Supplemental Poverty Measure) by 11.4% and child poverty by 25.2% in 2025. Deep poverty and deep child poverty would [fall by 12.2% and 29.9%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps), respectively. These poverty statistics vary by less than six percentage points across years in the 10-year budget window.

**Figure 4: Poverty Reduction Under the AFA (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*Pp-AjRIDH8FppVqL)

Finally, the AFA will reduce the United States’ Gini index of inequality [by 2.4%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=82820&region=us&timePeriod=2025&baseline=2&dataset=enhanced_cps). The bill would also reduce the top 10% and 1%’s share of net income by 0.4% and 1.0%, respectively. In 2026, the Gini index is [projected to fall by 2.8%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=82820&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps).

## Conclusion

The American Family Act will expand the Child Tax Credit by making the credit fully refundable and increasing its size for each eligible child. Over the next ten years, the AFA will reduce federal revenues by $2.5 trillion, assuming no behavioral responses. The proposed legislation will benefit 42% of the population in 2025 and provide an average benefit of $1,115 per household, varying by income decile. The AFA is projected to reduce child poverty by 25% and deep child poverty by 30% in 2025. Beginning in 2026, TCJA’s expiration results in a higher counterfactual cost and impact (poverty, inequality, and population share affected) than in 2025.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.



---

---
# Childcare programmes in PolicyEngine UK
Slug: uk-childcare-report
Date: 2025-06-06
Authors: Vahid Ahmadi
Tags: uk, benefit, featured
Description: This report explains how PolicyEngine models childcare programmes in the UK.

---

This report provides an analysis of childcare programmes in the UK, examining how they are modelled in PolicyEngine UK and their distributional impacts across different household types and income groups. We link each programme component to its implementation in the codebase to make this report a technical reference for understanding how childcare calculations are performed within the PolicyEngine UK microsimulation model. The report covers five major childcare programmes:

- **[Tax-Free Childcare](https://www.gov.uk/tax-free-childcare?step-by-step-nav=d78aeaf6-1747-4d72-9619-f16efb4dd89d)**: The UK government adds £2 for every £8 parents pay into a childcare account, up to £2,000 per child per year (£4,000 if the child is disabled).
- **[Extended childcare entitlement](https://www.gov.uk/check-eligible-free-childcare-if-youre-working?step-by-step-nav=f517cd57-3c18-4bb9-aa8b-1b907e279bf9)**: The UK government funds 15 to 30 hours of free childcare per week for working parents in England, depending on the child’s age.
- **[Universal childcare entitlement](https://www.gov.uk/help-with-childcare-costs/free-childcare-and-education-for-3-to-4-year-olds?step-by-step-nav=f237ec8e-e82c-4ffa-8fba-2a88a739783b)**: The UK government provides 15 free hours of childcare per week for all 3- and 4-year-olds in England.
- **[Targeted childcare entitlement](https://www.gov.uk/help-with-childcare-costs/free-childcare-2-year-olds-claim-benefits?step-by-step-nav=f237ec8e-e82c-4ffa-8fba-2a88a739783b)**: The UK government offers 15 free hours per week for 2-year-olds in households receiving certain benefits.
- **[Care to Learn](https://www.gov.uk/care-to-learn)**: The UK government covers weekly childcare costs for parents under 20 in England who are in education or training.

For each programme, we provide details on eligibility criteria, implementation, and calculation methods. For a complete assessment of eligibility criteria, please refer to the official government sources linked for each programme throughout this report. Finally, we explain our calibration methodology to ensure the model accurately reflects real-world participation and expenditure patterns.

Table 1 compares PolicyEngine’s estimates of the budgetary impact of the main childcare programmes with government-reported figures which are reported by fiscal year.

**Table 1. Budgetary estimates for childcare programmes (PolicyEngine vs government)**

| Programme           | PolicyEngine estimate 2025 (£bn)                                                                                                                               | PolicyEngine estimate 2024 (£bn)                                                                                                                               | Government report 2024 (£bn)                                                                                  | Relative error in estimate 2024 (%) |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | ----------------------------------- |
| Tax-Free Childcare  | [0.7](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82972)                          | [0.6](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83892)                          | [0.6](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024)                  | -0.7                                |
| Extended childcare  | [4.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80613&uk_local_areas_beta=true) | [2.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83897&uk_local_areas_beta=true) | [2.5](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | 3.8                                 |
| Universal childcare | [1.8](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82975)                          | [1.6](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83887)                          | [1.7](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | -5.9                                |
| Targeted childcare  | [0.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=82974)                          | [0.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83888)                          | [0.6](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | -10.0                               |

Table 2 compares PolicyEngine’s estimates of programme caseloads for the main childcare programmes with those reported by the government.

**Table 2. Caseload estimates for childcare programmes**

| Programme           | PolicyEngine estimate 2025 (thousands)                                       | PolicyEngine estimate 2024 (thousands)                                       | Government report 2024 (thousands)                                                                            | Relative error in estimate 2024 (%) |
| ------------------- | ---------------------------------------------------------------------------- | ---------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | ----------------------------------- |
| Tax-Free Childcare  | [740](https://gist.github.com/vahid-ahmadi/02e479aaf8cd151036915597097a81b7) | [715](https://gist.github.com/vahid-ahmadi/02e479aaf8cd151036915597097a81b7) | [660](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024)                  | 8.3                                 |
| Extended childcare  | [970](https://gist.github.com/vahid-ahmadi/bf773434c3539f9ab0bf178ddbbe503d) | [710](https://gist.github.com/vahid-ahmadi/bf773434c3539f9ab0bf178ddbbe503d) | [740](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | -4.1                                |
| Universal childcare | [520](https://gist.github.com/vahid-ahmadi/ce71205cbd3a84db282cc452aa746e4d) | [460](https://gist.github.com/vahid-ahmadi/ce71205cbd3a84db282cc452aa746e4d) | [490](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | -6.1                                |
| Targeted childcare  | [100](https://gist.github.com/vahid-ahmadi/184b2cda84c0f87d68498317696a434f) | [115](https://gist.github.com/vahid-ahmadi/184b2cda84c0f87d68498317696a434f) | [130](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | -11.5                               |

## Tax-Free Childcare (TFC)

The UK government, through HM Revenue and Customs (HMRC), runs the [Tax-Free Childcare](https://www.gov.uk/tax-free-childcare?step-by-step-nav=d78aeaf6-1747-4d72-9619-f16efb4dd89d) scheme that provides funding for working families with childcare expenses. For every £8 paid into a childcare account, the government adds £2. HMRC contributes up to £2,000 per year for each eligible child. For disabled children, this allocation increases to £4,000 per year.

### Eligibility requirements

#### Age criteria

The government provides standard childcare funding until 1 September after the child's [11th birthday](https://www.legislation.gov.uk/ukpga/2014/28/notes/division/6/4/1). For disabled children who receive disability benefits or are certified as blind/severely sight-impaired, funding continues until 1 September following their [16th birthday](https://www.legislation.gov.uk/ukpga/2014/28/notes/division/6/4/1). We [determine](https://github.com/PolicyEngine/policyengine-uk/blob/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/hmrc/tax_free_childcare/conditions/tax_free_childcare_child_age_eligible.py) eligibility by checking each child’s age and disability status.

#### Income requirements

The UK limits the programme to households where each partner earns—between employment and self-employment income—at least these amounts over a 3-month period, depending on their age, as shown in Table 3.

**Table 3. Minimum earnings thresholds by age group for TFC programme**

| Age group            | Minimum earnings |
| :------------------- | :--------------- |
| 21+                  | £2,379           |
| 18-20                | £1,788           |
| Under 18/Apprentices | £1,331           |

In addition to the earnings requirement, the maximum adjusted net income allowed is [£100,000](https://www.legislation.gov.uk/uksi/2015/448/regulation/15#commentary-key-e27c923eee152accd495af8425536e29) per year for each partner. We [evaluate](https://github.com/PolicyEngine/policyengine-uk/blob/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/hmrc/tax_free_childcare/conditions/tax_free_childcare_meets_income_requirements.py) if the parents meet the income criteria, examining both minimum and maximum thresholds.

#### Work status

Eligible individuals [must be](https://github.com/PolicyEngine/policyengine-uk/blob/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/hmrc/tax_free_childcare/conditions/tax_free_childcare_work_condition.py) either employed, self-employed, or on qualifying leave (sick, annual, or shared parental leave). Non-working partners may still qualify if they receive any of these benefits: incapacity benefit, severe disablement allowance, carer's allowance, or contribution-based employment and support allowance.

#### Programme interactions

Households can use Tax-Free Childcare alongside the extended and universal childcare entitlements, but they cannot [combine](https://www.legislation.gov.uk/ukdsi/2015/9780111127063) it with Working Tax Credit, Child Tax Credit, Universal Credit, or childcare vouchers. We [check](https://github.com/PolicyEngine/policyengine-uk/blob/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/hmrc/tax_free_childcare/conditions/tax_free_childcare_program_eligible.py) whether the household receives any of these benefits to determine eligibility for Tax-Free Childcare.

Finally, for eligible households, we [calculate](https://github.com/PolicyEngine/policyengine-uk/tree/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/hmrc/tax_free_childcare) the government contribution.

### Economic analysis

#### Gross salary vs take-home pay at the household level

To show the impact of TFC on household finances, we start with an example of a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=73038&region=uk&timePeriod=2025&baseline=76821&household=51616) with one child aged 3. These households become eligible for TFC when the earner is aged 21 or over and earning at least [£9,516](https://www.gov.uk/tax-free-childcare) annually. The benefit continues until £100,000, where eligibility ends, creating a decline in take-home pay. This creates a divergence between those receiving and not receiving TFC at higher income levels, as shown in Figure 1.

**. Household net income with and without Tax-Free Childcare**

[Chart: . Household net income with and without Tax-Free Childcare]

This decline at £100,000 creates an earnings dead zone, which is the width of the area in the chart where the sudden loss of TFC benefits affects household finances. At this threshold, families experience a cliff effect as they transition from receiving childcare support to losing it entirely.

#### Budgetary and distributional impacts

PolicyEngine [projects](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82972) that the UK government will spend £0.7 billion on Tax-Free Childcare in 2025. Figure 2 shows the distributional impact of this programme:

[Chart: type: bar]

Figure 3 shows our estimation of [the number of children](https://gist.github.com/vahid-ahmadi/02e479aaf8cd151036915597097a81b7) in each household income decile receiving Tax-Free Childcare in 2025.

[Chart: type: bar]

## Extended childcare entitlement

The UK government, through the Department for Education (DfE), runs the [extended childcare](https://www.gov.uk/check-eligible-free-childcare-if-youre-working?step-by-step-nav=f517cd57-3c18-4bb9-aa8b-1b907e279bf9) programme, offering different weekly hours based on the child’s age. Children aged 9 months to 2 years receive 15 hours of free childcare per week, while those aged 3 to 4 receive 30 hours per week.

### Eligibility requirements

#### Work status

The UK government [requires](https://www.legislation.gov.uk/uksi/2022/1134/regulation/11A) single parents to be working to qualify for extended childcare. For couples, both partners must be in employment, unless one partner receives a qualifying disability benefit—such as incapacity benefit, severe disablement allowance, carer’s allowance, limited capability for work benefit, or contribution-based employment and support allowance.

#### Income requirements

The UK restricts eligibility to households where each partner earns, through employment or self-employment, at least a minimum amount over a 3-month period, depending on their age, as shown in Table 4.

**Table 4. Minimum earnings thresholds by age group for extended childcare entitlement**

| Age group            | Minimum earnings |
| :------------------- | :--------------- |
| 21+                  | £2,379           |
| 18-20                | £1,788           |
| Under 18/Apprentices | £1,331           |

These thresholds are based on working 16 hours per week at the applicable national minimum wage. Adjusted net income must also not exceed [£100,000](https://www.legislation.gov.uk/uksi/2015/448/regulation/15#commentary-key-e27c923eee152accd495af8425536e29) per year.

#### Entitlement calculation

We [determine](https://github.com/PolicyEngine/policyengine-uk/tree/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/dfe/extended_childcare_entitlement) the weekly hours based on the child's age and apply the funding rates to calculate the total annual entitlement value. Table 5 shows examples of entitlement calculation based on age and funding rates.

**Table 5. Examples of annual childcare entitlement by child age**

| Child age | Weekly hours | Funding rate (2025)                                                       | Annual entitlement (2025) |
| :-------- | :----------- | :------------------------------------------------------------------------ | :------------------------ |
| 2         | 15           | [£8.3](https://commonslibrary.parliament.uk/research-briefings/cbp-8052/) | £4,719.6                  |
| 3         | 30           | [£5.9](https://commonslibrary.parliament.uk/research-briefings/cbp-8052/) | £6,703.2                  |

### Economic analysis

#### Gross salary vs take-home pay at the household level

To show the impact of extended childcare entitlement on household finances, we start with an example of a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.pythonReproducibility&reform=1&region=uk&timePeriod=2025&baseline=84515&household=53312) with one child aged 3. These households become eligible for extended childcare when earning at least [£9,516 annually](https://www.gov.uk/free-childcare-if-working/check-youre-eligible) for those aged 21 or over. The benefit continues until £100,000, where eligibility ends, creating a decline in take-home pay. This creates a divergence between those receiving and not receiving extended childcare at higher income levels, as shown in Figure 5.

**. Household net income with and without extended childcare**

[Chart: . Household net income with and without extended childcare]

#### Budgetary and distributional impacts

PolicyEngine [projects](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80613) that the UK government will spend £4.4 billion on extended childcare entitlement in 2025. Figure 6 shows the distributional impact of this programme:

[Chart: type: bar]

Figure 7 shows our estimation of [the number of children](https://gist.github.com/vahid-ahmadi/bf773434c3539f9ab0bf178ddbbe503d) in each household income decile receiving extended childcare entitlement in 2025.

[Chart: type: bar]

## Universal childcare entitlement

The UK government, through the Department for Education (DfE), provides free childcare for all 3- to 4-year-olds in England under the [universal childcare programme](https://www.gov.uk/help-with-childcare-costs/free-childcare-and-education-for-3-to-4-year-olds?step-by-step-nav=f237ec8e-e82c-4ffa-8fba-2a88a739783b). Each eligible child receives up to 570 hours per year, delivered as 15 hours per week over 38 weeks through an approved childcare provider. This programme applies to England only.

### Eligibility requirements

The UK government [grants](https://github.com/PolicyEngine/policyengine-uk/tree/20ed1a9d77a3307b3e2bc4a0986ec606ab7fead9/policyengine_uk/variables/gov/dfe/universal_childcare_entitlement) universal childcare entitlement to children who meet residence and age conditions. The child must live in England, be at least [3 years](https://www.legislation.gov.uk/uksi/2016/1257/part/4/made) old, and not yet reach compulsory [school age](https://www.legislation.gov.uk/ukpga/2006/21/section/19).

We determine the weekly hours based on the child's age and apply the funding rates to calculate the total annual entitlement value.

### Economic analysis

#### Gross salary vs take-home pay at the household level

To show how the universal childcare entitlement affects household finances, we examine a [single-earner household](https://legacy.policyengine.org/uk/household?reform=1&focus=householdOutput.earnings&region=uk&timePeriod=2025&baseline=82975&household=53312) with one child aged 3. The household cannot [claim](https://www.childcarechoices.gov.uk/combining-schemes) both universal childcare and Tax-Free Childcare at the same time. Figure 9 shows how net income changes with the head of household’s earnings under each option.

**. Household net income with and without universal childcare**

[Chart: . Household net income with and without universal childcare]

#### Budgetary and distributional impacts

PolicyEngine [projects](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82975) that the UK government will spend £1.8 billion on universal childcare entitlement in 2025. Figure 10 shows the distributional impact of this programme:

[Chart: type: bar]

Figure 11 shows our estimation of [the number of children](https://gist.github.com/vahid-ahmadi/ce71205cbd3a84db282cc452aa746e4d) in each household income decile receiving universal childcare entitlement in 2025.

[Chart: type: bar]

## Targeted childcare entitlement

The UK government, through the Department for Education (DfE), provides the [targeted childcare entitlement](https://www.gov.uk/help-with-childcare-costs/free-childcare-2-year-olds-claim-benefits?step-by-step-nav=f237ec8e-e82c-4ffa-8fba-2a88a739783b), offering 15 hours of free childcare per week for eligible [2-year-old](https://www.legislation.gov.uk/uksi/2014/2147/regulation/3/made) children in England. This entitlement totals up to [570](https://www.legislation.gov.uk/uksi/2014/2147/regulation/4/made) hours per year, delivered across 38 weeks.

### Eligibility requirements

The UK government [grants](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/targeted_childcare_entitlement/targeted_childcare_entitlement_eligible.py) targeted childcare entitlement to households that receive one or more qualifying benefits. These include Income Support, income-based Jobseeker’s Allowance (JSA), income-related Employment and Support Allowance (ESA), and the guaranteed element of Pension Credit. Households may also [qualify](https://www.gov.uk/help-with-childcare-costs/free-childcare-2-year-olds) if they receive Universal Credit and have earned income below £15,400 a year after tax (excluding benefit payments), or if they receive Child Tax Credit (but not Working Tax Credit) with gross annual income below £16,190.

### Entitlement calculation

The UK government [provides](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/targeted_childcare_entitlement/targeted_childcare_entitlement.py) up to 570 hours of free childcare per year for eligible children, delivered as 15 hours per week over 38 weeks. Table 6 shows how the annual entitlement varies based on eligibility, age, and funding rates.

**Table 6. Examples of annual childcare entitlement by age and eligibility**

| Child age | Eligible | Hours entitlement | Hourly rate (2025) | Annual entitlement (2025) |
| :-------- | :------- | :---------------- | :----------------- | :------------------------ |
| 1         | No       | 0                 | £11.2              | £0                        |
| 2         | Yes      | 570               | £8.3               | £4,719.6                  |
| 3         | No       | 0                 | £5.9               | £0                        |

### Economic analysis

#### Gross salary vs take-home pay at the household level

To show the impact of targeted childcare entitlement on household finances, we start with an example of a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=1&region=uk&timePeriod=2025&baseline=82974&household=53310) with one child aged 2. Figure 13 shows household net income based on head employment income.

**. Household net income with and without targeted childcare**

[Chart: . Household net income with and without targeted childcare]

#### Budgetary and distributional impacts

PolicyEngine [projects](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=82974) that the UK government will spend £0.5 billion on targeted childcare entitlement in 2025. Figure 14 shows the distributional impact of this programme:

[Chart: type: bar]

Figure 15 shows our estimation of [the number of children](https://gist.github.com/vahid-ahmadi/184b2cda84c0f87d68498317696a434f) in each household income decile receiving targeted childcare entitlement in 2025.

[Chart: type: bar]

## Care to learn

The UK government, through the Department for Education (DfE), runs the [Care to Learn](https://www.gov.uk/care-to-learn) scheme in England to support young parents under the age of 20 who continue their education while caring for children. The programme covers childcare costs during education or training, offering up to [£180](https://researchbriefings.files.parliament.uk/documents/CBP-8054/CBP-8054.pdf#page=43) per week outside London and up to [£195](https://researchbriefings.files.parliament.uk/documents/CBP-8054/CBP-8054.pdf#page=43) per week in London.

### Eligibility requirements

The UK government [provides](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/care_to_learn/care_to_learn.py) Care to Learn support to young parents who meet specific eligibility criteria. To qualify, applicants must be under [20 years](https://publications.parliament.uk/pa/cm200809/cmbills/055/en/09055x-c.htm#:~:text=160,childcare%20when%20securing%20these%20grants) old, not enrolled in higher education or an apprenticeship, and living in England.

### Entitlement calculation

We [determine](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/care_to_learn/care_to_learn.py) whether the applicant lives in London and applies the weekly rate based on their location. Table 7 shows the annual entitlement in 2025 by location.

**Table 7. Annual childcare entitlement (Care to Learn) by location**

| Location       | Weekly rate | Annual entitlement (52 weeks) |
| -------------- | ----------- | ----------------------------- |
| London         | £195        | £10,140                       |
| Outside London | £180        | £9,360                        |

Due to the absence of relevant cases in the Family Resources Survey, we are unable to estimate the economic impact of this programme. Nevertheless, the programme is implemented and can be used to calculate benefits in the household section of PolicyEngine.

## Data calibration

To align our model with real-world participation and expenditure patterns, we calibrate our enhanced [FRS (Family Resources Survey)](https://www.gov.uk/government/collections/family-resources-survey--2) dataset by adding take-up rates to match official spending and caseload statistics for childcare programmes.

### Target data

We target both aggregate spending and caseload figures for each programme in 2024, as shown in Table 8.

**Table 8. Calibration targets for spending and caseloads (2024)**

| Programme           | Spending target (£ billions)                                                                                  | Caseload target (thousands)                                                                                   |
| :------------------ | :------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------ |
| Tax-Free Childcare  | [0.6](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024)                  | [660](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024)                  |
| Extended childcare  | [2.5](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | [740](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) |
| Targeted childcare  | [0.6](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | [130](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) |
| Universal childcare | [1.7](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | [490](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) |

### Optimisation process

We [calibrate](https://github.com/PolicyEngine/policyengine-uk-data/blob/1334f28bca35c78efc342423ca64b53774e92dc1/policyengine_uk_data/datasets/frs/childcare/takeup_rate.py) the model using an optimisation process to identify take-up rates that align with our targets. We define an objective function that quantifies the difference between simulated and target values for both spending and caseload. We then minimise this function to find the optimal take-up rates, ensuring the model reflects official statistics.

### Integration into the UK model

We [integrate](https://github.com/PolicyEngine/policyengine-uk-data/blob/1334f28bca35c78efc342423ca64b53774e92dc1/policyengine_uk_data/datasets/frs/enhanced_frs.py) the optimised take-up rates into the Enhanced FRS dataset class. The model currently applies the take-up rates shown in Table 9.

**Table 9. Childcare programme take-up rates in PolicyEngine**

| Programme           | Take-up Rate |
| :------------------ | :----------- |
| Tax-Free Childcare  | 0.58         |
| Extended childcare  | 0.81         |
| Targeted childcare  | 0.60         |
| Universal childcare | 0.56         |

We use these rates to randomly assign benefit units to each childcare programme, generating representative aggregate statistics. Based on the 2023 Childcare and Early Years [Survey](https://explore-education-statistics.service.gov.uk/find-statistics/childcare-and-early-years-survey-of-parents/2023) of Parents, the government reports that around 63% of children aged 0 to 4 used formal childcare.

To reach the target metrics for extended childcare, we [impute](https://github.com/PolicyEngine/policyengine-uk-data/blob/1334f28bca35c78efc342423ca64b53774e92dc1/policyengine_uk_data/datasets/frs/enhanced_frs.py) hours claimed among households simulated to take up the program. We model the distribution of claimed hours using a normal distribution with a mean of 15.0 and a standard deviation of 5.0, bounded from 0 (exclusive) to 40 (inclusive).

## Conclusion

This report explains how UK childcare programmes are modelled in PolicyEngine and linked to the codebase. Each programme’s rules are implemented through defined eligibility and entitlement conditions. We also present the impacts on household finances and income distribution. We invite you to explore the economic impacts of these childcare programmes using the PolicyEngine interface.



---

---
# Manager's Amendment to H.R.1 - The One Big Beautiful Bill Act
Slug: managers-amendment-to-hr1
Date: 2025-05-24
Authors: Pavel Makarchuk, David Trimmer, Max Ghenis
Tags: us, policy, featured, reconciliation
Description: We project that individual provisions in the manager's amendment will cost $22 billion over the budget window.

---

Wednesday night, the House of Representatives voted 215–214 to approve [H.R.1 — One Big Beautiful Bill Act](https://www.congress.gov/bill/119th-congress/house-bill/1) (OBBBA). The bill extends and enhances several provisions of the Tax Cuts and Jobs Act of 2017 (TCJA), while adding new individual income tax provisions such as exemptions for tip and overtime income and a deduction for auto loan interest.

Included in the passed bill by the Rules Committee is a ["Manager's Amendment,"](https://punchbowl.news/wp-content/uploads/managers-amendment.pdf) which revises three tax provisions in the [Budget Committee's version](https://budget.house.gov/imo/media/doc/one_big_beautiful_bill_act_-_full_bill_text.pdf) of the OBBBA.

These reforms include:

1. Increasing the cap on state and local tax deductions (the SALT cap)

1. Reducing the exemption and phase-out start for the alternative minimum tax (AMT) by changing its indexing year

1. Further limiting itemized deductions for high-income filers

In this report, we demonstrate the impact of the manager's amendment through hypothetical households and simulate its net effects on the U.S. against a baseline of the Budget Committee's OBBBA. We find that the changes will:

- Decrease revenues by $22.0 billion from 2026 to 2035

- Raise net income for 3.1% of Americans in 2026, while reducing net income for 3.3%

- Lower the Gini index of income inequality by 0.15%

_View the impact of the Manager's Amendment on [the economy](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps) and [your household](https://legacy.policyengine.org/us/household?focus=intro&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps)._

## Manager's Amendment Provisions

The Ways and Means Committee introduced the [initial OBBBA tax provisions](https://waysandmeans.house.gov/wp-content/uploads/2025/05/SMITMO_017_xml.pdf) on May 12th. That bill extended TCJA provisions like lower rates, a higher standard deduction, and an expanded Child Tax Credit (except for a new Social Security Number requirement), while introducing new provisions such as exemptions for tip and overtime income. It also revised three TCJA policies: the SALT cap, the AMT, and the limitation on itemized deductions.

The manager's amendment further revised these policies, while also revising other policies such as Medicaid work requirements and Inflation Reduction Act tax credits. Table 1 shows each of those policies in 2026 under current law (TCJA expiration), TCJA, the Ways and Means OBBBA, and the House-approved OBBBA (post-manager's amendment).

**Table 1: Features of Individual Income Tax Provisions Revised in the Manager's Amendment (2026)**

| Policy                         | Feature             | Current law                                                                                                                          | TCJA                        | Ways & Means OBBBA                                                                                   | House OBBBA                                                                                                                                                                                                                                        |
| ------------------------------ | ------------------- | ------------------------------------------------------------------------------------------------------------------------------------ | --------------------------- | ---------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| SALT cap                       | Maximum amount      | Uncapped                                                                                                                             | $10,000                     | $30,000                                                                                              | $40,400, rising 1% per year                                                                                                                                                                                                                        |
| SALT cap                       | Phase-out threshold | N/A                                                                                                                                  | N/A                         | $400,000                                                                                             | $505,000, rising 1% per year                                                                                                                                                                                                                       |
| SALT cap                       | Phase-out rate      | N/A                                                                                                                                  | N/A                         | 20%                                                                                                  | 30%                                                                                                                                                                                                                                                |
| SALT cap                       | Floor               | N/A                                                                                                                                  | $10,000                     | $10,000                                                                                              | $10,000                                                                                                                                                                                                                                            |
| AMT                            | Exemption amount    | $70,600 ($109,800 joint)                                                                                                             | $89,400 ($139,000 joint)    | $89,400 ($139,000 joint)                                                                             | $70,300 ($109,400 joint)                                                                                                                                                                                                                           |
| AMT                            | Exemption phase-out | $156,900 ($209,200 joint)                                                                                                            | $635,900 ($1,271,900 joint) | $635,900 ($1,271,900 joint)                                                                          | $500,000 ($1,000,000 joint)                                                                                                                                                                                                                        |
| Itemized deductions limitation |                     | "Pease limitation": The smaller of:<br>a) 3% of AGI exceeding $261,500 ($313,800 joint)<br>or<br>b) 80% of total itemized deductions | N/A                         | 2/37 of the lesser of itemized deduction or taxable income excess over the top tax bracket threshold | The sum of<br>a) 5/37 of the lesser of the SALT deduction and taxable income excess over the top tax bracket threshold<br>and<br>b) 2/37 of the lesser of itemized deduction less SALT or taxable income excess over the top tax bracket threshold |

In sum, the manager's amendment:

1. **Expanded the SALT deduction** between the [Ways and Means SALT cap](https://policyengine.org/us/research/ways-and-means-salt-cap) and the [SALT Caucus's proposed SALT cap](https://policyengine.org/us/research/salt-caucus-62k-cap)

1. **Reduced the AMT exemption amount and exemption phase-out start** by changing the base year from 2017 to 2025 for inflation indexing

1. **Further limits itemized deductions** by effectively treating the SALT deduction as if the filer is in the 32% bracket, for those in the top (37%) bracket

## Comparison of Discussed SALT Caps

Under current law, the state and local tax deduction is set to become uncapped starting in 2026 after being limited to $10,000 under the Tax Cuts and Jobs Act. The initial draft of the OBBBA capped the SALT deduction at $30,000, and once adjusted gross income reaches $400,000, the limitation phases down at a 20% rate until reaching $10,000 (the maximum, floor, and phase-out threshold are all halved for married couples filing separately).[^1]

[^1]: The Ways and Means bill also includes provisions that are meant to limit workarounds that states have implemented to avoid the SALT cap. We did not model these provisions in this analysis.

Under the new compromise, households could claim up to $40,000 in SALT ($20,000 for separate filers) in 2025. Unlike the Ways and Means bill, the new SALT increase would start in 2025 rather than 2026, thus increasing the current cap of $10,000 this year. The deduction phases out at a 30% rate for filers with adjusted gross income above $500,000. The SALT cap and phase-out threshold grow by 1% each year until 2033, at which point the values would remain constant. Figure 1 displays the different SALT caps for single filers under the initial bill and the amended version.

**Figure 1: Maximum SALT Deduction under the Initial W&M SALT Cap and the Manager's Amendment for a Single Filer in 2026**

![](https://cdn-images-1.medium.com/max/3200/0*WWW4GvxooQQxEr1-)

In addition to these changes, the manager's amendment increased the overall limitation on itemized deductions to 5/37 of the lesser of a household's total SALT deduction or the difference between their taxable income and the top income bracket's threshold. The 2/37 limitation remains for all other itemized deductions. Furthermore, the manager's amendment sets 2025 as the base year for alternative minimum tax inflation adjustments, lowering the AMT exemption amount and phase-out start. Each change will affect a household's eligible SALT deduction and [effective SALT cap](https://policyengine.org/us/research/introducing-salternative).

## Household Impacts

The changes to the SALT deduction, overall limitation on itemized deductions, and AMT would affect households that itemize their deductions and have state and local tax expenses greater than the initial limit in the Ways and Means bill. To understand this, let's examine a single adult in Texas making $500,000, with $40,000 in property taxes[^2] and $50,000 in other itemized deductions (e.g., charitable contributions or mortgage interest). Under the manager's amendment, they would see an [increase in their net income of $10,640](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps&household=53694) in 2026, compared to the Ways and Means OBBBA. Figure 2 displays how this filer's net income would change as their household earnings vary.

[^2]: While Texas lacks a state income tax, filers can also deduct their sales tax, either reported or estimated from IRS tables. PolicyEngine calculates state sales tax from these tables, which adds between $634 and $2,677 to this filer's SALT. Combined with the $40,000 property taxes, they will exceed the $40,400 SALT cap for 2026 at all income levels.

**Figure 2: Effect of OBBBA Manager's Amendment on Net Income for a Single Filer with $40k in Property Taxes and $50k in Other Deductions (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*WSC2Y1Dt0V6CV9by)

Let's dissect this segment by segment, starting at $90,000 earnings where the amendment begins to increase their net income (lower their taxes). As shown in Figure 3, this results from a $10,400 larger SALT deduction.

**Figure 3: Effect of OBBBA Manager's Amendment on SALT Deduction for a Single Filer with $40k in Property Taxes and $50k in Other Deductions (2026)**

![](https://cdn-images-1.medium.com/max/2728/1*eMqhfEzfaTXNCgsN8fF02w.png)

At $155,000 earnings, their net income begins to decrease, and then after the change reaches its lowest point at $277,500 earnings, it begins rising again. Figure 4 shows that these result from being subjected to AMT due to the smaller AMT exemption, and then the AMT effect phasing out.

**Figure 4: Effect of OBBBA Manager's Amendment on AMT for a Single Filer with $40k in Property Taxes and $50k in other deductions (2026)**

![](https://cdn-images-1.medium.com/max/2632/1*dcAgTGnGsc6GmoTyuUCANg.png)

At $400,000 earnings, the filer's SALT deduction rises as the previous version began phasing out at that threshold, while the manager amendment pushed the phaseout to $505,000 in 2026. Once the household's SALT deduction begins to phase out, net income falls until reaching $0 at $606,000 of earnings. At $645,000, change in net income falls below zero due to the overall limitation on itemized deductions. Figure 5 shows these in the context of total itemized deductions.

**Figure 5: Effect of OBBBA Manager's Amendment on Itemized Deductions for a Single Filer with $50k in Other Deductions (2026)**

![](https://cdn-images-1.medium.com/max/2680/1*5sTi9ZNwmXQ_D-1oSNajdQ.png)

The amendment would affect the single adult's marginal tax rates (MTRs) at various earnings levels, as shown in Figure 3. Because the SALT cap no longer phases out at the $400,000 income level, the filer's MTR falls by 7 percentage points between $400,000 and $497,500. It then rises by 10.5 percentage points for earnings between $505,000 and $605,000. Finally, the SALT limitation increases MTRs by 4.7 percentage points and then lowers it at income levels where the previous would have taken effect.

**Figure 6: Change in Marginal Tax Rates Based on Household Earnings for a Single Filer with $40,000+ in SALT and $50,000 in Other Deductions (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*49qYWPaLw8XHY9z0)

Due to the increase of the later SALT cap phase-out threshold, the total MTR increases to 47.9% for earnings between $562,000 to $605,000, its highest level above benefit phase-out income ranges.

**Figure 7: Marginal Tax Rates for Single Filer Under the pre- and post-manager's Amendment OBBBA (2026)**

![](https://cdn-images-1.medium.com/max/3180/0*PYEnclmxwDy_LScu)

In jurisdictions with state and local income taxes, the SALT cap phase-out results in higher MTRs. For example, Figure 8 shows that this same filer would face a 59.8% MTR in California when earning between $522,500 and $605,000.

**Figure 8: Marginal Tax Rates of a Single Filer in California Under the pre- and post-manager's Amendment OBBBA (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*kife4O3RHxgdiExI)

The highest MTR we identified as a result of the amendment occurs in New York City, where the filer would face a 63.1% rate on earnings between $505,000 and $522,500 (see Figure 9).

**Figure 9: Marginal Tax Rates of a Single Filer in New York City Under the pre- and post-manager's amendment OBBBA (2026)**

![](https://cdn-images-1.medium.com/max/3168/0*OgQ-9k_9F2XKwgWF)

Filers with different income levels and amounts of itemized deductions would experience varying changes to their net income. Table 2 shows the change in net income for several household examples in Texas.

**Table 2: Change in Net Income for Various Single Adults in Texas Based on Itemized Deductions and Household Earnings**

| Property tax | Other itemized deductions | $100k  | $250k | $500k   | $1M   |
| ------------ | ------------------------- | ------ | ----- | ------- | ----- |
| $0           | $0                        | $0     | $0    | $0      | $0    |
| $20k         | $0                        | $0     | $0    | $2,472  | $0    |
| $40k         | $0                        | $2,288 | $503  | $8,488  | $0    |
| $0           | $50k                      | $0     | $0    | $0      | -$96  |
| $20k         | $50k                      | $0     | $0    | $4,624  | -$300 |
| $40k         | $50k                      | $1,197 | -$193 | $10,640 | -$300 |

Filers in other situations, such as with high capital gains, could face larger impacts from the amendment due to the alternative minimum tax. We do not illustrate hypothetical households with these characteristics, but include them in our microsimulation analysis.

## Microsimulation Results

Using PolicyEngine's static microsimulation model, we project that the manager's amendment to the One Big Beautiful Big Act would [increase the cost of the tax package by $22.0 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps) over the next ten years (2026–2035).[^3] Additionally, because the proposed changes go into effect in 2025, it would [increase federal revenues by $3.0 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=85113&region=us&timePeriod=2025&baseline=85188&dataset=enhanced_cps) this year.

[^3]: We project that state tax revenues would increase by $0.2bn over the budget window (2026-2035).

**Table 3: Annual Federal Revenue Impact of Individual Provisions of the Manager's Amendment to the One Big Beautiful Bill Act**

| Year          | Federal Revenue Impact in billions of $ (Static) |
| ------------- | ------------------------------------------------ |
| 2026          | -1.8                                             |
| 2027          | -3.3                                             |
| 2028          | -2.5                                             |
| 2029          | -5.0                                             |
| 2030          | -4.8                                             |
| 2031          | -2.9                                             |
| 2032          | -2.2                                             |
| 2033          | -1.1                                             |
| 2034          | -0.5                                             |
| 2035          | 1.0                                              |
| **2026-2035** | **-22.0**                                        |

The SALT cap would [increase the net income of 3.1% of US residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps) in 2026 and decrease it for 3.3% of the population. Of individuals in the top income decile, 30% would experience a reduction in net income and 9% would experience a gain.

**Figure 10: Winners and Losers of the Manager's Amendment to the One Big Beautiful Big Act (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*_U1Fx1HUtpJEQ5D8)

Households in the top decile see their tax liability fall by [$347 on average](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps). The second income decile would see an average gain of $218 in 2026, potentially due to some high income filers in households with low- or negative-income filers.

**Figure 11: Average Impact of the Manager's Amendment to the One Big Beautiful Big Act (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*53N1NUVv92mC7TXB)

When it comes to inequality, the SALT Caucus proposal would, in 2026, [lower the Gini index](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=85113&region=us&timePeriod=2026&baseline=85188&dataset=enhanced_cps) by 0.15%, and lower the top 1%'s share of net income by 0.03%

## Conclusion

The Manager's Amendment to H.R.1 — The One Big Beautiful Bill Act modifies three tax provisions originally outlined in the Budget Committee's version:

1. Expands the SALT cap from $30,000 to $40,400 in 2026

1. Reduces the alternative minimum tax exemption amounts and phase-out thresholds by changing the base year to 2025

1. Implements a higher limitation on the SALT deductions than other itemized expenses for high-income filers.

These changes would reduce federal revenues by $22.0 billion over the ten-year window when utilizing static modeling. In 2026, 3.1% of Americans would experience an increased net income and while 3.3% see their after-tax income reduce. Additionally, the Gini index of income inequality would fall by 0.15% and while the top 1%'s share of net income decreases by 0.03%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Baseline Details

Our baseline includes most individual provisions in the Ways and Means bill, as shown in Table 4.

**Table 4: Individual Tax Provisions Current Law vs. W&M Bill**

| Individual Provisions                                 | Current Law (2026)                                             | W&M Bill (2026)                                  | In PolicyEngine Simulation |
| ----------------------------------------------------- | -------------------------------------------------------------- | ------------------------------------------------ | -------------------------- |
| Tax Rates                                             | 10%, 15%, 25%, 28%, 33%, 35%, and 39.6%                        | 10%, 12%, 22%, 24%, 32%, 35%, and 37%            | ✅                         |
| Tax Brackets                                          | Revert to 2017 Thresholds (Indexed for Inflation Since 2017)\* | 2025 Thresholds (Indexed for Inflation for 2026) | ✅                         |
| Personal and Dependent Exemption                      | $5,300\*                                                       | $0                                               | ✅                         |
| CTC Base Amount                                       | $1,000                                                         | $2,000                                           | ✅                         |
| CTC Temporary Boost (2025-2028)                       | Inactive                                                       | $500                                             | ✅                         |
| CTC Maximum Refundable Amount                         | $1,000                                                         | $1,700\*                                         | ✅                         |
| CTC Phase-in Start                                    | $3,000                                                         | $2,500                                           | ✅                         |
| CTC Phase-out Start                                   | $75,000/$110,000                                               | $200,000/$400,000                                | ✅                         |
| Adult Dependent Credit                                | $0                                                             | $500                                             | ✅                         |
| Standard Deduction Amount                             | $8,300/$16,600\*                                               | $16,150/$32,300\*                                | ✅                         |
| Estate Tax Exemption                                  | ~$6,790,000                                                    | $15,000,000                                      | ✖️                         |
| Mortgage Interest Deduction Cap                       | $1,000,000                                                     | $750,000                                         | ✖️                         |
| Casualty Expense Deduction                            | Active                                                         | Inactive                                         | ✖️                         |
| Pease                                                 | Active                                                         | Inactive                                         | ✅                         |
| Overall Limitation on Itemized Deduction              | Inactive                                                       | Active                                           | ✅                         |
| AMT Exemption Amount                                  | $70,500/$109,700\*                                             | $89,400/$139,050\*                               | ✅                         |
| AMT Phase-out Start                                   | $156,700/$209,000\*                                            | $635,900/$1,271,850\*                            | ✅                         |
| QBID Rate                                             | Inactive                                                       | 23%                                              | ✅                         |
| Alternative QBID Rate on Business Property            | Inactive                                                       | 2.5%                                             | ✅                         |
| QBID Rate on W-2 Wages                                | Inactive                                                       | 50%                                              | ✅                         |
| Alternative QBID Rate on W-2 Wages                    | Inactive                                                       | 25%                                              | ✅                         |
| QBID Limitation Phase-in Amount                       | Inactive                                                       | 75%                                              | ✅                         |
| QBID Phase-out Start                                  | Inactive                                                       | $200,300/$400,500\*                              | ✅                         |
| Tip income exemption (2025-2028)                      | Inactive                                                       | Active                                           | ✅                         |
| Overtime income exemption (2025-2028)                 | Inactive                                                       | Active                                           | ✅                         |
| Auto loan interest deduction (2025-2028)              | Inactive                                                       | Active                                           | ✅                         |
| Additional Standard Deduction for Seniors (2025-2028) | Inactive                                                       | Active                                           | ✅                         |
| Charitable Deduction for Non-Itemizers (2025-2028)    | Inactive                                                       | Active                                           | ✅                         |

\*Indexed for Inflation



---

---
# Montana Reduces Top Income Tax Rate and Expands EITC
Slug: montana-tax-cuts-2026
Date: 2025-05-22
Authors: David Trimmer
Tags: us, featured, us-mt
Description: Montana's latest individual income tax changes will lower state revenues by $245 million and raise net income for an estimated 77% of residents in 2027.

---

[On April 28, 2025](https://news.mt.gov/Governors-Office/Governor_Gianforte_Celebrates_Largest_Income_Tax_Cut_in_State-_History#:~:text=House%20Bill%20337%20lowers%20the,tax%20credit%20for%20hardworking%20Montanans.), Governor Greg Gianforte (R-MT) [signed House Bill 337](https://bills.legmt.gov/#/laws/bill/2/LC1716?open_tab=bill), a bill that amends Montana's individual income tax code. HB337 reduces the state's top income tax rate from 5.9% to 5.65% in 2026 and further to 5.4% in 2027. It also raises the income threshold for the lower tax bracket for all filing statuses over two years. Additionally, the bill increases the state's Earned Income Tax Credit (EITC) from 10% to 20% of the federal EITC, beginning in 2026.

We at PolicyEngine have updated our model to reflect these changes and analyzed their effects on the state of Montana and its residents.

Key results in 2027:

- Costs the state $245 million

- Benefits 77% of Montana residents

- Lowers the Supplemental Poverty Measure by 0.8% and child poverty by 3.2%

- Raises the Gini index of income inequality by 0.16%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=mt&timePeriod=2027&baseline=82949) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=2&region=mt&timePeriod=2027&baseline=82949)._

## Montana's Recent Income Tax Reforms

Montana has reformed its individual income tax policy in a series of bills beginning in 2021:

1. [Senate Bill 159 (2021)](https://archive.legmt.gov/bills/2021/billpdf/SB0159.pdf) lowered the state's top marginal rate from 6.9% to 6.75% beginning with tax year 2022, but left the seven-bracket structure intact.

1. [Senate Bill 399 (2021)](https://archive.legmt.gov/bills/2021/billpdf/SB0399.pdf) collapsed those seven brackets into two: 4.7% on the first $20,500 of Montana taxable income ($41,000 for joint filers) and 6.5% above that. It also tied the state tax base to federal taxable income instead of creating its own taxable income concept based on federal adjusted gross income, repealing some state-specific deductions.

1. [Senate Bill 121(2023)](https://archive.legmt.gov/bills/2023/BillPdf/SB0121.pdf) lowered the top rate to 5.9%, effective tax year 2024, and increased the state's EITC match from 3% to 10%.

## House Bill 337's Tax Provisions

The reforms passed in House Bill 337 will continue to lower the tax liability for most Montana residents. As shown in Table 1, the bill lowers the state's top income tax rate to 5.65% in 2026 and 5.4% in 2027. The bill also raises the lower bracket thresholds over two years and doubles Montana's EITC from 10% to a 20% match of the federal credit.

**Table 1: Montana's Individual Income Tax Parameters Before and After Passage of HB337 (2026 and 2027)**

| Parameter               | Filing Status            | 2026 (pre-HB377) | 2026 (post-HB377) | 2027 (pre-HB377) | 2027 (post-HB377) |
| ----------------------- | ------------------------ | ---------------- | ----------------- | ---------------- | ----------------- |
| Top Income Tax Rate     | All                      | 5.9%             | 5.65%             | 5.9%             | 5.4%              |
| Lower Bracket Threshold | Head of household        | $31,800          | $72,500           | $32,500          | $97,500           |
| Lower Bracket Threshold | Single & Separate        | $21,200          | $47,500           | $21,700          | $65,000           |
| Lower Bracket Threshold | Joint & Surviving Spouse | $42,300          | $95,000           | $43,300          | $130,000          |
| EITC Match              | All                      | 10%              | 20%               | 10%              | 20%               |

## Household Impacts

As the tax package comprises several components, different household compositions will see varying impacts to their net income. Let's examine a few examples.

For a single adult with no children and $10,000 of earnings, the tax provisions increase their net income [by $69 in 2026](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53241) and [$68 in 2027](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53566), solely from the doubled EITC match.

A single parent of two kids with an annual income of $50,000 will see a [$252 increase to their net income](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53576) due to House Bill 337: $179 from the expanded EITC, and $73 from the lower bracket threshold. In 2027, their net income [rises by $266](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53577), with $205 from the EITC and $61 in reduced state income taxes. Figures 1 and 2 show the change in net income for this household as earnings rise for 2026 and 2027, respectively.

A married couple with no dependents and $200,000 of earnings will see the largest change in net income of the examined households. As their income exceeds the eligible range for the EITC, they only benefit from the reduction of Montana's top income tax rate and the expansion of the lower tax bracket thresholds. In 2026, their [tax savings total $853](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53586); in 2027, their [liability drops by $1,306](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=mt&timePeriod=2026&baseline=82949&household=53590).

**Table 2: Change in Net Income Based on Household Composition**

| Household Composition          | 2026 Net Income Change | 2027 Net Income Change |
| ------------------------------ | ---------------------- | ---------------------- |
| Single, No Children, $10,000   | $66                    | $68                    |
| Single, Two Children, $50,000  | $252                   | $266                   |
| Married, No Children, $200,000 | $853                   | $1,306                 |

**Figure 1: Change in Net Income for a Single Adult with Two Children Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*FcRTn9M4-99KSy_Z)

**Figure 2: Change in Net Income for a Single Adult with Two Children Based on Household Earnings (2027)**

![](https://cdn-images-1.medium.com/max/2000/0*jh8QZqUhkYtSJ-7-)

A single parent with two kids initially sees an increase in their net income solely from the increased EITC. Once the credit reaches the plateau, the family's net income is raised by $730 in 2026 and $746 in 2027. Once the credit phases down, their net income falls. After the EITC is fully phased out, the household benefits only from the income tax bracket and rate changes, lowering their net income further as earnings grow.

## Statewide Impacts 2026

For tax year 2026, Montana's latest income tax changes will [reduce state revenues by $167.7 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=mt&timePeriod=2026&baseline=82949), according to PolicyEngine's static modeling based on the Current Population Survey.

The tax changes will [raise the net income of 75.9% of residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=mt&timePeriod=2026&baseline=82949) in Montana. The percentage of residents in each income decile who are net beneficiaries will vary. For example, 14% of residents in the lowest income decile will see their net income increase, while all residents in the top two deciles will see a gain.

**Figure 3: Winners of Montana's Income Tax Package by Decile for 2026**

![](https://cdn-images-1.medium.com/max/2000/1*39scSjSHATzhlt02bLACmA.png)

Montana's new tax package will provide an [average benefit of $318 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=mt&timePeriod=2026&baseline=82949) in 2026, ranging from $16 in the bottom income decile to $1,033 in the top decile (as defined by the nationwide income distribution).

**Figure 4: Average Benefit of Montana's Income Tax Changes by Decile for 2026**

![](https://cdn-images-1.medium.com/max/2000/1*PQrfC3BSFz3B0HO_ElrHRg.png)

We project the tax changes to [reduce poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=2&region=mt&timePeriod=2026&baseline=82949) (using the Supplemental Poverty Measure) by 0.4%, while lowering child poverty by 1.9%. The individual income tax reforms will have [no impact on deep poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=2&region=mt&timePeriod=2026&baseline=82949).

The state's Gini index of inequality [will increase by 0.05%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=mt&timePeriod=2026&baseline=82949), while the top 1%'s share of total net income will fall by 0.06%

## Statewide Impacts for 2027

In 2027, Montana's income tax changes as part of House Bill 337 will [lower the state's revenues by $244.7 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=mt&timePeriod=2027&baseline=82949), using static modeling.

Additionally, 76.7% of Montana residents will see [an increase in their net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=mt&timePeriod=2027&baseline=82949). As in 2026, the percentage of residents who are better off under the reform will vary by income decile. In the lowest decile, 14% of residents are net beneficiaries, while 100% of Montanans in the three highest deciles will see their net incomes rise.

**Figure 5: Winners of Montana's Income Tax Package by Decile for 2027**

![](https://cdn-images-1.medium.com/max/2000/1*B-YVYsZ5cacRqn4dOcK6Mg.png)

House Bill 337's provisions are projected to provide an average benefit of [$456 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=mt&timePeriod=2027&baseline=82949) in 2027. This will range from $17 in the bottom income decile to $1,784 in the tenth decile.

**Figure 6: Average Benefit of Montana's Income Tax Changes by Decile for 2027**

![](https://cdn-images-1.medium.com/max/2000/1*_axBsS8FXEeqVD6_nc_8pQ.png)

Montana's individual income tax changes will have the following effects on poverty and inequality in 2027:

- [Lower the SPM](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=2&region=mt&timePeriod=2027&baseline=82949) by 0.8% and child poverty by 3.2%,

- Have [no effect](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=2&region=mt&timePeriod=2027&baseline=82949&household=53576) on deep poverty,

- Raise the Gini index of inequality [by 0.16%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=mt&timePeriod=2027&baseline=82949), and the top 1%'s share of net income by 0.05%

## Conclusion

Montana's individual tax reforms, as part of House Bill 337, will lower the state's top marginal tax rate, increase the income thresholds for the bottom bracket, and double the state's match to the federal EITC. The budgetary effect of these reforms will lower state revenues by $168 million in 2026 and $245 million in 2027. Between 76% and 77% of residents will benefit each year, with the average household benefit totaling $318 in 2026, before increasing to $456 in 2027. The net benefits will vary based on family income, but households in the top decile will receive the largest average absolute gain in [2026](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=mt&timePeriod=2026&baseline=82949) and [2027](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=mt&timePeriod=2027&baseline=82949). When all provisions are active in 2027, poverty in the state will fall by 0.8% while income inequality will rise by 0.16%, as measured by the Gini index.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.



---

---
# The SALT Caucus's Proposed Cap
Slug: salt-caucus-62k-cap
Date: 2025-05-15
Authors: David Trimmer
Tags: us, featured, reconciliation
Description: We project that replacing the SALT cap approved by the Ways and Means Committee with the SALT Caucus proposal would cost $497 billion over the budget window.

---

[In our previous report](https://policyengine.org/us/research/ways-and-means-salt-cap), we simulated the SALT cap set in “The One, Big, Beautiful Bill,” which phases down a $30,000 cap to $10,000 for filers with income above $400,000. While the Ways and Means Committee approved the bill yesterday, [The Hill reports](https://thehill.com/business/5295825-salt-deduction-cap-increase-debate/) that SALT Caucus members have pushed to raise the cap to $62,000 ($124,000 for married filers), adjusted for inflation, unlike the bill.

Utilizing our baseline of the tax reforms in the Ways and Means bill (see Appendix A), we analyze how the SALT Caucus’s proposal would affect American households and the U.S. economy.

Key results (static):

- Increases the cost of the tax bill by $497 billion from 2026 to 2035

- Raises net income for 3.7% of Americans in 2026

- Lowers the Supplemental Poverty Measure by less than 0.001%

- Increases the Gini index of income inequality by 0.2%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps)._

## Comparison of SALT Caps

Under current law, the state and local tax deduction is set to become uncapped starting in 2026 after being limited to $10,000 under the Tax Cuts and Jobs Act. Under the BBB, the SALT deduction would be capped at $30,000, and once adjusted gross income reaches $400,000, the limitation phases down at a 20% rate until reaching $10,000 (the maximum, floor, and phase-out threshold are all halved for married filing separately filers).[^1]

[^1]: The Ways and Means bill also includes provisions that are meant to limit workarounds that states have implemented to avoid the SALT cap. We did not model these provisions in this analysis.

Under the SALT Caucus’s preferred limit, single filers could claim up to $62,000 in SALT, while the limit for married couples would be $124,000. Unlike the Ways and Means bill, the SALT Caucus’s cap would be implemented in 2025 rather than 2026, would not phase down for higher-income households, and the limits would be adjusted for inflation.[^2] Figure 1 displays the different SALT limits for single filers under both SALT caps.

[^2]: As there is no reported details regarding the inflation adjustments, we rounded to the nearest dollar for all thresholds following tax year 2025. In 2026, the SALT Caucus caps would be uprated to $62,948 for single filers and $125,896 for married couples.

**Figure 1: W&M SALT Cap (Baseline) vs. SALT Caucus Proposal (Reform) (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*VxIQ1GWDjn2TdsJf)

## Household Impacts

As we are only comparing between the BBB SALT cap and the one preferred by the SALT Caucus, only households that itemize their deductions and have state and local tax expenses greater than the Ways and Means limit would be affected. Let’s examine a similar household to the one we covered in the previous analysis: a single adult in New York making $500,000, but with $70,000 in property taxes (instead of $45,000). Under the BBB SALT cap, they would see a [reduction in their net income of $28,391](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps&household=53440) in 2026, compared to if the SALT deduction became uncapped as it is scheduled to under current law. However, under the SALT Caucus proposal, their net income would [fall by $12,012](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=84172&region=us&timePeriod=2025&baseline=84050&dataset=enhanced_cps&household=53440), representing a [$16,379 gain](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps&household=53440) when compared to the $30,000 SALT cap approved by the Ways and Means Committee. Figure 2 displays how the single adult’s net income would change as their household earnings vary if the approved SALT cap were replaced with the SALT Caucus proposal.

**Figure 2: Effect of Replacing the SALT Cap on Net Income Based on Household Earnings for a Single Filer with $62,948+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*QMQEu4uN0tpKKYVk)

Replacing the cap would affect the single adult’s marginal tax rates (MTRs) at various earnings levels, as shown in Figure 3. Because the SALT Caucus cap does not include a phase-out, the filer’s MTR is reduced by 7 percentage points between $400,000 and $470,000.

**Figure 3: Change in Marginal Tax Rates Based on Household Earnings for a Single Filer with $62,948+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*-SNOfJRH5ViUgJug)

Due to the removal of the SALT cap phase-out, the total marginal tax rate falls from 51.2% to 44.2% for earnings between $400,000 to $470,000.

**Figure 4: Marginal Tax Rates under the Baseline and with the SALT Caucus Proposal Based on Household Earnings for a Single Filer with $62,948+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*Yi6fGaPcxhZw880J)

## Microsimulation Results

Using PolicyEngine’s static microsimulation model, we project that replacing the $30,000 SALT cap with the SALT Caucus proposal would [increase the cost of the tax package by $496.8 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) over the next ten years (2026–2035).[^3] Additionally, because the SALT Caucus proposal goes into effect in 2025, it would [lower federal revenues by $43.3 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=84172&region=us&timePeriod=2025&baseline=84050&dataset=enhanced_cps) that year since it raises the current $10,000 cap.

[^3]: We project that state tax revenues would decrease by $2.9 billion over the budget window (2026-2035).

**Table 1: Annual Federal Revenue Impact of Replacing the BBB SALT Cap with the SALT Caucus Proposal**

| Year          | Federal Revenue Impact in billions of $ (Static) |
| ------------- | ------------------------------------------------ |
| 2026          | -37.2                                            |
| 2027          | -38.8                                            |
| 2028          | -40.9                                            |
| 2029          | -44.9                                            |
| 2030          | -47.3                                            |
| 2031          | -50.1                                            |
| 2032          | -53.7                                            |
| 2033          | -57.3                                            |
| 2034          | -61.4                                            |
| 2035          | -65.2                                            |
| **2026-2035** | **-496.8**                                       |

The SALT cap would [increase the net income of 3.7% of US residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) in 2026, including 26% of residents in the top decile and 1.2% of those in the bottom nine deciles.

**Figure 6: Winners of the Replacing the SALT Cap Under the W&M Bill (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*myyx97sW6kZ2KS2l)

Households in the top decile see their tax liability fall by [$2,621 on average](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps). The bottom four deciles would see an average gain of $3 or less.

**Figure 6: Average Impact of the SALT Cap Under the W&M Bill (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*IBfKPm1J0NOaJl_t)

When it comes to poverty and inequality, the SALT Caucus proposal would, in 2026:

- [Lower poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) (as defined by the Supplemental Poverty Measure) by 0.00006%,

- Reduce deep poverty [by 0.0002%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps),

- [Raise the Gini index of inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) by 0.2%, and the top 1%’s share of net income by 3.0%

## Conclusion

Conditional on other provisions in the BBB, we find that implementing the SALT Caucus’s preferred limits of $62,000 and $124,000, compared to the $30,000 cap approved by the committee, would increase the cost of the bill by $497 billion over ten years, assuming no behavioral responses. The new limitation would increase the after-tax incomes of 3.7% of the population in 2026, with households in the top income decile experiencing the largest gains on an [absolute](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) and [relative](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=84172&region=us&timePeriod=2026&baseline=84044&dataset=enhanced_cps) basis. The SALT Caucus cap is projected to reduce poverty by less than 0.001%, while raising the Gini index by 0.2%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Baseline Details

Our baseline includes most individual provisions in the Ways and Means bill, as shown in Table 2\.

**Table 2: Individual Tax Provisions Current Law vs. W\&M Bill**

|                 Individual Provisions                 | Current Law (2026)                                             | W\&M Bill (2026)                                     | In PolicyEngine Simulation |
| :---------------------------------------------------: | -------------------------------------------------------------- | ---------------------------------------------------- | -------------------------- |
|                       Tax Rates                       | 10%, 15%, 25%, 28%, 33%, 35%, and 39.6%                        | 10%, 12%, 22%, 24%, 32%, 35%, and 37%                | ✅                         |
|                     Tax Brackets                      | Revert to 2017 Thresholds (Indexed for Inflation Since 2017)\* | 2025 Thresholds (Indexed for Inflation for 2026)[^4] | ✅                         |
|           Personal and Dependent Exemption            | $5,300\*                                                       | $0                                                   | ✅                         |
|                    CTC Base Amount                    | $1,000                                                         | $2,000[^5]                                           | ✅                         |
|            CTC Temporary Boost (2025-2028)            | Inactive                                                       | $500                                                 | ✅                         |
|             CTC Maximum Refundable Amount             | $1,000                                                         | $1,700\*                                             | ✅                         |
|                  CTC Phase-in Start                   | $3,000                                                         | $2,500                                               | ✅                         |
|                  CTC Phase-out Start                  | $75,000/$110,000                                               | $200,000/$400,000                                    | ✅                         |
|                Adult Dependent Credit                 | $0                                                             | $500                                                 | ✅                         |
|               Standard Deduction Amount               | $8,300/$16,600\*                                               | $16,150/$32,300\*                                    | ✅                         |
|                 Estate Tax Exemption                  | \~$6,790,000                                                   | $15,000,000                                          | ✖️                         |
|            Mortgage Interest Deduction Cap            | $1,000,000                                                     | $750,000                                             | ✖️                         |
|              Casualty Expense Deduction               | Active                                                         | Inactive                                             | ✖️                         |
|                         Pease                         | Active                                                         | Inactive                                             | ✅                         |
|       Overall Limitation on Itemized Deduction        | Inactive                                                       | Active                                               | ✅                         |
|                 AMT Exemption Amount                  | $70,500/$109,700\*                                             | $89,400/$139,050\*                                   | ✅                         |
|                  AMT Phase-out Start                  | $156,700/$209,000\*                                            | $635,900/$1,271,850\*                                | ✅                         |
|                       QBID Rate                       | Inactive                                                       | 23%                                                  | ✅                         |
|      Alternative QBID Rate on Business Property       | Inactive                                                       | 2.5%                                                 | ✅                         |
|                QBID Rate on W-2 Wages                 | Inactive                                                       | 50%                                                  | ✅                         |
|          Alternative QBID Rate on W-2 Wages           | Inactive                                                       | 25%                                                  | ✅                         |
|            QBID Limitation Phase-in Amount            | Inactive                                                       | 75%                                                  | ✅                         |
|                 QBID Phase-out Start                  | Inactive                                                       | $200,300/$400,500\*                                  | ✅                         |
|           Tip income exemption (2025-2028)            | Inactive                                                       | Active                                               | ✅                         |
|         Overtime income exemption (2025-2028)         | Inactive                                                       | Active                                               | ✖️                         |
|       Auto loan interest deduction (2025-2028)        | Inactive                                                       | Active                                               | ✖️                         |
| Additional Standard Deduction for Seniors (2025-2028) | Inactive                                                       | Active                                               | ✅                         |
|  Charitable Deduction for Non-Itemizers (2025-2028)   | Inactive                                                       | Active                                               | ✅                         |

\*Indexed for Inflation

[^4]: The Ways and Means tax bill adjusts the year at which the 35% tax bracket is uprated changing it from 2017 to 2016, thereby raising the bracket threshold higher than previously.

[^5]: In 2029, the maximum value of the CTC would drop as the temporary $500 boost expires. However, since the CTC is adjusted for inflation afterwards using 2024 as the base year, the credit’s value would fall to $2,200 rather than $2,000. Additionally, we do not include the SSN changes to the CTC in this analysis, but plan to include the provision in future reports.



---

---
# Ways and Means Committee's SALT Cap
Slug: ways-and-means-salt-cap
Date: 2025-05-14
Authors: Pavel Makarchuk, David Trimmer, Max Ghenis
Tags: us, featured, reconciliation
Description: We project that limiting state and local tax deductions to $30,000, phasing down to $10,000 at high incomes, would raise $937 billion over the budget window.

---

Earlier today, the Ways and Means Committee of the House of Representatives voted in favor of [“The One, Big, Beautiful Bill”,](https://waysandmeans.house.gov/wp-content/uploads/2025/05/SMITMO_017_xml.pdf) a suite of tax reforms that extends most provisions of the Tax Cuts and Jobs Act of 2017, while adding other reforms such as exempting tip and overtime income from taxes. Among its changes from TCJA is a higher limit on the state and local tax deduction, which is $10,000 under TCJA and uncapped after 2025 under current law. The bill caps the SALT deduction at $30,000 for taxpayers, phasing down to $10,000 for filers with income above $400,000.

We modeled the impact of this policy against a baseline with most other provisions of the Ways & Means Committee’s bill (see Appendix A).

Key results (static):

- Raises federal revenues by $937 billion from 2026 to 2035

- Reduces net income for 5.2% of Americans in 2026

- Increases the Supplemental Poverty Measure by 0.2%

- Lowers the Gini index of income inequality by 0.4%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps)._

## Summary of SALT Provisions

The SALT deduction is set to become uncapped starting in 2026 after being limited to $10,000 under the TCJA. Under the Ways and Means bill, the SALT deduction would be capped at $30,000 ($15,000 for separate filers). As Figure 1 shows, once adjusted gross income reaches $400,000 ($200,000 for separate filers), the limitation phases down at a 20% rate until reaching $10,000 ($5,000 for separate filers). This results in filers with AGI above $500,000 ($250,000 separate) facing the SALT cap floor.[^1]

[^1]: The Ways and Means bill also includes provisions that are meant to limit workarounds that states have implemented to avoid the SALT cap. We did not model these provisions in this analysis.

**Figure 1: SALT Cap Under Ways and Means Bill**

![](https://cdn-images-1.medium.com/max/3180/0*IUqgwWeJcKNFL00U)

## Household Impacts

As we are only comparing how the SALT deduction would affect households as a part of the full bill, only households that itemize their deductions and have state and local tax expenses would be affected. For example, a single adult in New York making $500,000 and $45,000 in property taxes would see a [reduction in their net income of $21,053](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps&household=53326) in 2026.[^2] Figure 2 displays how the single adult’s net income would change as their household earnings vary. While rising at certain points, net income generally falls as household income increases.

[^2]: This assumes a home price of $2,800,000 with an average property tax rate of 1.6%.

**Figure 2: Effect of the SALT Limitation on Net Income Based on Household Earnings for a Single Filer with $30,000+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/3196/0*1nGgDnLbZjpbceXY)

The introduction of the cap would affect the single adult’s marginal tax rates (MTRs) at various earnings levels, as shown in Figure 3. This reveals that, for instance, the phase-out beginning at $400,000 income increases the filer’s MTR by 7 percentage points. While the SALT cap phases out over the $400,000 to $500,000 income range, it only increases the MTR for the income range from $400,000 to $470,000, since the filer would take the $16,200 standard deduction once the SALT cap falls below this amount.

**Figure 3: Change in Marginal Tax Rates Based on Household Earnings for a Single Filer with $30,000+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*2xwAC1TJdwR9oL27)

As a result of the SALT cap phase-out, the total marginal tax rate reaches 51.2% for earnings between $400,000 to $470,000.

**Figure 4: Marginal Tax Rates under the Baseline and with the SALT Deduction Limitation Based on Household Earnings for a Single Filer with $30,000+ in SALT (2026)**

![](https://cdn-images-1.medium.com/max/3160/0*U-tBlaGYbWVROR9k)

## Microsimulation Results

Using PolicyEngine’s static microsimulation model, we project that the $30,000 SALT cap would increase federal revenues by $937 billion over the next ten years (2026–2035).[^3] For comparison, the Joint Committee on Taxation [projected](https://www.jct.gov/publications/2025/jcx-22-25r/) that it would raise $916 billion from 2025–2034.

[^3]: We project that state tax revenues would increase by $2.1 billion over the budget window (2026-2035).

**Table 1: Annual Federal Budgetary Impact of the SALT Cap Under the W&M Bill**

|     Year      | Federal Budgetary Impact in billions of $ (Static) |
| :-----------: | :------------------------------------------------: |
|     2026      |                        72.0                        |
|     2027      |                        76.3                        |
|     2028      |                        80.0                        |
|     2029      |                        85.5                        |
|     2030      |                        89.9                        |
|     2031      |                        95.1                        |
|     2032      |                       100.4                        |
|     2033      |                       105.9                        |
|     2034      |                       112.8                        |
|     2035      |                       119.3                        |
| **2026-2035** |                     **937.2**                      |

The SALT cap would [reduce the net income of 5.2% of American residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps) in 2026. The top income decile would see the greatest number of residents who are made worse off by the SALT cap.

**Figure 5: Distribution of the SALT Cap Under the W&M Bill (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*bitAetgKi4pRc7eH)

Households in the top decile would pay an average of [$4,405 more](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps) in taxes, a larger amount than other deciles.

**Figure 6: Average Impact of the SALT Cap Under the W&M Bill (2026)**

![](https://cdn-images-1.medium.com/max/3200/0*FvD1qldxcKtrGUPm)

When it comes to poverty and inequality, the SALT cap would, in 2026:

- [Increase poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps) (as defined by the Supplemental Poverty Measure) by 0.02%,

- Increase deep poverty and deep child poverty [by 0.06% and 0.11%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps), respectively,

- Reduce the Gini index of inequality [by 0.4%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=84006&region=us&timePeriod=2026&baseline=84008&dataset=enhanced_cps), and the top 1%’s share of net income by 1.0%

## Conclusion

Conditional on other provisions in the Ways and Means Committee’s bill, we find that its SALT cap raises federal revenues by $937 billion over ten years, assuming no behavioral responses. Our projection exceeds JCT’s by 2.2%, though we score from 2026–2035 rather than 2025–2034. The limitation would reduce the after-tax incomes of 5% of the population in 2026, with households in the top income decile experiencing the greatest losses on an [absolute basis](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=84044&region=us&timePeriod=2026&baseline=84050&dataset=enhanced_cps). The $30,000 cap is projected to increase poverty by 0.02%, while lowering the Gini index by 0.4%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Baseline Details

Our baseline includes most individual provisions in the Ways and Means bill, as shown in Table 2\.

**Table 2: Individual Tax Provisions Current Law vs. W\&M Bill**

|                 Individual Provisions                 | Current Law (2026)                                             | W\&M Bill (2026)                                     | In PolicyEngine Simulation |
| :---------------------------------------------------: | -------------------------------------------------------------- | ---------------------------------------------------- | -------------------------- |
|                       Tax Rates                       | 10%, 15%, 25%, 28%, 33%, 35%, and 39.6%                        | 10%, 12%, 22%, 24%, 32%, 35%, and 37%                | ✅                         |
|                     Tax Brackets                      | Revert to 2017 Thresholds (Indexed for Inflation Since 2017)\* | 2025 Thresholds (Indexed for Inflation for 2026)[^4] | ✅                         |
|           Personal and Dependent Exemption            | $5,300\*                                                       | $0                                                   | ✅                         |
|                    CTC Base Amount                    | $1,000                                                         | $2,000[^5]                                           | ✅                         |
|            CTC Temporary Boost (2025-2028)            | Inactive                                                       | $500                                                 | ✅                         |
|             CTC Maximum Refundable Amount             | $1,000                                                         | $1,700\*                                             | ✅                         |
|                  CTC Phase-in Start                   | $3,000                                                         | $2,500                                               | ✅                         |
|                  CTC Phase-out Start                  | $75,000/$110,000                                               | $200,000/$400,000                                    | ✅                         |
|                Adult Dependent Credit                 | $0                                                             | $500                                                 | ✅                         |
|               Standard Deduction Amount               | $8,300/$16,600\*                                               | $16,150/$32,300\*                                    | ✅                         |
|                 Estate Tax Exemption                  | \~$6,790,000                                                   | $15,000,000                                          | ✖️                         |
|            Mortgage Interest Deduction Cap            | $1,000,000                                                     | $750,000                                             | ✖️                         |
|              Casualty Expense Deduction               | Active                                                         | Inactive                                             | ✖️                         |
|                         Pease                         | Active                                                         | Inactive                                             | ✅                         |
|       Overall Limitation on Itemized Deduction        | Inactive                                                       | Active                                               | ✅                         |
|                 AMT Exemption Amount                  | $70,500/$109,700\*                                             | $89,400/$139,050\*                                   | ✅                         |
|                  AMT Phase-out Start                  | $156,700/$209,000\*                                            | $635,900/$1,271,850\*                                | ✅                         |
|                       QBID Rate                       | Inactive                                                       | 23%                                                  | ✅                         |
|      Alternative QBID Rate on Business Property       | Inactive                                                       | 2.5%                                                 | ✅                         |
|                QBID Rate on W-2 Wages                 | Inactive                                                       | 50%                                                  | ✅                         |
|          Alternative QBID Rate on W-2 Wages           | Inactive                                                       | 25%                                                  | ✅                         |
|            QBID Limitation Phase-in Amount            | Inactive                                                       | 75%                                                  | ✅                         |
|                 QBID Phase-out Start                  | Inactive                                                       | $200,300/$400,500\*                                  | ✅                         |
|           Tip income exemption (2025-2028)            | Inactive                                                       | Active                                               | ✅                         |
|         Overtime income exemption (2025-2028)         | Inactive                                                       | Active                                               | ✖️                         |
|       Auto loan interest deduction (2025-2028)        | Inactive                                                       | Active                                               | ✖️                         |
| Additional Standard Deduction for Seniors (2025-2028) | Inactive                                                       | Active                                               | ✅                         |
|  Charitable Deduction for Non-Itemizers (2025-2028)   | Inactive                                                       | Active                                               | ✅                         |

\*Indexed for Inflation

[^4]: The Ways and Means tax bill adjusts the year at which the 35% tax bracket is uprated changing it from 2017 to 2016, thereby raising the bracket threshold higher than previously.

[^5]: In 2029, the maximum value of the CTC would drop as the temporary $500 boost expires. However, since the CTC is adjusted for inflation afterwards using 2024 as the base year, the credit’s value would fall to $2,200 rather than $2,000. Additionally, we do not include the SSN changes to the CTC in this analysis, but plan to include the provision in future reports.



---

---
# Tax changes in effect in April 2025
Slug: impact-of-tax-changes-2025-2026
Date: 2025-04-25
Authors: Nikhil Woodruff
Tags: uk, tax, policy, featured
Description: Using PolicyEngine UK, we analyse four tax changes taking effect in April 2025 that will increase taxes by an average of £1,133 per household.

---

Four tax reforms took effect in April 2025. Using the PolicyEngine UK tax-benefit microsimulation model, we analysed these reforms, which will increase taxes by an average of £1,133 per household.[^1]

[^1]: A previous version of this analysis assumed a 5% increase in average Council Tax rates by using the central Government's figure for the change in the average Band D rate. This version uses the 6.1% rise in the average Council Tax rate for all households from the same source.

This analysis, requested and [published](https://insider.iea.org.uk/p/new-analysis-the-cost-of-tax-hikes) by the Institute for Economic Affairs, featured in the Daily Mail's [front-page article](https://www.dailymail.co.uk/news/article-14548907/Labours-tax-raids-cost-families-week.html) on the 28th March 2025, in two [Express](https://www.express.co.uk/news/politics/2034186/rachel-reeves-tax-increase-cost) [articles](https://www.express.co.uk/finance/personalfinance/2034211/rachel-reevesl-tax-hikes-cost-british-families), and two [other](https://www.dorsetecho.co.uk/news/25047728.tax-hikes-will-cost-british-families-1-000-per-year-average/) [outlets](https://londonlovesbusiness.com/labours-tax-hikes-will-cost-british-families-over-1000-per-year-on-average/).

## Policy changes

From a combination of temporary reforms expiring and new tax reforms taking effect:

- The Government has [allowed](https://www.legislation.gov.uk/ukpga/2023/2/section/1) **Stamp Duty Land Tax** nil-rate thresholds to expire to £300,000 (from £425,000) for first-time buyers and £125,000 (from £250,000) for subsequent purchases. These thresholds determine the property value at which SDLT begins to apply. First-time buyers maintain a higher threshold than subsequent purchasers under this reform. This reform is the result of an expiry of a Stamp Duty Land Tax cut announced by then-Chancellor Jeremy Hunt in the Autumn Budget 2023 (expiring 31 March 2025).
- The Government [set](https://bills.parliament.uk/bills/3888) the **Employer's National Insurance** rate to 15% with the secondary threshold set to £96.14 (from £175) per week. We assume that the employer NI changes is passed on to employees at 40% in 2025, 50% in 2026, 60% in 2027, and 70% in 2028-2029, with the remainder split between business owners and prices. This reform was announced in the Autumn Budget 2024 and takes effect in April 2025.
- The Government had [set](https://www.legislation.gov.uk/ukpga/2025/8/section/7/enacted) **Capital Gains Tax** rates to [change](https://policyengine.org/uk/research/cgt-autumn-budget) to 18% (from 10%) for basic rate taxpayers and 24% (from 20%) for both higher and additional rate taxpayers. CGT applies to profits from the sale of assets that have increased in value, with various exemptions including primary residences. This reform was in effect from the time of the Autumn Budget, but 2025/26 is the first full tax year of its implementation.
- Local authorities have [increased](https://www.gov.uk/government/statistics/council-tax-levels-set-by-local-authorities-in-england-2025-to-2026/council-tax-levels-set-by-local-authorities-in-england-2025-to-2026#average-council-tax-per-dwelling) **Council Tax** by 6.1% on average from 2024\. This is set by local authorities. These reforms have been announced by councils over the last year.

## Economic impacts

We estimate the following revenue impacts for these reforms in 2025/26 (Table 1). For each tax, we include its _static_ revenue impact. This assumes that individuals do not adjust their behaviour in response, representing simply the impact of the change in policy on existing households.

| Reform                                                                         | 2025 static revenue (£ million)                                                                                                                                   | Average per household (£) |
| :----------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------ |
| Stamp duty: lower first home nil-rate threshold from 425,000 to 300,000        | [150](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&baseline=80444&timePeriod=2025&region=uk)                             | 5                         |
| Stamp duty: lower primary residence nil-rate threshold from 250,000 to 125,000 | [1,200](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&baseline=80446&timePeriod=2025&region=uk)                           | 43                        |
| Capital Gains Tax: raise rates to 18% and 24%                                  | [4,200](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69732&region=uk&timePeriod=2025&baseline=1)                           | 150                       |
| Council tax: raise by 5%                                                       | 3,300                                                                                                                                                             | 117                       |
| National Insurance: raise employer rate from 13.8% to 15% and lower threshold  | [22,900](https://legacy.policyengine.org/uk/policy?reform=69728&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1&uk_local_areas_beta=true) | 818                       |
| Total                                                                          | 31,750                                                                                                                                                            | 1,133                     |

Table 1

Figure 1 shows the impact of these reforms on average in each household income decile. The highest decile’s household net income falls by £2,754, and the lowest decile £808.

[Chart: type: bar]

Figure 2 shows the median tax rise by region.

[Chart: type: bar]



---

---
# Analyzing Energy Policy with PolicyEngine
Slug: earth-day-2025
Date: 2025-04-22
Authors: Max Ghenis
Tags: us, uk, featured
Description: We provide an Earth Day recap of our capabilities in the US and UK.

---

At PolicyEngine, our work centers on providing open and transparent tools for public policy analysis. While many analyses focus on tax and benefit programs, energy policies also have significant individual and societal effects that warrant examination.

I discussed PolicyEngine's capabilities in this area at the most recent [Open Sustainability Policy Summit](https://opensource.engineering.jhu.edu/), hosted by Johns Hopkins and LF Energy. You can watch the talk below:

<center>[Interactive: af8Y5J_jLO0]</center>

As I described (slides available [here](https://docs.google.com/presentation/d/1pAXVClSU1Ws7tcrpHFinGTdeHLsrZWJo_tQWmEzjXXk/preview)), our open-source platform allows users to explore the quantitative impacts of various policies, including those related to energy. Here's an overview of PolicyEngine's relevant features:

### Modeling the Individual Impacts of Energy Policies

Energy policies can affect household budgets in numerous ways. PolicyEngine uses microsimulation modeling to estimate these effects. The platform can analyze:

- **Carbon Pricing:** In the UK, we can model hypothetical policies like a [carbon tax](https://policyengine.org/uk/research/how-policyengine-estimates-the-effects-of-uk-carbon-taxes) paired with a dividend. Our UK model demonstrated the distributional effects of pairing a £100/tonne carbon tax with an £18/week universal dividend, showing potential outcomes across income and wealth levels.
- **Energy Assistance Programs:** In some US states, we model programs like the Low Income Home Energy Assistance Program (LIHEAP). For example, we can simulate Michigan's Home Heating Credit to show how benefits change based on income and heating costs, revealing implicit subsidy rates.
- **Energy Price Regulations:** We have modeled policies like the [UK's Energy Price Guarantee](https://policyengine.org/uk/research/projected-impact-of-the-uks-extended-energy-price-guarantee), which capped household energy costs.
- **Clean Energy Incentives:** We analyze individual tax credits, such as the Clean Vehicle Credit from the Inflation Reduction Act (IRA), including eligibility rules and income interactions. You can read my [2022 UBI Center report](https://www.ubicenter.org/ira-ev-credit-cliff) for a demonstration.
- **Implicit Subsidies:** We can identify energy-related components in other programs, like the SNAP utility expense deduction.
- **State & Local Programs:** We incorporate state-specific policies, such as California's low-income electricity discounts (CARE and FERA).

### An Open, Integrated Platform

Our capabilities are built on a foundation of openness and specific data techniques:

- **Open Source:** Our entire platform – from the front-end interface to the underlying rules engine and APIs – is free and open source, available on [GitHub](https://github.com/PolicyEngine). We leverage and contribute to the broader open-source community.
- **Data Integration:** We use techniques, including machine learning, to integrate diverse datasets (like income surveys and consumption data) to provide a detailed view of policy impacts.
- **Tools:**
  - **Individuals:** Calculate estimated taxes and benefits under current law.
  - **Analysts:** Design custom policy reforms, adjusting parameters or introducing new policies.
  - **Impact Analysis:** Compute the personalized impact of reforms on specific households and estimate the broader societal effects on metrics like poverty and inequality using microsimulation.
  - **API Access:** Third parties can build custom applications using our API.

### Future Directions in Energy & Climate Modeling

We are continuously expanding our capabilities. As discussed in the presentation, future directions include:

- **Broadening Scope:** Modeling more LIHEAP programs across the US and incorporating state-specific rules for IRA rebates.
- **Deeper Data:** Integrating more detailed utility expense data into our US models.
- **Dynamic Modeling:** Working towards integration with dynamic macroeconomic models (like OG-USA).
- **Energy & Emissions:** Exploring the integration of dedicated energy models to estimate the potential impact of policies on emissions.
- **Enhanced UX:** Improving the user experience and expanding our API for developers.
- **AI Integration:** Developing AI-powered tools, like chatbots, for policy analysis.

### Learn More

Understanding the economic and distributional effects of energy policy involves dissecting complex interactions. PolicyEngine provides transparent, accessible tools for this analysis. Explore our platform and contribute to our open-source project. Visit [PolicyEngine US](https://legacy.policyengine.org/us) and [PolicyEngine UK](https://legacy.policyengine.org/uk) to learn more.



---

---
# What's the SALTernative?
Slug: introducing-salternative
Date: 2025-04-21
Authors: Pavel Makarchuk, Max Ghenis
Tags: us, featured, reconciliation
Description: Introducing PolicyEngine’s free SALT‑AMT calculator — an open‑source web app to model next year’s SALT‑cap sunset, tweak AMT parameters, and see the budget, distributional, and household impacts in seconds.

---

Today we’re excited to launch **SALTernative**, a free web app that lets anyone — from researchers and journalists to households and Hill staff — simulate reforms to the state‑and‑local‑tax (SALT) deduction and the Alternative Minimum Tax (AMT) and see their effects on:

- **The federal budget** (2026–35)

- **Average household incomes** across the distribution

- **Individual households’ net income**, effective SALT caps, and property‑tax subsidy rates

You can start exploring right now at [**policyengine.org/us/salternative**](https://legacy.policyengine.org/us/salternative).

## Why a SALT + AMT model, and why now?

- **Major policy change may be imminent.** When individual provisions of the Tax Cuts and Jobs Act expire after 2025, the explicit $10,000 SALT cap vanishes and AMT parameters revert, reshaping incentives for millions of taxpayers.

- **The interaction matters.** The AMT disallows the SALT deduction, creating an _effective_ SALT cap that can remain even without a statutory cap.

- **Transparent evidence is scarce.** While existing estimates are static tables for individual reforms, SALTernative is flexible, open‑source, and free.

![](https://cdn-images-1.medium.com/max/2000/0*-ZtaSY2laGsW2qHh)

## What you can do with SALTernative

| Question                                                                                                | How the tool helps                                                                                                              |
| ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| _“What if we doubled the SALT cap for married couples but kept the AMT?”_                               | Toggle a checkbox and compare distributional and budget impacts side‑by‑side.                                                   |
| _“If TCJA expires, how large is the effective SALT cap for a $250,000‑income household in New Jersey?”_ | Enter the household in the **Personalized Calculator** and view the value (it depends on other factors like mortgage interest). |
| _“How much revenue would repealing both SALT and the AMT raise or lose over 2026‑35?”_                  | Run the scenario and read the ten‑year budget window total.                                                                     |

Key features at launch include:

- **Current‑law vs. current‑policy baselines.** Simulate against either an automatic TCJA sunset or a full extension.

- **Behavioral responses.** Optionally incorporate CBO elasticities so earnings adjust when marginal tax rates change.

- **Transparent methodology.** We’ve developed the tool [open-source on GitHub](https://github.com/PolicyEngine/salt-amt-calculator/), using the open-source PolicyEngine US microsimulation model — including a full set of state income tax rules, critical for SALT and AMT calculations.

![](https://cdn-images-1.medium.com/max/3200/0*IcNDvUMfMqNelucT)

## Join us to learn more — April 24 webinar

We’re hosting a **joint webinar with [Arnold Ventures](http://arnoldventures.org)** (whose generous support made SALTernative possible) on **Thursday, April 24, at 10 AM ET**.

We’ll walk through live demos, answer technical questions, and discuss how analysts are already using the model.

👉 [**Register here**](https://arnoldventures.zoom.us/webinar/register/WN_qvtqn6DbRZeRzMaIWDwUDg#/registration)

## Get started

1. Head to [**policyengine.org/us/salternative**](https://legacy.policyengine.org/us/salternative).

1. Choose a baseline, adjust SALT and AMT settings, and watch the charts update.

1. Share your findings, cite the model, and help create **a world guided by transparent, verifiable evidence.**

_Thank you to Arnold Ventures for supporting this work, and to our open‑source contributors who reviewed code, built datasets, and stress‑tested the interface._

See you at the webinar!



---

---
# MyFriendBen Launches in North Carolina, Using PolicyEngine API
Slug: myfriendben-nc
Date: 2025-04-05
Authors: Max Ghenis
Tags: us, us-nc, featured, api, benefit-access
Description: Our rules engine powers the open-source multi-benefit screener and its expansion beyond Colorado.

---

We're pleased to share that [MyFriendBen has launched in North Carolina](https://bennc.org/new-online-tool-helps-north-carolina-families-find-financial-support-in-minutes/), making it the second state where this benefits screener helps residents identify potential financial support programs they may qualify for. This expansion aligns with PolicyEngine's mission to make tax and benefits systems more transparent and accessible to all.

## A Partnership for Information Access

Durham-based nonprofit [Code the Dream](https://codethedream.org), in partnership with [MyFriendBen](https://myfriendben.org) and [NC 211](https://nc211.org), has brought this tool to North Carolina residents. MyFriendBen-NC ([bennc.org](https://bennc.org)) offers North Carolinians a way to discover which benefits and tax credits they may qualify for, including food assistance, health insurance, child care subsidies, and more.

The tool integrates with [PolicyEngine's open-source API](https://legacy.policyengine.org/us/api), which provides calculations for federal and state tax credits and major benefit programs like SNAP, Medicaid, SSI, and TANF. By using our computational models, MyFriendBen can generate personalized reports with over 90% accuracy in approximately six minutes.

## Informing North Carolina Residents

According to Dan Rearick, Co-Executive Director of Code the Dream, many North Carolina families face financial challenges and could benefit from better information about available support programs. The tool aims to help these individuals understand their options.

In Colorado, where MyFriendBen first launched, households discovered they may be eligible for benefits with an average monthly value of $1,500. This information can help families make informed decisions about which programs to apply for.

Community partners who tested the tool have noted its practical applications:

- Prince Mundeke Mushunju from Mundeke Gospel Mission in Greensboro noted that the tool helps him provide better information when directing people to social services.
- Yanira Vanegas Scott from El Refugio in Sanford highlighted how the tool provides information to families outside standard business hours.

## Addressing Complexity

The benefits landscape can be complex and difficult to navigate. As Louise Pocock, Senior Public Benefits Analyst at Code the Dream, noted: "North Carolina families don't know about or can't access programs they are eligible for."

The combination of MyFriendBen's user interface and PolicyEngine's computational capabilities helps address this complexity. Users can complete a survey, available in 12 languages, and receive a personalized report showing which programs they may qualify for, along with estimated dollar values and application time requirements.

## The Power of Open-Source Collaboration

The MyFriendBen-NC launch exemplifies the potential of open-source collaboration in addressing social challenges. By using PolicyEngine's API to perform complex benefit calculations, the MyFriendBen team could focus on creating an accessible user experience while ensuring accurate results.

It's important to acknowledge that this success was truly collaborative. Developers and benefit experts at MyFriendBen and Code the Dream worked closely with the PolicyEngine team to develop and implement the North Carolina rules. This cross-organizational expertise was crucial in adapting the calculations to North Carolina's specific benefit structures and eligibility requirements, demonstrating how shared knowledge can create more robust solutions.

We believe this model of collaboration—where specialized tools like our API can be integrated into user-facing applications and enhanced through multi-organization partnerships—represents the future of civic technology.

## Open-Source Tools for Developers

Are you a developer or organization interested in integrating tax and benefit calculations into your own tools? The PolicyEngine API that powers MyFriendBen's calculations is available for your projects as well.

[Our open-source API](https://legacy.policyengine.org/us/api) can help you:

- Calculate eligibility and benefit amounts for major programs like SNAP, Medicaid, SSI, and TANF
- Estimate federal and state tax liabilities and credits
- Model the impact of policy reforms
- Create tools that help people understand their financial options

We invite developers, nonprofits, government agencies, and researchers to reach out to us at [contact@policyengine.org](mailto:contact@policyengine.org) to discuss how our API might support your work in making benefits and tax systems more transparent.



---

---
# New Ways to Give to PolicyEngine
Slug: april-1st-2025
Date: 2025-04-01
Authors: Daphne Hansell
Tags: us, april-fools, featured
Description: Exploring state tax credits for charitable giving.

---

At PolicyEngine, our mission of democratizing policy analysis and modeling state tax policies relies significantly on charitable donations. Many states offer unique tax credits designed to encourage charitable contributions that support community needs. PolicyEngine is excited to begin accepting donations in more accessible ways than traditional cash donations.

Below, we highlight several state tax credits that donors can utilize to enhance their contributions:

## Maryland Venison Donation Credit

Maryland provides a [non-refundable tax credit](https://mgaleg.maryland.gov/2024RS/fnotes/bil_0000/sb0440.pdf) to encourage hunters to donate processed venison to charitable organizations addressing hunger. The tax credit of $75 per deer, up to $300 annually. It covers the cost of processing deer meat donated to qualified 501(c)(3) organizations.

## South Carolina Deer Processing Donation Credit

South Carolina incentivizes licensed meat processors to partner with nonprofit organizations, facilitating venison donations to help feed communities in need. The [credit is $75 per deer processed](https://law.justia.com/codes/south-carolina/title-12/chapter-6/section-12-6-3750/#:~:text=The%20amount%20of%20the%20credit,to%20any%20other%20taxable%20year.). It is a nonrefundable credit, applicable only in the year earned.

## Maryland Oyster Shell Recycling Credit

Recognizing the ecological importance of oyster shell recycling, Maryland offers a credit for recycling oyster shells. Residents may claim $5 for each bushel of oyster shells recycled during the tax year, up to $1,500 per taxpayer.

![](/images/posts/april-1st-2025/deeroysterchart1.webp)

![](/images/posts/april-1st-2025/deeroysterchart2.webp)

## Supporting PolicyEngine

Utilizing these state tax credits enables donors to direct additional resources toward causes important to them, including PolicyEngine’s ongoing research and policy modeling efforts. By taking advantage of these credits, donors can optimize their financial planning while contributing meaningfully to their communities and beyond.

We invite our supporters to explore how leveraging state-specific tax credits can enhance their philanthropic impact. For additional information and traditional donation options, please visit our donation page at [policyengine.org/us/donate](/us/donate).

Thank you for your continued support of PolicyEngine’s mission to advance evidence-based policymaking.

_**Note:** This is an April Fools’ Day analysis. While these tax credits are real, PolicyEngine is not currently accepting wildlife donations. We do welcome your conventional financial support at [policyengine.org/us/donate](/us/donate)._



---

---
# Analysis of the Spring 2025 OBR forecast
Slug: obr-forecast-2025
Date: 2025-03-26
Authors: Nikhil Woodruff
Tags: uk, impact, featured
Description: PolicyEngine integrates the new OBR forecasts to provide updated predictions on household income, poverty, and inequality.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Credit: Best for Britain*\n",
    "\n",
    "## Executive summary\n",
    "\n",
    "Today, the Office for Budget Responsibility releases its Spring 2025 Economic and Fiscal Outlook. The OBR is an independent body that produces economic and fiscal forecasts for the UK government.\n",
    "\n",
    "* The OBR forecasts that income sources will rise across all categories (employment: +£24-29B, self-employment: +£12-25B, non-labor: +£19-43B annually, CPI: +0.3-0.9 annually).\n",
    "* We project absolute poverty rates will fall (0.2-0.7 percentage points), while income inequality will widen.\n",
    "* We project that households in the lowest decile will see net incomes 1.9% higher in 2030 under the new forecast than the Autumn 2024 forecast, and households in the highest decile will see net incomes 3.1% higher.\n",
    "* We project that the average household will have a net income £1,160 (2.5%) higher in 2030 under the new forecast than the Autumn 2024 forecast.\n",
    "* We project net benefit recipient households will reduce by 0.3-0.5 points (253,000-462,000 fewer households annually).\n",
    "\n",
    "In this report, we'll integrate the OBR's new Spring forecast into PolicyEngine's tax-benefit microsimulation model, and examine the impact this new forecast (against the Autumn 2024 EFO) on the UK household sector. All impacts below are the impact of this forecast change *alone*, excluding any policy measures not already in the baseline policy."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/Users/nikhilwoodruff/policyengine/obr-forecast/.venv/lib/python3.11/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html\n",
      "  from .autonotebook import tqdm as notebook_tqdm\n"
     ]
    },
    {
     "data": {
      "text/markdown": [
       "[See the forecast change in PolicyEngine](https://legacy.policyengine.org/uk/policy?reform=80230&baseline=80227&region=uk&timePeriod=2029)"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from policyengine import Simulation\n",
    "\n",
    "\n",
    "# Autumn 2024 OBR Forecast\n",
    "AUTUMN_24_OBR_FORECAST = {\n",
    "    \"gov.obr.employment_income\": {\n",
    "        \"year:2025:1\": 1215.6,\n",
    "        \"year:2026:1\": 1246.5,\n",
    "        \"year:2027:1\": 1277.7,\n",
    "        \"year:2028:1\": 1312.9,\n",
    "        \"year:2029:1\": 1352.9,\n",
    "    },\n",
    "    \"gov.obr.mixed_income\": {\n",
    "        \"year:2025:1\": 177.6,\n",
    "        \"year:2026:1\": 196.7,\n",
    "        \"year:2027:1\": 205.3,\n",
    "        \"year:2028:1\": 214.6,\n",
    "        \"year:2029:1\": 225.0,\n",
    "    },\n",
    "    \"gov.obr.non_labour_income\": {\n",
    "        \"year:2025:1\": 460.8,\n",
    "        \"year:2026:1\": 512.7,\n",
    "        \"year:2027:1\": 535.0,\n",
    "        \"year:2028:1\": 554.0,\n",
    "        \"year:2029:1\": 571.8,\n",
    "    },\n",
    "    \"gov.obr.consumer_price_index\": {\n",
    "        \"year:2025:1\": 138.1,\n",
    "        \"year:2026:1\": 141.1,\n",
    "        \"year:2027:1\": 144.1,\n",
    "        \"year:2028:1\": 147.1,\n",
    "        \"year:2029:1\": 150.1,\n",
    "    },\n",
    "}\n",
    "\n",
    "# Spring 2025 OBR Forecast - Default to Autumn 2024 values, update these when the new forecast is released\n",
    "SPRING_25_OBR_FORECAST = {\n",
    "    \"gov.obr.employment_income\": {\n",
    "        \"year:2025:1\": 1239.8,\n",
    "        \"year:2026:1\": 1272.5,\n",
    "        \"year:2027:1\": 1305.3,\n",
    "        \"year:2028:1\": 1340.7,\n",
    "        \"year:2029:1\": 1382.0,\n",
    "    },\n",
    "    \"gov.obr.mixed_income\": {\n",
    "        \"year:2025:1\": 202.8,\n",
    "        \"year:2026:1\": 210.6,\n",
    "        \"year:2027:1\": 218.7,\n",
    "        \"year:2028:1\": 227.4,\n",
    "        \"year:2029:1\": 237.2,\n",
    "    },\n",
    "    \"gov.obr.non_labour_income\": {\n",
    "        \"year:2025:1\": 503.3,\n",
    "        \"year:2026:1\": 531.6,\n",
    "        \"year:2027:1\": 555.6,\n",
    "        \"year:2028:1\": 574.6,\n",
    "        \"year:2029:1\": 594.5,\n",
    "    },\n",
    "    \"gov.obr.consumer_price_index\": {\n",
    "        \"year:2025:1\": 139.0,\n",
    "        \"year:2026:1\": 141.7,\n",
    "        \"year:2027:1\": 144.5,\n",
    "        \"year:2028:1\": 147.4,\n",
    "        \"year:2029:1\": 150.4,\n",
    "    },\n",
    "}\n",
    "sim = Simulation(\n",
    "    country=\"uk\",\n",
    "    scope=\"macro\",\n",
    "    baseline=AUTUMN_24_OBR_FORECAST,\n",
    "    reform=SPRING_25_OBR_FORECAST,\n",
    ")\n",
    "\n",
    "from policyengine_core.reforms import Reform\n",
    "from IPython.display import Markdown\n",
    "import pandas as pd\n",
    "\n",
    "baseline = Reform.from_dict(AUTUMN_24_OBR_FORECAST, country_id=\"uk\")\n",
    "reform = Reform.from_dict(SPRING_25_OBR_FORECAST, country_id=\"uk\")\n",
    "\n",
    "link = f\"https://legacy.policyengine.org/uk/policy?reform={reform.api_id}&baseline={baseline.api_id}&region=uk&timePeriod=2029\"\n",
    "\n",
    "Markdown(f\"[See the forecast change in PolicyEngine]({link})\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## The forecast change\n",
    "\n",
    "In this report we'll focus on the changes to core economic variables: employment income, mixed income, non-labour income, and inflation. The tables below show the prior and new values for these variables (totals, £ billion).\n",
    "\n",
    "* The **employment income** forecast by the OBR is used to update wages and salaries in PolicyEngine for future year modelling.\n",
    "* The **mixed income** forecast by the OBR is used to update self-employment incomes.[^1]\n",
    "* The **non-labour income** forecast by the OBR is used to update income from savings, investments, and pensions.\n",
    "* The **inflation** forecast by the OBR is used to update the price level in PolicyEngine, including policy parameters that are indexed to inflation.\n",
    "\n",
    "[^1]: Per the [OBR's definition](https://obr.uk/forecasts-in-depth/the-economy-forecast/income/#disposable), *\"mixed income is largely composed of self-employment income, which is derived from our forecasts of self-employment and whole economy average earnings\"*."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "### Employment income\n",
       "\n",
       "|   Year | Autumn 2024   | Spring 2025   |   Change (%) |\n",
       "|-------:|:--------------|:--------------|-------------:|\n",
       "|   2025 | 1,215.6       | 1,239.8       |         24.2 |\n",
       "|   2026 | 1,246.5       | 1,272.5       |         26   |\n",
       "|   2027 | 1,277.7       | 1,305.3       |         27.6 |\n",
       "|   2028 | 1,312.9       | 1,340.7       |         27.8 |\n",
       "|   2029 | 1,352.9       | 1,382.0       |         29.1 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 28,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the baseline and reform, column 1 is the baseline, column 2 is the reform, column 3 is the change. Years are rows\n",
    "\n",
    "\n",
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "def create_table(baseline, reform):\n",
    "    years = []\n",
    "    autumn_values = []\n",
    "    spring_values = []\n",
    "    change_values = []\n",
    "    variables = []\n",
    "    key_to_label = {\n",
    "        \"gov.obr.employment_income\": \"Employment income\",\n",
    "        \"gov.obr.mixed_income\": \"Mixed income\",\n",
    "        \"gov.obr.non_labour_income\": \"Non-labour income\",\n",
    "        \"gov.obr.consumer_price_index\": \"Consumer Price Index\",\n",
    "    }\n",
    "\n",
    "    for year in range(2025, 2030):\n",
    "        for key in baseline.keys():\n",
    "            years.append(year)\n",
    "            variables.append(key_to_label[key])\n",
    "            autumn_values.append(baseline[key][f\"year:{year}:1\"])\n",
    "            spring_values.append(reform[key][f\"year:{year}:1\"])\n",
    "            if key != \"gov.obr.consumer_price_index\":\n",
    "                change_values.append(\n",
    "                    reform[key][f\"year:{year}:1\"]\n",
    "                    - baseline[key][f\"year:{year}:1\"]\n",
    "                )\n",
    "            else:\n",
    "                change_values.append(\n",
    "                    (\n",
    "                        reform[key][f\"year:{year}:1\"]\n",
    "                        / baseline[key][f\"year:{year}:1\"]\n",
    "                        - 1\n",
    "                    )\n",
    "                    * 100\n",
    "                )\n",
    "\n",
    "    change_label = (\n",
    "        \"Change (%)\" if key == \"gov.obr.consumer_price_index\" else \"Change\"\n",
    "    )\n",
    "    df = pd.DataFrame(\n",
    "        {\n",
    "            \"Year\": years,\n",
    "            \"Variable\": variables,\n",
    "            \"Autumn 2024\": autumn_values,\n",
    "            \"Spring 2025\": spring_values,\n",
    "            change_label: change_values,\n",
    "        }\n",
    "    )\n",
    "    df[\"Year\"] = df[\"Year\"].astype(str)\n",
    "    df[\"Autumn 2024\"] = df[\"Autumn 2024\"].round(1)\n",
    "    df[\"Spring 2025\"] = df[\"Spring 2025\"].round(1)\n",
    "    df[change_label] = df[change_label].round(1)\n",
    "\n",
    "    df[\"Autumn 2024\"] = df[\"Autumn 2024\"].apply(add_thousands_separator)\n",
    "    df[\"Spring 2025\"] = df[\"Spring 2025\"].apply(add_thousands_separator)\n",
    "    df[change_label] = df[change_label].apply(add_thousands_separator)\n",
    "\n",
    "    return df\n",
    "\n",
    "\n",
    "reform_table = create_table(AUTUMN_24_OBR_FORECAST, SPRING_25_OBR_FORECAST)\n",
    "\n",
    "\n",
    "def get_table(key):\n",
    "    return Markdown(\n",
    "        f\"### {key}\\n\\n\"\n",
    "        + reform_table[reform_table.Variable == key]\n",
    "        .drop(\"Variable\", axis=1)\n",
    "        .set_index(\"Year\")\n",
    "        .to_markdown()\n",
    "    )\n",
    "\n",
    "\n",
    "get_table(\"Employment income\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "### Mixed income\n",
       "\n",
       "|   Year |   Autumn 2024 |   Spring 2025 |   Change |\n",
       "|-------:|--------------:|--------------:|---------:|\n",
       "|   2025 |         177.6 |         202.8 |     25.2 |\n",
       "|   2026 |         196.7 |         210.6 |     13.9 |\n",
       "|   2027 |         205.3 |         218.7 |     13.4 |\n",
       "|   2028 |         214.6 |         227.4 |     12.8 |\n",
       "|   2029 |         225   |         237.2 |     12.2 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_table(\"Mixed income\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "### Non-labour income\n",
       "\n",
       "|   Year |   Autumn 2024 |   Spring 2025 |   Change |\n",
       "|-------:|--------------:|--------------:|---------:|\n",
       "|   2025 |         460.8 |         503.3 |     42.5 |\n",
       "|   2026 |         512.7 |         531.6 |     18.9 |\n",
       "|   2027 |         535   |         555.6 |     20.6 |\n",
       "|   2028 |         554   |         574.6 |     20.6 |\n",
       "|   2029 |         571.8 |         594.5 |     22.7 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_table(\"Non-labour income\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "### Consumer Price Index\n",
       "\n",
       "|   Year |   Autumn 2024 |   Spring 2025 |   Change (%) |\n",
       "|-------:|--------------:|--------------:|-------------:|\n",
       "|   2025 |         138.1 |         139   |          0.7 |\n",
       "|   2026 |         141.1 |         141.7 |          0.4 |\n",
       "|   2027 |         144.1 |         144.5 |          0.3 |\n",
       "|   2028 |         147.1 |         147.4 |          0.2 |\n",
       "|   2029 |         150.1 |         150.4 |          0.2 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 29,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_table(\"Consumer Price Index\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Public sector net worth\n",
    "\n",
    "The table below shows the change in public sector net worth as a result of the forecast change (change to government tax revenue forecast minus spending). Public sector net worth (PSNW), defined by the [OBR](https://obr.uk/box/broader-measures-of-the-public-sector-balance-sheet/), is the broadest National Accounts measure of the public sector balance sheet in the UK.\n",
    "\n",
    "In the table below, we report *only the change to PSNW implied by the PolicyEngine model*, which is the simulated change in tax revenues less government spending on cash benefits implied by the change in the OBR forecast on the four economic metrics above (excluding debt interest spending). We do not account for behavioural responses in this score.\n",
    "\n",
    "Table 1: Change in public sector net worth (£ billion)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|                          |   2025 |   2026 |   2027 |   2028 |   2029 |   2025-2029 |\n",
       "|:-------------------------|-------:|-------:|-------:|-------:|-------:|------------:|\n",
       "| PSNW change (£ billions) |   28.4 |   19.3 |   20.8 |   20.9 |   21.5 |       110.9 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# First, PSND from forecast changes\n",
    "psnd_change = []\n",
    "years = []\n",
    "for year in range(2025, 2030):\n",
    "    psnd_baseline = (\n",
    "        sim.baseline_simulation.calculate(\"gov_balance\", year).sum() / 1e9\n",
    "    )\n",
    "    psnd_reform = (\n",
    "        sim.reform_simulation.calculate(\"gov_balance\", year).sum() / 1e9\n",
    "    )\n",
    "    change = psnd_reform - psnd_baseline\n",
    "    psnd_change.append(round(change, 1))\n",
    "    years.append(year)\n",
    "\n",
    "years.append(\"2025-2029\")\n",
    "psnd_change.append(round(sum(psnd_change), 1))\n",
    "\n",
    "Markdown(\n",
    "    pd.DataFrame({\"Year\": years, \"PSNW change (£ billions)\": psnd_change})\n",
    "    .set_index(\"Year\")\n",
    "    .T.to_markdown()\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "As shown, the OBR forecast update raises the government budget by £110.9 billion over the period 2025-2029. Per year, this is on average £22.2 billion."
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "Markdown(\n",
    "    f\"As shown, the OBR forecast update raises the government budget by £{psnd_change[-1]} billion over the period 2025-2029. Per year, this is on average £{round(psnd_change[-1]/5, 1)} billion.\"\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Poverty rates\n",
    "\n",
    "The government reports annually on four poverty metrics:\n",
    "\n",
    "* **Absolute poverty before housing costs**: households with income below 60% of the 2010/11 median income, adjusted for inflation.\n",
    "* **Absolute poverty after housing costs**: households with income below 60% of the 2010/11 median income after housing costs, adjusted for inflation.\n",
    "* **Relative poverty before housing costs**: households with income below 60% of the median income in the current year.\n",
    "* **Relative poverty after housing costs**: households with income below 60% of the median incomeafter housing costs in the current year .\n",
    "\n",
    "For each of these metrics, we simulate the change in the poverty rate and headcount as a result of the forecast change."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "def get_poverty(simulation, year, absolute, bhc, rate):\n",
    "    population = simulation.calculate(\"person_id\", year).count()\n",
    "    if absolute:\n",
    "        if bhc:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_poverty\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "        else:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_poverty_ahc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "    else:\n",
    "        if bhc:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_relative_poverty_bhc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "        else:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_relative_poverty_ahc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "\n",
    "    if rate:\n",
    "        return round(in_poverty / population * 100, 1)\n",
    "\n",
    "    else:\n",
    "        return round(in_poverty / 1e3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 2: Absolute poverty before housing costs\n",
       "\n",
       "|   Year |   Autumn EFO rate (%) | Autumn EFO headcount (thousands)   |   Spring EFO rate (%) | Spring EFO headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|----------------------:|:-----------------------------------|----------------------:|:-----------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                  12.5 | 9,125                              |                  12.3 | 8,961                              |                  -0.2 |                              -164 |\n",
       "|   2026 |                  12.3 | 9,025                              |                  12.1 | 8,854                              |                  -0.2 |                              -171 |\n",
       "|   2027 |                  12.3 | 9,113                              |                  12.1 | 8,947                              |                  -0.2 |                              -166 |\n",
       "|   2028 |                  12.3 | 9,101                              |                  12.1 | 8,968                              |                  -0.2 |                              -133 |\n",
       "|   2029 |                  12.4 | 9,206                              |                  12.1 | 9,048                              |                  -0.3 |                              -158 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def get_rate_table(absolute, bhc, i):\n",
    "    years = []\n",
    "    poverty_rates_autumn = []\n",
    "    headcounts_autumn = []\n",
    "    poverty_rates_spring = []\n",
    "    headcounts_spring = []\n",
    "    change_rates = []\n",
    "    change_headcounts = []\n",
    "    for year in range(2025, 2030):\n",
    "        years.append(year)\n",
    "        poverty_rates_autumn.append(\n",
    "            get_poverty(\n",
    "                sim.baseline_simulation, year, absolute, bhc, rate=True\n",
    "            )\n",
    "        )\n",
    "        poverty_rates_spring.append(\n",
    "            get_poverty(sim.reform_simulation, year, absolute, bhc, rate=True)\n",
    "        )\n",
    "        headcounts_autumn.append(\n",
    "            get_poverty(\n",
    "                sim.baseline_simulation, year, absolute, bhc, rate=False\n",
    "            )\n",
    "        )\n",
    "        headcounts_spring.append(\n",
    "            get_poverty(sim.reform_simulation, year, absolute, bhc, rate=False)\n",
    "        )\n",
    "        change_rates.append(\n",
    "            round(poverty_rates_spring[-1] - poverty_rates_autumn[-1], 1)\n",
    "        )\n",
    "        change_headcounts.append(\n",
    "            round(headcounts_spring[-1] - headcounts_autumn[-1], 0)\n",
    "        )\n",
    "\n",
    "    df = pd.DataFrame(\n",
    "        {\n",
    "            \"Year\": years,\n",
    "            \"Autumn EFO rate (%)\": poverty_rates_autumn,\n",
    "            \"Autumn EFO headcount (thousands)\": headcounts_autumn,\n",
    "            \"Spring EFO rate (%)\": poverty_rates_spring,\n",
    "            \"Spring EFO headcount (thousands)\": headcounts_spring,\n",
    "            \"Change in rate (pp)\": change_rates,\n",
    "            \"Change in headcount (thousands)\": change_headcounts,\n",
    "        }\n",
    "    )\n",
    "\n",
    "    for col in df.columns:\n",
    "        if \"thousands\" in col:\n",
    "            df[col] = df[col].apply(add_thousands_separator)\n",
    "\n",
    "    title = \"Absolute poverty\" if absolute else \"Relative poverty\"\n",
    "    title += \" before housing costs\" if bhc else \" after housing costs\"\n",
    "\n",
    "    return Markdown(\n",
    "        f\"Table {i}: {title}\\n\\n\" + df.set_index(\"Year\").to_markdown()\n",
    "    )\n",
    "\n",
    "\n",
    "get_rate_table(absolute=True, bhc=True, i=2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 3: Absolute poverty after housing costs\n",
       "\n",
       "|   Year |   Autumn EFO rate (%) | Autumn EFO headcount (thousands)   |   Spring EFO rate (%) | Spring EFO headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|----------------------:|:-----------------------------------|----------------------:|:-----------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                  16.1 | 11,713                             |                  15.6 | 11,372                             |                  -0.5 |                              -341 |\n",
       "|   2026 |                  16.1 | 11,777                             |                  15.4 | 11,329                             |                  -0.7 |                              -448 |\n",
       "|   2027 |                  16.2 | 11,980                             |                  15.6 | 11,529                             |                  -0.6 |                              -451 |\n",
       "|   2028 |                  16.3 | 12,082                             |                  15.6 | 11,607                             |                  -0.7 |                              -475 |\n",
       "|   2029 |                  16.4 | 12,196                             |                  15.7 | 11,682                             |                  -0.7 |                              -514 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=True, bhc=False, i=3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 4: Relative poverty after housing costs\n",
       "\n",
       "|   Year |   Autumn EFO rate (%) | Autumn EFO headcount (thousands)   |   Spring EFO rate (%) | Spring EFO headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|----------------------:|:-----------------------------------|----------------------:|:-----------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                  21.4 | 15,569                             |                  21   | 15,312                             |                  -0.4 |                              -257 |\n",
       "|   2026 |                  21.2 | 15,562                             |                  21.3 | 15,633                             |                   0.1 |                                71 |\n",
       "|   2027 |                  21.3 | 15,757                             |                  21.5 | 15,869                             |                   0.2 |                               112 |\n",
       "|   2028 |                  21.3 | 15,821                             |                  21.1 | 15,668                             |                  -0.2 |                              -153 |\n",
       "|   2029 |                  20.9 | 15,548                             |                  21   | 15,661                             |                   0.1 |                               113 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=False, bhc=False, i=4)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 5: Relative poverty after housing costs\n",
       "\n",
       "|   Year |   Autumn EFO rate (%) | Autumn EFO headcount (thousands)   |   Spring EFO rate (%) | Spring EFO headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|----------------------:|:-----------------------------------|----------------------:|:-----------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                  21.4 | 15,569                             |                  21   | 15,312                             |                  -0.4 |                              -257 |\n",
       "|   2026 |                  21.2 | 15,562                             |                  21.3 | 15,633                             |                   0.1 |                                71 |\n",
       "|   2027 |                  21.3 | 15,757                             |                  21.5 | 15,869                             |                   0.2 |                               112 |\n",
       "|   2028 |                  21.3 | 15,821                             |                  21.1 | 15,668                             |                  -0.2 |                              -153 |\n",
       "|   2029 |                  20.9 | 15,548                             |                  21   | 15,661                             |                   0.1 |                               113 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=False, bhc=False, i=5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Inequality\n",
    "\n",
    "We also project income inequality metrics in PolicyEngine's open source model, including the Gini coefficient, the share of income held by the top 10 percent, and the share of income held by the top 1 percent."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 6: Gini coefficient\n",
       "\n",
       "|   Year |   Autumn EFO |   Spring EFO |   Change (pp) |   Change (%) |\n",
       "|-------:|-------------:|-------------:|--------------:|-------------:|\n",
       "|   2025 |         35.3 |         35.7 |           0.4 |          1   |\n",
       "|   2026 |         35.5 |         35.7 |           0.2 |          0.5 |\n",
       "|   2027 |         35.6 |         35.8 |           0.2 |          0.6 |\n",
       "|   2028 |         35.6 |         35.8 |           0.2 |          0.5 |\n",
       "|   2029 |         35.7 |         35.9 |           0.2 |          0.5 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def get_inequality_table(metric, i):\n",
    "    years = []\n",
    "    autumn_values = []\n",
    "    spring_values = []\n",
    "    change_values = []\n",
    "    change_values_pct = []\n",
    "\n",
    "    for year in range(2025, 2030):\n",
    "        if metric == \"Gini coefficient\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).gini()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).gini()\n",
    "                * 100\n",
    "            )\n",
    "        elif metric == \"Top 10% share\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_10_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_10_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "        elif metric == \"Top 1% share\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_1_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_1_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "        years.append(year)\n",
    "        change_values.append(round(spring_values[-1] - autumn_values[-1], 1))\n",
    "        change_values_pct.append(\n",
    "            round(\n",
    "                (spring_values[-1] - autumn_values[-1])\n",
    "                / autumn_values[-1]\n",
    "                * 100,\n",
    "                1,\n",
    "            )\n",
    "        )\n",
    "\n",
    "    df = pd.DataFrame(\n",
    "        {\n",
    "            \"Year\": years,\n",
    "            \"Autumn EFO\": autumn_values,\n",
    "            \"Spring EFO\": spring_values,\n",
    "            \"Change (pp)\": change_values,\n",
    "            \"Change (%)\": change_values_pct,\n",
    "        }\n",
    "    )\n",
    "\n",
    "    df[\"Autumn EFO\"] = df[\"Autumn EFO\"].round(1)\n",
    "    df[\"Spring EFO\"] = df[\"Spring EFO\"].round(1)\n",
    "\n",
    "    return Markdown(\n",
    "        f\"Table {i}: {metric}\\n\\n\" + df.set_index(\"Year\").to_markdown()\n",
    "    )\n",
    "\n",
    "\n",
    "get_inequality_table(\"Gini coefficient\", i=6)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 7: Top 10% share\n",
       "\n",
       "|   Year |   Autumn EFO |   Spring EFO |   Change (pp) |   Change (%) |\n",
       "|-------:|-------------:|-------------:|--------------:|-------------:|\n",
       "|   2025 |         27.2 |         27.3 |           0.2 |          0.6 |\n",
       "|   2026 |         27.5 |         27.7 |           0.2 |          0.8 |\n",
       "|   2027 |         27.5 |         27.7 |           0.2 |          0.6 |\n",
       "|   2028 |         27.6 |         27.8 |           0.1 |          0.5 |\n",
       "|   2029 |         27.8 |         27.8 |          -0.1 |         -0.2 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_inequality_table(\"Top 10% share\", i=7)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 8: Top 1% share\n",
       "\n",
       "|   Year |   Autumn EFO |   Spring EFO |   Change (pp) |   Change (%) |\n",
       "|-------:|-------------:|-------------:|--------------:|-------------:|\n",
       "|   2025 |          7.9 |          8.2 |           0.3 |          3.9 |\n",
       "|   2026 |          8.2 |          8.3 |           0.1 |          1.3 |\n",
       "|   2027 |          8.2 |          8.4 |           0.1 |          1.5 |\n",
       "|   2028 |          8.3 |          8.4 |           0.1 |          1.5 |\n",
       "|   2029 |          8.3 |          8.5 |           0.1 |          1.4 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_inequality_table(\"Top 1% share\", i=8)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Household impacts\n",
    "\n",
    "The OBR forecast change lowers net income for some households and raises it for others, due to households having different compositions of income sources and spending. The chart below shows an extract of a thousand randomly-sampled households from our enhanced Family Resources Survey-based microdata, with the x-axis showing the household's income percentile in 2025 and the y-axis showing the change in net income in 2030 as a result of the forecast change.\n",
    "\n",
    "Figure 1: Change in net income by income percentile"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n",
       "    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n",
       "    <link href=\"https://fonts.googleapis.com/css2?family=Roboto+Serif:ital,opsz,wght@0,8..144,100..900;1,8..144,100..900&display=swap\" rel=\"stylesheet\">\n",
       "    "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from policyengine.utils.charts import *\n",
    "\n",
    "add_fonts()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "1.0250177071127051"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "sim.reform_simulation.calculate(\n",
    "    \"real_household_net_income\", 2030\n",
    ").mean() / sim.baseline_simulation.calculate(\n",
    "    \"real_household_net_income\", 2030\n",
    ").mean()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Percentile=%{x}\\u003cbr\\u003eGain=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"opacity\":0.5,\"symbol\":\"circle\"},\"mode\":\"markers\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[40.0,80.0,35.0,22.0,16.0,42.0,13.0,92.0,14.0,77.0,80.0,25.0,17.0,42.0,44.0,10.0,61.0,75.0,40.0,10.0,100.0,89.0,40.0,16.0,45.0,69.0,27.0,12.0,18.0,55.0,88.0,89.0,93.0,65.0,93.0,21.0,75.0,99.0,88.0,84.0,57.0,34.0,10.0,29.0,76.0,81.0,68.0,20.0,67.0,83.0,35.0,88.0,36.0,47.0,95.0,39.0,48.0,34.0,8.0,60.0,26.0,57.0,84.0,21.0,41.0,6.0,81.0,50.0,47.0,41.0,65.0,80.0,81.0,85.0,84.0,69.0,51.0,32.0,73.0,12.0,91.0,9.0,91.0,49.0,43.0,28.0,55.0,34.0,58.0,25.0,97.0,10.0,53.0,46.0,92.0,44.0,93.0,60.0,14.0,54.0,81.0,8.0,35.0,89.0,29.0,42.0,14.0,61.0,9.0,45.0,47.0,69.0,79.0,84.0,23.0,73.0,99.0,60.0,82.0,50.0,17.0,74.0,96.0,40.0,6.0,47.0,26.0,19.0,95.0,46.0,51.0,92.0,7.0,95.0,32.0,12.0,90.0,36.0,14.0,81.0,21.0,91.0,23.0,73.0,40.0,15.0,71.0,55.0,39.0,7.0,42.0,90.0,60.0,36.0,3.0,38.0,34.0,10.0,37.0,48.0,58.0,43.0,83.0,30.0,92.0,45.0,29.0,8.0,47.0,52.0,21.0,26.0,87.0,52.0,53.0,58.0,91.0,10.0,89.0,4.0,100.0,68.0,73.0,98.0,50.0,67.0,90.0,22.0,24.0,70.0,56.0,64.0,83.0,57.0,84.0,98.0,87.0,45.0,45.0,89.0,11.0,3.0,46.0,38.0,65.0,18.0,42.0,34.0,64.0,38.0,23.0,89.0,55.0,44.0,2.0,31.0,77.0,44.0,89.0,81.0,6.0,1.0,62.0,59.0,31.0,35.0,46.0,73.0,12.0,67.0,35.0,25.0,100.0,6.0,5.0,53.0,79.0,45.0,22.0,5.0,89.0,27.0,35.0,12.0,9.0,4.0,23.0,8.0,91.0,39.0,38.0,3.0,12.0,48.0,85.0,95.0,99.0,83.0,94.0,94.0,70.0,76.0,30.0,54.0,13.0,16.0,26.0,3.0,41.0,12.0,5.0,76.0,99.0,87.0,31.0,85.0,83.0,47.0,6.0,47.0,38.0,22.0,68.0,1.0,61.0,35.0,99.0,48.0,77.0,89.0,17.0,55.0,24.0,38.0,100.0,82.0,63.0,54.0,26.0,100.0,69.0,61.0,17.0,66.0,21.0,24.0,34.0,74.0,100.0,23.0,94.0,42.0,67.0,67.0,74.0,51.0,49.0,53.0,51.0,63.0,49.0,36.0,83.0,41.0,8.0,58.0,45.0,43.0,55.0,51.0,1.0,64.0,35.0,45.0,35.0,63.0,80.0,25.0,46.0,29.0,95.0,50.0,78.0,84.0,3.0,16.0,67.0,85.0,90.0,66.0,91.0,86.0,96.0,83.0,87.0,65.0,81.0,73.0,23.0,54.0,42.0,78.0,68.0,25.0,59.0,91.0,46.0,17.0,19.0,39.0,10.0,38.0,72.0,47.0,69.0,3.0,20.0,51.0,61.0,36.0,10.0,85.0,3.0,73.0,83.0,80.0,39.0,53.0,8.0,50.0,18.0,47.0,63.0,44.0,8.0,59.0,54.0,82.0,96.0,89.0,32.0,70.0,30.0,84.0,85.0,32.0,96.0,79.0,64.0,58.0,51.0,100.0,58.0,37.0,66.0,78.0,17.0,80.0,70.0,41.0,93.0,43.0,64.0,46.0,53.0,87.0,95.0,72.0,88.0,78.0,58.0,4.0,90.0,49.0,54.0,5.0,15.0,85.0,11.0,97.0,42.0,86.0,85.0,47.0,34.0,1.0,85.0,29.0,51.0,76.0,37.0,11.0,31.0,50.0,78.0,12.0,37.0,21.0,49.0,4.0,60.0,32.0,43.0,68.0,94.0,74.0,79.0,100.0,4.0,65.0,35.0,76.0,69.0,23.0,64.0,39.0,72.0,46.0,6.0,87.0,90.0,4.0,51.0,12.0,50.0,45.0,7.0,67.0,100.0,47.0,38.0,12.0,25.0,96.0,85.0,86.0,45.0,92.0,84.0,54.0,35.0,32.0,93.0,85.0,98.0,88.0,15.0,92.0,54.0,12.0,47.0,33.0,66.0,91.0,18.0,3.0,77.0,87.0,63.0,75.0,8.0,85.0,52.0,63.0,70.0,84.0,25.0,97.0,92.0,82.0,56.0,66.0,36.0,87.0,54.0,40.0,20.0,7.0,77.0,60.0,36.0,24.0,46.0,94.0,55.0,48.0,14.0,6.0,42.0,78.0,17.0,49.0,1.0,11.0,86.0,53.0,99.0,12.0,95.0,89.0,98.0,67.0,71.0,51.0,60.0,87.0,70.0,72.0,45.0,53.0,75.0,13.0,59.0,99.0,59.0,18.0,92.0,83.0,53.0,27.0,80.0,86.0,82.0,25.0,6.0,63.0,100.0,29.0,71.0,86.0,60.0,69.0,97.0,95.0,26.0,72.0,49.0,94.0,46.0,29.0,71.0,2.0,47.0,62.0,58.0,98.0,5.0,51.0,44.0,89.0,94.0,35.0,30.0,35.0,85.0,41.0,82.0,14.0,29.0,49.0,65.0,31.0,79.0,52.0,98.0,38.0,49.0,62.0,93.0,52.0,73.0,34.0,56.0,64.0,61.0,81.0,69.0,74.0,73.0,100.0,35.0,38.0,32.0,6.0,30.0,77.0,43.0,85.0,38.0,52.0,89.0,42.0,44.0,82.0,5.0,61.0,72.0,92.0,63.0,87.0,78.0,65.0,81.0,39.0,66.0,47.0,27.0,91.0,74.0,98.0,44.0,68.0,58.0,51.0,38.0,66.0,73.0,72.0,96.0,77.0,89.0,6.0,50.0,52.0,36.0,71.0,93.0,12.0,86.0,30.0,50.0,72.0,81.0,36.0,70.0,76.0,24.0,82.0,71.0,17.0,97.0,36.0,95.0,1.0,95.0,64.0,34.0,80.0,1.0,6.0,56.0,50.0,61.0,29.0,95.0,80.0,60.0,63.0,64.0,88.0,97.0,98.0,96.0,50.0,37.0,68.0,11.0,68.0,34.0,78.0,74.0,82.0,49.0,81.0,52.0,4.0,40.0,50.0,54.0,90.0,12.0,42.0,92.0,53.0,50.0,44.0,100.0,78.0,60.0,41.0,50.0,29.0,98.0,24.0,66.0,47.0,43.0,60.0,66.0,37.0,100.0,1.0,35.0,100.0,71.0,54.0,4.0,51.0,91.0,17.0,67.0,50.0,53.0,73.0,71.0,45.0,43.0,8.0,10.0,33.0,45.0,46.0,25.0,76.0,45.0,56.0,84.0,24.0,79.0,46.0,85.0,14.0,53.0,24.0,71.0,94.0,34.0,93.0,55.0,35.0,79.0,70.0,47.0,2.0,47.0,83.0,59.0,73.0,11.0,44.0,97.0,60.0,13.0,24.0,40.0,91.0,14.0,3.0,95.0,38.0,78.0,75.0,10.0,46.0,1.0,49.0,79.0,79.0,74.0,48.0,25.0,82.0,64.0,90.0,52.0,47.0,92.0,98.0,83.0,77.0,3.0,79.0,36.0,34.0,13.0,45.0,88.0,89.0,99.0,61.0,97.0,34.0,35.0,14.0,54.0,69.0,38.0,83.0,61.0,64.0,60.0,5.0,3.0,51.0,17.0,3.0,34.0,6.0,46.0,41.0,36.0,90.0,55.0,50.0,43.0,13.0,44.0,61.0,6.0,40.0,58.0,50.0,65.0,49.0,45.0,54.0,88.0,95.0,49.0,40.0,23.0,20.0,4.0,83.0,89.0,25.0,38.0,96.0,97.0,9.0,36.0,78.0,74.0,12.0,83.0,86.0,26.0,2.0,58.0,70.0,70.0,100.0,5.0,23.0,1.0,34.0,54.0,4.0,1.0,10.0,3.0,58.0,89.0,69.0,97.0,90.0,91.0,12.0,87.0,12.0,72.0,17.0,80.0,51.0,83.0,40.0,72.0,83.0,74.0,98.0,64.0,94.0,95.0,74.0,42.0,2.0,52.0,25.0,18.0,87.0,99.0,5.0,58.0,20.0,15.0,33.0,62.0,51.0,90.0,87.0,49.0,41.0,59.0,32.0,68.0,94.0,73.0,87.0,88.0,3.0,11.0,85.0,40.0,41.0,5.0,53.0,99.0,86.0,42.0,16.0,96.0,8.0,61.0,62.0,41.0,8.0,4.0,86.0,46.0,12.0,18.0,9.0,72.0,75.0,99.0,32.0,38.0,41.0,75.0,76.0],\"xaxis\":\"x\",\"y\":[1069.958984375,1519.14453125,336.826171875,419.408203125,348.787109375,770.21484375,233.7626953125,2061.0703125,621.4736328125,1303.796875,1346.4375,470.984375,421.134765625,796.12890625,776.958984375,725.6123046875,212.51171875,881.84765625,250.16015625,-43.9033203125,12807.0625,1682.5078125,364.548828125,86.537109375,261.92578125,1612.05859375,660.388671875,194.84375,429.208984375,897.3828125,1791.0078125,2376.4765625,2922.7109375,1453.78515625,2088.515625,487.60546875,1430.5625,7533.65625,1453.8828125,2163.21875,1150.8828125,667.88671875,218.6005859375,63.064453125,1813.15234375,2340.9609375,1557.3359375,656.021484375,1390.69921875,1550.0,141.236328125,1880.3671875,883.5,935.55859375,2474.875,257.458984375,891.7890625,604.9296875,25.822265625,1052.69921875,207.646484375,1205.8984375,1651.59375,429.302734375,451.271484375,298.9619140625,1685.27734375,681.62890625,814.5859375,1537.37109375,1471.94140625,1371.1640625,1354.59765625,1628.0625,1636.9296875,174.47265625,79.72265625,720.326171875,1983.19921875,133.4248046875,1790.734375,307.0947265625,2128.4609375,684.6875,104.486328125,693.541015625,99.00390625,344.16796875,831.16015625,546.216796875,3061.125,305.17578125,878.2109375,1246.63671875,2001.8125,967.931640625,2691.0234375,1282.06640625,511.0498046875,1105.3203125,1455.23046875,597.1298828125,746.92578125,2871.25,114.443359375,754.8046875,669.458984375,1027.23828125,376.5439453125,593.48828125,862.484375,391.09375,1524.1953125,1662.9609375,40.845703125,1728.2265625,4598.84375,900.7421875,1708.20703125,370.796875,88.30859375,1134.95703125,2910.7265625,200.697265625,184.0634765625,712.4140625,456.13671875,403.638671875,2458.78125,668.3671875,355.609375,1585.8046875,343.8935546875,2436.828125,608.1171875,278.96484375,1999.53125,802.45703125,348.95703125,2070.97265625,660.3828125,2406.5,99.505859375,1584.28515625,1923.23828125,210.1875,1202.8125,76.38671875,346.3515625,195.67578125,724.8671875,1427.8046875,235.86328125,962.357421875,-126.1552734375,850.529296875,609.2890625,261.2490234375,149.00390625,989.20703125,338.72265625,803.73046875,1585.140625,162.4296875,2062.546875,821.865234375,590.90625,358.5654296875,956.28515625,627.640625,696.0078125,651.984375,1824.6015625,441.7890625,1215.05859375,831.328125,1713.0625,494.962890625,1692.5546875,20.79296875,8098.59375,1161.25390625,1370.7421875,3121.171875,1456.58984375,1834.046875,2700.640625,99.46875,103.36328125,1843.609375,953.1640625,1386.75,1548.078125,958.625,1001.8984375,3722.3125,1820.1484375,628.12890625,1015.958984375,1542.7578125,454.90234375,-21.08837890625,122.115234375,555.533203125,1466.67578125,328.107421875,738.24609375,19.16015625,454.40625,258.89453125,600.115234375,1956.984375,286.3515625,1342.23828125,656.197021484375,794.5078125,2881.74609375,707.392578125,1915.3515625,1567.82421875,15.98828125,-7.460693359375,907.59765625,991.2265625,697.337890625,76.189453125,651.671875,2304.51953125,228.5634765625,1156.49609375,1161.873046875,409.275390625,7784.4375,212.994140625,198.4765625,1034.5,1710.41796875,111.4921875,727.2734375,-16.0029296875,2658.4296875,210.177734375,103.486328125,292.3623046875,412.529296875,34.326171875,62.349609375,885.666015625,2243.5,376.244140625,833.830078125,-104.48583984375,241.6337890625,675.265625,1911.7578125,2454.34375,4511.234375,1563.53125,2370.8671875,1915.1640625,1418.3203125,1569.1953125,544.6328125,899.1953125,360.75390625,238.505859375,527.0390625,35.30810546875,489.5703125,151.8583984375,198.7529296875,1633.62109375,4998.09375,1562.3515625,97.765625,2428.6640625,1681.4609375,1271.16796875,174.4736328125,729.578125,1148.939453125,72.767578125,1676.2578125,-38.53271484375,1095.99609375,622.94921875,3601.3125,266.484375,1543.9296875,1360.3046875,107.775390625,1167.3515625,224.408203125,497.263671875,47962.5,1706.28125,1076.5078125,554.203125,64.689453125,8212.78125,923.23828125,1100.953125,89.875,1232.73046875,195.982421875,65.302734375,645.458984375,1448.5390625,14919.1875,101.5,2278.984375,1080.302734375,971.22265625,866.6171875,1930.484375,962.609375,1316.17578125,414.546875,1201.00390625,1092.46484375,871.73828125,104.3515625,1481.6640625,737.330078125,285.064453125,209.66796875,826.865234375,1051.33984375,1307.578125,1068.1015625,4.09832763671875,257.51953125,132.15625,823.771484375,30.142578125,1182.3046875,1907.41015625,186.517578125,780.01171875,64.744140625,2275.3359375,1750.4609375,1537.69921875,1464.2890625,194.2333984375,124.890625,1401.5078125,2188.078125,1451.8515625,1124.15625,2025.7265625,2533.9375,1743.234375,2013.9921875,2213.4140625,1093.60546875,1424.8203125,1381.80078125,112.0234375,339.66796875,1106.6328125,2241.80078125,820.1328125,598.78125,581.69140625,1841.671875,766.763671875,216.23046875,651.619140625,703.689453125,278.529296875,106.51171875,1284.26953125,888.78515625,1401.74609375,8.201171875,505.4140625,1146.1796875,1399.51953125,69.953125,584.91015625,1599.3828125,194.46240234375,1283.90625,1229.46875,1494.5546875,402.4609375,1253.21875,287.2099609375,943.0078125,440.947265625,87.578125,1491.00390625,764.580078125,287.4326171875,1246.09375,715.32421875,1499.8359375,2941.1171875,2693.1171875,109.201171875,1888.5390625,66.8359375,1630.625,1631.078125,43.783203125,3977.78125,1518.1484375,1644.4453125,1178.7109375,92.1875,6187.21875,100.8359375,657.419921875,836.47265625,1828.3984375,419.455078125,1458.17578125,1247.015625,236.7578125,2376.4140625,1094.35546875,1258.51953125,856.240234375,906.15625,2023.9921875,2035.3046875,1393.6171875,1911.5859375,1403.84375,469.35546875,-6.65625,2041.0859375,1051.26171875,316.97265625,36.0068359375,72.880859375,1805.3203125,413.166015625,3071.6171875,549.107421875,2121.4765625,1700.609375,737.97265625,611.71484375,211.12890625,1646.046875,549.640625,845.49609375,1518.5234375,824.244140625,10.5810546875,213.69921875,870.20703125,1370.24609375,342.8720703125,183.744140625,52.16015625,1072.82421875,41.68994140625,1822.43359375,628.115234375,1353.869140625,2306.6171875,2493.25,1316.2265625,1621.16796875,7649.28125,25.7509765625,509.2265625,626.640625,1476.8515625,727.67578125,187.05859375,845.15625,855.966796875,604.6328125,889.556640625,374.8369140625,2412.5703125,1708.7734375,37.26806640625,1155.6640625,544.0830078125,925.421875,953.552734375,36.6845703125,482.6171875,24347.25,1060.8046875,756.54296875,81.01171875,491.396484375,2879.0859375,1717.359375,1925.4609375,805.865234375,1837.609375,2407.1796875,906.37109375,872.890625,750.412109375,2110.3984375,1425.125,3249.25,1974.7421875,433.732421875,2412.359375,1109.88671875,80.287109375,865.765625,518.763671875,1046.83984375,1956.2578125,727.919921875,-6.35498046875,1237.86328125,1921.9765625,889.66015625,1028.4375,218.8486328125,1425.578125,908.0,940.6015625,1254.62890625,1874.1484375,621.419921875,3713.7578125,1684.5546875,1648.8984375,69.22265625,980.0859375,256.44921875,1775.90625,874.00390625,847.40625,823.0390625,217.232421875,1512.62109375,851.7578125,297.169921875,105.525390625,30.02734375,1938.4921875,38.21484375,896.53515625,332.6220703125,208.1689453125,28.962890625,1539.21875,279.45703125,1159.16796875,203.00390625,546.8623046875,1848.1171875,1090.25,5850.375,50.822265625,1790.328125,1571.5546875,2808.578125,1298.0859375,1554.046875,900.00390625,916.4140625,1603.3671875,1319.015625,1637.06640625,828.568359375,748.1875,1706.7109375,253.634765625,542.62109375,2885.5625,1105.03515625,217.2890625,2197.5078125,1295.3046875,1290.7265625,39.91796875,2110.29296875,2115.3515625,1554.65625,553.212890625,116.4501953125,941.63671875,11420.21875,419.259765625,1226.46875,1942.40625,419.0,1287.16796875,3232.9375,2904.96875,69.96484375,1077.27734375,418.37109375,2183.84375,818.12109375,536.396484375,924.2734375,531.8564453125,1081.99609375,1556.22265625,939.15234375,4471.15625,173.814453125,266.20703125,246.638671875,2002.625,2316.8125,595.638671875,99.404296875,12.716796875,1885.71875,717.13671875,1504.671875,7.7744140625,724.611328125,83.09375,1261.1875,77.4140625,1716.07421875,712.28515625,3724.390625,31.623046875,1012.65625,860.84765625,2708.578125,1051.62890625,1770.8515625,15.73046875,1586.21875,1111.05078125,1132.8671875,1450.5,1387.2109375,1450.671875,1405.89453125,7419.859375,1110.73828125,451.109375,70.52734375,236.4111328125,97.208984375,1297.40625,1045.404296875,1382.0625,80.884765625,1305.07421875,1696.2734375,768.931640625,798.5546875,1883.4453125,200.921875,558.203125,129.84765625,1982.625,1714.984375,1626.515625,1523.28125,870.88671875,1855.72265625,1164.87890625,1205.515625,297.18359375,457.642578125,1723.0859375,1432.3515625,4331.09375,804.84375,1243.80859375,1046.52734375,376.84375,778.126953125,1153.92578125,1072.1796875,1611.1953125,4170.5390625,1313.25390625,2095.3828125,215.2978515625,696.875,1068.31640625,656.88671875,1711.5234375,1831.734375,573.4873046875,1969.0234375,65.125,393.98046875,1087.91796875,1801.56640625,1064.755859375,1551.13671875,597.25,56.830078125,1350.484375,1385.77734375,63.625,2731.8984375,616.21875,2864.6328125,-6.89599609375,2036.96875,1524.9921875,430.708984375,2013.41015625,-14.941650390625,503.3515625,969.67578125,865.14453125,1078.17578125,38.9921875,2105.9296875,1622.765625,1449.8203125,1371.24609375,1087.55859375,1827.921875,2290.15625,3644.0,2485.15625,892.9921875,240.998046875,1202.62109375,207.970703125,2237.7109375,625.126953125,1579.01953125,1381.84765625,1565.390625,701.91015625,1991.8671875,815.93359375,16.6728515625,886.544921875,868.7109375,1444.7734375,1979.7421875,228.4794921875,1285.9765625,2171.546875,1076.53125,914.51171875,295.48046875,8061.625,1999.69921875,1077.4765625,751.3359375,956.51953125,370.123046875,3402.953125,290.04296875,1273.3046875,330.10546875,320.7421875,8631.86328125,966.625,566.818359375,25967.875,107.24462890625,740.5234375,15094.25,1368.1796875,1149.5546875,50.671875,818.91015625,1720.984375,39.65625,1060.3125,984.12890625,1080.46875,1456.9609375,1295.0234375,481.732421875,721.40625,399.1396484375,240.8193359375,599.701171875,819.048828125,628.25390625,502.25390625,1450.71484375,357.380859375,1359.26171875,1649.515625,54.109375,1607.11328125,174.78125,1685.515625,408.96484375,708.8515625,450.126953125,1354.71875,2030.0546875,804.259765625,2152.0859375,1111.91796875,572.58984375,2007.3046875,1317.453125,839.16796875,9.5875244140625,863.078125,1617.6796875,1522.0078125,1058.96875,-11.6240234375,826.416015625,3312.0,980.65234375,298.4951171875,476.861328125,762.78125,1741.15625,50.470703125,-17.48828125,2700.6875,1002.966796875,1853.15234375,460.375,306.064453125,459.453125,-8.868408203125,913.4921875,1634.21484375,1354.4375,1322.19140625,926.046875,525.56640625,1647.984375,1488.828125,1924.75,1478.9921875,1286.01171875,2067.46875,3273.234375,1709.546875,1615.6484375,344.28662109375,1941.43359375,849.9375,626.48046875,150.083984375,919.47265625,1804.015625,1861.2421875,3970.1875,1039.3671875,3817.953125,620.5234375,97.880859375,387.34765625,2071.3828125,1548.20703125,801.16796875,1933.7734375,803.37890625,1222.87890625,1086.1953125,25.7333984375,15.8857421875,1292.0546875,90.958984375,-11.09130859375,149.919921875,315.96875,931.7109375,548.193359375,208.685546875,1813.65625,1292.98828125,932.6171875,732.8359375,471.9033203125,1037.583984375,855.6484375,171.341796875,88.302734375,1213.671875,377.48828125,1182.86328125,658.44921875,816.15625,750.63671875,2433.84375,2139.828125,48.5078125,746.484375,476.630859375,235.458984375,281.33984375,1571.390625,1901.578125,52.978515625,660.16015625,2348.7734375,2813.21875,355.0859375,737.556640625,1597.390625,957.3828125,533.0732421875,1697.4140625,2106.03125,541.97265625,132.682861328125,1051.8359375,1692.55078125,1399.26171875,22337.1875,234.3544921875,445.279296875,-137.501953125,743.169921875,936.09375,-19.16162109375,1011.0869140625,413.5537109375,181.03515625,1717.01171875,1769.15625,1363.7890625,2787.0703125,1800.7421875,2516.8671875,326.205078125,1962.1875,349.9384765625,1880.08984375,461.3984375,1109.31640625,139.328125,2123.4609375,156.798828125,2045.16796875,1300.3046875,1356.53515625,5171.5078125,1161.23828125,2140.890625,1875.3984375,2460.90234375,1117.2421875,-12.7728271484375,1051.85546875,69.5546875,438.220703125,2011.6171875,6243.78125,50.0341796875,1329.80859375,93.876953125,947.939453125,632.990234375,1120.37109375,851.609375,1834.640625,1501.6328125,327.45703125,181.03125,974.95703125,623.453125,1276.75,3261.2578125,1143.21875,1903.59375,1857.0546875,83.65673828125,353.361328125,1645.0859375,786.220703125,736.212890625,300.7578125,1361.46484375,3983.609375,1597.1015625,852.08203125,32.025390625,2150.4765625,394.1337890625,1091.390625,929.76953125,685.060546875,25.228515625,27.576171875,3199.7578125,563.984375,359.33203125,731.50390625,255.88671875,1594.26171875,1245.453125,4006.640625,99.095703125,375.181640625,747.865234375,104.75,498.28125],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Percentile\"}},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income (\\u00a3)\"},\"range\":[-5000,5000],\"tickformat\":\",.0f\"},\"legend\":{\"tracegroupgap\":0},\"margin\":{\"t\":100,\"l\":50,\"r\":50,\"b\":100,\"pad\":4},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"title\":{\"text\":\"OBR forecast change impact on households by percentile\"},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine UK\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"shapes\":[{\"line\":{\"color\":\"#616161\",\"dash\":\"solid\",\"width\":2},\"type\":\"line\",\"x0\":0,\"x1\":100,\"y0\":0,\"y1\":0}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "df = pd.DataFrame()\n",
    "df[\"weight\"] = sim.baseline_simulation.calculate(\n",
    "    \"household_weight\", 2030\n",
    ").values\n",
    "df[\"Gain\"] = (\n",
    "    sim.reform_simulation.calculate(\"real_household_net_income\", 2030).values\n",
    "    - sim.baseline_simulation.calculate(\n",
    "        \"real_household_net_income\", 2030\n",
    "    ).values\n",
    ")\n",
    "df[\"Percentile\"] = (\n",
    "    sim.baseline_simulation.calculate(\"real_household_net_income\", 2030)\n",
    "    .percentile_rank()\n",
    "    .values\n",
    ")\n",
    "\n",
    "import plotly.express as px\n",
    "\n",
    "fig = px.scatter(\n",
    "    df.sample(weights=\"weight\", n=1_000, random_state=1),\n",
    "    x=\"Percentile\",\n",
    "    y=\"Gain\",\n",
    "    color_discrete_sequence=[BLUE],\n",
    "    opacity=0.5,\n",
    ").update_layout(\n",
    "    title=\"OBR forecast change impact on households by percentile\",\n",
    "    xaxis_title=\"Percentile\",\n",
    "    yaxis_title=\"Change in net income (£)\",\n",
    "    showlegend=False,\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    font_color=\"black\",\n",
    "    yaxis_range=[-5_000, 5_000],\n",
    "    yaxis_tickformat=\",.0f\",\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine UK\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": \"#616161\"},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.20,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Add zero line\n",
    "\n",
    "fig.add_shape(\n",
    "    type=\"line\",\n",
    "    x0=0,\n",
    "    y0=0,\n",
    "    x1=100,\n",
    "    y1=0,\n",
    "    line=dict(\n",
    "        color=DARK_GRAY,\n",
    "        width=2,\n",
    "        dash=\"solid\",\n",
    "    ),\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Impact by income decile\n",
    "\n",
    "The chart below shows the relative change in income held by each 2030 household income decile, as a result of the change in the OBR forecast.\n",
    "\n",
    "Figure 2: Change in income by income decile"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile=%{x}\\u003cbr\\u003eRelative change=%{y}\\u003cbr\\u003eText=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"1.9%\",\"2.0%\",\"2.0%\",\"2.3%\",\"2.0%\",\"2.5%\",\"2.5%\",\"2.6%\",\"2.4%\",\"3.1%\"],\"textposition\":\"auto\",\"x\":[1,2,3,4,5,6,7,8,9,10],\"xaxis\":\"x\",\"y\":[0.019247149326981478,0.02023357590682839,0.020460483075160386,0.02286974072878526,0.019911543407832855,0.024777099660026773,0.02477875671690137,0.025885340736588137,0.024425674721593793,0.03068977979172698],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Relative change\"},\"tickformat\":\".0%\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"OBR forecast change impact on 2030 net income by income decile\"},\"barmode\":\"relative\",\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine UK\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "decile = sim.baseline_simulation.calculate(\"household_income_decile\", 2030)\n",
    "income = sim.baseline_simulation.calculate(\"real_household_net_income\", 2030)\n",
    "gain = sim.reform_simulation.calculate(\n",
    "    \"real_household_net_income\", 2030\n",
    ") - sim.baseline_simulation.calculate(\"real_household_net_income\", 2030)\n",
    "aggregate_change_by_decile = gain.groupby(decile).sum()\n",
    "relative_change_by_decile = (\n",
    "    gain.groupby(decile).sum() / income.groupby(decile).sum()\n",
    ")\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Aggregate change\": aggregate_change_by_decile.values,\n",
    "        \"Relative change\": relative_change_by_decile.values,\n",
    "        \"Income decile\": aggregate_change_by_decile.index,\n",
    "    }\n",
    ")\n",
    "df = df[df[\"Income decile\"] > 0]\n",
    "df[\"Text\"] = df[\"Relative change\"].apply(lambda x: f\"{x:.1%}\")\n",
    "\n",
    "fig = px.bar(\n",
    "    df,\n",
    "    x=\"Income decile\",\n",
    "    y=\"Relative change\",\n",
    "    text=\"Text\",\n",
    "    color_discrete_sequence=[BLUE],\n",
    "    labels={\n",
    "        \"Aggregate change\": \"Change in net income (£)\",\n",
    "        \"Income decile\": \"Income decile\",\n",
    "    },\n",
    "    title=\"OBR forecast change impact on 2030 net income by income decile\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    yaxis_tickformat=\".0%\",\n",
    "    xaxis_title=\"Income decile\",\n",
    "    xaxis_tickvals=list(range(1, 11)),\n",
    "    showlegend=False,\n",
    "    font_color=\"black\",\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine UK\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": \"#616161\"},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.20,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Households by beneficiary status\n",
    "\n",
    "The ONS [reports](https://www.ons.gov.uk/peoplepopulationandcommunity/personalandhouseholdfinances/incomeandwealth/bulletins/theeffectsoftaxesandbenefitsonhouseholdincome/financialyearending2023) on its self-defined net recipient rate. This is the percentage of households that receive more in (cash and in-kind) benefits than they pay in taxes.\n",
    "\n",
    "The table below shows the change in a similar measure, defined as the percentage of households that receive more in cash benefits than they pay in taxes, as a result of the forecast change."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 9: Net recipients by forecast \n",
       "\n",
       "|   Year |   Net recipients rate (%) (Autumn 2024) |   Net recipients rate (%) (Spring 2025) |   Change in rate (pp) |   Net recipients (Autumn 2024) (m) |   Net recipients (Spring 2025) (m) |   Change in net recipients (k) |\n",
       "|-------:|----------------------------------------:|----------------------------------------:|----------------------:|-----------------------------------:|-----------------------------------:|-------------------------------:|\n",
       "|   2025 |                                    45.4 |                                    44.9 |                  -0.5 |                               30.2 |                               29.8 |                           -462 |\n",
       "|   2026 |                                    45.3 |                                    44.9 |                  -0.3 |                               30.5 |                               30.2 |                           -316 |\n",
       "|   2027 |                                    45.1 |                                    44.7 |                  -0.4 |                               30.6 |                               30.2 |                           -379 |\n",
       "|   2028 |                                    44.9 |                                    44.6 |                  -0.3 |                               30.5 |                               30.3 |                           -253 |\n",
       "|   2029 |                                    44.8 |                                    44.5 |                  -0.3 |                               30.5 |                               30.2 |                           -254 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "years = []\n",
    "net_recipients_rate_a = []\n",
    "net_recipients_rate_s = []\n",
    "net_recipients_people_a = []\n",
    "net_recipients_people_s = []\n",
    "change_rate = []\n",
    "change_people = []\n",
    "\n",
    "for year in range(2025, 2030):\n",
    "    years.append(year)\n",
    "    net_recipients_rate_a.append(\n",
    "        (\n",
    "            sim.baseline_simulation.calculate(\"household_benefits\", year)\n",
    "            > sim.baseline_simulation.calculate(\"household_tax\", year)\n",
    "        ).mean()\n",
    "    )\n",
    "    net_recipients_rate_s.append(\n",
    "        (\n",
    "            sim.reform_simulation.calculate(\"household_benefits\", year)\n",
    "            > sim.reform_simulation.calculate(\"household_tax\", year)\n",
    "        ).mean()\n",
    "    )\n",
    "    change_rate.append(net_recipients_rate_s[-1] - net_recipients_rate_a[-1])\n",
    "    net_recipients_people_a.append(\n",
    "        (\n",
    "            sim.baseline_simulation.calculate(\n",
    "                \"household_benefits\", year, map_to=\"person\"\n",
    "            )\n",
    "            > sim.baseline_simulation.calculate(\n",
    "                \"household_tax\", year, map_to=\"person\"\n",
    "            )\n",
    "        ).sum()\n",
    "    )\n",
    "    net_recipients_people_s.append(\n",
    "        (\n",
    "            sim.reform_simulation.calculate(\n",
    "                \"household_benefits\", year, map_to=\"person\"\n",
    "            )\n",
    "            > sim.reform_simulation.calculate(\n",
    "                \"household_tax\", year, map_to=\"person\"\n",
    "            )\n",
    "        ).sum()\n",
    "    )\n",
    "    change_people.append(\n",
    "        net_recipients_people_s[-1] - net_recipients_people_a[-1]\n",
    "    )\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": years,\n",
    "        \"Net recipients rate (%) (Autumn 2024)\": net_recipients_rate_a,\n",
    "        \"Net recipients rate (%) (Spring 2025)\": net_recipients_rate_s,\n",
    "        \"Change in rate (pp)\": change_rate,\n",
    "        \"Net recipients (Autumn 2024) (m)\": net_recipients_people_a,\n",
    "        \"Net recipients (Spring 2025) (m)\": net_recipients_people_s,\n",
    "        \"Change in net recipients (k)\": change_people,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Net recipients rate (%) (Autumn 2024)\"] = df[\n",
    "    \"Net recipients rate (%) (Autumn 2024)\"\n",
    "].apply(lambda x: f\"{x*100:.1f}\")\n",
    "df[\"Net recipients rate (%) (Spring 2025)\"] = df[\n",
    "    \"Net recipients rate (%) (Spring 2025)\"\n",
    "].apply(lambda x: f\"{x*100:.1f}\")\n",
    "df[\"Change in rate (pp)\"] = df[\"Change in rate (pp)\"].apply(\n",
    "    lambda x: f\"{x*100:.1f}\"\n",
    ")\n",
    "\n",
    "df[\"Net recipients (Autumn 2024) (m)\"] = df[\n",
    "    \"Net recipients (Autumn 2024) (m)\"\n",
    "].apply(lambda x: f\"{x/1e6:,.1f}\")\n",
    "df[\"Net recipients (Spring 2025) (m)\"] = df[\n",
    "    \"Net recipients (Spring 2025) (m)\"\n",
    "].apply(lambda x: f\"{x/1e6:,.1f}\")\n",
    "df[\"Change in net recipients (k)\"] = df[\"Change in net recipients (k)\"].apply(\n",
    "    lambda x: f\"{x/1e3:,.0f}\"\n",
    ")\n",
    "\n",
    "\n",
    "Markdown(\n",
    "    f\"Table 9: Net recipients by forecast \\n\\n\"\n",
    "    + df.set_index(\"Year\").to_markdown()\n",
    ")"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": ".venv",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.11"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# HM Treasury pilots PolicyEngine UK for tax-benefit microsimulation
Slug: hmt-policyengine-pilot
Date: 2025-03-24
Authors: Nikhil Woodruff
Tags: uk, impact, featured
Description: The UK government's finance ministry explores PolicyEngine as a potential supplement to existing models.

---

The UK's HM Treasury has explored using PolicyEngine UK as a potential supplement to their existing tax-benefit models, marking a significant milestone in the recognition of PolicyEngine's accuracy and utility at the highest levels of government.

According to a [recently published Algorithmic Transparency Record](https://www.gov.uk/algorithmic-transparency-records/hmt-modelling-policy-engine) from December 17, 2024, HM Treasury's Personal Tax, Welfare and Pensions team conducted a beta/pilot evaluation of PolicyEngine UK to assess its capabilities in microsimulating tax and benefit policy changes.

The Treasury record notes that PolicyEngine UK "uses machine learning and gradient descent methods to tackle two key sources of error in household survey data typically used for modelling tax and welfare policies: under-sampling of certain demographics of households or individuals, and measurement errors such as underreporting of income and benefits."

HM Treasury explored the scope for "making greater use of this model for advising policymakers on the impact of tax and welfare measures on households, supplementing the existing models used for this (such as the Intra-Governmental Tax and Benefit Microsimulation model – IGOTM)."
Media coverage of this pilot appeared in [The Times](https://www.thetimes.co.uk/uk/politics/article/how-civil-servants-really-use-ai-from-lesson-plans-to-recruitment-k8nzghbn8), which noted that "The Treasury is using the technology to more accurately measure how changes to national insurance, income tax and universal credit would affect different groups. It is believed that the tool, PolicyEngine, can more accurately predict the outcome of ministers' decisions and is expected to be used mostly in budget periods." The Guardian also [mentioned](https://www.theguardian.com/technology/2024/dec/17/amazon-hosted-ai-tool-for-uk-military-recruitment-carries-risk-of-data-breach) PolicyEngine in its coverage of the government's AI tools initiatives.

The Treasury's review of PolicyEngine highlighted several features, including:

- Combining multiple years of Family Resources Survey data for increased robustness
- Using Survey of Personal Incomes (SPI) imputation with random forest models to address income measurement errors
- Employing gradient descent reweighting to minimise loss between survey aggregates and target statistics
- Imputing additional variables using multiple data sources including the Wealth and Assets Survey and Living Costs and Food Survey
- Using microsimulation to uprate policies to target years

This comes not long after the [December 2024 announcement](/uk/research/posts/uk-nuffield-grant) that PolicyEngine received a £251,296 grant from the Nuffield Foundation to enhance our UK tax-benefit microsimulation model. The Nuffield-funded project will significantly expand PolicyEngine UK's capabilities, including:

- Creating representative micro-datasets for each local authority and constituency
- Integrating childcare subsidies and major public service spending
- Developing validation tools comparing PolicyEngine outputs to other microsimulation models
- Implementing user-centric design improvements with AI capabilities

The Treasury's assessment included risk considerations as part of their evaluation process. As noted in their transparency record, potential risks like "Erroneous Operation of the Code" would be mitigated through "thorough review and testing" involving both technical and policy teams - a common approach for any model implementation in government settings.

These developments represent significant recognition of PolicyEngine's open-source approach to tax-benefit microsimulation and our mission to democratise economic policy analysis tools.



---

---
# Extending the Income Tax threshold freeze to 2030
Slug: income-tax-freeze
Date: 2025-03-25
Authors: Nikhil Woodruff
Tags: uk, policy, featured
Description: PolicyEngine estimates extending the personal allowance and higher rate threshold freeze would raise £12.2 billion over two years.

---

_Credit: HM Treasury_

[See the full impacts on PolicyEngine here in 2028](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=68997&region=uk&timePeriod=2028&baseline=1) and [2029](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=68997&region=uk&timePeriod=2029&baseline=1).

The Resolution Foundation on Monday 17th March [proposed](https://www.resolutionfoundation.org/press-releases/chancellor-needs-take-action-to-balance-the-books/) extending the freeze on the income tax personal allowance and higher rate threshold for an additional two years. This policy would raise over £12 billion in tax revenue and would affect taxpayers across all income groups.

## The reforms

Currently, the personal allowance (£12,570) and higher rate threshold (£50,270) are frozen until 2028. The proposed extension would maintain these thresholds at their current levels until 2030, representing a seven-year freeze since they were last uprated in 2021.

### Taxpayer band changes

Our analysis shows the following changes in taxpayer bands due to the extended freeze:

- **Basic rate taxpayers**: By 2029, an estimated 640,000 additional people would become basic rate taxpayers who otherwise would have remained below the personal allowance threshold.
- **Higher rate taxpayers**: Approximately 906,000 additional people would move from basic rate to higher rate taxpayers by 2029.
- **Additional rate taxpayers**: The counts of additional rate taxpayers are not affected by the threshold freeze.

These shifts would occur primarily in England, Wales and Northern Ireland, as Scotland sets its own income tax thresholds.

## Methodology notes

We model the proposed extension of the freeze from April 2028 to April 2030 using the fiscal year 2029-30 for our analysis. Our projections account for expected inflation and wage growth, following OBR forecasts.

## UK impacts

Using PolicyEngine's open-source model, we estimate both the budgetary and distributional impacts of extending the freeze.

### Budgetary impact

We project that extending the income tax threshold freeze would raise approximately £12.2 billion over the two additional years:

| Fiscal year   | 2028-29 | 2029-30 | Total |
| ------------- | ------- | ------- | ----- |
| Revenue (£bn) | 4.0     | 8.2     | 12.2  |

### Distributional impacts

The extension of the freeze would affect taxpayers across the income distribution. Our analysis shows households in the ninth, seventh, and eighth income deciles would experience the largest proportional reductions in net income (-0.66%, -0.58%, and -0.57% respectively).

[Chart: type: bar]

[Chart: type: bar]

Higher-income households lose more in monetary terms, while the proportional impact varies across the income distribution. Our analysis shows impacts of -0.66% in the ninth income decile, -0.58% in the seventh decile, and -0.57% in the eighth decile, reflecting the dual effect of freezing both the personal allowance and higher rate threshold.

We estimate that 82% of UK households would be affected by the extension, with the impact concentrated among those in employment. Households primarily relying on benefits rather than earnings would see less impact from the freeze.

The reform would reduce the Gini coefficient by 0.07% and increase poverty rates by 0.17% (from 12.20% to 12.23%).

Working-age singles and couples without children would face larger proportional reductions in income, as these groups more commonly have taxable incomes above the personal allowance.



---

---
# PolicyEngine's 2022 year in review
Slug: policyengine-2022-year-in-review
Date: 2022-12-30
Authors: Max Ghenis
Tags: global, impact
Description: A year of launches, analysis, and building for the future.

---

When we wrote [last year’s year in review blog post](https://blog.policyengine.org/policyengines-2021-year-in-review-cfb4893ecf2e), PolicyEngine had only three months and one country model (the UK) under its belt. Still, we showed how our transparent, software-driven approach to public policy analysis could transform society through our range of features, use cases, and partnerships.

This year, we launched in the US, improved our data and modeling architecture, and contributed real time analysis to unfolding policies. We also invested in new partnerships and set the stage for a groundbreaking 2023. Here are some of our highlights.

## Launching new policies and models

In March, we had our biggest launch to date: [PolicyEngine US](https://blog.policyengine.org/policyengine-comes-stateside-cef88b122e48). We initially showed how current policy and custom reforms affect individual households, then [added population impacts in July](https://blog.policyengine.org/the-new-policyengine-us-population-impact-page-de68cb4ba71a) using the Current Population Survey.

![[PolicyEngine US model of the End Child Poverty Act, a bill from Representatives Mondaire Jones and Rashida Tlaib](https://legacy.policyengine.org/us/population-impact?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20&young_child_bi_amount=4720)](https://cdn-images-1.medium.com/max/3200/0*nscDM9ElP6y9udM1)_[PolicyEngine US model of the End Child Poverty Act, a bill from Representatives Mondaire Jones and Rashida Tlaib](https://legacy.policyengine.org/us/population-impact?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20&young_child_bi_amount=4720)_

But the US is not just one launch: each state has their own benefit program rules, and most have their own income tax as well. We added state income tax models in Maryland, Massachusetts, Oregon, New York, Pennsylvania, and Washington. In addition to video-filled launch posts for [New York](https://blog.policyengine.org/policyengine-launches-in-new-york-state-c96c4647d7f0) and [Washington](https://blog.policyengine.org/policyengine-launches-in-washington-state-863487751f9a), we dove into programs like [Oregon’s Earned Income Tax Credit](https://blog.policyengine.org/computing-your-oregon-earned-income-tax-credit-in-policyengine-d911ae29749d) and [Exemption Credit](https://blog.policyengine.org/oregons-nonrefundable-exemption-credit-b5ea8137fd0), [Maryland’s Standard Deduction](https://blog.policyengine.org/marylands-standard-deduction-a3a147823ee8), and [Supplemental Security Income](https://blog.policyengine.org/estimating-your-supplemental-security-income-benefits-in-policyengine-74c6396ee402).

Also in March, we [applied gradient descent to reweight the UK microdata](https://blog.policyengine.org/how-machine-learning-tools-make-policyengine-more-accurate-17af859cdd97), making PolicyEngine the most accurate UK microsimulation model. And last month, we [forked OpenFisca into our own microsimulation framework](https://blog.policyengine.org/from-openfisca-to-policyengine-1aee30940408), improving the stability and extensibility of our software.

## Showing PolicyEngine in action

Either through us or other analysts, PolicyEngine provided analysis for dozens of policies in 2022. The UK’s rapid leadership changes created a flurry of proposals, which we number-crunched in stride. After analyzing [May’s Cost of Living Support Package](https://blog.policyengine.org/impact-of-the-chancellors-cost-of-living-support-package-5c4557b84696), we turned to proposals from then-Prime Minister candidates: [Rishi Sunak’s Basic Rate cut](https://blog.policyengine.org/rishi-sunaks-proposal-to-cut-the-basic-rate-to-16-percent-cd70851fef09) and [Liz Truss’s marriage allowance rise](https://blog.policyengine.org/raising-the-marriage-allowance-from-10-to-100-9c7380ecac13). When Truss took 10 Downing, we studied her [energy bill price cap](https://blog.policyengine.org/prime-minister-liz-trusss-energy-bill-price-cap-cfcfbd7b4dec), [stamp duty cut](https://blog.policyengine.org/stamp-duties-in-policyengine-uk-6087dc05c135), and [cuts to Income Tax, National Insurance, and other taxes](https://blog.policyengine.org/tax-cuts-in-prime-minister-trusss-growth-plan-2022-a4a862892dc1).

In the US, we [modeled programs in the Inflation Reduction Act like clean vehicle tax credits](https://blog.policyengine.org/electric-vehicle-tax-credits-under-current-law-and-the-inflation-reduction-act-ef305718bcc3), and more recently, we [recorded how we updated our model’s SNAP rules to reflect the omnibus bill reforms](https://blog.policyengine.org/updating-policyengine-to-reflect-snap-reform-in-the-omnibus-bill-ec6b8a248f81). We also shed light on the giving season by [showing how charitable contributions affect taxes](https://blog.policyengine.org/how-charitable-contributions-affect-americans-taxes-9f503ba087d0).

![[Chart](https://blog.policyengine.org/electric-vehicle-tax-credits-under-current-law-and-the-inflation-reduction-act-ef305718bcc3) built with the PolicyEngine Python package showing the impact of the electric vehicle tax credit before the Inflation Reduction Act](https://cdn-images-1.medium.com/max/2800/0*YS_jjQ2CRCuiQwdL)_[Chart](https://blog.policyengine.org/electric-vehicle-tax-credits-under-current-law-and-the-inflation-reduction-act-ef305718bcc3) built with the PolicyEngine Python package showing the impact of the electric vehicle tax credit before the Inflation Reduction Act_

We shared PolicyEngine far and wide, from the [Green Party of England and Wales’s PolicyFest](https://blog.policyengine.org/the-green-party-manifesto-at-policyfest-ee05a2d3b06d) to the [US Congressional Budget Office](https://docs.google.com/presentation/d/1eUje1FJKhylVW8mtBA6dIAngTeCxQ_icJiWpw89zsUg/edit). We presented PolicyEngine at [Georgetown’s Beeck Center](https://blog.policyengine.org/policyengine-at-the-basic-income-guarantee-conference-and-the-beeck-centers-rules-as-code-demo-day-a667ef4f1516), the [Basic Income Guarantee Conference](https://blog.policyengine.org/policyengine-at-the-basic-income-guarantee-conference-and-the-beeck-centers-rules-as-code-demo-day-a667ef4f1516), [Berkeley Initiative for Transparency in the Social Sciences](https://docs.google.com/presentation/d/1Qox-mNhLaP_QLXJByh8t2wP2uqYG2DZQLSzpQLN9JTs/edit), [Tax Economists Forum](https://docs.google.com/presentation/d/1DXKXyW2jBqo0xUX5e8YS9CD1quqxaUcst-m288I55SI/edit#slide=id.g6293382480_0_338), [Civic Tech Chat](https://civictech.chat/2022/08/technology-for-understanding-policy), [Move Nevada Forward](https://www.youtube.com/watch?v=3YWiZzgd674), the [Society of Actuaries](https://docs.google.com/presentation/d/13TbdtypYMqLW-KJ6jH9Ju7V5aZxI77rxpOs03MUgqhg/edit), and various UK parliamentary groups.

![From left: Scott Santens, PolicyEngine research assistant Aleida Baumgartner, and PolicyEngine co-founder and CTO Nikhil Woodruff, at the Basic Income Guarantee Conference](https://cdn-images-1.medium.com/max/3200/0*BvcAGyy0dBnBN_DA)_From left: Scott Santens, PolicyEngine research assistant Aleida Baumgartner, and PolicyEngine co-founder and CTO Nikhil Woodruff, at the Basic Income Guarantee Conference_

For researchers, we wrote about [how we estimate the effects of UK carbon taxes](https://blog.policyengine.org/how-policyengine-estimates-the-effects-of-uk-carbon-taxes-260ccfc5d97c) and [how to use PolicyEngine to simulate basic and guaranteed income policies](https://blog.policyengine.org/how-to-simulate-basic-and-guaranteed-income-policies-in-policyengine-us-6fbfaad5bb74). PolicyEngine powered research projects at the [Centre for Policy Studies](https://cps.org.uk/wp-content/uploads/2022/03/National-Insurance_A-plan-to-blunt-the-pain.pdf), [Social Market Foundation](https://www.smf.co.uk/commentary_podcasts/cost-of-living-crisis-response/), [UBI Center](http://ubicenter.org), [Center for Growth and Opportunity](https://www.thecgo.org/research/how-does-targeted-cash-assistance-affect-incentives-to-work/), [Maryland Child Alliance](http://marylandchildalliance.org), [End Poverty Make Trillions](https://endpovertymaketrillions.medium.com/economic-modeling-of-how-to-end-poverty-in-the-united-states-while-saving-taxpayers-trillions-of-1679b751d0c0), [Centre Think Tank](https://centrethinktank.co.uk/2022/05/26/comparing-rishi-sunaks-plan-to-a-single-universal-payment/), and more.

And for developers, we also wrote about [how to use our API](https://blog.policyengine.org/how-developers-can-explore-the-policyengine-api-647bd3968db), which is used in products from the [Fund for Guaranteed Income](https://f4gi.org/) and [Gary Community Ventures](https://garycommunity.org/). This developer documentation made our hackathon projects with [DemocracyLab](https://www.democracylab.org/) and [EA Global](https://www.effectivealtruism.org/ea-global) more productive, too.

![Left: PolicyEngine team at the DemocracyLab Hackathon in Seattle. Right: PolicyEngine/GiveCalc team at the Effective Altruism Global Hackathon in Berkeley.](https://cdn-images-1.medium.com/max/3160/0*BCiDTB_4pp8MqFam)_Left: PolicyEngine team at the DemocracyLab Hackathon in Seattle. Right: PolicyEngine/GiveCalc team at the Effective Altruism Global Hackathon in Berkeley._

## Building for the future

Earlier this week, we [released our plan](https://blog.policyengine.org/enhancing-the-current-population-survey-for-policy-analysis-9a7d8e405daa) to improve our US model’s accuracy with modern data science techniques. We’re excited to start that work in early 2023, and we’ve also been exploring other opportunities to leverage the recent explosion of artificial intelligence tools to make policy analysis more robust, accessible, and even delightful.

Much more is on our horizon. We’ve been hard at work on a ground-up rewrite of our app, which will improve usability and add features and state tax models. We also expect to model all remaining US states and PolicyEngine Canada (at least a prototype) next year. At that point, PolicyEngine will provide real time analysis on a wide range of policy conversations. If you’re a policy analyst looking to amplify your work with best-in-class tools, we’d love to help.

This wouldn’t be possible without our donors (Dylan Hirsch-Shell, [End Poverty Make Trillions](https://www.endpovertymaketrillions.com/), [Innovation Network for Communities](https://in4c.net/), and [Gary Community Ventures](https://garycommunity.org/)), partners ([Center for Growth and Opportunity](https://www.thecgo.org/), [UBI Lab Northern Ireland](https://www.ubilabnetwork.org/blog/proposing-a-recovery-universal-basic-income-for-northern-ireland), [Maryland Child Alliance](http://marylandchildalliance.org), [OpenFisca](http://openfisca.org), and [Policy Simulation Library](http://pslmodels.org)), advisors, and [dozens](https://github.com/PolicyEngine/policyengine-us/graphs/contributors) [of](https://github.com/PolicyEngine/policyengine-uk/graphs/contributors) [open](https://github.com/PolicyEngine/policyengine-app/graphs/contributors) [source](https://github.com/PolicyEngine/policyengine/graphs/contributors) [contributors](https://github.com/PolicyEngine/policyengine-core/graphs/contributors). We’re grateful for the support of each of these individuals and groups, most of whom joined us this year. If you’d like to accelerate our development and growth, you can [make a donation](https://opencollective.com/psl) or [get in touch](mailto:hello@policyengine.org).

Thanks for a wonderful 2022. We can’t wait to share more next year!

![](https://cdn-images-1.medium.com/max/2400/0*9Uxz3vqb8tnhYQXy)



---

---
# How machine learning tools make PolicyEngine more accurate
Slug: how-machine-learning-tools-make-policyengine-more-accurate
Date: 2022-03-07
Authors: Nikhil Woodruff
Tags: uk, technical
Description: Today, we're launching new survey weights that cut deviations from administrative statistics by 97%.

---

When you click “Calculate UK impact” in PolicyEngine, our servers run through tens of thousands of UK households, and for each one, they crunch how your policy affects taxes and benefits. Each of those households in turn represents hundreds or thousands of real UK households, such that adding them up produces measures like budgets, poverty, and inequality. By the time the UK impact screen loads, we’ve calculated each of those measures under your policy, compared it to baseline policy, and summarised the results into charts and graphs.

![](https://cdn-images-1.medium.com/max/3200/0*0JQZPaICpWesixXJ)

This technique is called _microsimulation_, and its heart is a representative survey — that set of tens of thousands of households. Like five of the six other UK microsimulation models, we use the [Family Resources Survey](https://www.gov.uk/government/collections/family-resources-survey--2) produced by the Department of Work and Pensions. The DWP releases a new FRS each year (the latest is for 2019–20), and reports demographic variables like age, location or disability, as well as financial variables like earnings, benefit receipt or pension income.

## Standard accuracy improvements fell short

From the start, we’ve adjusted the FRS to make it more useful for microsimulation. Like other microsimulation models, we’ve:

- Replaced reported tax and benefit values with our calculations (for benefit participants)

- Uprated population and income from 2019–20 to 2022 using government projections

- Assumed that some households claim benefits when eligible, even when they don’t report claiming them, according to government estimates of take-up rates

- Moved households from legacy benefits to Universal Credit according to roll-out rates

However, even our adjusted FRS failed to match administrative totals on a variety of measures. For example, Income Tax revenue in 2019 was £165bn in the model, compared to £190bn by administrative statistics. Across benefit programs, we were often off by between 10% and 40%.

Two possible issues explained our remaining discrepancies:

1. Measurement error, in which FRS respondents misreport their financial situation

1. Sampling error, in which FRS households misrepresent UK households

As we dug further, we found that for many benefits, we could adjust take-up rates to either match official expenditure or official caseloads, but not both. This situation can only occur if the households claiming a benefit in the model are fundamentally different from the households claiming the benefit in reality. So, having exhausted our options to address measurement error, and with evidence on hand that the survey was unrepresentative of the population, we turned to sampling error.

Specifically, we questioned the household weights: the number of real-world households a given FRS respondent represents. DWP assigns weights by a [multi-stage process](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/321820/initial-review-family-resources-survey-weighting-scheme.pdf):

1. Randomly sampling postcode addresses (approximately one in 650). If surveyors find multiple households at an address, they select one and adjust the weight.

1. Calibrating weights to match administrative statistics for the following metrics (with slight variations).

These calibrations included targeting metrics like:

1. Age group-sex-region bins (for example, the number of men aged 30 to 39 in London)

1. Population counts by region, tenure type and council tax band

Could we do better?

## Enter: gradient descent

To find the “best” weights for the FRS, we first need to define what we mean by “best”. To do this, we define a _loss function_, which reduces an array of household weights into a single number (the _loss_): the lower, the better. We then apply an optimisation procedure to find the array of weights that minimises this loss function.

We compute our loss function as follows:

1. For each of 1,512 targets, compute the squared relative error. For example, the FRS estimates Housing Benefit to be £13.6bn, while the administrative total is £18.4bn; the initial squared error for this target would be ((13.6–18.4)/18.4)²=0.068.

1. Multiply each squared relative error by the baseline target, so as to weigh larger targets more.

1. Assign each target to one of four categories: populations, families, households, or budgetary impacts, according to their unit. For each category, compute the log of the change to percent error against the baseline.

1. Compute the final loss as the average log percent error across each category, with half of the total weight going to budgetary impacts and the other half on the other categories. That is, we value a 50% improvement in the loss for budgetary impact statistics the same as a 50% improvement in the combined loss for population, family and household statistics.

Having constructed our loss function, we can adjust the weights to minimise the loss via gradient descent:

1. For each survey household, calculate the _gradient_ of the loss function with respect to the household’s weight. This is the extent to which the total loss metric would increase if the household’s weight increased: if the gradient with respect to a household is positive, then increasing the weight would worsen accuracy, and vice versa. The larger the absolute gradient is, the more adjusting a household’s weight affects the loss function.

1. Multiply the gradient by a small number, called the _learning rate_, and subtract it from the initial vector of weights to create a new set of weights.

1. Recompute the loss with the new weights.

1. Repeat steps 1–3, which constitute an _epoch_, until some stopping criterion is met.

## Tuning the model

As with other machine learning models, this iterative approach risks _overfitting_–that is, we might over-optimise for the measures in the loss function, at the expense of other measures we haven’t yet included. Machine learning models often reserve a set of records to validate their predictions on, and tune hyperparameters (e.g., learning rate and number of epochs) to avoid overfitting on the training data at the expense of these out-of-sample predictions. Our analogy to that is reserving a set of validation targets.

Specifically, we trained our model five times, each time reserving 20% of the targets for validation, and training on the other 80%. Each 20% was exclusive of the others, such that all metrics were validated against in one of the five validation runs.

![](https://cdn-images-1.medium.com/max/2000/0*ta4Hz9miF7u83_mt)

Averaging over the five runs showed that gradient descent continues to reduce total loss (training plus validation metrics) for at least 200 epochs.

![](https://cdn-images-1.medium.com/max/2000/0*l6Eo4qs_jbBvQueu)

Based on these results, we chose to produce the final weights by training again with all the targets in the loss function, stopping at 200 epochs.

## Results

Our procedure reduced the total loss by 97%, with the regional populations and country-wide budgetary impact categories seeing the largest improvements.

![](https://cdn-images-1.medium.com/max/2000/0*eEAuyeu6kE5fJcP6)

![](https://cdn-images-1.medium.com/max/2000/0*lYp59pEkyRJED81P)

Of the six other UK microsimulation models, only UKMOD publishes their aggregates to compare against. We find that our improved weights produce up to 80% lower aggregate and caseload errors on individual programs.

![](https://cdn-images-1.medium.com/max/2000/0*BH4WBVIvOhfZVBaD)

Our relative errors are highest for the smallest benefit programs (those with less than £10 billion annual expenditure), in part because our loss function prioritises larger programs.

## Where we go from here

We’ve published [our weights on GitHub](https://github.com/PolicyEngine/openfisca-uk/tree/master/data/weights) for other analysts and microsimulation modellers to use, [documented our approach with interactive visualisations](https://policyengine.github.io/openfisca-uk//model/reweighting.html), and effective today, updated [PolicyEngine UK](https://legacy.policyengine.org/uk) to use the new weights. In the future, we’ll refine and extend our weights with more targets, mid-year adjustments, and multi-year extrapolations.

We will also continue to develop other ways of enhancing PolicyEngine with state-of-the-art data science. For example, we are continuing to invest in our [machine learning-based synthimpute technology](http://blog.pslmodels.org/demo-day-22-synthimpute) to fuse variables from other surveys, such as wealth from the Wealth and Assets Survey and consumption from the Living Costs and Food Survey, to model a broader range of policy reforms.

We’re excited to explore other ideas for improving public policy analysis with technology, and welcome any other modellers to [reach out](mailto:contact@policyengine.org) with feedback or ideas.



---

---
# Enhancing the Current Population Survey for policy analysis
Slug: enhancing-the-current-population-survey-for-policy-analysis
Date: 2022-12-28
Authors: Max Ghenis
Tags: us, technical
Description: We've used modern data science techniques to make PolicyEngine the UK's most accurate microsimulation model. In 2023, we'll do the same in the US.

---

The [PolicyEngine US app](http://legacy.policyengine.org/us) uses a microsimulation model to compute the impact of custom tax and benefit reforms on the Current Population Survey (CPS). While the CPS is widely used for policy analysis, it contains inaccuracies that can impact the accuracy of policy simulations.

In 2023, we will enhance the CPS by integrating it with IRS tax records and reweighting it to minimize deviations from administrative aggregates. This enhanced dataset will be used in the PolicyEngine microsimulation app and will also be made available as an open resource for other policy research.

_We’re grateful to Dylan Hirsch-Shell for supporting this project._

## Why is the CPS inaccurate?

The Census Bureau and the Bureau of Labor Statistics run the CPS monthly. Each March, they ask deeper questions on households’ activity in the prior calendar year, in the Annual Social and Economic Supplement (ASEC). We use the CPS ASEC (which we refer to as the CPS) for our policy simulations, as do many other analysts; for example, the Census Bureau uses it to produce their [annual poverty report](https://www.census.gov/library/publications/2022/demo/p60-277.html). However, the CPS has several limitations that can impact its accuracy:

- It undercaptures benefits and tax credits, leading to underestimated impacts on certain populations. For example, [CPS respondents under-report SNAP (Supplemental Nutrition Assistance Program) benefits by about a third.](https://www.census.gov/content/dam/Census/library/working-papers/2011/demo/SEHSD-WP2012-01.pdf)

- It [top-codes income variables above $1 million](https://www.census.gov/content/dam/Census/library/working-papers/2019/demo/sehsd-wp2019-18.pdf), which can distort the income distribution and impact policy simulations.

- With only 100,000 households, the CPS can produce volatile estimates when broken down by subpopulations, especially at the state level.

- It lacks some important information, such as assets, that can impact taxes and benefits.

- The CPS is based on data that is 1–2 years old and is not extrapolated to predict future policy impacts.

These limitations can reduce the accuracy and usefulness of the CPS for policy simulations and other research. For example, CPS-based projections will tend to underestimate the budgetary impacts of reforming SNAP or instituting a tax on top earners, and will be unable to estimate the impacts of wealth taxes or reforms to asset limits in benefit programs.

## Our plan to enhance the CPS

To address these issues, we plan to integrate several household datasets and tune them to more closely match administrative totals. This process will involve the following steps:

1. Import the CPS and replace reported taxes and benefits with computed amounts from our microsimulation model.

1. Duplicate the CPS, remove income variables, and replace them with imputed values from [IRS tax records](https://www.irs.gov/statistics/soi-tax-stats-individual-public-use-microdata-files) using our open-source [synthimpute](https://github.com/PolicyEngine/synthimpute) software for machine learning-based quantile regression.

1. Develop a loss metric based on the differences between the survey’s aggregates and true aggregates published by the government.

1. [Use gradient descent](https://blog.policyengine.org/how-machine-learning-tools-make-policyengine-more-accurate-17af859cdd97) to adjust the household survey weights in the duplicated CPS and minimize the loss.

1. Integrate the reweighted CPS-IRS dataset with the Survey of Consumer Finances and Consumer Expenditure Survey to create a comprehensive household dataset, also with synthimpute .

1. Repeat steps 3 and 4 for each subnational area (state, congressional district, state legislative district, etc.) to produce weights for those areas.

The diagram below characterizes this procedure ([see it in higher quality here](https://docs.google.com/drawings/d/1B3EqL43W-Rfbultr6fGMqURtYSiuzg-Y3PkW2vT5lxs/preview)).

![](https://cdn-images-1.medium.com/max/3200/0*KU357kXuoE888uTy)

We have successfully implemented steps 1–5 in the UK, where our loss function has 2,664 elements.¹ While we have not yet created separate weights for each UK region, we include region-specific targets (like the CPS, the UK household survey has region identifiers).

In the US, we have completed step 1, and also made progress importing the Survey of Consumer Finances and Consumer Expenditure Survey to our data format.

## Why our approach will work

We’ve grounded our algorithm in theory and empirics to maximize accuracy.

My 2018 paper, [“Quantile regression, from linear models to trees to deep learning”](https://towardsdatascience.com/quantile-regression-from-linear-models-to-trees-to-deep-learning-af3738b527c3), compared the performance of several quantile regression techniques using holdout sets. To my knowledge, this was the first instance of such a benchmarking study, and in it I found that random forests outperformed most other models. In [follow-up research with Deepak Singh](https://colab.research.google.com/drive/1E8F7S1Uvfw_3PmpS226Sl1LWV5NBi0CE), we found again that random forests outperformed other models, and that matching — perhaps the most common data fusion method for economic microsimulation — performed _worse_ than any others.

![](https://cdn-images-1.medium.com/max/2556/0*ToiaXsYBexc9tD_H)

This result aligns with the theory underpinning each method. By finding the nearest donor record, matching routines are almost built to overfit, while random forests are architected to avoid overfitting.² Overfitting matters because data fusion is not a linking problem, it is an out-of-sample prediction problem: none of the records in the PUF are in the CPS, and vice versa. We aim to predict the conditional distribution of variables using companion datasets, reflecting the uncertainty in these predictions.

Our reweighting routine also carries theoretical advantages over the state of the art. Institutions like the Census Bureau assign initial weights using a small number of covariates, without intending to correct for sampling bias in outcomes like food assistance participation. Analysts sometimes adjust these weights to consider more outcomes using nonlinear programming, which runs until all constraints are satisfied (e.g., each income category is within 5% of the true values). Gradient descent improves upon nonlinear programming by continuing the search: rather than merely looking for an acceptable solution, it finds an optimum after hundreds of searches (“epochs”). And because gradient descent powers deep learning models, computer scientists have built tools to make it run smoothly and quickly.

Since reweighting is also a prediction problem, we evaluate our method on holdout sets of metrics to avoid overfitting. My colleague Nikhil Woodruff has shown that our approach here [substantially improves accuracy](https://blog.policyengine.org/how-machine-learning-tools-make-policyengine-more-accurate-17af859cdd97) in the UK context, both against the original data and other microsimulation models.

![](https://cdn-images-1.medium.com/max/3200/0*Cr-l3U_V97HvNbi3)

Our UK documentation includes [evaluations that update each time we change the model](https://policyengine.github.io/policyengine-uk//model/validation.html). While we’re confident in the benefits of our two novel contributions to microsimulation data enhancement — fusing datasets with random forests-based quantile regression, and reweighting with gradient descent — we will continue experimenting with new methods and sharing our performance as the literature develops.

The CPS already produces useful projections for some policy reforms, such as national tax programs that affect the bulk of the income distribution. Our experience in the UK suggests that our data enhancement procedure can make it even more useful; we expect to cut errors by 90% for assessing more targeted policies, and also to be able to model reforms we don’t currently support, like the [newly-passed Massachusetts millionaire tax](https://www.cnbc.com/2022/11/10/what-the-millionaire-tax-in-massachusetts-means-for-the-wealthy.html).

By enhancing the CPS with IRS tax records and reweighting it to minimize deviations from administrative aggregates, we can significantly improve the accuracy of policy simulations and contribute to a more evidence-based policymaking process. We look forward to bringing these enhancements to the US and making our enhanced dataset available as an open resource for other policy research.

¹ The UK equivalents of the CPS and IRS tax records are the Family Resources Survey and Survey of Personal Incomes, respectively. Our code for enhancing UK microdata is in [this folder](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/data/datasets/frs/enhanced) within the policyengine-uk GitHub repo.

² While we expect that deep neural networks could outperform random forests with tuning, we’ve adopted random forests for their simplicity and high baseline performance.



---

---
# How charitable contributions affect Americans' taxes
Slug: charitable-contributions
Date: 2022-11-29
Authors: Max Ghenis
Tags: us, policy
Description: PolicyEngine estimates the tax impact of your donations for free.

---

Today is [Giving Tuesday](https://www.givingtuesday.org/), when many Americans will consider giving to charity. Filers who itemize can deduct these charitable contributions from their taxable income. For many filers, these donations will reduce tax liability, either by putting them over the itemization threshold or increasing their itemized deductions.

This video shows an example of a New York resident with $200,000 in employment income and no other itemized deductions. Without charitable contributions, PolicyEngine estimates that they would owe $64,255. If they donate $20,000, they would instead owe an estimated $58,043. That is, their taxes fall by $6,212, offsetting 31% of their donation.

<div style="padding-top: 50px; padding-bottom: 50px"><center>[Interactive: G3CEfauQ2SQ]</center></div>

Federal taxes comprise 88% of this impact.

![](https://cdn-images-1.medium.com/max/3896/1*OwWwU6RgotGi4g6pXsIINA.png)

To estimate how charitable giving would affect your own household, visit [policyengine.org](https://legacy.policyengine.org/).

If you’d like to support our work making free, open source tax and benefit software, you can [make a tax-deductible gift to the PSL Foundation](https://opencollective.com/psl), our fiscal sponsor. Please let us know at [hello@policyengine.org](mailto:hello@policyengine.org) so we can direct your gift to our operations.

_PolicyEngine estimates do not constitute exact tax liabilities or financial advice. This example is for New York state in 2022 and does not include New York City taxes. PolicyEngine currently estimates state income taxes in Maryland, Massachusetts, New York, Oregon, Pennsylvania, and Washington._



---

---
# Maryland's standard deduction
Slug: maryland-standard-deduction
Date: 2022-11-22
Authors: Kevin Foster
Tags: us, policy
Description: PolicyEngine computes the program's impact on Maryland and individual households.

---

Maryland’s standard deduction lowers filers’ taxable income when they do not itemize deductions. The standard deduction is 15 percent of a filer’s adjusted gross income, bounded both above and below. For head of household, joint, and widow(er) filers, the minimum standard deduction is $3,100 and the maximum is $4,700. For single and married filing separately filers, the minimum deduction is $1,550, with a maximum of $2,350.

![](https://cdn-images-1.medium.com/max/5272/1*KJuvJ4_gO1gLkP36qqWjag.png)

Using PolicyEngine, we can compute the standard deduction’s impact. We’ll do this by comparing a policy regime without Maryland’s standard deduction to one with it.

## Defining the reform

From the Policy page, navigate to the Maryland > State income tax > Deductions > Standard section. Select the Baseline, and set the value of MD standard deduction as a percent of AGI to zero, as well as MD maximum standard deduction for each filing status using the dropdown menu. Finally, set Simulation > Geography to Maryland. This will produce [this reform link](https://legacy.policyengine.org/us/policy?md_standard_deduction_rate=15&md_min_standard_deduction_HEAD_OF_HOUSEHOLD=3100&md_min_standard_deduction_JOINT=3100&md_min_standard_deduction_SEPARATE=1550&md_min_standard_deduction_SINGLE=1550&baseline_md_standard_deduction_rate=0&baseline_md_min_standard_deduction_HEAD_OF_HOUSEHOLD=0&baseline_md_min_standard_deduction_JOINT=0&baseline_md_min_standard_deduction_SEPARATE=0&baseline_md_min_standard_deduction_SINGLE=0&baseline_state_specific=MD).

![](https://cdn-images-1.medium.com/max/3200/0*Tuukff7dXZRB__70)

By default, the Reform page will show the current value listed above.

![](https://cdn-images-1.medium.com/max/3200/0*T5b8HKRCyj9-LHGf)

## Population impact

Selecting Compute population impact shows [this link](https://legacy.policyengine.org/us/population-impact?md_standard_deduction_rate=15&md_min_standard_deduction_HEAD_OF_HOUSEHOLD=3100&md_min_standard_deduction_JOINT=3100&md_min_standard_deduction_SEPARATE=1550&md_min_standard_deduction_SINGLE=1550&md_min_standard_deduction_WIDOW=3100&baseline_md_standard_deduction_rate=0&baseline_md_min_standard_deduction_HEAD_OF_HOUSEHOLD=0&baseline_md_min_standard_deduction_JOINT=0&baseline_md_min_standard_deduction_SEPARATE=0&baseline_md_min_standard_deduction_SINGLE=0&baseline_md_min_standard_deduction_WIDOW=0&baseline_state_specific=MD). PolicyEngine estimates that Maryland’s standard deduction costs $417 million, benefits 90% of the population, has no effect on poverty, and slightly reduces income inequality.

![](https://cdn-images-1.medium.com/max/3200/0*eVayVbOocgUWZl0P)

While middle income deciles benefit more than higher income deciles, households in the bottom income decile are least likely to gain from the policy, since many have no taxable income. Households in the top income decile are least likely to benefit from the standard deduction, as they are more likely to itemize their deductions instead (Maryland allows federal itemized deductions).

![](https://cdn-images-1.medium.com/max/3200/0*2kGjmg6JRHYpCjpa)

## Impact on a single filer

Now let’s look at the impact of Maryland’s standard deduction on individual Maryland households. To see how to define a household, see our [post on the Oregon Earned Income Tax Credit](https://medium.com/policyengine/computing-your-oregon-earned-income-tax-credit-in-policyengine-d911ae29749d).

The standard deduction benefits single filers if they earn at least $13,590. Its net impact quickly rises to $112, and rises further to $129 if their income exceeds $152,100.

![](https://cdn-images-1.medium.com/max/3200/0*QknzNotM0mGUz1fF)

The standard deduction strictly lowers marginal tax rates, by between 0.2 and 0.7 percentage points in the relevant regions, except for the negative spike at the low end.

![](https://cdn-images-1.medium.com/max/3192/0*xzb5xyH3mopg94-l)

The sudden increase to net income (decrease to marginal tax rate) at $13,590 results from the [Poverty Line Credit](https://policyengine.github.io/policyengine-us//gov/states/md/tax/income/credits/poverty-line-credit.html), which creates a cliff at the [poverty line](https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines). By lowering the tax liability at that point, the standard deduction increases the benefit of the Poverty Line Credit.

![](https://cdn-images-1.medium.com/max/3200/0*hWlScrE0b95B9TBx)

[Repealing the Poverty Line Credit in the baseline and reform](https://legacy.policyengine.org/us/household?md_standard_deduction_rate=15&md_min_standard_deduction_HEAD_OF_HOUSEHOLD=3100&md_min_standard_deduction_JOINT=3100&md_min_standard_deduction_SEPARATE=1550&md_min_standard_deduction_SINGLE=1550&baseline_md_standard_deduction_rate=0&baseline_md_min_standard_deduction_HEAD_OF_HOUSEHOLD=0&baseline_md_min_standard_deduction_JOINT=0&baseline_md_min_standard_deduction_SEPARATE=0&baseline_md_min_standard_deduction_SINGLE=0&baseline_state_specific=MD&baseline_md_poverty_line_credit_rate=0) shows that standard deduction would have a smoother impact in the absence of the Poverty Line Credit.

![](https://cdn-images-1.medium.com/max/3200/0*gLk0c9ANp3KKOSBK)

## Impact on a family of four

For a family of four (married with two children) with $100,000 in employment income, the standard deduction lowers taxes by $223.

![](https://cdn-images-1.medium.com/max/3200/0*WXnAsrE2npPKKf-T)

Select Compute how earnings affect you to see how the standard deduction affects this household’s net income. Then select the Difference button to generate the below chart. The dip around $42,000 results from [Maryland’s earned income tax credit](https://policyengine.github.io/policyengine-us//gov/states/md/tax/income/credits/eitc.html), which is partially nonrefundable and therefore affected by tax liability.

![](https://cdn-images-1.medium.com/max/3200/0*S9bfltBYrvHgpMx-)

We can similarly see a smoother impact by repealing the Maryland EITC in the baseline and reform. Since the Poverty Line Credit fills in the EITC, we need to [repeal both](https://legacy.policyengine.org/us/household?md_standard_deduction_rate=15&md_min_standard_deduction_HEAD_OF_HOUSEHOLD=3100&md_min_standard_deduction_JOINT=3100&md_min_standard_deduction_SEPARATE=1550&md_min_standard_deduction_SINGLE=1550&baseline_md_standard_deduction_rate=0&baseline_md_min_standard_deduction_HEAD_OF_HOUSEHOLD=0&baseline_md_min_standard_deduction_JOINT=0&baseline_md_min_standard_deduction_SEPARATE=0&baseline_md_min_standard_deduction_SINGLE=0&baseline_state_specific=MD&baseline_md_non_single_childless_non_refundable_eitc_match=0&baseline_md_eitc_refundable_match=0&baseline_md_poverty_line_credit_rate=0).

![](https://cdn-images-1.medium.com/max/3200/0*fnz-UD2-g9iOg7dM)

Here we’ve shown the impact of Maryland’s standard deduction, including how it interacts with other tax programs. To compute the impact of other tax and benefit programs, try PolicyEngine US at [policyengine.org](https://legacy.policyengine.org/).



---

---
# From OpenFisca to PolicyEngine
Slug: from-openfisca-to-policyengine
Date: 2022-11-10
Authors: Nikhil Woodruff
Tags: global, technical
Description: OpenFisca has catapulted our progress, and now we've forked it into our own microsimulation framework.

---

Our PolicyEngine journey traces to 2020, when [Max Ghenis](undefined) and I sought to build a microsimulation model of the UK tax and benefit system. [Matt Jensen](undefined), then the director of the American Enterprise Institute’s [Open Source Policy Center](http://ospc.org), pointed us to [OpenFisca](http://openfisca.org/), a framework developed initially by the French administration and since then grown and maintained by contributors from several governments, research centres, private companies and individuals. We were quickly won over by OpenFisca’s modernness, flexibility and [excellent documentation](https://openfisca.org/doc/).

As we started building the UK system, and then the US system, our appreciation for the framework grew. An intuitive model of storing parameters over time made it easy to handle monthly benefits and yearly taxes. Strong modularisation patterns meant that diving into any one area of the tax-benefit system didn’t need any knowledge about the implementation for other systems. It was no wonder 10 other countries made the same choice we did. We even adopted their Slack workspace for PolicyEngine communications.

Over time, we needed additional features, mostly due to (a) our web app, and (b) the unprecedented complexity of the US tax and benefit system. For example, US taxpayers can choose to itemise their deductions or not, mostly choosing the option that minimises their tax liability, but there’s no straightforward way to model this in the original framework without duplicating code. And parameters often rise automatically with inflation, or duplicate across 50 states: manual adjustments can enable this, but standardised interfaces improve maintainability.

OpenFisca understandably prioritised the stability of the framework for their existing users, which includes prominent web apps for policymakers in France and other countries. As a result, we pushed many of these features into our own software — especially [our openfisca-tools package](https://github.com/PolicyEngine/openfisca-tools). As our needs grew, openfisca-tools grew with it, and this sharding started to slow our development.

To ensure we can most responsively meet our users’ needs, we decided last month to fork openfisca-core into our own microsimulation framework that unifies it with our openfisca-tools package. We completed that transition last week. We now use [policyengine-core](http://github.com/policyengine/policyengine-core), which our country models (policyengine-us and policyengine-uk) now use instead of openfisca-core.

We’re extraordinarily grateful to the OpenFisca team, with whom we will continue to work closely. As we develop policyengine-core, we [will](https://github.com/openfisca/openfisca-core/issues/1156) [contribute](https://github.com/openfisca/openfisca-core/issues/1155) backwards-compatible changes to openfisca-core wherever possible, and we’ll watch their repo for opportunities to improve our software. We view this as a success of the open source paradigm.

This change doesn’t affect anything on our web app. Users of our US and UK Python packages will notice that they’ve been renamed from openfisca-us and openfisca-uk to policyengine-us and policyengine-uk, respectively, in GitHub and PyPI. We’ve built our own documentation for policyengine-core ([policyengine.github.io/policyengine-core](http://policyengine.github.io/policyengine-core)), though users may still find the OpenFisca core documentation ([openfisca.org/doc](https://openfisca.org/doc/)) useful for some tasks. We also invite users and developers to join us in our [new Slack workspace](https://join.slack.com/t/policyengine-group/shared_invite/zt-1ieu4hpap-eowgah1ou4XWDeSG5PJtTg).

We look forward to growing the open source policy and Rules as Code communities with you all and OpenFisca.



---

---
# Oregon's Nonrefundable Exemption Credit
Slug: oregons-nonrefundable-exemption-credit
Date: 2022-11-04
Authors: Kevin Foster
Tags: us, us-or, policy
Description: PolicyEngine computes the program's impact on Oregon and individual households.

---

Oregon’s nonrefundable exemption credit was created in 1983 to replace the personal exemption deduction. Since 1987, the state has indexed the credit to inflation. As a nonrefundable credit, its value is capped at one’s tax liability. Single and married filing separately statuses can claim the credit if their income does not exceed $100,000. For other statuses, the income cap is $200,000. In the 2022 tax year, eligible filers could claim a $219 credit for themselves, their spouse, and any dependents in the household. They can also claim additional exemptions if the filer or their spouse is severely disabled, or if they have a disabled child.

Using PolicyEngine, we can compute the exemption credit’s impact on the state of Oregon and individual households.

## The Household Impact

![](https://cdn-images-1.medium.com/max/3200/0*LZy0ZwVxCVavnySk)

The exemption credit for a family of four (married with two children) is shown above. Making under $200,000 provides a credit of $876 ($219 \* 4). To see how to define a household, check out our [post on the Oregon Earned Income Tax Credit](https://medium.com/policyengine/computing-your-oregon-earned-income-tax-credit-in-policyengine-d911ae29749d).

Due to the credit’s non-refundability, the value phases in. The household would have to earn $21,000 to see the full value of the credit.

![](https://cdn-images-1.medium.com/max/3200/0*jjLy3TSyK27f_BLM)

## Step-by-Step Instructions for Estimating Impacts of Oregon’s Exemption Credit

Select “compute the impact of policy reforms,” then “States.”

![](https://cdn-images-1.medium.com/max/3200/0*ghZpH0nxhUlwAPjK)

Enter “Oregon” for your state, then click through “taxes,” “income,” and “credits.”

![](https://cdn-images-1.medium.com/max/3200/0*A2uFMhgNLOIp6ho9)

Then, select “Exemption,” followed by “Oregon exemption amount.”

![](https://cdn-images-1.medium.com/max/3200/0*E8hteUf208jz4WKf)

Enter 0 for the amount. You can also name your policy in the top right (“Repealing Oregon’s exemption credit” in this example).

![](https://cdn-images-1.medium.com/max/3200/0*naEdP4RCvdDCWjCc)

Then, press the arrows next to the “against” tab, followed by setting the reform to “in Oregon.”

![](https://cdn-images-1.medium.com/max/3200/0*9J2--Cm1sio--nRa)

Select “Calculate economic impact” and choose which metric you would like to view (budgetary impact below)

![](https://cdn-images-1.medium.com/max/3200/0*jNzuIY1ZmfdlBan5)

We estimate that Oregon’s exemption credit [cost $645.5 million in 2022](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=or&timePeriod=2023&baseline=3349), [reduced poverty 0%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=or&timePeriod=2023&baseline=3349), and [increased the average household’s net income by $365](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=2&region=or&timePeriod=2023&baseline=3349). As a comparison, Oregon estimates that the credit cost about $650 million in 2021.[^1]

![](https://cdn-images-1.medium.com/max/2000/0*FnGciLTwIOECw92y.jpg)

**To compute other elements of Oregon’s income tax, visit [policyengine.org](http://legacy.policyengine.org).**

[^1]: In the 2021–2023 period, [Oregon’s biennial tax expenditure report](https://www.oregon.gov/dor/programs/gov-research/Documents/TE2123-Final.pdf#page=200) shows a revenue impact of $4.6 million for the child with disability credit (p.144), $4.5 million for the severe disability credit (p.149), and $1,308,900,000 for the personal exemption credit (p.200). $1.318 billion divided by 2 (tax years 2021 and 2022) is $659 million.



---

---
# Stamp duties in PolicyEngine UK
Slug: stamp-duties-in-policyengine-uk
Date: 2022-09-22
Authors: Nikhil Woodruff
Tags: uk, technical
Description: The Times reported yesterday that Prime Minister Liz Truss will announce plans to cut Stamp Duty this week. PolicyEngine now supports…

---

[The Times reported yesterday](https://www.thetimes.co.uk/article/liz-truss-to-cut-stamp-duty-in-push-for-prosperity-qrh5nxbcd) that Prime Minister Liz Truss will announce plans to cut Stamp Duty this week. PolicyEngine now supports custom reforms to Stamp Duty and its devolved equivalents, so you can compute the impact of potential cuts or your preferred Stamp Duty reform. We will post estimates of Truss’s cut when she announces it.

## What is Stamp Duty?

HMRC levies the Stamp Duty Land Tax, often just called Stamp Duty, as a tax on property transfers in England and Northern Ireland. Similarly, the Welsh Revenue Authority levies the Land Transaction Tax, and Revenue Scotland levies the Land and Buildings Transaction Tax, though the policies differ in their parameters and rules.

## How does PolicyEngine model Stamp Duty?

PolicyEngine’s core microsimulation runs off an enhanced version of the Family Resources Survey, a household survey that captures household structure, income, and benefits. Just as we impute energy consumption from the Living Costs and Food Survey to [estimate energy price cap reforms](https://blog.policyengine.org/prime-minister-liz-trusss-energy-bill-price-cap-cfcfbd7b4dec), we impute assets from the Wealth and Assets Survey to estimate Stamp Duty and other asset-based policies. Specifically, we impute the value of a household’s primary and other residences, and whether their primary residence was their first home. We also impute their corporate wealth to model their share of non-residential stamp duty burdens.

Our imputation process automatically calibrates the imputation to match the true value of properties. Our [synthimpute](https://github.com/PSLmodels/synthimpute) machine learning software ensures we impute realistic conditional values that also add up to the true aggregates.

To match the Stamp Duty aggregates, we then assign each household in the survey data a chance of transferring their property in a given year. This effectively gives homeowners a slice of their total Stamp Duty each year based on the expected duration between transfers.

After assigning this expected Stamp Duty (and devolved equivalents) in the baseline, we recompute it based on the policy reform, and assign any difference as a change to the household’s income in the year. That change drives distributional charts, including poverty impacts.

## What kinds of Stamp Duty reforms does PolicyEngine support?

Any! We’ve added switches to abolish each of the three Stamp Duty policies, as well as detailed parameters for each policy. For example, here’s one screen of controls for Stamp Duty on first homes:

![Stamp duty parameters on PolicyEngine.](https://cdn-images-1.medium.com/max/3200/0*irKUYKfN1VVZ4hwL)_Stamp duty parameters on PolicyEngine._

Here are some examples of Stamp Duty reforms you can compute in PolicyEngine:

- [Repeal all three policies
  ](https://legacy.policyengine.org/uk/population-impact?abolish_sdlt=1&abolish_ltt=1&abolish_lbtt=1)£16.2 billion cost in 2022

- [Double Stamp Duty’s first home value exemption from £500,000 to £1,000,000
  ](https://legacy.policyengine.org/uk/population-impact?sdlt_first_time_buyer_value_limit=1000000)£95 million cost in 2022

- [Set the rate to a flat 2% on-first primary homes
  ](https://legacy.policyengine.org/uk/population-impact?abolish_lbtt=1&sdlt_on_non_first_home_1_rate=2&sdlt_on_non_first_home_3_rate=2&sdlt_on_non_first_home_4_rate=2&sdlt_on_non_first_home_5_rate=2&ltt_on_secondary_residences_1_rate=2&ltt_on_secondary_residences_2_rate=2&ltt_on_secondary_residences_3_rate=2&ltt_on_secondary_residences_4_rate=2&ltt_on_secondary_residences_5_rate=2&ltt_on_secondary_residences_6_rate=2&lbtt_on_residential_property_1_rate=2&lbtt_on_residential_property_3_rate=2&lbtt_on_residential_property_4_rate=2&lbtt_on_residential_property_5_rate=2)£3.7 billion cost in 2022

## Exploring the results

To see how each reform affects the UK, click on ‘Compute population impact’ (or navigate to the ‘UK impact’ tab). From there, you can see all the standard outputs: budgetary impacts, changes to poverty rates, and distributional impacts.

### Changes to poverty rates

Our poverty definition follows the standard methodology defined by the Households Below Average Income statistical release (the official poverty measure), with income defined as net household income before housing costs and the poverty line uprated by inflation. PolicyEngine assigns any reduction in expected liabilities to an increased net income, which can bring households above the poverty line. However, it’s worth noting that HBAI technically doesn’t deduct stamp duties, so the HBAI publication wouldn’t be affected by policy reforms.

### Distributional impacts

PolicyEngine shows the average gains by income and wealth decile, and these will often differ. For example, a cut in stamp duties is often regressive by income deciles and progressive by wealth deciles: this is fundamentally because income doesn’t correlate perfectly with wealth (consider a pensioner with low income, who owns their own house, or a young graduate with student loans and a high-paying job). You can use the buttons underneath each distributional impact chart to see different angles here — relative or absolute income changes, by income or by wealth deciles.

How would you reform Stamp Duty? [Tweet it at us](http://twitter.com/thepolicyengine) with a PolicyEngine reform, or describe it and we’ll run it through the model for you!



---

---
# Prime Minister Liz Truss’s energy bill price cap
Slug: prime-minister-liz-trusss-energy-bill-price-cap
Date: 2022-09-16
Authors: Max Ghenis
Tags: uk, policy
Description: See the impact in PolicyEngine.

---

New UK Prime Minister Liz Truss last week announced that the [energy bill price cap will remain at £2,500](https://helpforhouseholds.campaign.gov.uk/help-with-your-bills/) for the typical household until 2024, rather than rising as planned. The government will compensate energy companies for the difference.

[PolicyEngine now models this reform](https://legacy.policyengine.org/uk/population-impact/treasury/energy-price-guarantee) as a household transfer, as well as any customisable price cap change by quarter. We estimate that Truss’s plan will cost £50 billion over the next year and cut poverty 20%. Higher income households benefit less on a percentage basis and more on an absolute pound basis, and the policy disproportionately reduces senior poverty.

This blog post explains our methodology and dives deeper into the results. For an analysis of the policy itself, see [our article published by UK in a Changing Europe](https://ukandeu.ac.uk/energy-subsidy/).

## How PolicyEngine models the energy price cap

PolicyEngine models price cap reforms as a transfer equal to the reduction in energy expenditures against the baseline, holding consumption constant.

As an example, consider what Ofgem calls the “typical household” — one with 12,000 kWh in annual consumption. Before today’s announcement, [Cornwall Insights forecasted](https://www.cornwall-insight.com/cornwall-insight-release-final-predictions-for-octobers-price-cap/) that they would have faced an energy price cap rising to an average of about £4,600 over the next year. The £2,500 cap therefore amounts to a £2,100 annual transfer.

Households vary in their energy consumption, and PolicyEngine models this heterogeneity by fusing the Living Costs and Food Survey to our enhanced Family Resources Survey, using our [synthimpute](https://github.com/policyengine/synthimpute) machine learning software. For each household in our dataset, we estimate the annual energy consumption, and accordingly, their expenditure under the pre- and post-Truss energy cap schedules. The program’s cost equals the total difference between these figures.

Like all PolicyEngine results, the price cap assumes no behavioural responses; that is, we assume households’ lower energy prices do not affect energy usage.

## Impacts of Liz Truss’s energy bill price cap

PolicyEngine now allows users to change the energy bill price caps in each of the coming four quarters. We’ve now set each of these to £2,500, per the policy reform. [Setting the baseline values back to their projections estimates Liz Truss’s cap](https://legacy.policyengine.org/uk/policy/treasury/energy-price-guarantee).

The distributional impact is progressive in relative terms: lower deciles see a higher percent increase to net income than higher deciles, from 14% to 2%. At the same time, the nominal increases are larger for higher-income households (from £1,400 to £2,400). This is largely due to the fact that energy consumption makes up a larger percentage of low-income budgets than it does for high-income households.

![*Change to net income by income decile under the price cap subsidy.*](https://cdn-images-1.medium.com/max/2156/0*zd856MutdKoSspHu)Change to net income by income decile under the price cap subsidy.

Poverty also falls by 20%, compared to the counterfactual scenario with no action taken. The impact is strongest among seniors, who see a 35% reduction in the poverty rate. Deep poverty, the share of people living at under half the poverty line, falls by 28%.

![*Change to poverty rates by age group under the EPG.*](https://cdn-images-1.medium.com/max/2194/0*WQK8LyHm6Ge52UiX)Change to poverty rates by age group under the EPG.

Multiple measures of inequality also fall. The Gini index of income inequality falls 3%, and the top-ten and top-one percent shares of income fall by 2% and 3%, respectively.

The reforms are based on energy usage, not income, so they avoid changing marginal tax rates.

To compare against other levels at which to fix the price cap, [see the reform on PolicyEngine](https://legacy.policyengine.org/uk/policy/treasury/energy-price-guarantee).



---

---
# Raising the marriage allowance from 10% to 100%
Slug: raising-the-marriage-allowance-from-10-to-100
Date: 2022-08-29
Authors: Nikhil Woodruff
Tags: uk, policy
Description: See the reform in PolicyEngine.

---

On 21 July, UK Prime Minister candidate Liz Truss promised to “review the taxation of families to ensure people aren’t penalised for taking time out to care for their children or elderly relatives.” Her campaign team [elaborated](https://www.reuters.com/world/uk/uk-pm-candidate-truss-eyes-tax-breaks-carers-2022-07-21/) that this involved transferring the full personal tax allowance within households, rather than the 10 percent allowed under current law, though they haven’t specified if the reform would also affect other parts of the policy, such as the limitation to Basic Rate taxpayers.

In this blog post, I’ll explain the marriage allowance and show how to use PolicyEngine to score two potential reforms to the policy:

1. [Raising the marriage allowance from 10% to 100%.](https://legacy.policyengine.org/uk/population-impact?marriage_allowance_cap=100) PolicyEngine estimates that this reform would cost £3.05 billion in 2022, lowering poverty by 0.5%, benefiting 15% of the population, and widening the marriage allowance’s earnings dead zone by roughly a factor of 10.

1. [Raising the marriage allowance from 10% to 100% and removing the limitation to Basic Rate taxpayers.](https://legacy.policyengine.org/uk/population-impact?marriage_allowance_cap=100&abolish_marriage_allowance_income_condition=1) PolicyEngine estimates that this reform would cost £5.91 billion in 2022, lowering poverty by 0.5%, benefiting 20% of the population, and removing the marriage allowance’s earnings dead zone.

## What is the marriage allowance?

The [marriage allowance](https://www.gov.uk/marriage-allowance) allows a person to transfer £1,260 of their personal allowance (10% of the maximum) to their spouse, if their income is below the personal allowance and their spouse pays income tax at the basic rate (income between £12,571 and £50,270).

To compute the impact of the current marriage allowance in PolicyEngine, [compare the current law to a baseline without the marriage allowance.](https://legacy.policyengine.org/uk/population-impact?marriage_allowance_cap=10&baseline_marriage_allowance_cap=0)

For example, consider a married couple with one child. One person earns £30,000, and the other earns £0. Without the marriage allowance, they would pay £5,954 in taxes; the marriage allowance lowers that by £252 to £5,702. However, since DWP bases benefits on after-tax income, they also lose £139 of benefits. In total, the marriage allowance increases their net income by £113, or about 0.4%.

![](https://cdn-images-1.medium.com/max/3200/0*IY_xXY22mfz2x73x)

This household benefits from the marriage allowance because their earnings are higher than the personal allowance, but lower than the basic rate threshold. The marriage allowance increases their net income by £113 if their income qualifies them for Universal Credit; once they become ineligible, it increases their net income by £252. The marriage allowance creates a welfare cliff with an associated earnings dead zone about £600 wide — the household is worse off earning between about £50,200 and £50,800.

![](https://cdn-images-1.medium.com/max/3116/0*xF8DsVz0qIXXevqg)

Overall, PolicyEngine estimates that the marriage allowance currently costs £844 million per year, cuts poverty 0.8%, and benefits 17% of the population. For comparison, [HMRC estimated the true budgetary impact](https://researchbriefings.files.parliament.uk/documents/SN00870/SN00870.pdf) at £560 million in 2020/21, 34% below our 2022 estimate. However, HMRC reports that actual costs have been 30% to 37% below HMRC forecasts from 2016/17 to 2018/19. PolicyEngine’s forecasts, like HMRC’s, do not consider the take-up rate of the program, though [we intend to model the marriage allowance’s take-up rate in the future](https://github.com/PolicyEngine/openfisca-uk/issues/623).

## How does increasing the marriage allowance from 10% to 100% affect a household?

Let’s return to our sample household: a married couple with one child, one of whom earns £30,000 and the other earns £0. If we [compare their situation](https://legacy.policyengine.org/uk/household?marriage_allowance_cap=100) under current law to that in which the marriage allowance rises from 10% to 100%, we see that the reform would increase their net income by £2,143, or 8.4%. This again comes from lower taxes, which are partly offset by lower benefits.

![](https://cdn-images-1.medium.com/max/3200/0*dS7FHuDa6qzqDSHD)

The household would benefit from the policy if their income between about £13,830 (the £12,570 personal allowance plus the £1,260 current marriage allowance) and £50,270. They would receive the maximum gain of £2,262 for earnings between £30,400 and £50,270.

![](https://cdn-images-1.medium.com/max/3144/0*4KZZFs4JwdkocX9a)

The reform lowers marginal tax rates by 9.0p for earnings between £13,830 and £25,200, and then by 36.7p for earnings between £27,000 and £30,200. It then amplifies the cliff by an order of magnitude, from its current £252 to £2,514 (£2,262 + £252). The policy widens the earnings dead zone by a similar factor to £5,600: the household is worse off earning above £50,270 until their earnings exceed £55,800.

![](https://cdn-images-1.medium.com/max/3200/0*IlxZTi9EJ5bsJng7)

[You can enter your household information here to see how it would affect you.](https://legacy.policyengine.org/uk/household?marriage_allowance_cap=100)

## How does increasing the marriage allowance from 10% to 100% affect the population?

Raising the marriage allowance to 100% lowers tax liabilities by £3.36 billion, partly offset by £309 million less in benefit outlays. The reform costs £3.05 billion on net.

![](https://cdn-images-1.medium.com/max/3200/0*YJqbE0m1-c2KiAC0)

Overall, the reform cuts poverty by 0.5%, including child poverty by 0.8%. It has no effect on senior poverty or deep poverty.

![](https://cdn-images-1.medium.com/max/3200/0*t0fNme32sgA86h6j)

As a percentage of income, expanding the marriage allowance most benefits households in the second through fourth deciles.

![](https://cdn-images-1.medium.com/max/3200/0*P2_1CJU4mH1gN90s)

Similarly, households in the second through fourth deciles are most likely to benefit, and most likely to gain at least 5% of their income.

![](https://cdn-images-1.medium.com/max/3200/0*Wa_NYSZdWUVIrAVi)

We can aggregate these impacts to find that the reform reduces inequality according to the three measures reported by PolicyEngine: the Gini index (a broad measure) falls by 0.5%, and the net income shares held by the top 10% and 1% each fall by 0.3%.

![](https://cdn-images-1.medium.com/max/3200/0*swg8UEVRUQgcjA64)

[Explore the full population impacts of the reform in PolicyEngine here](https://legacy.policyengine.org/uk/population-impact?marriage_allowance_cap=100), and [find how it would affect your own household here.](https://legacy.policyengine.org/uk/household?marriage_allowance_cap=100)

## How does removing the Basic Rate restriction affect households?

Since our sample household is in the Basic Rate band, removing that restriction doesn’t affect them at £30,000 income. However, if their income rises, the policy continues to benefit them, up to £5,656 per year if their income exceeds £162,600.

![](https://cdn-images-1.medium.com/max/3200/0*js3K_uoEtwe_2yX9)

This reform would also lower their marginal tax rates in several earnings regions.

![](https://cdn-images-1.medium.com/max/3156/0*ERQ1akHhXK9d5BKQ)

## How does removing the Basic Rate restriction affect the population?

Compared to only raising the percentage, removing the Basic Rate restriction roughly doubles the budgetary impact and has roughly no additional poverty impact. The main difference is that upper income deciles would benefit more, in particular the top two which would not benefit without this provision.

![](https://cdn-images-1.medium.com/max/3200/0*I28U_nsGjYjwsAm3)

[Explore the full population impacts of the reform in PolicyEngine here](https://legacy.policyengine.org/uk/population-impact?marriage_allowance_cap=100&abolish_marriage_allowance_income_condition=1), and [find how it would affect your own household here.](https://legacy.policyengine.org/uk/household?marriage_allowance_cap=100&abolish_marriage_allowance_income_condition=1)



---

---
# PolicyEngine launches in Washington state
Slug: policyengine-launches-in-washington-state
Date: 2022-08-10
Authors: Max Ghenis
Tags: us, technical, us-wa
Description: Washingtonians can now compute the impacts of the Working Families Tax Credit and federal reforms.

---

Washington state hasn’t historically had an income tax. However, in the past year, they’ve enacted a [Working Families Tax Credit](https://workingfamiliescredit.wa.gov/) (modeled after the federal Earned Income Tax Credit) and a [capital gains tax](https://dor.wa.gov/taxes-rates/other-taxes/capital-gains-tax)¹ (which is currently held up in court). With support from the [Center for Growth and Opportunity](http://thecgo.org), we’ve now modeled these policies in PolicyEngine and enabled Washington-specific impacts of federal reforms. This blog post shows a series of examples on using PolicyEngine in Washington.

You can use our [household calculator](http://legacy.policyengine.org/us/household) to estimate how much you’ll get from the Washington Working Families Tax Credit under current law.²

<center>[Interactive: bBHncBDrH98]</center>

Using PolicyEngine’s Baseline feature, you can also compute the impact of the Working Families Tax Credit by [comparing it against a baseline where it doesn’t exist](https://legacy.policyengine.org/us/population-impact?wa_wftc_max_amount_1_rate=300&wa_wftc_max_amount_2_rate=600&wa_wftc_max_amount_3_rate=900&wa_wftc_max_amount_4_rate=1200&wa_wftc_min_amount=50&baseline_wa_wftc_max_amount_1_rate=0&baseline_wa_wftc_max_amount_2_rate=0&baseline_wa_wftc_max_amount_3_rate=0&baseline_wa_wftc_max_amount_4_rate=0&baseline_wa_wftc_min_amount=0&baseline_state_specific=WA).³

<center>[Interactive: Tdwfw6tk3vk]</center>

PolicyEngine lets you imagine a range of policy reforms. For example, what if the Working Families Tax Credit were $100 more generous? This video shows how to build [that policy](https://legacy.policyengine.org/us/population-impact?wa_wftc_max_amount_0_rate=400&wa_wftc_max_amount_1_rate=700&wa_wftc_max_amount_2_rate=1000&wa_wftc_max_amount_3_rate=1300&baseline_state_specific=WA) and compute its impact on Washington overall and a Washington family of four.

<center>[Interactive: 3h2KN jXsBc]</center>

Finally, you can also compute the impact of federal policy reforms on Washington state; for instance, [cutting the bottom tax rate from 10% to 5%](https://legacy.policyengine.org/us/population-impact?gov_irs_income_bracket_rates_1=5&baseline_state_specific=WA).

<center>[Interactive: gn5cJ24Vzzo]</center>

To learn more about PolicyEngine in Washington, feel free to contact us at [hello@policyengine.org](mailto:hello@policyengine.org). And be sure to [follow PolicyEngine](https://twitter.com/intent/user?screen_name=thepolicyengine) to stay updated on our new features and states.

![](https://cdn-images-1.medium.com/max/7680/1*-oK7a26InFYZMfSs9QSbhQ.png)

¹ Since Washington’s capital gains tax has a $250,000 standard deduction and the Current Population Survey truncates income, PolicyEngine underestimates the revenue from the policy.

² PolicyEngine only provides estimates of taxes and benefits. Our policy parameters are based on preliminary estimates from the Washington Department of Revenue, which they may revise by September 2022. See [this discussion](https://github.com/PolicyEngine/openfisca-us/discussions/1246) for more information and consult a tax advisor.

³ PolicyEngine shows that the Working Families Tax Credit increases the share of income held by the top 10% because some high-income Current Population Survey households in Washington include tax filers that is eligible for the credit. In the future, we will avoid these small-N sources of volatility by using the full CPS for each state, reweighted to resemble a state according to various aggregate statistics.



---

---
# Electric vehicle tax credits under current law and the Inflation Reduction Act
Slug: electric-vehicle-tax-credits-under-current-law-and-the-inflation-reduction-act
Date: 2022-08-05
Authors: Max Ghenis
Tags: us, policy
Description: Use PolicyEngine US to analyze provisions of the potential reconciliation bill.

---

Today’s tax code provides a credit of up to $7,500 for purchasing a new electric vehicle. The Inflation Reduction Act introduced by Senators Chuck Schumer (D-NY) and Joe Manchin (D-WV) last week would reform this credit and create a new one for purchasing used electric vehicles (EVs). PolicyEngine US now models all of these provisions for households.

While PolicyEngine lets you adjust a range of policy parameters for the current law and Inflation Reduction Act (IRA), the simplest way to explore the IRA is to turn it on. This video shows how to do that and compute the [IRA’s impact on the buyer of a used EV](https://legacy.policyengine.org/us/household?inflation_reduction_act_in_effect=1).

<center>[Interactive: _Y0EWjmHyy0]</center>

Electric vehicle credits are non-refundable, meaning they do not lower a household’s tax liability below zero. As we show in our [model documentation](https://policyengine.github.io/openfisca-us//programs/irs/credits/electric-vehicle-credit.html), this results in lower-income households receiving less net benefit.

![Net impact of a $7,500 electric vehicle credit for an unmarried tax filer](https://cdn-images-1.medium.com/max/3200/0*u9BoRkwb11WE-WS_)_Net impact of a $7,500 electric vehicle credit for an unmarried tax filer_

The Inflation Reduction Act limits the EV credits by household income, changes the formula for new EV credits, and introduces a used EV credit of up to $4,000. PolicyEngine models the impacts of those policies and current law for individual households; we do not yet compute the population impacts.

To explore electric vehicle tax credits and other customizable policy reforms, [visit PolicyEngine US at policyengine.org/us](http://legacy.policyengine.org/us).



---

---
# Rishi Sunak’s proposal to cut the basic rate to 16 percent
Slug: rishi-sunaks-proposal-to-cut-the-basic-rate-to-16-percent
Date: 2022-08-01
Authors: Max Ghenis
Tags: uk, policy
Description: See the interactive simulation on PolicyEngine

---

In a pitch today for Conservatives to elect him Prime Minister, [Rishi Sunak has proposed](https://www.theguardian.com/politics/2022/jul/31/rishi-sunak-pledges-20-tax-cut-by-end-of-decade-in-last-gasp-pitch-to-members) lowering the basic rate of income tax from 20 percent to 16 percent by the end of the next parliament. The proposal follows his [announcement in March](https://www.independent.co.uk/news/uk/politics/uk-income-tax-cut-2024-rishi-sunak-b2042197.html) (when he was still Chancellor) that the government would cut the basic rate to 19 percent by 2024.

PolicyEngine estimates that cutting the basic rate from 20p to 16p in 2022 would:

- Cost £18.8 billion

- Lower the poverty rate by 1.2 percent

- Benefit higher income households more than lower income households

- Produce a mixed impact on income inequality

[See the interactive simulation in PolicyEngine here.](https://legacy.policyengine.org/uk/population-impact?basic_rate=16)

## Budgetary impact

The reform would lower tax revenues by £19.0 billion, and also lower benefit outlays by £0.2bn, for a total budgetary impact of £18.8 billion. Lowering tax rates lowers benefit outlays because programs like Universal Credit phase out based on after-tax income.

![](https://cdn-images-1.medium.com/max/3200/0*EXIQtIvwQGyXNyM5)

PolicyEngine is a “static” model, meaning that it assumes no behavioural responses. In its dynamic model that assumes behavioural responses, [HMRC estimates that a 1p change to basic rate would cost £5.25 billion in 2023–24](https://www.gov.uk/government/statistics/direct-effects-of-illustrative-tax-changes/direct-effects-of-illustrative-tax-changes-bulletin-june-2022) (PolicyEngine estimates that [lowering basic rate to 19p would cost £4.7 billion](https://legacy.policyengine.org/uk/population-impact?basic_rate=19)). A linear extrapolation would therefore produce a £21 billion budgetary estimate from HMRC.

## Poverty

The reform would cut poverty 1.2% overall. The effect is larger for children (1.7%) and small for seniors (0.1%). It would not affect deep poverty, the share of people in households with income below half their poverty threshold.

![](https://cdn-images-1.medium.com/max/3200/0*t3cBR98Pk7xjSLB2)

## Distributional impact

The reform generally benefits higher income households more: as a percent of net income, the average benefit rises for each decile, except for the top decile which gains about as much as the seventh decile.

![](https://cdn-images-1.medium.com/max/3200/0*1cRlBNg4HgFc22VN)

Higher income households are also more likely to gain.

![](https://cdn-images-1.medium.com/max/3200/0*Zne_4Z0ooBO2rZQJ)

While the reform would increase the Gini index, a broad measure of income inequality, it would have a small effect on the share of net income held by the top 10% and reduce the share held by the top 1%.

![](https://cdn-images-1.medium.com/max/3200/0*ZCJ7B5-ErWM13zbZ)

## Sample household

A single parent of one would start to benefit from the basic rate cut once they earn about £13,000. Because Income Tax interacts with Universal Credit, the gain increases at different rates, until it plateaus at £1,508 once their earnings hit £50,300.

![](https://cdn-images-1.medium.com/max/2788/0*8sYS6Bha4dpC4v2F)

For the income range where this household is eligible for Universal Credit, the reform lowers their marginal tax rate by 1.8%; beyond that, it falls by the full 4% cut.

![](https://cdn-images-1.medium.com/max/2628/0*UDmm9O3KZzHHvERV)

To compute more impacts of Sunak’s proposed basic rate cut, [see how it would affect your own household](https://legacy.policyengine.org/uk/household?basic_rate=16&baseline_basic_rate=20), or create your own version of this reform, [view the simulation on the PolicyEngine.](https://legacy.policyengine.org/uk/population-impact?basic_rate=16&baseline_basic_rate=20)



---

---
# The new PolicyEngine US Population Impact page
Slug: the-new-policyengine-us-population-impact-page
Date: 2022-07-01
Authors: Max Ghenis
Tags: us, technical
Description: You design the policy. We compute the poverty, inequality, and budgetary impacts.

---

Since we [beta-launched PolicyEngine US in March](https://blog.policyengine.org/policyengine-comes-stateside-cef88b122e48), we’ve been working on two major new features: (a) state taxes and benefits, and (b) microdata for population-level analysis. We’re thrilled to share that we’ve launched an initial version of the latter. When you create a custom tax and benefit reform, you can now see the impact beyond a single household, zooming out to the US-wide impacts on poverty, inequality, and the budget.

## Case study: the End Child Poverty Act

As a case study, consider the [End Child Poverty Act](https://www.congress.gov/bill/117th-congress/house-bill/6598?s=1&r=4) (ECPA), which Representatives Rashida Tlaib (D-MA) and Mondaire Jones (D-NY) introduced in February 2022. This bill replaces the Child Tax Credit and Earned Income Tax Credit with a universal child allowance, an adult dependent credit, and a filer credit. [You can see a simulation of the End Child Poverty Act’s impact in PolicyEngine US here.](https://legacy.policyengine.org/us/population-impact?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20)

The Population Impact page starts with a disclaimer about the data (see the *Caveats *section of this post below), as well as some high-level measures of the reform’s impact.

![](https://cdn-images-1.medium.com/max/3200/0*FjhnllD4qmxZ7VU5)

Next is a breakdown of the budgetary impact, showing that the ECPA’s $242 billion net cost comprises $347 billion in benefit outlays, less $104 billion in tax revenues (in this case, repealed tax credits).

![](https://cdn-images-1.medium.com/max/3200/0*_X7ok61wCzUpisU9)

Next, we show the impact on poverty by age group, using the [Supplemental Poverty Measure](https://www.census.gov/topics/income-poverty/supplemental-poverty-measure.html). You can also toggle the switch to view the impact on deep poverty, the population share whose household income is less than half their poverty threshold.

![](https://cdn-images-1.medium.com/max/3200/0*U1_M0nGig_uxktg7)

We then show a common distributional chart: the average impact by income decile. Switch from relative to absolute to see the impact in dollars rather than a percent of the decile’s initial net income (after taxes and benefits).

![](https://cdn-images-1.medium.com/max/3200/0*gCvfQcPo2JBtnOe1)

While the above chart shows the average change, reforms rarely affect everyone in each decile equally. The following chart breaks down the members of each income decile based on whether the reform strongly increases or decreases their net income (5% or more), mildly increases or decreases their net income (less than 5%), or does not affect them.

![](https://cdn-images-1.medium.com/max/3200/0*m-KnmZb9JsxYuCt5)

Finally, the Population Impact screen shows how the reform affects three measures of income inequality: the [Gini index](https://en.wikipedia.org/wiki/Gini_coefficient), a broad statistical measure; the share of net income held by the top 10%; and the share of net income held by the top 1%.

![](https://cdn-images-1.medium.com/max/3200/0*GkAw2gWXxfWf2T3R)

You can also see the [End Child Poverty Act’s impact on Massachusetts](https://legacy.policyengine.org/us/population-impact?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20&baseline_state_specific=MA) by selecting Massachusetts from the _Simulation > Geography_ page on the Policy screen. We’ll add more states to that drop-down as we implement more state income tax systems.

\*Note: Our nationwide estimates of policy reforms keep state income taxes fixed at the values CPS respondents report. We simulate state income taxes only for state-specific analyses. The ECPA leaves some people worse off in the Massachusetts analysis because it repeals the EITC, which Massachusetts partially matches in its tax code.\

As always, users can view the reform’s personalized impact by selecting the [_Your household_ tab](https://legacy.policyengine.org/us/household?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20) at the top.

## Caveats

The PolicyEngine US Population Impact page uses the 2020 Current Population Survey (CPS) March Supplement, a representative household survey that powers many tax and benefit microsimulation analyses. The CPS covers many topics, from household structure and demographics to income and benefit receipt, but it has several drawbacks when it comes to microsimulation:

- Truncated incomes. The CPS truncates high incomes for privacy. This means that PolicyEngine US will underestimate the magnitude of tax reforms affecting high earners.

- Underestimated benefits. Aggregate benefits in the CPS fall short of administrative totals. We recalculate benefits from current rules for households that reported receiving them, which shrinks the gap, but PolicyEngine US still underestimates the magnitude of benefit reforms.

- 2020 data, 2022 policy. The latest CPS reflects households’ activity throughout calendar year 2020. PolicyEngine US currently applies 2022 tax and benefit policy to household information from 2020, which further underestimates incomes.

- Lack of detail for more specific income types. For example, the CPS asks about total capital gains, so we currently assume that all are long-term.

- Small sample sizes at the state level. The. For example, we currently have Massachusetts tax and benefit policy.

## Next steps

We are partnering with the [Center for Growth and Opportunity](http://thecgo.org) to enhance the CPS data in OpenFisca US. In the coming months, we will address the aforementioned shortcomings with five sets of improvements:

1. Impute missing data from other datasets. For example, we will impute filers’ short-term share of capital gains from the IRS Public Use File and household assets (which affect benefit eligibility) from the Survey of Consumer Finances, using our [synthimpute](https://github.com/policyengine/synthimpute) machine learning software.

1. Augment income with synthetic imputations from the IRS Public Use File (PUF). The PUF is a restricted dataset containing a sample of scrubbed tax records. We will replicate tax units in the CPS and replace income data with imputed values from the PUF, preserving privacy while capturing the true distribution of income — especially at the high end.

1. Extrapolate data. We will apply government projections of earnings, prices, and population to extrapolate survey datasets, which often lag by a year or more, to the current year and over the ten-year budget window.

1. Reweight the data to better match administrative totals. [As we’ve done in PolicyEngine UK](https://blog.policyengine.org/how-machine-learning-tools-make-policyengine-more-accurate-17af859cdd97), we will ingest administrative totals across various dimensions — income, demographics, taxes, and benefits — and apply gradient descent to minimize the discrepancies against these targets. This step follows our stacking of the CPS atop the PUF-imputed CPS, allowing the optimizer to select and weigh the types of data sources that best model the US population and economy.

1. Create enhanced datasets for each state. We will apply the above gradient descent methodology to the full CPS in each state, evening out the raw CPS’s volatile state-level estimates.

We’re excited to see what our users discover about the tax and benefit system by exploring this major new feature, and we can’t wait to make it even more accurate with these enhancements soon.



---

---
# PolicyEngine at the BIG Conference and the Beeck Center’s Rules as Code Demo Day
Slug: policyengine-at-the-basic-income-guarantee-conference-and-the-beeck-centers-rules-as-code-demo-day
Date: 2022-06-09
Authors: Max Ghenis
Tags: us, impact
Description: Register for the BIG Conference June 23–25 and the Rules as Code Demo Day June 28

---

From June 23 to 25, we’ll present PolicyEngine and PolicyEngine-based research at the 20th Annual Basic Income Guarantee Conference. The first two days will be in-person in Portland, Oregon, and the final day will be virtual.

Then on June 28, we’ll present PolicyEngine at the first Rules as Code Demo Day hosted by [Georgetown University’s Beeck Center for Social Impact and Innovation](https://beeckcenter.georgetown.edu/). The event will include us and seven other organizations working to digitize benefits eligibility policy.

![](https://cdn-images-1.medium.com/max/4476/1*xoeD4BOchH5kN9Ajt3ODOQ.png)

Tickets are still available for these events at the links below. We hope to see you there!

June 23–24: [BIG Conference](http://thebigconference.org) in Portland, Oregon

June 25: [BIG Conference](http://thebigconference.org) virtually

June 28: [Beeck Center Rules as Code Demo Day](https://www.eventbrite.com/e/rules-as-code-demo-day-sharing-progress-potential-in-digitizing-benefits-tickets-354935901837) virtually

## BIG Conference sessions

We’ll present PolicyEngine-based research in the following BIG Conference sessions:

Exploring and evaluating basic income policies with the PolicyEngine app for US tax and benefit analysis
Max Ghenis and Nikhil Woodruff will run a workshop for participants to design customizable UBI policies and compute their impact, using the [PolicyEngine US app](http://legacy.policyengine.org/us).
\*June 23, 11:00AM PT, in Portland, Oregon

The distributional impacts of universal basic income policies
Nikhil Woodruff will present his forthcoming paper, a Blank Slate UBI in the US, modeled after his paper on [Blank Slate UBI in the UK](https://www.ubicenter.org/uk-blank-slate-ubi).
\*June 24, 9:00AM PT, in Portland, Oregon

In-Kind Benefits vs. Direct Cash
Tola Ouk and Max Ghenis benchmark childcare subsidies (those embedded in the SNAP program and the Child and Dependent Care Tax Credit) against a universal child allowance.
\*June 24, 1:00PM PT, in Portland, Oregon

Exploring the Macroeconomic Effects of a Basic Income
Max Ghenis and Joshua Z. Miller show the theory behind how UBI would affect labor supply, and forecast the impact of the US Blank Slate UBI on the labor supply of different types of workers.
\*June 24, 2:30PM PT, in Portland, Oregon

Guaranteed income and the current safety net
Nicholas Rodelo benchmarks food assistance programs against a negative income tax.
\*June 25, 8:00AM PT, virtual

Simulating and advocating child allowances
Max Ghenis and Yash Vijay analyze the End Child Poverty Act from Representatives Rashida Tlaib and Mondaire Jones.
\*June 25, 3:00PM PT, virtual



---

---
# Impact of the Chancellor’s Cost of Living Support package
Slug: impact-of-the-chancellors-cost-of-living-support-package
Date: 2022-05-26
Authors: Max Ghenis
Tags: uk, policy
Description: See the analysis in PolicyEngine UK

---

Today, the Chancellor of the Exchequer [announced a new Cost of Living Support package](https://www.gov.uk/government/news/millions-of-most-vulnerable-households-will-receive-1200-of-help-with-cost-of-living) of cash transfers:

- £650 to households receiving means-tested benefits

- £150 to households receiving non-means-tested disability benefits

- £300 to households receiving the Winter Fuel Payment (i.e., those with pensioners)

- £200 to households receiving energy bills, doubling the [Energy Bills Support Scheme rebate announced in February](https://www.gov.uk/government/news/millions-to-receive-350-boost-to-help-with-rising-energy-costs) and removing the need to repay it over five years

Alongside a six-month extension of the Household Support Fund, HM Treasury estimated that the package would cost £15.3bn, and be partly offset by £5bn from a new temporary Energy Profits Levy. We’ve added these four payments (not the Household Support Fund or Energy Profits Levy) to PolicyEngine. This post shows how to define the reform in PolicyEngine, compares PolicyEngine’s results to HM Treasury’s, and shows novel impacts on poverty, inequality, and households.

## Defining the reform in PolicyEngine

_Skip this section to see the results._

To accommodate this package, we’ve added a new section to the Benefit menu in the [Policy page](https://legacy.policyengine.org/uk/policy), for the _Cost-of-living support payment_. This includes payments to each of the three new household categories: those receiving means tested benefits, those with pensioners (the qualification for receiving Winter Fuel Payment), and those receiving non-means-tested disability benefits. These are set to £0 until they become legislation.

![](https://cdn-images-1.medium.com/max/3200/0*fKtwMJpHA8ua9nti)

To model the Cost of Living Support package, set these parameters to £650, £300, and £150, respectively.

![](https://cdn-images-1.medium.com/max/3200/0*niEvXilrDsNIERMK)

Next, navigate to the _Energy bills support_ menu. This defaults to £0 because it doesn’t take effect until October. Set it to £400.

![](https://cdn-images-1.medium.com/max/3200/0*-QfroG-AojdZbEiv)

This, however, will compare the full £400 against £0. To focus on the additional £200, we need to first set the baseline value to £200 by toggling the Baseline in the upper right and setting the credit to £200. This effectively front-loads the £200 announced in February to the beginning of the year.

![](https://cdn-images-1.medium.com/max/3200/0*ZC3T6NytGLf7n9SM)

If you made it this far, congratulations, you’ve modelled the newly announced Cost of Living Support package! Your URL should look like this: [https://legacy.policyengine.org/uk/policy?col_benefit_payment_amount=650&col_disability_payment_amount=150&col_pensioner_payment_amount=300&ebr_energy_bills_credit=400&baseline_ebr_energy_bills_credit=200](https://legacy.policyengine.org/uk/policy?col_benefit_payment_amount=650&col_disability_payment_amount=150&col_pensioner_payment_amount=300&ebr_energy_bills_credit=400&baseline_ebr_energy_bills_credit=200).

## Budgetary impact

![](https://cdn-images-1.medium.com/max/4544/1*1QUONsnbioHZgnKl5cd3gw.png)

PolicyEngine estimates that these four programs would cost £16.2bn, 9% higher than HM Treasury’s estimate of £14.8bn. Most of this discrepancy, and the largest proportional discrepancy, comes from the payment to pensioner households receiving Winter Fuel Payment. It’s not clear how HM Treasury estimated that this program would cost £2.5bn; the [factsheet](https://www.gov.uk/government/publications/cost-of-living-support/cost-of-living-support-factsheet-26-may-2022) states that it is not exclusive with other payments, and [DWP forecasts 11.4m households receiving Winter Fuel Payment in 2022–23](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2021), which would cost £3.4bn when multiplied by £300.

## Comparison to HM Treasury distributional impact

HM Treasury released an [“Illustrative analysis of the impact of the Cost of Living Support packages on households”](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1078837/DA_May_2022_publication.pdf) along with the package announcement, including distributional impacts on English households. Here’s one chart from their report:

![](https://cdn-images-1.medium.com/max/3200/0*kNAJvbiWYIkVklP6)

To replicate these results, select England from the Geography menu in the Policy page. Doing so yields [this impact page](https://legacy.policyengine.org/uk/population-impact?col_benefit_payment_amount=650&col_disability_payment_amount=150&col_pensioner_payment_amount=300&ebr_energy_bills_credit=400&baseline_ebr_energy_bills_credit=200&baseline_country_specific=ENGLAND).

![](https://cdn-images-1.medium.com/max/3052/0*SIcutajl_eFEU4Mn)

This shows that the package would increase incomes among low-income England households by a larger percentage than high-income England households (the same holds across the UK). PolicyEngine estimates slightly larger impacts than HM Treasury, aligning with our larger budgetary impact; for example, increasing the bottom decile’s income by 8% instead of 7%.

![](https://cdn-images-1.medium.com/max/3200/0*sfXwma_6_dIT67cS)

HM Treasury also shows the impact by decile in pounds.

![](https://cdn-images-1.medium.com/max/3200/0*mhiMc1dHvacyjXnn)

PolicyEngine estimates a lower absolute impact on low-income households than HM Treasury. Combined with the relative impact graph, these results reveal that PolicyEngine estimates a significantly lower baseline income for households in the bottom income decile than HM Treasury: £500 / 8.1% = ~£6,200, compared to £830 / 7% = ~£12,000. This is probably due to our reweighting, which improves the accuracy of our microdata, but we’ll investigate it further in [this GitHub issue](https://github.com/PolicyEngine/policyengine/issues/740).

![](https://cdn-images-1.medium.com/max/3200/0*c0wwoflvFJ-eqqor)

## Poverty and inequality impact

In addition to the decile breakdowns, PolicyEngine estimates the poverty and inequality impacts. Overall, the package lowers the poverty rate by 7%, and by 17% among pensioners.

![](https://cdn-images-1.medium.com/max/3200/0*tMkZ4fTNtcOR4O6g)

The package has a larger effect on deep poverty–the population share whose household has net income below half its poverty threshold–lowering it by 10%, and more consistently across age groups than the poverty impact.

![](https://cdn-images-1.medium.com/max/3200/0*pwjC5NxVYM0sV9Rq)

The policy would also lower inequality, especially measured most broadly via the Gini index, which would fall 1.8%.

![](https://cdn-images-1.medium.com/max/3200/0*mQx7AjV1JbdzydRD)

## Impact on individual households

The package provides between £200 and £1,100 for each household. £650 of that depends on a household’s earnings, since it is limited to claimants of means-tested benefits. This creates a “welfare cliff” at the point where a household is no longer eligible for means-tested benefits.

For example, an unmarried person with no children will receive £850 if they earn between £0 and about £7,300 per year. Once they earn more than that, they would receive £200. Their net income after taxes and benefits would fall from £8,504 when they earn £7,300, to £7,950 when they earn £7,400. To exceed £8,504 net income, their earnings would have to rise to about £8,000; that is, they’d see less net income earning between £7,300 and £8,000.

![](https://cdn-images-1.medium.com/max/2916/0*SPY_UZBNq8oHBK_0)

The placement and size of this “earnings dead zone” (the shaded rectangle) depends on household characteristics. For example, a family of four paying £1,000 per month for rent would see it between £67,900 and £69,100 earnings, since families can earn more and still receive means-tested benefits.

![](https://cdn-images-1.medium.com/max/2948/0*wFCqcj0lTdjAlyFv)

## Conclusion

PolicyEngine UK now supports payments to households receiving means-tested benefits, non-means-tested disability benefits, and Winter Fuel Payment. You can set these values to mirror the Chancellor’s announcement, or define your own household payment scheme. Our estimates generally fall within 10% of HM Treasury’s, and we’ve also produced the first poverty and inequality analyses of the package, as well as personalised estimates that reveal welfare cliffs.

To explore the package in more detail, [see our full analysis in PolicyEngine UK](https://legacy.policyengine.org/uk/population-impact?col_benefit_payment_amount=650&col_disability_payment_amount=150&col_pensioner_payment_amount=300&ebr_energy_bills_credit=400&baseline_ebr_energy_bills_credit=200).



---

---
# How developers can explore the PolicyEngine API
Slug: how-developers-can-explore-the-policyengine-api
Date: 2022-04-29
Authors: Nikhil Woodruff
Tags: global, technical
Description: The UK API explorer and US API explorer describe variables and policy parameters in our models.

---

Most of our users interact with PolicyEngine via our [UK](http://legacy.policyengine.org/uk) and [US](http://legacy.policyengine.org/us) web apps, where they enter household information and policy reforms to compute the impact of customisable tax and benefit policy. We’ve also made this information available to developers through our [Python](http://openfisca.us) [packages](http://openfisca.uk) and [web API](https://docs.google.com/document/u/1/d/1y-kRDOssYyRwEVTsntqGxoBtvFS4HKMQD-U0Ga9YzJE/preview). Today, we’re launching companion tools in the [UK](http://legacy.policyengine.org/uk/api-explorer) and [US](http://legacy.policyengine.org/us/api-explorer) to explore core components of our API: variables and policy parameters.

## What the PolicyEngine API does

Anything you can do with the PolicyEngine app, you can do with our API. Here are some examples:

1. Get parameters in our tax-benefit model, along with details about their current value, their data type and their descriptions ([policyengine.org/uk/parameters](https://legacy.policyengine.org/uk/parameters))

1. Get variables in our tax-benefit model, along with details about their current value, their data type and their descriptions ([policyengine.org/uk/parameters](https://legacy.policyengine.org/uk/parameters))

1. Calculate tax-benefit variables for a given household ([policyengine.org/us/calculate](https://legacy.policyengine.org/uk/calculate))

![*A [Google Colab notebook](https://colab.research.google.com/drive/1dvmYfLKwDWLnn3gJyqmQmVTw3VQ7Qx-a?usp=sharing) showing how to use PolicyEngine’s /us/calculate endpoint to calculate a household’s Supplemental Nutrition Assistance Program benefit based on their employment income.*](https://cdn-images-1.medium.com/max/2000/0*gtH3HDNHXxtFKrlN)A [Google Colab notebook](https://colab.research.google.com/drive/1dvmYfLKwDWLnn3gJyqmQmVTw3VQ7Qx-a?usp=sharing) showing how to use PolicyEngine’s /us/calculate endpoint to calculate a household’s Supplemental Nutrition Assistance Program benefit based on their employment income.

Using this requires knowing the variables and parameters available, and what they represent. Until now, API users had to extract all of them, or consult our [openfisca-us](http://github.com/policyengine/openfisca-us) or [openfisca-uk](http://github.com/policyengine/openfisca-uk) repos. Now, it’s as simple as searching in [policyengine.org/uk/api-explorer](https://legacy.policyengine.org/uk/api-explorer) or [policyengine.org/us/api-explorer](https://legacy.policyengine.org/us/api-explorer).

## The API explorer

Inspired by other OpenFisca country models (for example, [OpenFisca-France’s legislation explorer](https://legislation.fr.openfisca.org/)), [policyengine.org/uk/api-explorer](https://legacy.policyengine.org/uk/api-explorer) and [policyengine.org/us/api-explorer](https://legacy.policyengine.org/us/api-explorer) display metadata for any variable or policy parameter.

The API explorer includes a search interface, which lists variables and parameters with similar names. Selecting one provides detail about it on the right, such as the entity, period, and default value for variables.

![*PolicyEngine’s [US API explorer](https://legacy.policyengine.org/us/api-explorer/snap) after searching for “snap” and selecting the snap variable.*](https://cdn-images-1.medium.com/max/3200/0*Z4p3pNn8Lt08PIXd)PolicyEngine’s [US API explorer](https://legacy.policyengine.org/us/api-explorer/snap) after searching for “snap” and selecting the snap variable.

For parameters, the API explorer shows the description, the location in the Python package’s parameter tree, and the current value.

![*PolicyEngine’s [UK API explorer](https://legacy.policyengine.org/uk/api-explorer/personal_allowance) after searching for “personal allowance” and selecting the personal_allowance parameter.*](https://cdn-images-1.medium.com/max/3200/0*K1vybVl3GOAxJrva)PolicyEngine’s [UK API explorer](https://legacy.policyengine.org/uk/api-explorer/personal_allowance) after searching for “personal allowance” and selecting the personal_allowance parameter.

If you’d like to use the PolicyEngine API, please [get in touch](mailto:hello@policyengine.org). We’re excited to see what new products developers build using our open-source tax-benefit models!



---

---
# Make Everyone a Policymaker
Slug: make-everyone-a-policymaker
Date: 2021-10-15
Authors: Nikhil Woodruff
Tags: global, impact
Description: Today we're (re)launching PolicyEngine to give the public unprecedented insight into the tax and benefit system.

---

Do you know how much money you make? No, not the amount in your employment contract — how much you get to take home. What about how that would change if you took some time off, or if you got a raise? How about if your favorite (or least favorite) politician got to enact the policies they talked about on the campaign trail? Or if your government enacted _your own_ policy ideas?

Developed countries collect a [third of GDP in taxes](https://www.oecd.org/tax/tax-policy/revenue-statistics-highlights-brochure.pdf) — up from a quarter in 1965 — and they spend [about a third](https://www.oecd.org/els/soc/OECD2020-Social-Expenditure-SOCX-Update.pdf) of that tax revenue on cash benefits. Taxation and provision of public benefits arguably constitute the most impactful responsibilities of governments. But amid debates over designing these multi-trillion-dollar tax and benefit systems, policymakers and policy modelers have limited tools for evaluating their proposals. The public rarely sees how reforms would affect their own household. Many people have difficulty navigating even existing systems, which often include [absurdly complex](https://www.youtube.com/watch?v=HLIH7ukbE2I) benefit programs for low-income people.

## Our vision

We envision a more inclusive, evidence-based future for tax and benefit policy. A future where people of all income levels can plan their finances with a clear understanding of their tax liabilities and benefit eligibility, and how these would change with their circumstances.

Further, we envision that inclusive, evidence-based future for _policymaking._ A future where policymakers, academics, think tanks, candidates, and the public can share a common conversation around policy reforms. Where a country’s top elected official evaluates their policy idea with the same tools as the high school student learning about tax and benefit systems for the first time. Where everyone can see the impact of policy proposals on both their country and themselves. We envision a more participatory, democratic future where anyone can explore anyone else’s policy ideas with the rigor currently reserved for exclusive policy analysis shops.

**Today, we’re taking a step towards that future by launching PolicyEngine.** PolicyEngine is the world’s first product that allows anyone to reform the tax and benefit system and see how it would affect society and their own household. We’re currently live in the UK at [**policyengine.org**](http://legacy.policyengine.org) and we’re working on bringing it to other countries, especially the US. Here’s a video of how it works:

<center>[Interactive: nTIzJ mzkno]</center>

## How we got here

We’re Max and Nikhil, and we come to PolicyEngine from the intersection of technology, economic policy, and data science. Max worked as a data scientist at Google for several years before getting a graduate degree in economics and starting an economic policy think tank. Nikhil is trained as a computer scientist and worked as a data scientist in fintech before joining Max’s think tank. We share a passion for equitable, efficient tax and benefit policy, and a belief that technology can shine a light on the opportunities to improve those policies.

We created the first version of PolicyEngine while working at that think tank: the [UBI Center](http://ubicenter.org), which researches universal basic income policies. UBI is a simple policy, but its high cost generally requires reforms to the rest of the tax and benefit system. We sought to expand the UBI Center’s analysis from the US (where Max lives) to the UK (where Nikhil lives), but there was no open source model of the UK tax and benefit system — so we created it. There was also no web app to interact with a model of the UK system, so we created that too.

![A UBI Center report on [funding universal basic income by reforming the UK personal tax allowance](https://www.ubicenter.org/personal-allowance) used the [open-source microsimulation model](https://github.com/PolicyEngine/openfisca-uk) that powers PolicyEngine.](https://cdn-images-1.medium.com/max/3164/0*u2MatZNQhvAplTLa)_A UBI Center report on [funding universal basic income by reforming the UK personal tax allowance](https://www.ubicenter.org/personal-allowance) used the [open-source microsimulation model](https://github.com/PolicyEngine/openfisca-uk) that powers PolicyEngine._

By the time we built something useful enough to analyse UBI policies (we used our model to write [five quantitative reports](https://www.ubicenter.org/tag/uk/) since May), we realised it was useful enough to analyse any tax and benefit reform. So, six weeks after we [beta-launched PolicyEngine as a UBI Center product](https://www.ubicenter.org/introducing-policyengine), we’re re-launching independently from the UBI Center. We’ve also made a bunch of improvements since that beta launch, from a new user interface to more robust validation to more intuitive charts to a wider array of policy controls.

We’re grateful to users and UBI Center colleagues who have explored PolicyEngine in this period and provided us feedback, and to UK [modellers](https://www.iser.essex.ac.uk/files/projects/UKMOD/EUROMOD_country_report.pdf) and [agencies](https://ukdataservice.ac.uk/) that provide data and information helping us build our model. We’re especially excited to strengthen our relationship with the [Policy Simulation Library](http://pslmodels.org) by joining the [PSL Foundation](http://psl-foundation.org) as a fiscally sponsored project. We’ve worked with PSL for years and aspire to the impact of their open source policy analysis tools, especially their apps for estimating [household-level](https://compute.studio/PSLmodels/Tax-Cruncher/), [US-wide](https://compute.studio/PSLmodels/Tax-Brain), and [macroeconomic](https://compute.studio/PSLmodels/OG-USA) impacts of US tax reforms. Finally, we’re indebted to the superb work of the [OpenFisca](http://openfisca.org) development team based out of the French government, which created the microsimulation framework underlying PolicyEngine.

## What’s next

Partners and the public have already found PolicyEngine useful for understanding real-world reforms and exploring new policy directions. Here are a few examples:

- We and Charles Bauman at the UBI Center produced the first report to integrate PolicyEngine, on [funding universal basic income from a land value tax](https://www.ubicenter.org/uk-lvt).

- PolicyEngine estimates that [equalising Child Benefit rates between first-born and subsequent children](https://uk.policyengine.org/population-impact?CB_additional=21.15) would cost £1.7bn per year and cut child poverty by 4%.

- PolicyEngine estimates that [repealing the personal tax allowance](https://uk.policyengine.org/population-impact?personal_allowance=0) would raise 102 billion per year, and affect middle-income households more than low- and upper-income ones.

- The UBI Lab Network embedded our household calculator to their [Resilience UBI proposal](https://www.ubilabnetwork.org/resilience-ubi), showing visitors a personalised impact.

We’re excited to see these use cases, though we recognise we have a ways to go before fulfilling our full vision. To make PolicyEngine a platform for tax and benefit analysis from government to citizenry, we’re planning a few enhancements in the coming months:

- Branded policies, as demonstrated by the universal basic income parameters within the UBI Center drop-down. If you’re with a political party or think tank that would like to show your policy on our front page, please reach out to us.

- A simpler, feed-oriented user interface to explore policies.

- PolicyEngine US, and then other countries.

If you’d like to financially support our work, you can [make a donation through the PSL Foundation](https://opencollective.com/psl) (please email [contact@policyengine.org](mailto:contact@policyengine.org) to ensure your donation is properly routed). We also welcome technical contributions through GitHub (we’re entirely open source), as well as any other feedback or ideas via [contact@policyengine.org](mailto:contact@policyengine.org). To stay up to date, you can [sign up for our newsletter](https://mailchi.mp/7b89fef927ca/general) and follow us on [Twitter](http://twitter.com/thepolicyengine), [Facebook](http://facebook.com/thepolicyengine), [LinkedIn](https://linkedin.com/company/thepolicyengine), and [Instagram](http://instagram.com/policyengine).

Thank you for joining us on our journey toward better public policy.

Max Ghenis and Nikhil Woodruff
[PolicyEngine](http://legacy.policyengine.org) co-founders

![](https://cdn-images-1.medium.com/max/2000/1*sKPTtD2QzO5FZQNdyRP-YQ.png)



---

---
# Analysing Autumn Budget Universal Credit reforms with PolicyEngine
Slug: analysing-autumn-budget-universal-credit-reforms-with-policyengine
Date: 2021-10-30
Authors: Nikhil Woodruff
Tags: uk, policy
Description: See how the reform affects the UK population or your household.

---

_Chancellor of the Exchequer Rishi Sunak. Credit: [Number 10](https://www.flickr.com/photos/number10gov/49647526566)._

On Wednesday, the UK’s Chancellor of the Exchequer Rishi Sunak [published the details](https://www.gov.uk/government/topical-events/budget-2021) of the 2021 Autumn Budget, including a wide array of tax and benefit reforms. Among those were changes to Universal Credit (UC): reducing the taper rate from 63% to 55% and increasing work allowances by £500 per year. This follows, and will partially counteract, October’s reduction of the UC standard allowance by £20 per adult.

PolicyEngine estimates that this reform would cost £2.8bn per year, reduce poverty by 3.1%, and benefit 12% of the population. It will also reduce marginal tax rates by between 5.4pp and 63pp for people with income between the baseline work allowance and UC entitlement, while raising marginal tax rates by 37.4pp for people with income previously too high to receive UC.

Read on for more details, or [jump to the reform in PolicyEngine](https://legacy.policyengine.org/uk/population-impact?UC_reduction_rate=55&UC_work_allowance_with_housing=335&UC_work_allowance_without_housing=557&policy_date=20211101) to see how the reform affects the UK population and your own household.

## How Universal Credit works

Universal Credit is the central in-work means-tested benefit, currently being rolled out across the UK. The benefit replaces six existing “legacy” benefits covering unemployment, limited work capability and low earnings. The roll-out was started in 2013 and [is scheduled to complete by 2024](https://www.bbc.co.uk/news/uk-51318730), under a combination of natural migration (new claims cannot be made to benefits replaced by UC) and managed migration (transferring existing legacy benefits with transitional protection).

### The maximum rate

Universal Credit payments are paid in respect of a _benefit unit_ (one or two cohabiting adults, plus children). Entitlements are calculated based on three steps: the first, eligibility, requires that the claimant be working-age. The second step calculates the maximum entitlement, by summing any of the following elements that apply.

![*Values of components in Universal Credit, as of 28th October 2021.*](https://cdn-images-1.medium.com/max/2000/1*E5Gdno7MfZgBf6pIQsQVuQ.png)**Values of components in Universal Credit, as of 28th October 2021.**

### Reductions from income

Income received by the claimant reduces their entitlement to Universal Credit. Unearned income (other benefits, pensions and capital income) is treated differently than earned income from employment or self-employment. Income, after deducting taxes and work allowances, reduces UC entitlement in proportion to the taper rate.

![*The means test parameters of Universal Credit, as of 30th October 2021.*](https://cdn-images-1.medium.com/max/2000/1*yLCGkbJixG94IplxwCr0lA.png)**The means test parameters of Universal Credit, as of 30th October 2021.**

## Analysis

The reforms announced in the budget reduce the taper rate by 8pp, from 63% to 55%, as well as increasing both work allowances by £50 per month. This increases entitlement for those with earnings, in proportion to their earnings, and smoothens marginal tax rates.

### UK impact

PolicyEngine estimates the total cost of introducing the reform to be £2.7bn per year. The reform benefits 12% of the population, and it reduces poverty by 3.1% (working-age poverty decreases by 3.0% and child poverty by 6.0%). For context, PolicyEngine estimates that [restoring Universal Credit’s pandemic-related Standard Allowance](https://legacy.policyengine.org/uk/population-impact?UC_couple_old=596.58&UC_couple_young=490.6&UC_single_old=411.51&UC_single_young=344) would cost £4.2bn, reduce poverty by 4.3%, and benefit 18% of the UK.

Broadly, the reform is progressive; however, individuals in the first decile gain less than those in the second, third and fourth deciles, due to their lower likelihood to earn above the Work Allowance.

![](https://cdn-images-1.medium.com/max/2432/1*a0kz7ck9hBzc-npkfDT8rg.png)

Around a third of those affected see an increase in their disposable income of more than 5%. This reform targets those in the third income decile, with those in the first decile targeted around as much as those in the seventh.

![](https://cdn-images-1.medium.com/max/2712/1*9kCqPau-QsVxh0O5rAtmTw.png)

## Household impact

### Entitlement

This reform excludes unpaid and very-low-paid claimants from any gains, unlike the pandemic-related increases to the standard allowance, as those with earnings under the baseline Work Allowance will be unaffected by changes to the taper rate or allowance. As shown below, the increases to disposable income begin at the baseline work allowance, increase with earnings, and end once UC entitlement reaches zero.

![*How the reform affects net income for a non-renting two-adult, two-child household.*](https://cdn-images-1.medium.com/max/2712/1*8h6Scwp3WFIk2At1_-zQoA.png)**How the reform affects net income for a non-renting two-adult, two-child household.**

### Marginal tax rates

The marginal tax rate is the share of an additional pound of income that the government takes, through either taxation or benefit withdrawal. The reform reduces marginal tax rates in the main, but marginal tax rates will increase for some. The table below outlines the circumstances where marginal taxes will change.¹

![*How the UC reform affects marginal tax rates.*](https://cdn-images-1.medium.com/max/2000/1*5vOnR-QCusGaBhvRH_CfQQ.png)**How the UC reform affects marginal tax rates.**

A couple with two children and no rental costs will see their marginal tax rate fall if they earn between £6,180 and £32,540, and rise if they earn between £29,400 and £37,460, where they would be newly eligible for UC.

![How the reform affects marginal tax rates for a non-renting two-adult two-child household.](https://cdn-images-1.medium.com/max/2712/1*I3HUX7zt-N33mVlcW9NoyA.png)_How the reform affects marginal tax rates for a non-renting two-adult two-child household._

The reform lowers marginal tax rates more than it raises them, but its effect is reduced by Income Tax and National Insurance. Furthermore, the family is affected for longer by the taper rate, which is several times larger than any other marginal tax.

We’re pleased to share this first interactive analysis of the Autumn Budget UC reform, and the first to provide personalised household impacts. Our findings broadly resemble those from the [IFS](https://ifs.org.uk/uploads/Autumn-Budget-2021-Living-Standards-by-Xiaowei-Xu.pdf) and the [Resolution Foundation](https://www.resolutionfoundation.org/publications/the-boris-budget/), who also estimate the cost at around £3bn and identify similar distributional impacts.

For more timely analysis of tax and benefit reforms, follow us here and on social media, and to create your own policy, try PolicyEngine at [policyengine.org.](https://legacy.policyengine.org/)

_2021–11–04 update: This now reflects PolicyEngine 1.1.0, which incorporates Universal Credit’s minimum income floor for self-employed people._

_2021–11–06 update: This now reflects PolicyEngine 1.1.1, which calculates poverty consistently for the year 2021._

_2021–11–15 update: This now reflects PolicyEngine 1.1.8, which projects poverty thresholds and population to 2021._

[1]: Other programs, like the Child Benefit High-Income Tax Charge, can interact with Universal Credit to produce different results depending on household composition.



---

---
# Income Tax cuts Rishi Sunak is reportedly considering
Slug: income-tax-cuts-rishi-sunak-is-reportedly-considering
Date: 2021-12-04
Authors: Max Ghenis
Tags: uk, policy
Description: Explore the basic rate and additional rate cuts in PolicyEngine.

---

![100 Parliament Street](https://cdn-images-1.medium.com/max/2000/1*CXzE044rk2ZMpobYa7stoQ.png)_100 Parliament Street_

Yesterday, [The Times reported](https://www.thetimes.co.uk/article/rishi-sunaks-plan-to-slash-taxes-c30wd5kzx) that UK Chancellor Rishi Sunak is considering a number of tax cuts:

- Cutting the Income Tax basic rate from 20% to 19% in 2023, and then to 18% in 2024

- Scrapping the Income Tax additional rate of 45%, lowering the tax rate to 40% for income above £150,000

- Lowering the VAT headline rate, currently 20%

- Raising the threshold for inheritance tax, currently £325,000

PolicyEngine shows that the [combined Income Tax reforms](http://legacy.policyengine.org/uk/population-impact?add_rate=40&basic_rate=18) — lowering the basic rate to 18% and scrapping the additional rate — would cost £10.1bn per year, reduce poverty by 0.3%, benefit 71% of the public, and disproportionately increase the income of higher-income households.¹

## How Income Tax works

[Income Tax](https://www.gov.uk/income-tax-rates) nominally has four bands: a Personal Allowance, which is untaxed, and then a progressive structure of Basic (20%), Higher (40%), and Additional (45%) rates.

![gov.uk](https://cdn-images-1.medium.com/max/2000/0*Cui0kUXUHRCXsH37)_gov.uk_

However, because Personal Allowance phases out, Income Tax has six segments instead of four. Income in the Personal Allowance phase-out region (between £100,000 and £125,140), is taxed at a 60% marginal rate, as shown in this PolicyEngine graph.

![*Marginal tax rate schedule from Income Tax alone (PolicyEngine).²*](https://cdn-images-1.medium.com/max/3200/0*ny9SRyI1vvJWQ2XM)**Marginal tax rate schedule from Income Tax alone (PolicyEngine).²**

National Insurance and means-tested benefits significantly increase marginal tax rates, especially among low-income people, some of whom face marginal tax rates up to 69%. See [our report on the Autumn Budget Universal Credit reforms](https://blog.policyengine.org/analysing-autumn-budget-universal-credit-reforms-with-policyengine-2ce93f177428) for information and charts depicting those incentive schedules.

## PolicyEngine results

Navigating to [policyengine.org](https://legacy.policyengine.org) shows a *Policy *screen, and the left panel shows _Income tax_ and *Labour income *within that. This presents the tax rates that Sunak is reportedly considering changing. The basic rate can be adjusted at the top, and the additional rate can be repealed by setting the rate to 40% to match the higher rate.

![PolicyEngine](https://cdn-images-1.medium.com/max/3200/0*oG71EhArn_TrWtGP)_PolicyEngine_

PolicyEngine can show the impact of [lowering the basic rate to 19%](http://legacy.policyengine.org/uk/population-impact?basic_rate=19),³ [lowering the basic rate to 18%](http://legacy.policyengine.org/uk/population-impact?basic_rate=18), or [repealing the additional rate](http://legacy.policyengine.org/uk/population-impact?add_rate=40). It can also model combinations of repealing the additional rate and [also lowering the basic rate to 19%](http://legacy.policyengine.org/uk/population-impact?add_rate=40&basic_rate=19) or [also lowering the basic rate to 18%](http://legacy.policyengine.org/uk/population-impact?add_rate=40&basic_rate=18). The table below summarizes these five policy reforms.

[Interactive: 779bd0682ff1670b0c7d8e2eaf25a5b4]

The full combined policy — [lowering the basic rate to 18% and repealing the additional rate](http://legacy.policyengine.org/uk/population-impact?add_rate=40&basic_rate=18) — would be regressive, in that it would increase the net income more for higher earners than for lower earners, as a share of income.

![PolicyEngine](https://cdn-images-1.medium.com/max/3200/0*qU6Vy-7GSFaZkB6x)_PolicyEngine_

This policy benefits anyone with annual income exceeding the Personal Allowance of £12,570. But it only lowers marginal tax rates for people in the basic rate band — between £12,570 and £50,270 — and in the additional rate band — above £150,000.

![PolicyEngine](https://cdn-images-1.medium.com/max/3200/0*nzmOgGtBJfMUXFEL)_PolicyEngine_

For more results such as intra-decile charts, poverty rates by age, and net income of particular households (like your own!), explore the PolicyEngine links.

**Footnotes**

[1] This analysis is based on policy and data for October 2021, preceding Autumn Budget Universal Credit reforms that took effect last week. We do not adjust Scottish tax bands.

[2] To produce an Income Tax-only marginal tax rate chart in PolicyEngine, toggle all *Would claim [benefit] *switches off, and set the person’s age to 70 to exempt them from National Insurance.

[3] The Times estimated that a “1p cut in the basic rate of tax would cost about £6 billion a year”. This may refer to [HMRC’s estimate](https://www.gov.uk/government/statistics/direct-effects-of-illustrative-tax-changes/direct-effects-of-illustrative-tax-changes-bulletin-june-2021) that adjusting the basic rate by 1p would change revenues by 5.75bn in 2023–2024 and in 2024–2025. It may also, erroneously, trace to the [Liberal Democrats’ 2017 Manifesto](https://d3n8a8pro7vhmx.cloudfront.net/libdems/pages/1811/attachments/original/1515517284/2017_Manifesto.pdf?1515517284#page=19), which calls for a “1p rise on the basic, higher and additional rates of Income Tax to raise £6 billion”. PolicyEngine estimates that [raising each rate by 1p](http://legacy.policyengine.org/uk/population-impact?add_rate=46&basic_rate=21&higher_rate=41) would raise 5.9bn. But, in line with our 4.4bn estimate for raising only the basic rate, [HMRC estimates](https://www.gov.uk/government/statistics/direct-effects-of-illustrative-tax-changes/direct-effects-of-illustrative-tax-changes-bulletin-june-2021) that adjusting the basic rate by 1p would change revenues by 4.7bn in 2022–2023 (HMRC also does not adjust Scottish taxes in this analysis, and unlike PolicyEngine, they also do not adjust Welsh taxes).

_Updated 2021–12–06 to incorporate Autumn Budget Universal Credit reforms to the baseline policy._



---

---
# PolicyEngine's 2021 year in review
Slug: policyengines-2021-year-in-review
Date: 2021-12-29
Authors: Max Ghenis
Tags: global, impact
Description: PolicyEngine's inaugural year was a substantial one for public policy.

---

PolicyEngine’s inaugural year was a substantial one for public policy: with variants continuing the lethal disruption of the coronavirus, tax and welfare responses remained prominent in discussion and policymaking across the world. When we launched in October, we did so with the mission to Make Everyone a Policymaker, aiming to arm the public with professional-grade tools for modelling tax and benefit reforms. PolicyEngine UK became the world’s first product allowing anyone to design policy reforms and see both the effects on specific households, and on UK-wide outcomes like poverty, inequality and the budget.

In the past two months, we’ve learned tremendously from our users: what policies they value, how they want to interact with the tool, and more. As a result, we’ve improved PolicyEngine UK in a number of ways, from modelling Scottish rates, Stamp Duty Land Tax (and its devolved equivalents), and business rates, to adding new policies like carbon taxes and land value taxes, to allowing users to select a policy snapshot date. We’ve also simplified the interface and [validated the results](https://policyengine.github.io/openfisca-uk//model/validation.html) with a range of automated tests; we’re confident that PolicyEngine is not only the most user-friendly product in its class, but also the most accurate.

![[PolicyEngine UK’s](http://legacy.policyengine.org) current interface](https://cdn-images-1.medium.com/max/3200/0*01APO70x-26mV3Wq)_[PolicyEngine UK’s](http://legacy.policyengine.org) current interface_

The public policy community has already leveraged PolicyEngine to analyse reforms. The UBI Lab Network embedded PolicyEngine in their [Resilience UBI proposal](https://www.ubilabnetwork.org/resilience-ubi), and the UBI Center (which originally incubated PolicyEngine) integrated PolicyEngine to [its report on the proposal](https://www.ubicenter.org/resilience-ubi). As the national conversation turned to new ideas for policy change, PolicyEngine’s quick interactivity shone: we analysed the [Autumn Budget changes to Universal Credit](https://blog.policyengine.org/analysing-autumn-budget-universal-credit-reforms-with-policyengine-2ce93f177428) and, within a day, produced the only poverty estimates of [Income Tax changes reportedly discussed within the Treasury](https://blog.policyengine.org/income-tax-cuts-rishi-sunak-is-reportedly-considering-9d75eb529262). When we [presented PolicyEngine](https://docs.google.com/presentation/d/1br3vPxhYz4ytPjHVjswhdllmyF8fcp7EWixNLHJxP-U/preview?slide=id.g6293382480_0_338) at the Cross-Party Parliamentary and Local Government Group on Universal Basic Income, policymakers experimented with policies in real time. We’ve also had the chance to share our [100% open source technology](http://github.com/PolicyEngine) at the [PyData Conference](https://docs.google.com/presentation/d/1t1VBAwxmbNC_traV5DPqswvwO0wywIMjtbWP6rNr9zU/edit#slide=id.g6293382480_0_338) and the [Policy Simulation Library](http://blog.pslmodels.org/demo-day-22-synthimpute), ensuring we continue to learn from other experts in the field.

![The PolicyEngine team presenting at the UK Cross-Party Parliamentary and Local Government Group on Universal Basic Income in November 2021](https://cdn-images-1.medium.com/max/3200/0*l3UNmf6uWVy1S_2i)_The PolicyEngine team presenting at the UK Cross-Party Parliamentary and Local Government Group on Universal Basic Income in November 2021_

In 2022, we’ll continue to improve PolicyEngine’s technology and usability, and work with the policy community to further democratise the policymaking process. Ultimately, we want to make it as easy to create, explore, and engage with policy reforms as it is to connect on top media apps. Users will be able to sign in to save their policy reforms and household information, and scroll through a feed of reforms from policymakers, think tanks, and other organizations and citizens, revealing their impacts in the rigorous, quantitative terms we show today.

![Wireframe mocks for a potential future PolicyEngine app](https://cdn-images-1.medium.com/max/3200/0*H79FFl9FfIy9HVJ1)_Wireframe mocks for a potential future PolicyEngine app_

As we’ve developed PolicyEngine US, we’ve come to see another opportunity as well: the same open source policy simulation models that power our reform analysis can also show people their tax liability and benefit entitlement under current law. Some programs in some states offer calculators to estimate eligibility, but low-income Americans don’t currently have a way to see their full package of benefits and taxes to help them budget and plan for earnings changes. We’ll provide this information in a new PolicyEngine page, and also serve an API for developers looking to integrate benefit eligibility into other apps ([get in touch](mailto:contact@policyengine.org) if you’re interested!). We’ve broadened our mission to encompass these use cases, now striving to _Help People Understand and Change Public Policy._

To all of you who’ve used PolicyEngine, we extend our gratitude. We’re especially grateful to [End Poverty Make Trillions](https://www.endpovertymaketrillions.com/), whose grant jump-started our US development. We have a funding gap going into 2022, so appreciate any contributions through our fiscal sponsor, the [PSL Foundation](https://opencollective.com/psl) (tax-deductible in the US), and connections to funders looking to support transparency into tax and benefit policy. We can’t wait to build more to share in our 2022 year-in-review blog post!

Max and Nikhil, PolicyEngine co-founders

![](https://cdn-images-1.medium.com/max/2400/1*ExOry7bdKhkmUjGedfTR9w.png)



---

---
# The Green Party Manifesto at PolicyFest
Slug: the-green-party-manifesto-at-policyfest
Date: 2022-01-26
Authors: Nikhil Woodruff
Tags: uk, policy
Description: Explore the Green Party Manifesto on PolicyEngine.

---

_Green Party campaigners. Credit: [John Blower](https://www.flickr.com/photos/10332960@N03/49090026921/in/photostream/)._

On Monday, I presented a PolicyEngine analysis of the Green Party of England and Wales’ 2019 manifesto at “PolicyFest”, an internal event for Green Party members. Martin Farley, who leads the party’s policy working group, and councillor Martin Osborne also co-presented at the session.

## The Green Party’s 2019 Manifesto, updated to 2021

As he [detailed in his blog post](https://martin-farley.medium.com/poverty-buster-the-impact-of-the-2019-green-party-manifesto-on-household-incomes-and-equality-9663c39b783b), Farley specified minor updates to the Green Party’s 2019 manifesto to comport with tax and benefit changes over the last three years, such as the rollout of Universal Credit. The following analysis reflects that adjusted version.

The manifesto raises revenue from several tax reforms:

- Abolishes the Personal Allowance, while increasing the higher rate threshold from £37,700 to £50,270

- Merges National Insurance rates into Income Tax

- Replaces existing property taxes (Council Tax, Stamp Duty, business rates) with a land value tax (1.2% for households, 1.9% for corporations)

- Introduces a carbon tax at £135 per tonne

The manifesto also reforms a number of benefits:

- Repeals Child Benefit, State Pension, and Pension Credit

- Repeals means-tested benefits except those related to housing, disability, and care, in both the legacy systems and components of Universal Credit

- Reduces the taper rate of Universal Credit from 55% to 40%

- Introduces a universal basic income of £75 per week for children, £94 per week for working-age adults, and £185 per week for pension-age adults

- Introduces a “single pensioner supplement” of £25 per week to pensioners living alone, reduced at a rate of 10% with non-benefit income

All of the above parameters are available now on PolicyEngine for anyone to use, including the newly-added _Single pensioner supplement_ under the _Green Party_ section.

## Analysis

PolicyEngine finds that implementing the manifesto would produce a net £15.8bn deficit, while reducing poverty by a third and leaving 67% of the population better off.

The manifesto would cut poverty similarly across age groups, though a bit more for children and seniors. The 33 percent overall reduction equals the poverty reduction seen in the 17-year period from 2003 to 2020.

![](https://cdn-images-1.medium.com/max/4656/1*XKN6nZgw8EbNyGaSoIlweg.png)

The manifesto produces a progressive distributional impact, with all income deciles outside the highest decile coming out (in aggregate) ahead. It reduces the Gini index of income inequality by 7.2% and the top 1 percent’s income share by 3.3%.

![](https://cdn-images-1.medium.com/max/4672/1*SGgumrN-B-ki1IpIHHzUfA.png)

This doesn’t mean all households within those deciles come out ahead: at least 10% of each decile come out behind, though 51% would see their income rise by at least 5%.

![](https://cdn-images-1.medium.com/max/4948/1*2hCtxWkRplhDWE5t5Eop7w.png)

Several factors explain the manifesto’s heterogeneous effects by income decile: some households receive larger welfare benefits under the existing system than the UBI; high-asset households would owe substantial land value tax; high-consumption households would owe substantial carbon taxes; and so on. To the extent that wealth and consumption diverge from income, these taxes may affect some low-income households, as we assume that all taxes are paid immediately.

The manifesto policy reduces the number of tax parameters and makes the tax code more monotonically progressive. Under the current system, most families with children and no housing costs face marginal tax rates above 50% in three earnings regions: the Universal Credit phase-out, the Child Benefit High-Income Tax Charge, and the Personal Allowance reduction. The Green Party manifesto policy eliminates all three, resulting in a progressive marginal tax schedule with only three rates (32%, 42%, and 47%). Families with housing costs or other qualifications for remaining means-tested benefits will continue to have high marginal tax rates in some earnings regions.

![*Marginal tax rates for a two-child, single-parent household with *£30,000 income and no housing costs](https://cdn-images-1.medium.com/max/3704/1*fDQGsO2DuAFM-cZvtutCSg.png)\**Marginal tax rates for a two-child, single-parent household with *£30,000 income and no housing costs\*

Overall, we find that the Green Party manifesto reduces poverty and inequality, benefits the majority of the population, simplifies tax and benefit rules, and reduces marginal tax rates on earnings, especially for low-income households. However, it produces a £15.8 billion deficit on a static basis. See the results in more detail, as well as a customizable household calculator and the option to reform the manifesto, [on PolicyEngine here](https://legacy.policyengine.org/uk/population-impact/green-party/manifesto-2019).

_Updated on 2022–02–04 to reflect PolicyEngine’s new accuracy-enhancing survey weights, and to increase the higher rate threshold from £37,700 to £50,270 following discussions with the Green Party._



---

---
# PolicyEngine arrives stateside
Slug: policyengine-comes-stateside
Date: 2022-03-31
Authors: Max Ghenis
Tags: us, impact
Description: Today, we're beta-launching PolicyEngine US and several other new features.

---

Last October, we [launched PolicyEngine UK](https://blog.policyengine.org/make-everyone-a-policymaker-dc7b00bdb143), bringing free, open-source, web-based tax and benefit analysis to the UK for the first time. Since then, users have asked us one question more than any other: “When is it coming to the US?” This isn’t too surprising; after all, half our founding team (me) is American.

Well, fellow Yanks, the wait is over. Today, we’re beta-launching PolicyEngine US! To try it, visit [\*\*policyengine.org/us](http://legacy.policyengine.org/us)** or check out the big American flag at [**policyengine.org](https://legacy.policyengine.org/)**. Did I mention we’re also launching a [**policyengine.org](https://legacy.policyengine.org)\*\* homepage today?

![[PolicyEngine homepage](http://legacy.policyengine.org)](https://cdn-images-1.medium.com/max/7636/1*VWLFVXNrF1Gss2euuXE7tA.png)_[PolicyEngine homepage](http://legacy.policyengine.org)_

If you’ve used PolicyEngine UK, the US interface will look familiar, though without the society-wide impact page and with a different default screen. If you’re new to PolicyEngine, you can now see how to use it by clicking the question mark in the bottom left, which shows a brief demo.

![](https://cdn-images-1.medium.com/max/7636/1*S5B_j1lpVm6TuPnbZCzfYQ.png)

In fact, here are all the things we’re launching:

- [PolicyEngine US beta](https://legacy.policyengine.org/us)

- [PolicyEngine homepage](https://legacy.policyengine.org)

- Demo walkthrough

- Counterfactuals, allowing you to change baseline policy (in the UK and US)

- UK forecasts in our microsimulation model

- [API documentation](https://docs.google.com/document/d/1y-kRDOssYyRwEVTsntqGxoBtvFS4HKMQD-U0Ga9YzJE/) (if you want to estimate taxes or benefits in your app, get in touch)

OK, back to PolicyEngine US. Why the beta? Well, it’s not nearly complete. Here’s what we have so far:

- Federal personal income taxes

- Payroll taxes

- Affordable Connectivity Program

- Lifeline

- Free and reduced school meals

- Special Supplemental Nutrition Assistance Program for Women, Infants, and Children (WIC)

- California’s Supplemental Nutrition Assistance Program (SNAP)

- California Clean Vehicle Rebate Project

This is only a subset of US benefit programs — many of which vary by state — and we don’t yet have state income taxes. We also don’t compute impacts on societal measures like poverty, inequality, and the budget. And while we’ve tested it extensively, it’s not yet as thoroughly vetted as the UK model (as always, consult a tax or benefit advisor, as our estimates aren’t official).

PolicyEngine US might not yet check all of PolicyEngine UK’s boxes, but it does break new ground. To our knowledge, it is the only app to compute both the full US tax system and benefit programs for households, and the only app to interactively model benefit policy reforms. We also have some benefits that other calculators don’t, like broadband and electric vehicle subsidies, and we’re the first open source benefit model in the country.

<center>[Interactive: GUX665_cgbQ]</center>

Most of all, we’re excited by the precedent PolicyEngine US sets. Even before we launched PolicyEngine UK, we were building PolicyEngine US, and we knew that if we could make it work in two countries, we could make it work worldwide. We now believe our multi-country progress demonstrates that UK residents won’t be alone in being able to compute the impact of their government’s policies for long. Whether it comes from us or another organization, everyone will eventually have transparent policy analysis at their fingertips — it’s just a matter of time and resources.

We have a long way to go to bring all our UK features to the US. The US tax and benefit system is, in many ways, 52 systems: one for each of the 50 states, DC, and the US overall. Some programs, like Housing Choice Vouchers and Child Care Development Fund subsidies, even vary by county. To stay updated on our progress, [sign up for our mailing list](https://mailchi.mp/7b89fef927ca/general) or follow our [social](http://twitter.com/thepolicyengine) [media](http://facebook.com/thepolicyengine) [accounts](https://linkedin.com/company/thepolicyengine). You can help us make the rest happen with a [tax-deductible gift](https://opencollective.com/psl), or by [contributing to our code base](http://github.com/policyengine). If you’re a developer or researcher, you can also use our microsimulation model programmatically via our [OpenFisca US Python package](http://openfisca.us).

To compute the impact of US tax and benefit policy on your own household, give PolicyEngine US a try at [**policyengine.org/us**](https://legacy.policyengine.org/us). You can also learn more about the product on Monday at 11:30AM ET at the [Policy Simulation Library Demo Day](http://pslmodels.org/events.html). As always, feel free to [reach out](http://contact@policyengine.org) with any questions or feedback.

_We’re grateful to other tax and benefit models, from the Policy Simulation Library’s open-source [Tax-Calculator](http://taxcalc.pslmodels.org) to [snapscreener.com](https://www.snapscreener.com/) to the Atlanta Fed’s [Policy Rules Database](https://www.atlantafed.org/economic-mobility-and-resilience/advancing-careers-for-low-income-families/policy-rules-database), and to our [open-source](https://github.com/PolicyEngine/openfisca-us/graphs/contributors) [contributors](https://github.com/PolicyEngine/policyengine/graphs/contributors)_,_ for aiding in this launch._



---

---
# How PolicyEngine estimates the effects of UK carbon taxes
Slug: how-policyengine-estimates-the-effects-of-uk-carbon-taxes
Date: 2022-04-23
Authors: Nikhil Woodruff
Tags: uk, technical
Description: By fusing datasets with machine learning, we empower anyone to integrate custom carbon taxes with other tax and benefit reforms.

---

A carbon tax is a fixed price paid by corporations for every tonne of carbon dioxide emitted as part of their production process. Typically, it’s levied at the fossil fuel source (oil well, coal mine, gas site, etc.), or at the border for high-carbon imports. This tax has been [proposed](https://www.bloomberg.com/news/articles/2021-11-06/white-house-backed-carbon-tax-in-sight-for-biden-s-climate-bill) and [implemented](https://taxfoundation.org/carbon-taxes-in-europe-2021/) in multiple countries, often with the aim of reducing carbon emissions.

PolicyEngine allows users to simulate policies implementing carbon taxes in the UK (see the UBI Center policy menu), and adjust the assumptions on their incidence. In this post, we’ll go through how we estimate the effects of the tax.

![*Where to find carbon taxes in the PolicyEngine UK policy screen.*](https://cdn-images-1.medium.com/max/3200/0*mqJzs0Oc0Q53LaRM)**Where to find carbon taxes in the PolicyEngine UK policy screen.**

## Breaking down the carbon tax

PolicyEngine is a *static *model; that is, we assume that policy reforms do not change behaviour. Still, we allocate the burden of taxes to households, including taxes levied on corporations like a carbon tax.

Static models can allocate production taxes in three ways:

1. To consumers in the form of higher prices

1. To shareholders in the form of lower investment values

1. To employees in the form of lower wages

PolicyEngine currently models burdens on consumers and shareholders only, not yet employees. Our carbon tax model also allows users to change the share of the tax borne by consumers versus shareholders (the default value is 100% consumer burden).

The following two sections describe how we allocate the consumer and shareholder portions of the carbon tax to households, respectively.

## Estimating households’ carbon consumption

We use several data sources to estimate households’ carbon emissions:

- The Family Resources Survey (FRS)

- The Living Costs and Food Survey (LCFS)

- Carbon footprint estimates from the Office of National Statistics (ONS)

The FRS forms the foundation of PolicyEngine because of its detailed data on income, benefits, and demographics. However, it doesn’t contain information on household spending by consumption category; for that, we use the LCFS (which also has less detailed data on income and demographics). Exploiting the common variables across data sets, we build a model from the LCFS that predicts spending given income, and apply that to the FRS households. Specifically, we use our [synthimpute technology](http://github.com/policyengine/synthimpute) to build and train a random forest model to predict the distribution of possible spending values for each category (we do this after [reweighting](https://blog.policyengine.org/how-machine-learning-tools-make-policyengine-more-accurate-17af859cdd97)). We then sample from this distribution, adding a bias to preserve the correct total spending across all FRS households. At the end of this, we have predicted spending by category for each household in the FRS.

We apply a similar method with the ONS carbon footprint statistics. This data reports the total carbon emissions associated with each category of spending (the same categorisation as the LCFS uses). We also know the total spending associated with each category from the Living Costs and Food Survey (and now in the FRS, too). This enables us to estimate the _carbon intensity_ of each category: the carbon emissions associated with each pound spent. We can then multiply this intensity directly by the amount spent on each category to find the estimated carbon emissions for a given household.

![*Carbon emissions intensity by spending category.*](https://cdn-images-1.medium.com/max/2000/0*GBk5kkc5LsEaYZuf)**Carbon emissions intensity by spending category.**

This full process then provides estimated carbon emissions for each household in the FRS.

## Estimating households’ exposure to carbon taxes through shareholding

Since we don’t model the ability of firms to lower wages, the other half of the static carbon tax burden is households’ exposure through ownership of firms that would pay it. We assume that shareholders of companies will pay the carbon price, proportionally to their equity. Since we don’t have data on the types of companies that households invest in (only total equity holdings), we assume that their exposure is proportional to their total equity in all firms.

We calculate this at the household level, to integrate it with the rest of our model (and because all taxes are ultimately incident on households). In a similar manner to how we imputed consumption from the LCFS, we impute corporate wealth from the Wealth and Assets Survey for each FRS household. We then calculate the total shareholder-borne carbon tax, and distribute this proportionately to households with corporate wealth: this part of the tax is then no longer paid by consumers, only shareholders.

## Overall results

As [other](https://www.lse.ac.uk/granthaminstitute/publication/distributional-impacts-of-a-carbon-tax-in-the-uk/) [research](https://www.nber.org/papers/w15239) [has](https://ifs.org.uk/publications/15817) [found](https://www.elibrary.imf.org/view/books/071/21375-9781138825369-en/ch006.xml), we estimate that carbon taxes are regressive: they represent a higher proportion of disposable income for low-income households than high-income households. This is because low-income households spend more of their income on carbon-intensive goods and services like food, transport or housing, while high-income households save proportionately more.

![*Change to net income by equivalised disposable income decile for a £100 carbon tax, assuming 100% consumer incidence.*](https://cdn-images-1.medium.com/max/2334/0*WqMXO8DRE955C9Wn)**Change to net income by equivalised disposable income decile for a £100 carbon tax, assuming 100% consumer incidence.**

Increasing the proportion of the carbon tax borne by shareholders makes the carbon tax slightly more regressive from an income perspective, though less regressive from a wealth perspective. Many policy proposals include revenue recycling options, such as a per-capita dividend, to address regressivity.

## Household impacts

PolicyEngine’s household page allows users to enter their spending on various consumption categories to estimate their burden from a carbon tax. For example, since the [Green Party 2019 Manifesto](https://blog.policyengine.org/the-green-party-manifesto-at-policyfest-ee05a2d3b06d) included a carbon tax, entering this information would make the personalised impacts more accurate.

![Where to enter spending by consumption category in the PolicyEngine household screen to estimate carbon tax burdens.](https://cdn-images-1.medium.com/max/5792/1*4RxCk4AAFIEE8iIjkW7SDQ.png)_Where to enter spending by consumption category in the PolicyEngine household screen to estimate carbon tax burdens._

By fusing multiple data sources, PolicyEngine UK for the first time empowers anyone to design custom carbon taxes in conjunction with other tax and benefit reforms, and then to compute the population-wide and personalised impacts. If you have any questions or feedback about our model, please [let us know](mailto:contact@policyengine.org).

_Thanks to ​​Inés Fernández Barhumi and Reema Mohanty for their research assistance on our carbon tax model._



---

---
# Tax cuts in Prime Minister Truss's Growth Plan 2022
Slug: tax-cuts-in-prime-minister-trusss-growth-plan
Date: 2022-09-23
Authors: Max Ghenis
Tags: uk, policy
Description: See the impact on the population and on your household in PolicyEngine UK.

---

_UK Chancellor of the Exchequer Kwasi Kwarteng_

Earlier today, UK Chancellor Kwasi Kwarteng announced the [Growth Plan 2022](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf). The plan includes several provisions affecting National Insurance, Income Tax, and Stamp Duty:

- “reducing NICs rates by 1.25 percentage points from November and cancelling the Health and Social Care Levy coming in from April 2023.” (section [3.20](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=20))

- “bring forward the 1 percentage point cut to the basic rate of income tax to April 2023” ([3.21](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=20))

- “the additional rate of income tax will also be removed from April 2023” ([3.22](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=20))

- “reverse the 1.25 percentage point increase in dividend tax rates from April 2023” ([3.23](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=20))

- “From 23 September 2022, the government will increase the threshold above which Stamp Duty Land Tax (SDLT) must be paid on the purchase of residential properties in England and Northern Ireland from £125,000 to £250,000.” ([3.29](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=21))

- “From 23 September 2022, the threshold at which first-time buyers begin to pay residential SDLT will increase from £300,000 to £425,000 and the maximum value of a property on which first-time buyers relief can be claimed will also increase from £500,000 to £625,000.” ([3.30](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1105989/CCS207_CCS0822746402-001_SECURE_HMT_Autumn_Statement_2022_BOOK_Web_Accessible.pdf#page=21))

[As we wrote yesterday](https://blog.policyengine.org/stamp-duties-in-policyengine-uk-6087dc05c135), PolicyEngine fuses property values across government surveys to provide the UK’s only publicly available model of stamp duties. Our unified, enhanced dataset and model allows us to score the Growth Plan’s Stamp Duty reforms alongside the Income Tax and National Insurance reforms, which we did [within minutes of its announcement](https://twitter.com/nikhil_woodruff/status/1573235941053026305) on Twitter.

**You can [see the population impact of the package here](https://legacy.policyengine.org/uk/population-impact?dividend_basic_rate=7_5&dividend_higher_rate=32_5&NI_add_rate=2&NI_class_4_add_rate=2&NI_main_rate=12&NI_class_4_main_rate=9&dividend_additional_rate=38_1&basic_rate=19&sdlt_on_non_first_home_2_rate=0&sdlt_first_time_buyer_value_limit=625000&sdlt_on_first_time_buyer_homes_2_threshold=425000&add_rate=40) and [compute the impact on your own household here](https://legacy.policyengine.org/uk/household?dividend_basic_rate=7_5&dividend_higher_rate=32_5&NI_add_rate=2&NI_class_4_add_rate=2&NI_main_rate=12&NI_class_4_main_rate=9&dividend_additional_rate=38_1&basic_rate=19&sdlt_on_non_first_home_2_rate=0&sdlt_first_time_buyer_value_limit=625000&sdlt_on_first_time_buyer_homes_2_threshold=425000&add_rate=40).** We’ve provided top-level results below.

## Impact on the UK population

Our static microsimulation model finds that the package, assuming all provisions occurred over the 2022 calendar year, would:

- Cost £16.2 billion

- Benefit 80% of the population, disproportionately those in higher income and wealth deciles

- Reduce poverty by 1.4%, disproportionately among seniors (1.9%)

- Increase income inequality: the policy increases the Gini index by 1.2%, the top 10%’s income share by 1.0%, and the top 1%’s income share by 2.2%

The policy has a larger net income benefit to those in higher income, both in relative and absolute terms. For example, it raises the top income decile’s net income by an average of £2,738 (2.5%) and that of the bottom decile by £45 (0.4%). The policy similarly benefits high wealth deciles more than low wealth deciles, though to a lesser degree.

![](https://cdn-images-1.medium.com/max/3200/0*K6sPZQEFXrGUDLLn)

[\*\*Explore more population-level charts in PolicyEngine here.](https://legacy.policyengine.org/uk/population-impact?dividend_basic_rate=7_5&dividend_higher_rate=32_5&NI_add_rate=2&NI_class_4_add_rate=2&NI_main_rate=12&NI_class_4_main_rate=9&dividend_additional_rate=38_1&basic_rate=19&sdlt_on_non_first_home_2_rate=0&sdlt_first_time_buyer_value_limit=625000&sdlt_on_first_time_buyer_homes_2_threshold=425000&add_rate=40)\*\*

## Impact on hypothetical households

The benefit of the reform increases with income for individual households, as well as in aggregate. For example, a single person with £50,000 employment income will gain £842, while a single person with £200,000 income will gain £5,220.

![](https://cdn-images-1.medium.com/max/2592/0*9MKAdl_sTwSpw7J3)

Their marginal tax rate falls by:

- 2.2p for income between £12,570 and £50,270

- 1.2p for income between £50,270 and £150,000

- 6.2p for income above £150,000

![](https://cdn-images-1.medium.com/max/2512/0*phxsV1pO3hY9D9CZ)

The policy affects a family of four (married, two children) differently due to the interaction between Income Tax and Universal Credit.

![](https://cdn-images-1.medium.com/max/2616/0*IFpdJgHe_DhBije5)

Their marginal tax rate falls less in the Universal Credit taper zone, by about 1.0p.

![](https://cdn-images-1.medium.com/max/2576/0*rBTcqEAVkIAKhnRz)

[\*\*Compute how the reform would affect your own household here.](https://legacy.policyengine.org/uk/household?dividend_basic_rate=7_5&dividend_higher_rate=32_5&NI_add_rate=2&NI_class_4_add_rate=2&NI_main_rate=12&NI_class_4_main_rate=9&dividend_additional_rate=38_1&basic_rate=19&sdlt_on_non_first_home_2_rate=0&sdlt_first_time_buyer_value_limit=625000&sdlt_on_first_time_buyer_homes_2_threshold=425000&add_rate=40)\*\*

## Be your own Chancellor

As always, you can also [experiment with a custom reform alongside Growth Plan 2022](https://legacy.policyengine.org/uk/policy?dividend_basic_rate=7_5&dividend_higher_rate=32_5&NI_add_rate=2&NI_class_4_add_rate=2&NI_main_rate=12&NI_class_4_main_rate=9&dividend_additional_rate=38_1&basic_rate=19&sdlt_on_non_first_home_2_rate=0&sdlt_first_time_buyer_value_limit=625000&sdlt_on_first_time_buyer_homes_2_threshold=425000&add_rate=40). If you’d prefer an alternative reform, how would you design it? Compute the impact in PolicyEngine and [let us know](http://twitter.com/thepolicyengine)!

![Labour Income Tax reforms under the Growth Plan 2022](https://cdn-images-1.medium.com/max/3200/0*4yqZPnpAmiRqYiUe)_Labour Income Tax reforms under the Growth Plan 2022_



---

---
# How to simulate basic and guaranteed income policies in PolicyEngine US
Slug: how-to-simulate-basic-and-guaranteed-income-policies-in-policyengine-us
Date: 2022-09-27
Authors: Max Ghenis
Tags: us, technical
Description: From universal basic income to age-dependent means-tested payments, we've got you covered.

---

_The [UBI Center](http://ubicenter.org) contributed basic income policy parameters to PolicyEngine._

With PolicyEngine US, you can adjust hundreds of parameters defining federal and state tax and benefit programs, and then compute how adjusting those programs would affect society and households. But did you know you can also model policies that don’t currently exist, like basic income?

To define policies that don’t exist, scroll past the _Simulation, US government_, and _State government_ parameter menus in our [_Policy_ page](http://legacy.policyengine.org/us/policy) and select _Third party_. Here you’ll find third-party-contributed policy parameters. Currently that includes _Congress_, which shows parameters that characterize the End Child Poverty Act (more on that below), and _UBI Center_,¹ which shows parameters that characterize basic or guaranteed income policies (we use the term _basic income_). Before it was signed into law, we characterized policies in the Inflation Reduction Act in the _Third party > Congress_ menu, too.

![Part of PolicyEngine’s basic income parameter menu from a mobile device.](https://cdn-images-1.medium.com/max/2000/1*-OToQxH1XvFoz4nqT73DXA.png)_Part of PolicyEngine’s basic income parameter menu from a mobile device._

In this blog post, we’ll show you how to design and compute the impact of basic income policies covering a range of parameters. We’ll do this through the lens of four example reforms:

1. Universal basic income - example: Applying the [Alaska Permanent Fund Dividend](https://pfd.alaska.gov/) nationwide

2. Age-dependent basic income - example: [End Child Poverty Act](https://www.congress.gov/bill/117th-congress/house-bill/6598/text?r=4&s=1), a bill from Representatives Rashida Tlaib and Mondaire Jones

3. Phasing out basic income as a percent over a threshold - example: [Seed Money Act](https://www.endpovertymaketrillions.com/the-plan), a proposal from [End Poverty Make Trillions](https://www.endpovertymaketrillions.com/)²

4. Phasing out basic income over an income range - example: [Guaranteed Income for the 21st Century](https://drive.google.com/file/d/1UDFPwUYu2Rf4RGgXuOTacmBj2Gt9paAV/view), a proposal from the [Economic Security Project](https://www.economicsecurityproject.org/) and the [New School](https://www.newschool.edu/)

After you’ve created any of these policies, you can compute the impact on the population (budget, poverty, and inequality), both to the US or within a state, and also compute the impact on a given household. To learn more about these impacts, see our blog posts on the [PolicyEngine US household calculator](https://blog.policyengine.org/policyengine-comes-stateside-cef88b122e48) and [population impact page](https://blog.policyengine.org/the-new-policyengine-us-population-impact-page-de68cb4ba71a).

## Universal basic income

The first policy switch under _Amounts_ is the simplest: an unconditional, universal cash payment to every member of the population. By default, it does not affect any other taxes or benefits, has no means test, and increases the income of each person by the same amount.

### Example: Applying the [Alaska Permanent Fund Dividend](https://pfd.alaska.gov/) nationwide

Suppose the US implemented its own version of [Alaska’s Permanent Fund Dividend](https://pfd.alaska.gov/). Since 1982, Alaska has given each resident a share of the return on its sovereign wealth fund, funded by oil revenue. The most recent payment, in 2021, was [$1,114 per person](https://pfd.alaska.gov/Division-Info/summary-of-dividend-applications-payments).

To simulate that policy nationwide, enter 1114 in the top _Basic income_ parameter.

![](https://cdn-images-1.medium.com/max/3200/0*eqOCDQgqARfOKWf2)

[See the impact of a $1,114 per person payment in PolicyEngine here.](https://legacy.policyengine.org/us/population-impact?bi_amount=1114)

## Age-dependent basic income

To design basic income policies that grant different amounts to different age groups, use the controls in the _Amounts_ tab. These controls let you use five age-based basic income levels:

- Young children (under age 6)

- Older children (6 to 17)

- Young adults (18 to 24)

- Older adults (25 to 64)

- Senior citizens (65 or older)

You can adjust the age bounds and set the basic income amount for each of these age groups.

### Example: [End Child Poverty Act](https://www.congress.gov/bill/117th-congress/house-bill/6598/text?r=4&s=1), a bill from Representatives Rashida Tlaib and Mondaire Jones

The End Child Poverty Act would:

1. Provide a basic income for each child equal to the difference between the [poverty line](https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines) for a one- and two-person household; currently, that’s $4,720 per year ($393 per month)

1. Create a refundable credit of $600 per adult dependent

1. Create a refundable credit of $600 per filer ($1,200 for joint filers), phasing out at 5% for income above $20,000 ($40,000 for joint filers)

1. Repeal the Child Tax Credit and the Earned Income Tax Credit

To model the basic income for children, skip the first basic income amount and enter 4720 in the _Young child basic income_ box. Then to apply it to all children up to age 18, enter 19 in the _Older child basic income age_ box. To avoid overlapping age ranges, the last step is entering 20 (or any age between 20 and 24) in the _Young adult basic income age_ box.

![](https://cdn-images-1.medium.com/max/3200/0*5UFNDEwvxpq5BepR)

You can use the _Third party > Congress > House > Rep Tlaib_ parameter menus to specify provisions 2 and 3, and the _US government > IRS > Credits > {Child, Earned income} tax credit > General_ parameter menus to specify provision 4.

[See the End Child Poverty Act in PolicyEngine here.](https://legacy.policyengine.org/us/population-impact?abolish_eitc=1&end_child_poverty_act_adult_dependent_credit_amount=600&end_child_poverty_act_filer_credit_amount_HEAD_OF_HOUSEHOLD=600&end_child_poverty_act_filer_credit_amount_JOINT=1200&end_child_poverty_act_filer_credit_amount_SEPARATE=600&end_child_poverty_act_filer_credit_amount_SINGLE=600&end_child_poverty_act_filer_credit_amount_WIDOW=600&end_child_poverty_act_filer_credit_phase_out_start_HEAD_OF_HOUSEHOLD=20000&end_child_poverty_act_filer_credit_phase_out_start_JOINT=40000&end_child_poverty_act_filer_credit_phase_out_start_SEPARATE=20000&end_child_poverty_act_filer_credit_phase_out_start_SINGLE=20000&end_child_poverty_act_filer_credit_phase_out_start_WIDOW=20000&end_child_poverty_act_filer_credit_phase_out_rate=5&young_child_bi=4716&older_child_bi_age=19&abolish_non_refundable_ctc=1&abolish_refundable_ctc=1&young_adult_bi_age=20&young_child_bi_amount=4720)

[This blog post](https://blog.policyengine.org/the-new-policyengine-us-population-impact-page-de68cb4ba71a) describes population-level results of the End Child Poverty Act in PolicyEngine. Numbers differ slightly as we’ve since updated from 2020 to 2021 data.

## Phasing out basic income as a percent over a threshold

The basic income policies we’ve described so far have set amounts at the individual level. PolicyEngine also supports filer-level amounts as a share of the filer’s [federal poverty line](https://aspe.hhs.gov/topics/poverty-economic-mobility/poverty-guidelines). In 2022, the federal poverty line in the contiguous US was $13,590 for a single person and $4,720 for each subsequent member.

### Example: [Seed Money Act](https://www.endpovertymaketrillions.com/the-plan), a proposal from [End Poverty Make Trillions](https://www.endpovertymaketrillions.com/)

The Seed Money Act provides a grant equal to 100% of the poverty line. Its proposal document also suggests taxing the grant back for higher earners (effectively phasing it out) and repealing benefit programs. [This blog post](https://endpovertymaketrillions.medium.com/economic-modeling-of-how-to-end-poverty-in-the-united-states-while-saving-taxpayers-trillions-of-1679b751d0c0) from End Poverty Make Trillions uses PolicyEngine to explore a range of policy options; of these, we consider the option that phases out at 50% and does not replace existing programs.

To model the basic income at 100% of the poverty line, scroll to the bottom of the _Amounts_ parameter menu and enter 100 in the _Basic income as a percent of tax unit’s poverty line_ box.

![](https://cdn-images-1.medium.com/max/3200/0*p73Tm_diUvxXjRlK)

Then enter 50 in the _Basic income phase-out rate_ box in the _Phase-out_ menu.

![](https://cdn-images-1.medium.com/max/5880/1*aCzYTQ5LzMtutKHHQePGBg.png)

[See the above-described version of the Seed Money Act in PolicyEngine here.³](https://legacy.policyengine.org/us/population-impact?bi_fpg_percent=100&bi_phase_out_rate=50)

## Phasing out basic income over an income range

Rather than phasing out the benefit as a rate above a threshold, some proposals phase it out linearly from the threshold to a higher income value. This can be equivalent for childless households, but if the phase-out ranges only vary with filing status and the benefit has a child element, they create faster phase-outs for households with more children. We support filing status-specific phase-out income ranges.

### Example: [Guaranteed Income for the 21st Century](https://drive.google.com/file/d/1UDFPwUYu2Rf4RGgXuOTacmBj2Gt9paAV/view), a proposal from the [Economic Security Project](https://www.economicsecurityproject.org/) and the [New School](https://www.newschool.edu/)

In 2021, the Economic Security Project commissioned a report from the New School to study what they called “Guaranteed Income for the 21st Century”. This policy:

- Guarantees $12,500 per adult and $4,500 per child

- Phases out between $10,000 and $50,000 adjusted gross income ($15,000 to $70,000 for joint filers)

- Repeals the Earned Income Tax Credit

To model the phase-out, go to the _Phase-out_ menu and make the following entries:

1. Enter 10000 in the _Basic income phase-out threshold_ box for heads of household (the first filing status in the drop-down menu)

1. Repeat (1) for all other filing statuses, setting the joint value to 15000

1. Toggle off the _Phase out basic income as a rate_ switch

1. Enter 50000 in the _Basic income phase-out end_ box for heads of household

1. Repeat (4) for all other filing statuses, setting the joint value to 70000

Your screen should look like this once this step is complete:

![](https://cdn-images-1.medium.com/max/3200/0*6PcRNyg6HdZgw9fu)

Then define the basic income amounts ($4,500 for the two child categories and $12,500 for the three adult categories) and repeal the EITC using the steps from the End Child Poverty Act section of this post.

[See Guaranteed Income for the 21st Century in PolicyEngine here.](https://legacy.policyengine.org/us/population-impact?young_child_bi=4500&older_child_bi=4500&young_adult_bi=12500&older_adult_bi=12500&senior_bi=12500&bi_phase_out_threshold_HEAD_OF_HOUSEHOLD=10000&bi_phase_out_threshold_JOINT=15000&bi_phase_out_threshold_SEPARATE=10000&bi_phase_out_threshold_SINGLE=10000&bi_phase_out_threshold_WIDOW=10000&bi_phase_out_by_rate=0&bi_phase_out_end_HEAD_OF_HOUSEHOLD=50000&bi_phase_out_end_JOINT=70000&bi_phase_out_end_SEPARATE=50000&bi_phase_out_end_SINGLE=50000&bi_phase_out_end_WIDOW=50000&abolish_eitc=1&older_adult_bi_amount=12500&older_child_bi_amount=4500&senior_bi_amount=12500&young_adult_bi_amount=12500&young_child_bi_amount=4500)

Through these four policies, we’ve shown how to use PolicyEngine to compute the impact of basic income policies that vary in their amounts, age distribution, and phase-out. PolicyEngine has more controls we haven’t covered, like setting hard income limits (with no phase-out) and making the payments taxable.

So what basic or guaranteed income policies would you design? [Let us know!](https://twitter.com/intent/tweet?text=Check%20out%20this%20basic%20income%20policy%20I%20made%20with%20@ThePolicyEngine%20[add%20your%20policyengine.org%20link])

[1] The [UBI Center](http://ubicenter.org) is a think tank that researches basic income policies. The UBI Center incubated PolicyEngine before we spun off in 2021.

[2] End Poverty Make Trillions (EPMT) has donated to PolicyEngine.

[3] Current results differ from EPMT’s blog post because EPMT approximated the federal poverty guideline with individualized amounts. We added the option to define basic income as a percent of the poverty line after EPMT published their blog post.



---

---
# PolicyEngine launches in New York state
Slug: policyengine-launches-in-new-york-state
Date: 2022-10-21
Authors: Max Ghenis
Tags: us, policy
Description: New Yorkers can now estimate their state income taxes alongside federal taxes and benefits — and change the rules, too.

---

New York state taxes individual income at rates ranging from 4% to 10.9%. But it also has a slew of income adjustments, supplementary rates, deductions, exemptions, and credits. Short of using tax software in April or hiring a tax accountant, how can you estimate your tax bill?

[**New Yorkers can now use the free PolicyEngine app to find out.**](http://legacy.policyengine.org)[^1] We capture all those rules, and show your estimated state taxes (including tax credits) in the same view as your federal taxes and benefit programs like the Supplemental Nutrition Assistance Program.

![](https://cdn-images-1.medium.com/max/3200/0*sqsx67qxDSL6WpYE)

What’s more, you can customize New York’s tax policy and have PolicyEngine estimate how that new policy would affect New York[^2] and your own household. For example, this video estimates the impact of expanding New York’s Earned Income Tax Credit.

<center>[Interactive: jZUC9PrZe4Q]</center>

From Governor Hochul to think tanks to families trying to better understand their own finances, we hope New Yorkers of all stripes will find valuable information in our free, open source tax model.[^3]

![](https://cdn-images-1.medium.com/max/5868/1*TUzMiSu3Z9ktiA5_9syB-Q.png)

[^1]: PolicyEngine results may not constitute exact tax liabilities or benefit entitlements.

[^2]: PolicyEngine estimates New York-wide impacts using the Current Population Survey, which undercaptures income and benefits, especially among low- and high-income households.

[^3]: Nikhil Woodruff and Aleida Baumgartner modeled PolicyEngine’s New York tax model.



---

---
# Computing your Oregon Earned Income Tax Credit in PolicyEngine
Slug: computing-your-oregon-earned-income-tax-credit
Date: 2022-10-24
Authors: Kevin Foster
Tags: us, policy
Description: We walk you through it step by step.

---

The earned income tax credit (EITC) is a federal tax credit for low-income filers with earned income. The credit is refundable, meaning that the taxpayer can receive money back in the form of a refund if their tax liability is reduced below zero. [Oregon is one of 29 states](https://www.taxcreditsforworkersandfamilies.org/state-tax-credits/) or similar program to the federal EITC.

## Introduction to the Oregon EITC

The Oregon EITC has two elements. For filers with children under three years old, the state provides 12% of the federal EITC. For filers without young children, Oregon matches 9% of the federal EITC. PolicyEngine has now modeled the Oregon EITC match, along with other credits and subtractions. In this blog post, we’ll walk you through the process of estimating your EITC match in Oregon using PolicyEngine.

## Example: Single Parent with $30,000 Employment Income and Two Children

Consider a single parent with $30,000 employment income and two children, aged two and four, respectively. By following the steps outlined below, you can estimate the amount of Oregon EITC you are eligible for in 2022.

## Step-by-Step Instructions for Estimating Your Oregon EITC in PolicyEngine

Select “Compute my household income” on the left, then “Enter my household.”

![](https://cdn-images-1.medium.com/max/3200/0*BZcMhZhhEGtlx9nu)

Enter your marital status as “Single,” followed by two dependents.

![](https://cdn-images-1.medium.com/max/3200/0*6rDvjb_CApdU-Dgp)

In the dropdown, select “Oregon” as your state.

![](https://cdn-images-1.medium.com/max/3200/0*bfcoGajoaxjJvd0I)

Enter your employment income ($30,000 in this example).

![](https://cdn-images-1.medium.com/max/3200/0*hjv0AkyVkHqjZnAX)

Next, enter your age, and the ages of the children (in this example, age two and four).

![](https://cdn-images-1.medium.com/max/7680/1*4jU0hHp0--fS3oMlRWR-Gg.png)

With your net income displayed at the top, click the “Your refundable tax credits,” then “Your Oregon refundable tax credits.” The dropdown will display your OR EITC.

![](https://cdn-images-1.medium.com/max/3200/0*EzWn-Al88mSROJko)

In this example, the estimated Oregon EITC is $579. That is, a single parent with $30,000 employment income and children aged two and four will receive $579 from the Oregon EITC in 2022.

## Conclusion

To estimate your own Oregon EITC, or other taxes and benefits, visit policyengine.org. Remember, these are just estimates and the actual amount you receive may be different. For more information on the EITC and other tax credits, visit the Internal Revenue Service (IRS) website.

![](https://cdn-images-1.medium.com/max/3200/0*7234nnaAoAino9Mr)

_PolicyEngine estimates do not constitute exact tax liabilities or benefits. Consult a tax advisor._



---

---
# Estimating your Supplemental Security Income benefits in PolicyEngine
Slug: estimating-your-supplemental-security-income-benefits-in-policyengine
Date: 2022-10-28
Authors: Max Ghenis
Tags: us, policy
Description: Enter your household information, and our free web app will estimate your SSI — plus other taxes and benefits.

---

Low-income seniors and people with disabilities can claim [Supplemental Security Income](https://www.ssa.gov/ssi/), a monthly cash benefit run by the [Social Security Administration](https://www.ssa.gov/). Last year, [over 7 million people claimed over $50 billion in SSI benefits](https://www.ssa.gov/budget/FY22Files/2022BO.pdf).

In this post, you’ll see how to estimate your own SSI benefits based on your income using the [free PolicyEngine US web app](http://legacy.policyengine.org/us). You can also watch it in the below 90-second video.

<center>[Interactive: hqId_2EJy9o]</center>

To start, visit [\*\*policyengine.org](https://legacy.policyengine.org/)** and click **Enter PolicyEngine US\*\*.

Go to the **Your household** tab to enter your household’s info. Let’s say we’re a single parent of one disabled child with $30,000 income. Click **1** in the **Dependents** section.

![](https://cdn-images-1.medium.com/max/4228/1*5HwxclNO_eVCNnzQH95MBA.png)

In the **Income** menu, enter **$30,000** under **Employment income**.

![](https://cdn-images-1.medium.com/max/4228/1*oZ3CRAEsSnrvyVyjNYOY4w.png)

In the **Demographics** menu, select the **You** drop-down in the upper right corner, and select **Your first dependent.** Scroll down to toggle the **SSI disabled** flag.

![](https://cdn-images-1.medium.com/max/4228/1*NL9U8j7SGxkDvV73kfUW8w.png)

Now click **Compute your net income.** SSI is in the **Benefits** section of the expandable table. This household would receive $5,934 per year (in 2022), or about $495 per month. This also assumes the household meets other requirements such as asset limits.

![](https://cdn-images-1.medium.com/max/4220/1*07anufgQuSoobtdMU0DUrQ.png)

To estimate your own SSI benefits, as well as other taxes and benefits, visit [**policyengine.org**](https://legacy.policyengine.org/).

_PolicyEngine provides estimates only; they do not confer benefit eligibility._



---

---
# Updating PolicyEngine to reflect SNAP reform in the omnibus bill
Slug: updating-policyengine-to-reflect-snap-reform-in-the-omnibus-bill
Date: 2022-12-23
Authors: Max Ghenis
Tags: us, technical
Description: A step-by-step guide to syncing our code with the latest legislation.

---

# Updating PolicyEngine to reflect SNAP reform in the omnibus bill

A step-by-step guide to syncing our code with the latest legislation

![](https://cdn-images-1.medium.com/max/5812/1*yzcpIgHZDulGcD9o8Qqaag.png)

The US Senate has recently passed the [Consolidated Appropriations Act of 2023](https://www.appropriations.senate.gov/imo/media/doc/JRQ121922.PDF), also known as the omnibus bill. If the House of Representatives and President Biden sign it, it will create or amend several federal programs. One of these programs is the Supplemental Nutrition Assistance Program (SNAP), which is modeled by PolicyEngine in the US. The omnibus bill will terminate SNAP emergency allotments after February 2023 payments. Previously, the Families First Coronavirus Response Act authorized emergency allotments to provide additional assistance to SNAP-eligible households. PolicyEngine uses a [dataset of emergency allotment policies from snapscreener.com](https://www.snapscreener.com/blog/emergency-allotments), which currently shows that emergency allotments are active in 34 states and the District of Columbia.

In the accompanying video, we demonstrate the process we follow to update our open source code to reflect policy reforms such as this one. This process includes [filing an issue](https://github.com/PolicyEngine/policyengine-us/issues/1591), creating a new Git branch, writing a test using test-driven development, updating the logic, and passing the test before [filing a pull request](https://github.com/PolicyEngine/policyengine-us/pull/1592).

<center>[Interactive: lW83x3JgNcU]</center>

If you are interested in contributing to our open source software, we welcome assistance with modeling new policies, improving our architecture, and building user-friendly experiences for those learning about taxes and benefits or designing policy reforms. Please reach out to me at [max@policyengine.org](mailto:max@policyengine.org) if you would like to join our team.



---

---
# From idea to impact: scoring a policy reform on the new PolicyEngine UK
Slug: from-idea-to-impact-scoring-a-policy-reform-on-the-new-policyengine-uk
Date: 2023-01-12
Authors: Nikhil Woodruff
Tags: uk, technical
Description: A walkthrough of the new app on a UK tax-benefit reform.

---

Last week saw the 10-year anniversary of the introduction of the Child Benefit High Income Tax Charge, which recoups the value of the Child Benefit from high-income parents. Let’s walk through how to estimate the impact of abolishing it.

## The landing page

The landing page now has a new look. We know that PolicyEngine users usually fall into two categories: people who want to calculate their household’s taxes and benefits (sometimes under a policy reform), and people who want to run economic analyses of custom-built policy reforms (and also simulate example households). So we’ve split these use-cases up on the landing page.

We’re interested in building a new reform, so we’ll select _Compute the impact of policy reforms_.

## Building a policy

![](https://cdn-images-1.medium.com/max/2000/0*4JH9dNcZ-PG3uQfT)

_The policy builder page on PolicyEngine._

On this part of the app, we can specify the details of our policy reform, and simulate it on the economy. There are three panes in this view.

The _left pane_ is for navigation: use this to select what the middle pane should be showing. The top half is a menu of all the _input parameters_: policy parameters you can change to build a reform (for example, the basic rate of income tax). The bottom half is a menu of all the _outputs_: things the model can tell you about how your reform affects the economy (for example, the effect on poverty rates).

The _middle pane_ shows different things depending on what you’ve selected in the left pane. If you select a policy parameter, it’ll give you the option to change that parameter. If you select an output, it’ll show you a chart and some explanation.

The _right pane_ lets you control your policy reform at a high level: giving it a name, selecting where and when to simulate it, and against what baseline. You can also use this pane to move on from this screen and see how a specific household fares under a reform.

We want to build a reform that abolishes the High-Income Tax Charge: first, we need to select the right parameter. The left pane organises parameters by government department, so we could find it by navigating into _HMRC > Income Tax > Tax charges_.

But a faster way is to use the search bar in the top-left to jump straight to it. Search for _Child Benefit Tax Charge_ and you’ll see two parameters: one for the rate at which Child Benefit is phased out, and one for the threshold at which this happens.

![](https://cdn-images-1.medium.com/max/3200/0*12cujazBA1WE-nEb)

_Searching for the Child Benefit Tax Charge parameter._

We’ll select the phase-out rate. The middle screen now shows that parameter: its title, description, and a graph of its value over time. This is one of the most powerful new features in PolicyEngine: the ability to specify a time-dated parametric reform to _any_ degree of complexity. Instead of just being able to set a parameter’s value for the current year, you can set it for any time period, as many times as you’d like using the start-end date dialogue.

For now though, we’ll just set it to zero.

![](https://cdn-images-1.medium.com/max/3200/0*xPMcM0vcfwHPHsjp)

_Abolishing the HITC phase-out rate._

You’ll notice the right sidebar has updated with a description of our reform, and it’s been auto-designated the name _Policy #130_. Let’s rename it to _Abolishing the Child Benefit HITC_ by typing that into the name display in the top-right.

Now, we’re ready to see the economic analysis. Click on _Calculate economic impact_ to see how it affects the UK in 2023.

## Scoring the economic impact

The middle pane now shows a menu of what the model can tell you: the effect on the budget, poverty impacts, distributional impacts and more. Navigating onto the budgetary impact chart, we can see that this reform costs £2bn.

We can also look at the distributional impact, for example by selecting _Outcomes by income decile_. This reform mainly affects households in the top half of the income distribution, and the top decile sees the highest proportion of people affected by the reform.

![](https://cdn-images-1.medium.com/max/3200/0*MvMusKcRyoGntCJy)

_Distributional analysis of the HITC abolition._

## Calculating a household’s impact

Economic analyses are important for understanding the broader picture of a reform over an entire country, but policy discussions often centre around specific examples or edge cases. We’ve streamlined the design of the household calculator on PolicyEngine to make it easier and faster to get the numbers out of the model.

Select _Enter my household_ to jump into the household analysis page. This will take you to the household page (like you would have seen if you had selected _Compute household impacts_ at the very start, but now with your policy saved).

![](https://cdn-images-1.medium.com/max/3200/0*aDVMVAJoT3m9DI8p)

_The household calculator’s landing page._

This screen is set out just like the policy screen: the left pane is for navigation, and is split between inputs and outputs. The middle pane lets you change household properties instead of policy parameters, and the right pane now will show details about your household once you’ve entered them.

The household screen will now give you an option to start entering details about your household. Click through, and use the prompts given to specify a few basic details: adults and children, location, income and age (you’ll be able to add more later).

Once you’ve entered these, you’ll be taken straight to the _Net income_ page, which tells you how your household is affected by the reform.

![](https://cdn-images-1.medium.com/max/3200/0*kIyBGsv4KCRTA7oI)

_The net income screen._

This screen can tell us exactly why the household is affected like this: expand individual sections to trace down where the change comes from.

Another major new feature comes under the _Varying your earnings_ option in the bottom left pane: the ability to see how specific properties of a household change in response to earnings, not just net income. Here, we can use it to see how the HITC changed by income, with and without the reform.

![](https://cdn-images-1.medium.com/max/3200/0*dvGPkEAKASbQiCai)

_The HITC by income, under the abolition reform._

We can also see the impact on marginal tax rates: for a household with £55,000 income, abolishing the HITC lowers their MTR from 62% to 43%.

From here, you can go back and change any input variable (by the left navigation menu, or with the search box in the top left), go back and change the policy reform, or revisit any other part of the app.

Let us know what policy ideas you create, by tagging @ThePolicyEngine.



---

---
# From idea to impact: scoring a policy reform on the new PolicyEngine US
Slug: from-idea-to-impact-scoring-a-policy-reform-on-the-new-policyengine-us
Date: 2023-01-12
Authors: Nikhil Woodruff
Tags: us, technical
Description: A walkthrough of the new app on a US tax-benefit reform.

---

One of the most talked-about reforms of the last few years has been making the Child Tax Credit fully refundable (enabling it to reduce federal income tax liabilities below zero). Let’s walk through how to model it in PolicyEngine.

## The landing page

The landing page now has a new look. We know that PolicyEngine users usually fall into two categories: people who want to calculate their household’s taxes and benefits (sometimes under a policy reform), and people who want to run economic analyses of custom-built policy reforms (and also simulate example households). So we’ve split these use-cases up on the landing page.

We’re interested in building a new reform, so we’ll select _Compute the impact of policy reforms_.

## Building a policy

![](https://cdn-images-1.medium.com/max/3200/0*4DGD1Jbyq5ljyNxX)

_The policy builder page on PolicyEngine._

On this part of the app, we can specify the details of our policy reform, and simulate it on the economy. There are three panes in this view.

The _left pane_ is for navigation: use this to select what the middle pane should be showing. The top half is a menu of all the _input parameters_: policy parameters you can change to build a reform (for example, the first rate of federal income tax). The bottom half is a menu of all the _outputs_: things the model can tell you about how your reform affects the economy (for example, the effect on poverty rates).

The _middle pane_ shows different things depending on what you’ve selected in the left pane. If you select a policy parameter, it’ll give you the option to change that parameter. If you select an output, it’ll show you a chart and some explanation.

The _right pane_ lets you control your policy reform at a high level: giving it a name, selecting where and when to simulate it, and against what baseline. You can also use this pane to move on from this screen and see how a specific household fares under a reform.

We want to build a reform that makes the CTC fully refundable: first, we need to select the right parameter. The left pane organises parameters by government department, so we could find it by navigating into _IRS > Credits > Child Tax Credit > Refundability_.

But a faster way is to use the search bar in the top-left to jump straight to it. Search for _Fully refundable CTC_ and you’ll see the parameter deciding whether the CTC should be fully refundable or not.

![](https://cdn-images-1.medium.com/max/2844/0*E-av1hWDz0pqPrgH)

_Searching for the fully refundable CTC parameter._

We’ll select this parameter. The middle screen now shows that parameter: its title, description, and a graph of its value over time. This is one of the most powerful new features in PolicyEngine: the ability to specify a time-dated parametric reform to _any_ degree of complexity. Instead of just being able to set a parameter’s value for the current year, you can set it for any time period, as many times as you’d like using the start-end date dialogue.

For now though, we’ll just set it to true by clicking on the switch.

![](https://cdn-images-1.medium.com/max/3200/0*_vw5TE6Ee77qhYcI)

_Making the CTC fully refundable._

You’ll notice the right sidebar has updated with a description of our reform, and it’s been auto-designated the name _Policy #5_. Let’s rename it to _Making the CTC fully refundable_ by typing that into the name displayed in the top-right.

Now, we’re ready to see the economic analysis. Click on _Calculate economic impact_ to see how it affects the US in 2023.

## Scoring the economic impact

The middle pane now shows a menu of what the model can tell you: the effect on the budget, poverty impacts, distributional impacts and more. Navigating onto the budgetary impact chart, we can see that this reform costs £2bn.

We can also look at the distributional impact, for example by selecting _Outcomes by income decile_. This reform mainly affects households in the top half of the income distribution, and the top decile sees the highest proportion of people affected by the reform.

![](https://cdn-images-1.medium.com/max/3200/0*XWRXPEI2SbcQxmRN)

_Distributional analysis of making the CTC fully refundable._

## Calculating a household’s impact

Economic analyses are important for understanding the broader picture of a reform over an entire country, but policy discussions often centre around specific examples or edge cases. We’ve streamlined the design of the household calculator on PolicyEngine to make it easier and faster to get the numbers out of the model.

Select _Enter my household_ to jump into the household analysis page. This will take you to the household page (like you would have seen if you had selected _Compute household impacts_ at the very start, but now with your policy saved).

![](https://cdn-images-1.medium.com/max/3200/0*x3qORoKzds5BP2s7)

_The household calculator’s landing page._

This screen is set out just like the policy screen: the left pane is for navigation, and is split between inputs and outputs. The middle pane lets you change household properties instead of policy parameters, and the right pane now will show details about your household once you’ve entered them.

The household screen will now give you an option to start entering details about your household. Click through, and use the prompts given to specify a few basic details: adults and children, location, income and age (you’ll be able to add more later).

Once you’ve entered these, you’ll be taken straight to the _Net income_ page, which tells you how your household is affected by the reform.

![](https://cdn-images-1.medium.com/max/3200/0*7e4eDhkrqdHUeMHb)

_The net income screen._

This screen can tell us exactly why the household is affected like this: expand individual sections to trace down where the change comes from.

Another major new feature comes under the _Varying your earnings_ option in the bottom left pane: the ability to see how specific properties of a household change in response to earnings, not just net income. Here, we can use it to see how net federal income tax changed by income, with and without the reform.

![](https://cdn-images-1.medium.com/max/3200/0*kcL3FBhilVYAFuJh)

_Federal income tax by income, under the abolition reform._

We can also see the impact on marginal tax rates: for a household with $20,000 income, making the CTC fully refundable raises their MTR from 23% to 38%.

From here, you can go back and change any input variable (by the left navigation menu, or with the search box in the top left), go back and change the policy reform, or revisit any other part of the app.

Let us know what policy ideas you create, by tagging @ThePolicyEngine.



---

---
# The New PolicyEngine
Slug: us-the-new-policyengine
Date: 2023-01-12 00:00:01
Authors: Max Ghenis
Tags: us, impact
Description: We're exiting beta with the most accessible tax and benefit model ever built.

---

At PolicyEngine, we strive to make tax and benefit policy accessible to everyone. That’s why we’ve not only built an open source rules engine for researchers, but also a free, intuitive web app where anyone can explore policies and customizable reforms.

Today we’re launching a new version of our web app that makes public policy more transparent and interactive than ever before. Our new app makes it easier to find the specific information you’re looking for, whether that’s navigating your household through taxes and benefits under current law, understanding how a policy reform could affect you, or designing a new policy. We’ve also added new functionality to increase the customizability, analytics, and shareability.

<center>[Interactive: 8lpXRppeq_U]</center>

If you’ve used the beta app, we think you’ll find the new version easier to use, and especially more delightful on mobile. We’ve also added a number of concrete new features, including:

- **Access to all household variables and policy parameters** in our model — several hundred in total — with a search box to cut down on clicks.

- **Named policies** that feed into chart titles.

- **Simplified household questionnaire** so you can estimate your taxes and benefits fast.

- **Deep linking to specific households, policies, and charts** for more reliable sharing.

- **Auto-generated code** to reproduce results with our open source Python package.

- **Cliff impact**, estimating how a reform affects the population share for whom an earnings increase would lower net income (more on that in a future post soon).

For more information:

1. [Read our companion blog post](https://legacy.policyengine.org/us/blog/2023-01-12-from-idea-to-impact-scoring-a-policy-reform-on-the-new-policyengine-us) which walks through how to use the new app, using [full Child Tax Credit refundability](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=14&region=us&timePeriod=2023&baseline=2) as a case study

1. [Follow us on Twitter](http://twitter.com/thepolicyengine), where we’ll share tips and examples

1. [Register for our newsletter](https://t.co/leLJvbI7TQ) to stay up to date on enhancements and use cases

1. [Tune in to our webinar](https://us02web.zoom.us/meeting/register/tZUrf-qoqDktHNQ8-47QRqnYprPrnXnJG9Z0) Tuesday at noon ET

We’re as excited to share this milestone as we are to keep improving the product. To share your feedback, feel free to reach out by [email](mailto:hello@policyengine.org), [Twitter](http://twitter.com/thepolicyengine), or [GitHub](http://github.com/policyengine).

![](https://cdn-images-1.medium.com/max/3200/0*raRUVSDM2nceSvBp)



---

---
# The New PolicyEngine
Slug: uk-the-new-policyengine
Date: 2023-01-12 00:00:01
Authors: Max Ghenis
Tags: uk, impact
Description: We're taking economic policy to the next level with the most accessible tax and benefit model ever built.

---

At PolicyEngine, we strive to make tax and benefit policy accessible to everyone. That’s why we’ve not only built an open source rules engine for researchers, but also a free, intuitive web app where anyone can explore policies and customisable reforms.

Today we’re launching a new version of our web app that makes public policy more transparent and interactive than ever before. Our new app makes it easier to find the specific information you’re looking for, whether that’s navigating your household through taxes and benefits under current law, understanding how a policy reform could affect you, or designing a new policy. We’ve also added new functionality to increase the customisability, analytics, and shareability.

<center>[Interactive: AyN1kky8qew]</center>

If you’ve used PolicyEngine before, we think you’ll find the new version easier to use, and especially more delightful on mobile. We’ve also added a number of concrete new features, including:

- **Access to all household variables and policy parameters** in our model — several hundred in total — with a search box to cut down on clicks.

- **Named policies** that feed into chart titles.

- **Simplified household questionnaire** so you can estimate your taxes and benefits fast.

- **Deep linking to specific households, policies, and charts** for easier sharing.

- **Auto-generated code** to reproduce results with our open source Python package.

- **Cliff impact**, estimating how a reform affects the population share for whom an earnings increase would lower net income (more on that in a future post soon).

For more information:

1. [Read our companion blog post](https://policyengine.org/uk/research/from-idea-to-impact-scoring-a-policy-reform-on-the-new-policyengine-uk) which walks through how to use the new app, using the [Child Benefit High Income Tax Charge](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=5&region=uk&timePeriod=2023&baseline=1) as a case study

1. [Follow us on Twitter](http://twitter.com/thepolicyengine), where we’ll share tips and examples

1. [Register for our newsletter](https://t.co/leLJvbI7TQ) to stay up to date on enhancements and use cases

1. [Tune in to our webinar](https://us02web.zoom.us/meeting/register/tZIpcOmqqTsoGdQBusp41i_Vm8PSMCGu8YIN) Tuesday at 4pm

We’re as excited to share this milestone as we are to keep improving the product. To share your feedback, feel free to reach out by [email](mailto:hello@policyengine.org), [Twitter](http://twitter.com/thepolicyengine), or [GitHub](http://github.com/policyengine).

![](https://cdn-images-1.medium.com/max/3200/0*vfEEhsDH_4l8HZIg)



---

---
# How would reforms affect cliffs?
Slug: how-would-reforms-affect-cliffs
Date: 2023-02-02 21:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, policy
Description: We've added a new feature to the US version of PolicyEngine that lets you see how your reforms affect cliffs.

---

_We’re grateful to [Innovation Network for Communities](https://in4c.net/), which funded the development of this PolicyEngine feature and report._

## Overview

The _cliff_ (a.k.a. _benefit cliff_ or _welfare cliff_) is a phenomenon that occurs when an individual is worse off when their income rises, due to the government withdrawing benefits and/or levying taxes. Cliffs discourage individuals from working more hours or seeking a higher wage, and they have been a topic of concern in the US policy arena.

PolicyEngine now shows how policy reforms can avoid these cliffs. Our free and open source web app uses a comprehensive microsimulation model to compute the effects of customizable tax and benefit reforms on society and individual households.

With the [launch of the new PolicyEngine interface](https://legacy.policyengine.org/us/blog/the-new-policyengine), we have added two new measures that can be used to assess the prevalence and severity of cliffs under a given policy regime. These measures allow analysts to easily summarize the effects of custom reforms on cliffs across society.

This post examines the impact of current policy on the creation of cliffs at the household and population levels. The post also discusses how we measure the prevalence and severity of cliffs and presents a series of three policy experiments designed to reduce their occurrence. These experiments can provide valuable insights into the effectiveness of different reform measures and help the policy community develop more effective strategies for addressing cliffs.

## How current law creates cliffs

Users can enter their household information at [policyengine.org/us/household](http://legacy.policyengine.org/us/household) to compute their net income after taxes and benefits under current law. For example, below (left) is the result for a [single parent of a blind child in New York with $20,000 wages](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=1411) (users can expand or collapse elements).

![](https://cdn-images-1.medium.com/max/3200/0*ea-iCNObVVa3blyM)

Users can also view a chart of their [net income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=1411) (after taxes and benefits) with respect to their earnings (above, center). We shade the earnings region where they would be worse off due to cliffs: we informally call this the “earnings dead zone”.

We also express cliffs as spikes in the [marginal tax rate chart](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&household=1411) (above, right).

## How reforms affect cliffs for individual households

PolicyEngine US lets users adjust hundreds of policy parameters governing federal and state tax and benefit programs. For example, [this page](https://legacy.policyengine.org/us/policy?reform=12&focus=gov.ssa.ssi.income.exclusions.earned_share&region=us&timePeriod=2022&baseline=2) shows a policy experiment we consider in more detail below.

![](https://cdn-images-1.medium.com/max/3200/0*xRJCp7bnW-lab73G)

After specifying a policy reform, the net income and marginal tax rate charts show two lines each: one for baseline (gray), and one for reform (blue). The net income chart also shows two sets of earnings dead zones in different shadings.

![](https://cdn-images-1.medium.com/max/3200/0*s39iTSIqO-BaRzWP)

For this single parent of a blind child in New York, the SSI reform would not affect their net income or marginal tax rate at their current $20,000 earnings. But as they earn more, the reform would increase their SSI and phase it out over a longer earnings range. As a result, their marginal tax rate falls, and then rises once they reach an earnings level where it would have otherwise fully phased out.

In addition to changing marginal tax rates, the SSI reform would push the cliff from around $44,000 earnings to about $88,000 earnings. The cliff results from SNAP, for which SSI provides categorical eligibility.

This example shows that even at the individual level, even simple reforms can affect cliffs in multiple ways. For example, since this SSI reform removes cliffs for some households and creates them for others, how can we determine the net effect? To answer this question, we need a population-level perspective.

## How reforms affect cliffs in aggregate

We have added the following measures and charts:

- **Cliff rate:**
  Share of households who would be worse off if each adult earned $2,000 more per year

- **Cliff gap:**
  Total net income lost by households when adults earn an additional $2,000

We selected a $2,000 increment to capture plausible margins for labor supply decisions: $2,000 is roughly a $1 per hour raise for full-time workers, or one hour per workday at the federal minimum wage of $7.25 per hour. Tax analysis often applies a smaller increment, such as $1, but this will only capture cliffs in hypothetical charts, not sparser microdata. The Department of Health and Human Services’s Marginal Tax Rate series measures cliffs with $2,000 increments. See Appendix A for exploration of other increments and approaches.

We use the _cliff_ nomenclature because both tax and benefit programs can create cliffs, and sometimes they interact to create cliffs that wouldn’t appear in the tax or benefit system alone. The _cliff rate_ and _cliff gap_ terms mirror the established _poverty rate_ (share of people below the poverty line) and _poverty gap_ (total amount below the poverty line across all people in poverty) terms.

Currently, we estimate that 0.5% of households face a cliff in 2023, producing a total cliff gap of $5.0 billion. In 2022, 1.7% of households faced a cliff, producing a cliff gap of $18.5 billion. The repeal of SNAP emergency allotments, scheduled for March 2023, reduces the prevalence of cliffs in 2023, as we discuss more below.

## Experiment 1: [Increase the SSI earned income exclusion](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&household=1411&region=us&timePeriod=2023&baseline=2&reform=3183)

We can now answer the question we previously posed: given our SSI reform creates some cliffs and removes others, how does it affect total cliffs?

As some background, Supplemental Security Income (SSI) is a cash assistance program for low-income seniors and people with disabilities administered by the Social Security Administration (SSA). For eligible people, the SSA calculates SSI as the difference between a maximum benefit and “countable income”. Above flat thresholds, each dollar of earned income is counted as 50 cents of countable income, meaning it creates a 50% marginal tax rate in the phase-out range.

Increasing the earned income exclusion to 75% effectively reduces SSI’s MTR to 25%. While this would not affect the cliff rate, it would reduce the cliff gap by 0.5%.

![](https://cdn-images-1.medium.com/max/2436/0*oQaGBVePzhukcZWq)

See Appendix B for caveats around PolicyEngine’s SSI microsimulation model.

## Experiment 2: [Repeal SNAP emergency allotments](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=3335&region=us&timePeriod=2023&baseline=2)

Throughout the pandemic, several states have expanded the Supplemental Nutritional Assistance Program (SNAP) to provide the maximum benefit to eligible households, or an increase of at least $95 per month. While SNAP normally has a cliff due to a minimum allotment ($23 per month in 2023), the emergency allotments significantly expanded the cliff by effectively increasing the minimum allotment to the maximum allotment.

The Consolidated Appropriations Act of 2023 repealed the SNAP emergency allotments, effective March 2023. We have modeled that ([see our process here](https://legacy.policyengine.org/us/blog/2022-12-23-updating-policyengine-to-reflect-snap-reform-in-the-omnibus-bill)), making the annual emergency allotments only a sixth as generous as they were in 2022, in the 34 states and DC where they remain in place.

Repealing the SNAP emergency allotments for January and February 2023 would cut the cliff rate by 34%, from 0.5% to 0.3%, and reduce the cliff gap 14.9%, from $5.0 billion to $4.3 billion.

![](https://cdn-images-1.medium.com/max/2436/0*MScerJywMqvSjAWJ)

In 2022, when states provided SNAP emergency allotments throughout the year, they had a larger impact on cliffs. Repealing emergency allotments would have cut the cliff rate 91%, from 1.7% to 0.2%, and cut the cliff gap 94%, from $18.5 billion to $1.1 billion.

![](https://cdn-images-1.medium.com/max/3200/0*BWzaOy8sULhqP-X3)

## Experiment 3: [Start phasing out Washington’s Working Families Tax Credit at a lower income](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=3337&region=wa&timePeriod=2023&baseline=2)

Washington’s provides a refundable Working Families Tax Credit, with the amount and structure depending on household size. It starts phasing out at an amount below the end of the federal Earned Income Tax Credit: $2,500 below for families with one child, and $5,000 below for those with multiple children. This creates [marginal tax rates ranging from 12% to 24%](https://policyengine.github.io/policyengine-us//gov/states/wa/tax/income/credits/working-families-tax-credit.html).

Phasing out the credit over a longer interval would increase MTRs for those newly in the phase-out region, and reduce MTRs for those already with earnings in the phase-out region. On a net basis, PolicyEngine finds that enlarging the phase-out region to $10,000 would have no effect on Washington’s cliff rate; however, it would lower Washington’s cliff gap by 0.4%, from $186.0 million to $185.2 million.

![](https://cdn-images-1.medium.com/max/3200/0*NiYobhSg_1kDdWZR)

## Summary and future research

Government agencies and nonprofits have expanded their research into cliffs in recent years, as we summarize in Appendix C. We now provide a novel contribution to the cliff conversation: quantitative estimates of their prevalence under highly customizable reforms, alongside budgetary and distributional outcomes.

![Impacts of selected reforms on cliffs and other outcomes](https://cdn-images-1.medium.com/max/2756/1*sphHryjtjLOBIRJcX30xvg.png)_Impacts of selected reforms on cliffs and other outcomes_

However, our cliff measures are only as complete as our microsimulation model. Since we do not yet capture all tax and benefit programs (for example, childcare subsidies, housing subsidies, and state income taxes in most states), we under-report cliffs. Our [data enhancement plan](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis) will also improve cliff modeling, especially at the state level where we rely on a small sample of households potentially subject to cliffs. As we improve our model, PolicyEngine will identify more cliffs — and more opportunities to address them.

Our policy experiments show that cliffs can be averted by making programs either more generous (increasing the SSI earned income exclusion) or less generous (repealing SNAP emergency allotments and phasing out Washington’s Working Families Tax Credit at lower incomes). In these instances, though, reforming programs with explicit cliffs had a much larger impact on cliff prevalence than reforming marginal tax rates.

As the policy community crafts policies to achieve other goals, such as budgetary constraints or poverty alleviation, they now have the tools to consider the incentive issues around cliffs as well.

## Appendix A: Alternative cliff definitions

We considered two dimensions of alternatives for cliffs:

- Earnings increment

- Grouping of people and households

We initially proposed reporting the share of adults whose net income would fall with an additional $2,000 of earnings. Further investigation revealed that reporting the share of adults would add to the PolicyEngine runtime by multiple times, since we would have to recompute a household’s net income under each adult’s increment independently. Instead, we chose to determine cliffs at the household level upon each adult increasing their earnings simultaneously.

The increment affects the resolution of the cliffs. If the increment is too low, too few households will be just below the cliff in order to experience it. If the increment is too high, it won’t capture smaller cliffs, as households will earn enough to get out of them.

While we did not intend to select a threshold as to maximize cliffs and gaps, we consulted the evidence to decide whether to stray from our original plan. Since cliffs in 2022 peaked at increments around $2,000-$3,000, we kept our original $2,000 increment.

![](https://cdn-images-1.medium.com/max/3156/0*vMeICnyMyfSe4f9_)

![](https://cdn-images-1.medium.com/max/3108/0*r7SK9ZwRhPeL7mf8)

We also considered whether to “pool” the earnings increment, i.e. to divide it across all adults in the household rather than increase each adult’s by that amount. This approach pushes the peak cliff rates and gaps to $6,000.

![](https://cdn-images-1.medium.com/max/3000/0*MEK7DtIlWNLOkJ9G)

![](https://cdn-images-1.medium.com/max/2988/0*BFO-3rIyT4OP_Q72)

Since pooling the earnings increment adds complexity without producing an obvious benefit, we opted not to pool them.

_These numbers differ slightly from the current baseline cliff values for 2022, as we produced them with an earlier version of the model._

## Appendix B: PolicyEngine’s SSI microsimulation model

The Social Security Administration determines eligibility for SSI based on four factors:

- Age

- Disability

- Income

- Assets

PolicyEngine uses the Current Population Survey for microsimulation modeling. Of these factors, the CPS only has reliable information on age and income. CPS respondents report difficulties across six areas, including vision, and they do not report assets.

Modeling SSI in reforms requires assigning eligibility independent of whether a respondent reported receiving SSI. For example, if a reform increases income eligibility limits (as in _Experiment 1_ here), we need to estimate whether a respondent would be newly eligible.

We assign SSI eligibility stochastically using the following algorithm:

1. Assign blindness to respondents who report vision difficulty in the CPS.

1. Assign disability to respondents who report any difficulty in the CPS.

1. Calculate the share of the ABD (aged, blind, or disabled) population that would meet other SSI requirements except for income, such as asset limits and disability certification, as well as take-up conditional on eligibility, in order to match the SSA’s total SSI enrollment records.
   _We estimate that **59%** of the ABD population would participate in SSI based on non-income-based eligibility requirements and take-up._

1. Assign SSI eligibility randomly to 59% of the ABD population.

## Appendix C: Other cliff research

Beyond PolicyEngine, several organizations have studied cliffs:

- The Department of Health and Human Services’s [Marginal Tax Rate Series](https://aspe.hhs.gov/topics/poverty-economic-mobility/marginal-tax-rate-series)

- The Congressional Budget Office’s study on [Effective Marginal Tax Rates](https://www.cbo.gov/publication/50923)

- The Atlanta Fed’s [CLIFF Dashboard](https://www.atlantafed.org/economic-mobility-and-resilience/advancing-careers-for-low-income-families.aspx)

- [ImagineLA](https://www.imaginela.org/)’s [Social Benefit Navigator](https://www.imaginela.org/sbn) for Los Angeles, using the [BenefitKitchen API](https://benefitkitchen.com/)

- [CrossPurpose](https://www.crosspurpose.org/)’s cliff dashboard

- [Georgia Center for Opportunity](https://foropportunity.org/)’s [BenefitsCliffs.org](http://benefitscliffs.org) calculator

- [Leap Fund](https://myleapfund.com/)’s [BenefitsCliff.com](http://benefitscliff.com) resource



---

---
# Reform UK's Emergency Recovery Plan
Slug: reform-uks-emergency-recovery-plan
Date: 2023-02-09 11:15:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: See the UK party's proposed deficit-funded tax cuts in PolicyEngine

---

In June 2022, Reform UK adopted a set of policy proposals advocating broad tax cuts, funded by deficit spending. In this report, we analyse the provisions of this policy package using PolicyEngine tax-benefit modelling, comparing budgetary impacts against those reported by Reform UK and computing distributional impacts across the income spectrum.

## Reform UK’s proposals

The [Emergency Recovery Plan](https://assets.nationbuilder.com/reformuk/pages/27/attachments/original/1655061791/Reform_UK_-_Emergency_Recovery_Plan_June_22.pdf?1655061791) includes reforms to taxes on income and consumption, containing the following provisions.

![](https://cdn-images-1.medium.com/max/2000/1*jmpWEyv7OEylKpxMnTB-oA.png)

_Provisions in Reform UK’s Emergency Recovery Plan, alongside PolicyEngine’s cost estimates._

For this analysis, we considered only those occurring over the next year (therefore excluding the tax inflation indexing). We also excluded the abolition of environmental levies, non-household fuel duty and government spending cuts- these are currently out of the scope of our model.

## Overall budgetary impact

In total, we project that these reforms would reduce tax revenues by £67 billion if enacted over 2023. Welfare spending would automatically fall by £915 million due to means testing, resulting in an net cost of £66.1 billion.

![](https://cdn-images-1.medium.com/max/2000/0*3E3MPE6q_RJB1fPK)

_Overall budgetary impact of the Economic Recovery Plan._

## Distributional impact

We estimate that the average household’s income would rise by 6%, with gains highest for the seventh decile and lowest for the tenth (largely because many households in the tenth decile cannot benefit from the Personal Allowance increase due to being over the phase-out region).

![](https://cdn-images-1.medium.com/max/2000/0*3rc1RlNXmIp96LlJ)

_Relative change to net income by decile under the Economic Recovery Plan._

The first income decile sees an average income gain of £468, compared to £5,350 for the top decile.

![](https://cdn-images-1.medium.com/max/2000/0*IlIMx61Z3uTDk_WQ)

_Absolute change to net income under the Economic Recovery Plan._

By lowering consumption and income taxes together, the reforms reach all households, and 81% of households see their net income rise by over 5%. This ‘strong increase’ is lowest for the second decile at 58%, rising to 99% in the ninth decile.

![](https://cdn-images-1.medium.com/max/2000/0*7fPvGpzwxibSeDEr)

_Distribution of outcomes by income decile under the Economic Recovery Plan._

## Poverty and inequality

Under the proposed reforms, we estimate that the absolute, before-housing-costs poverty rate would fall by 2 percentage points (12.6%), representing a net decrease of 1.3 million people experiencing poverty. Deep poverty also falls 7%, from 2.3% to 2.2%.

![](https://cdn-images-1.medium.com/max/2000/0*5fjRZyfdeicohqFz)

The Emergency Recovery Plan would reduce income inequality according to the three measures we report.

![](https://cdn-images-1.medium.com/max/2000/0*Me-OW-00Wh9TVerc)

_Change to inequality metrics under the Economic Recovery Plan._

## Work incentives

The Economic Recovery Plan would have mixed effects on work incentives. The Personal Allowance increase reduces marginal tax rates for low and middle income households, while raising marginal tax rates for those on higher incomes.

For example, a married couple with two children would see their marginal tax rate fall by 9% while they remain within Universal Credit eligibility (the marginal rate does not fall by the full 20% basic rate due to the Universal Credit taper). As a result of the reforms, they would exit UC eligibility earlier, lowering marginal tax rates by up to 37 percentage points.

However, once reaching the higher rate threshold, they face a work disincentive that is now more punitive under the Economic Recovery Plan: the Marriage Allowance income limit. Under the Marriage Allowance, couples can transfer up to 10% of the Personal Allowance to the higher earner of the two, if that higher earner is a basic rate taxpayer. This causes a sudden increase in tax liability (usually described as a [‘cliff’](https://legacy.policyengine.org/us/blog/2023-02-02-how-would-reforms-affect-cliffs)) when the earner reaches the end of the basic rate region, and this cliff is made larger by the increased size of the Personal Allowance.

Further up the income spectrum, another work disincentive under current law is the phase-out of the Personal Allowance, at a rate of 50p per £1 earned over £100,000. This causes a 62% marginal tax rate under current law between £100,000 and £125,000; under the Economic Recovery Plan, this high-marginal tax rate region would be extended to £140,000.

![](https://cdn-images-1.medium.com/max/2000/0*WVDTeH4b9HS8d0At)

_Change to marginal tax rate by employment income, for a single-earner married couple with two children._

Reflecting this, the overall change to net income phases in until £65,000. After this point, gains are smoothly tapered away after £125,000 before reaching zero.

![](https://cdn-images-1.medium.com/max/2000/0*eS-8ASirEFxhcvYU)

_Change to net income by employment income, for a single-earner married couple with two children._

## See the effect on your household

As always, you can [see the impact of Reform UK’s proposals on your own household](https://legacy.policyengine.org/uk/household?focus=intro&reform=3701&region=uk&timePeriod=2023&baseline=1) (or try out a variation of them) on PolicyEngine. [Let us know](https://twitter.com/PolicyEngineUK) what policy impacts you compute!



---

---
# The Child Tax Credit in 2023
Slug: the-child-tax-credit-in-2023
Date: 2023-02-09 00:00:00
Authors: Max Ghenis
Tags: us, policy
Description: We review how the program works and compute its impact with PolicyEngine US.

---

_Credit: DALL-E 2_

In Tuesday’s State of the Union speech, President Joe Biden called to expand the Child Tax Credit. What is the Child Tax Credit, how might it affect you, and what impact does PolicyEngine estimate it has on society? This blog post covers the bases.

## What is the Child Tax Credit?

The Clinton administration introduced the Child Tax Credit (CTC) in 1997 as a partially refundable credit. That is, some tax filers, including those with no federal tax liability, could claim a portion of the credit. The refundable portion of the credit, known as the Additional Child Tax Credit, phased in with income. The full credit value reduced tax liability towards zero, but higher-income earners phased out of the credit.

The 2017 Tax Cuts and Jobs Act expanded the CTC by:

1. Doubling the maximum credit amount to $2,000 per child

1. Increasing the refundable portion

1. Extending the phase-out threshold

1. Limiting the credit for children and dependents without Social Security numbers

The Joint Committee on Taxation [estimated](https://www.jct.gov/publications/2017/jcx-67-17/) that these reforms cost $544 billion from 2018 to 2027, or 37% of the $1.5 trillion net cost of the Tax Cuts and Jobs Act over that period.

For the 2021 tax year only, the American Rescue Plan Act further expanded the CTC in several ways. ARPA:

1. Extended eligibility to 17-year-olds

1. Raised the maximum amount from $2,000 per child to $3,600 for children under age 6 and $3,000 for children aged 6 to 17; this higher amount is available to parents with income below $75,000 (single) or $150,000 (married)

1. Made the credit fully refundable

1. Prepaid half the expected 2021 credit on a monthly basis, beginning in July 2021

Other than ARPA, the CTC structure has not changed since 2018, aside from some parameters increasing with inflation (though the law fixes the maximum credit value at $2,000).

## How does the Child Tax Credit affect individual households?

We can compute the impact of the Child Tax Credit in PolicyEngine by first [abolishing the Child Tax Credit](https://legacy.policyengine.org/us/policy?focus=gov.abolitions.ctc&reform=3318&region=us&timePeriod=2023&baseline=3318), and then swapping the baseline and reform. This tells us the impact of introducing the CTC compared to a baseline where it doesn’t exist, and we can use it for both individual and society-wide analysis.

Consider a [married filer with one child and $250,000 wages](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962) in 2023. They would receive the full $2,000 CTC.

If we [vary their earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962), we can see how the partial refundability effectively phases the CTC in with income, and how it phases out with income as well.

![](https://cdn-images-1.medium.com/max/2836/0*KLgJ76doY6WE95Lt)

Correspondingly, the [CTC lowers this filer’s marginal tax rates](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962) in the phase-in earnings region, and raises marginal tax rates in the phase-out region.

![](https://cdn-images-1.medium.com/max/3200/0*MYcUq_rSgMsHu1o9)

To see how the Child Tax Credit affects your own finances and work incentives, [enter your own household information](https://legacy.policyengine.org/us/household?focus=intro&region=us&timePeriod=2023&baseline=3318&reform=2) and PolicyEngine will produce these personalized analytics.

## How does the Child Tax Credit impact society?

We can compute the impact of the Child Tax Credit in PolicyEngine by first abolishing the Child Tax Credit, and then swapping the baseline and reform. This tells us the impact of introducing the CTC compared to a baseline where it doesn’t exist. I showed how to design it below, but you can skip to the impact [here](http://localhost:3000/us/policy?focus=policyOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=3318).

In 2023, we estimate that the [Child Tax Credit costs $109.9 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=3318). As context, the Tax Policy Center estimated in September 2021 that the CTC would cost [$126.3 billion in calendar year 2023](https://www.taxpolicycenter.org/model-estimates/tax-benefits-child-tax-credit-september-2021/t21-0223-tax-expenditure-child-tax).

Among the bottom 90% of households, the [CTC increases with income on average](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962), due both to the partial refundability and higher income households having more children. The top income decile has a lower benefit as the credit phases out for high income filers.

![](https://cdn-images-1.medium.com/max/3200/0*EOZKSyWudaW5avqG)

[As a percentage of net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962), the Child Tax Credit has the largest benefit for the fourth income decile.

![](https://cdn-images-1.medium.com/max/3200/0*0zeQPrJ9p_mki-gM)

[45% of Americans benefit from the Child Tax Credit.](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962) For 30% of the population, the CTC increases household net income by at least 5%, disproportionately those in the fourth through sixth income deciles.

![](https://cdn-images-1.medium.com/max/3200/0*wEG9Brxqq8ITG327)

[Without the Child Tax Credit](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962), we estimate that the poverty rate would be 14.4% rather than 14.1%, and that the child poverty rate would be 9.6% instead of 8.9%. That is, we project that the current CTC cuts poverty 2.1% and child poverty 6.9%.

![](https://cdn-images-1.medium.com/max/3200/0*WWSTQpJ4f_zu8eMh)

The [CTC reduces the deep poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962) — the population share with income below half their Supplemental Poverty Measure threshold — by less than 0.1%.

![](https://cdn-images-1.medium.com/max/3200/0*IW-FLe4tzpb46cbn)

The [CTC also reduces income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962) using our three measures, for example cutting the Gini index by 1.1%.

![](https://cdn-images-1.medium.com/max/3200/0*6H6JJlR5ouBqY3-c)

The [CTC reduces the prevalence and severity of cliffs by 1.0% and 0.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962), respectively. Cliffs occur when people who earn more have a lower net income due to taxes and withdrawn benefits. The CTC’s partial refundability lowers marginal tax rates, while its phase-out increases marginal tax rates; since low-income families disproportionately face cliffs, the marginal tax rate reductions at the low end reduce cliffs. [Read our full explainer on cliffs here.](https://legacy.policyengine.org/us/blog/how-would-reforms-affect-cliffs-c390fffcfdf7)

![](https://cdn-images-1.medium.com/max/3200/0*dfD9j_Hng5cTIAQH)

You can view these analytics for any US state using the drop-down menu in the right panel. For example, in Pennsylvania, the Child Tax Credit [provides an aggregate $3.8 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=pa&timePeriod=2023&baseline=3318) in benefits, [reduces child poverty 6.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=pa&timePeriod=2023&baseline=3318), and [lowers the Gini index by 1.0%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=pa&timePeriod=2023&baseline=3318).

In conclusion, PolicyEngine provides a variety of analytics on the Child Tax Credit (CTC). Individuals can navigate the partially-refundable structure to estimate how it affects them, and explore different earnings scenarios. Those interested in broader effects can view our estimates of the CTC’s cost and distributional impacts, such as the degree to which it reduces poverty, inequality, and cliffs across the US and individual states. As policymakers explore CTC reforms, and households continue to seek information on it, we will continue to provide personalized and [increasingly accurate](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis) analytics on the policy’s impact.



---

---
# Restoration of the American Rescue Plan Act's expanded Child Tax Credit
Slug: restoration-of-the-american-rescue-plan-acts-expanded-child-tax-credit
Date: 2023-02-10 00:00:00
Authors: Max Ghenis
Tags: us, policy
Description: PolicyEngine computes how the 2021 policy would affect Americans and America in 2023.

---

In [Tuesday’s State of the Union speech](https://www.whitehouse.gov/briefing-room/speeches-remarks/2023/02/07/remarks-of-president-joe-biden-state-of-the-union-address-as-prepared-for-delivery/), President Joe Biden called to

> restore the full Child Tax Credit, which gave tens of millions of parents some breathing room and cut child poverty in half, to the lowest level in history.

Biden may have been referring to the Child Tax Credit (CTC) expansion under the American Rescue Plan Act of 2021 (ARPA), which expanded the CTC in several ways. Following our [Child Tax Credit report released yesterday](https://legacy.policyengine.org/us/blog/2023-02-09-the-child-tax-credit-in-2023), this report describes ARPA’s CTC expansion, and PolicyEngine’s predicted impacts of restoring that expansion.

## What is the Child Tax Credit?

President Bill Clinton introduced the Child Tax Credit in 1997, and the Tax Cuts and Jobs Act of 2017 expanded it to create its current structure. For instance, in 2023, a married filer with one five-year-old child receives the following benefit from the CTC based on their earnings ([view this in PolicyEngine here](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=2&region=us&timePeriod=2023&baseline=3318&household=2962)):

![](https://cdn-images-1.medium.com/max/2836/0*8VNzHFmDkAEmKVAp)

As we explain in our [Child Tax Credit article](https://legacy.policyengine.org/us/blog/2023-02-09-the-child-tax-credit-in-2023), the credit phases in with income due to _partial refundability_ and also phases out with income. Refundable credits can reduce one’s tax liability below zero, while the value of non-refundable credits cannot exceed one’s tax liability. Part of the Child Tax Credit, the _Additional Child Tax Credit_, is refundable, and the ACTC also phases in with income; the remainder is non-refundable.

## How did the American Rescue Plan Act expand the Child Tax Credit?

For the 2021 tax year only, the American Rescue Plan Act made four major changes to the CTC:

1. Extended eligibility to 17-year-olds

1. Raised the maximum amount from $2,000 per child to $3,600 for children under age 6 and $3,000 for children aged 6 to 17; this bonus phases out for parents with income exceeding $75,000 (single) or $150,000 (married)

1. Made the credit fully refundable

1. Prepaid half the expected 2021 credit on a monthly basis, beginning in July 2021

This video shows how to model these changes in PolicyEngine. To see the results, skip to the next section, where the links reflect the pre-built policy.

<center>[Interactive: _PcdbIIQ6AM]</center>

## How would restoring the ARPA CTC expansion affect households?

[Let’s return to the married family with a five-year-old child.](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=3826&region=us&timePeriod=2023&baseline=2&household=3227) Their maximum credit rises from $2,000 to $3,600. Parents with no income don’t benefit from the CTC today, so the combination of the increased credit and full refundability provides them the full $3,600. The benefit phases out to $1,600 if their income ranges from about $36,000 to $150,000, and the reform no longer provides a net benefit to households with income of about $181,000 or more.

![](https://cdn-images-1.medium.com/max/2104/0*kx4Lg-oIr5BXyvTm)

[Marginal tax rates rise](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=3826&region=us&timePeriod=2023&baseline=2&household=3227) in each of the income ranges where the benefit phases out.

![](https://cdn-images-1.medium.com/max/2136/0*pmjjChx83tq1Hfu0)

You can estimate how reinstating the ARPA CTC expansion would affect your own household by [entering your information here](https://legacy.policyengine.org/us/household?focus=intro&reform=3826&region=us&timePeriod=2023&baseline=2).

## How would restoring the ARPA CTC expansion affect the US?

We estimate that [restoring the ARPA CTC expansion would cost $100.2 billion](https://legacy.policyengine.org/us/policy?reform=3826&focus=policyOutput.netIncome&region=us&timePeriod=2023&baseline=2) in 2023. When scoring ARPA (2021 only), the Joint Committee on Taxation [estimate](https://www.jct.gov/publications/2021/jcx-14-21/)d a cost of [$109.5 billion](https://www.jct.gov/publications/2021/jcx-14-21/). [OpenRG estimated $100.7 billion](https://www.openrg.com/reports/QN_ARPA_Distribution.pdf) using the open source Tax-Calculator model (I coauthored this analysis).

While the ARPA CTC expansion provides greater benefits to low-income families than higher-income families, it [provides less to low-income households](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=3826&region=us&timePeriod=2023&baseline=2) than middle-income households because they have fewer children. The program also provides high-income families less because of the phase-out.

![](https://cdn-images-1.medium.com/max/2664/0*qAUaf1GWBDmMtf1L)

As a percentage of net income, however, restoring the ARPA CTC would strictly [provide greater benefits to lower income deciles](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=3826&region=us&timePeriod=2023&baseline=2).

![](https://cdn-images-1.medium.com/max/2764/0*YCCpCYPTm7MQoMW6)

Restoring the ARPA CTC would [benefit households comprising 41% of Americans](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=3826&region=us&timePeriod=2023&baseline=2), disproportionately those in the fourth through eighth income deciles ([the current CTC benefits 45% of Americans](https://legacy.policyengine.org/us/blog/2023-02-09-the-child-tax-credit-in-2023)). It would raise net income by at least 5% for 27% of Americans, disproportionately those in the fourth and fifth income deciles.

![](https://cdn-images-1.medium.com/max/2696/0*Mmbr7KNvXN9YLM79)

[Poverty would fall by 9%, and child poverty would fall 37%.](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=3826&region=us&timePeriod=2023&baseline=2) When evaluating the ARPA CTC’s impact on child poverty in 2021, the [Niskanen Center](https://www.niskanencenter.org/wp-content/uploads/2021/02/Analysis-of-the-Romney-Child-Allowance_final.pdf) and the [American Enterprise Institute](https://www.aei.org/wp-content/uploads/2021/02/The-Tax-Benefits-of-Parenthood.pdf#page=22) projected reductions of 39% and 35%, respectively.

In the State of the Union, President Biden said that the “full Child Tax Credit…cut child poverty in half”. He may have been referring to the full ARPA, which also included a round of relief checks, enhancements to the Supplemental Nutrition Assistance Program, and other reforms. The Columbia Center on Poverty and Social Policy estimated that [ARPA would reduce child poverty by 56%](https://static1.squarespace.com/static/610831a16c95260dbd68934a/t/6113eddb3cde100cb68904ee/1628696027691/Poverty-Reduction-Analysis-American-Rescue-Plan-CPSP-2021.pdf). The Census Bureau reported that [child poverty fell 46% from 2020 to 2021](https://www.census.gov/content/dam/Census/library/publications/2022/demo/p60-277.pdf#page=16), from 9.7% to 5.2%.

Halving child poverty with the ARPA CTC structure would require a [$4,400 benefit](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=3840&region=us&timePeriod=2023&baseline=2&household=2265), rather than $3,000 or $3,600. This would cost $177 billion, 77% more than restoring the ARPA CTC expansion.

![](https://cdn-images-1.medium.com/max/2768/0*1RnxfjLeF3NsHxT2)

Under the ARPA CTC expansion, deep poverty — the population share below half their Supplemental Poverty Measure threshold — would [fall 11%, and deep child poverty would fall 72%.](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=3826&region=us&timePeriod=2023&baseline=2)

![](https://cdn-images-1.medium.com/max/2736/0*By0I0_qhekKlxkIv)

Restoring the ARPA CTC would [reduce each of the three income inequality measures we report](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=3826&region=us&timePeriod=2023&baseline=2), especially the Gini index at 1.9%. The Gini index reflects low-income households more than the top 10% and 1% income shares do, and these are the groups disproportionately affected by the ARPA CTC expansion.

![](https://cdn-images-1.medium.com/max/2716/0*Lvup1GU6M0wxFGzN)

By increasing marginal tax rates among low-income households most likely to experience [cliffs](https://legacy.policyengine.org/us/blog/2023-02-02-how-would-reforms-affect-cliffs), the [ARPA CTC expansion](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=3826&region=us&timePeriod=2023&baseline=2) increases their prevalence. The [current CTC](https://legacy.policyengine.org/us/blog/2023-02-09-the-child-tax-credit-in-2023) reduces marginal tax rates in the phase-in earnings region, and lowers the cliff rate and gap by 1.0% and 0.6%, almost exactly an offset of the ARPA reform.

![](https://cdn-images-1.medium.com/max/2284/0*o6ZxOJ5izxBcLASn)

Were the US to restore the American Rescue Plan’s expanded Child Tax Credit, two in five Americans would benefit, poverty would fall 9%, and a broad measure of inequality would fall 2%. PolicyEngine also computes impacts for any state; for example, the ARPA CTC would [provide $10 billion to Texans](https://legacy.policyengine.org/us/policy?reform=3826&focus=policyOutput.netIncome&region=tx&timePeriod=2023&baseline=2) (the cost to the US), [benefit 46% of Texans](https://legacy.policyengine.org/us/policy?reform=3826&focus=policyOutput.intraDecileImpact&region=tx&timePeriod=2023&baseline=2), and [cut Texas’s child poverty rate by 32%](https://legacy.policyengine.org/us/policy?reform=3826&focus=policyOutput.povertyImpact&region=tx&timePeriod=2023&baseline=2). These impacts, as well as the $100 billion cost and higher marginal tax rates, would likely produce macroeconomic effects that PolicyEngine does not yet model.

With PolicyEngine, you can model highly customizable reforms to the Child Tax Credit and other programs — not only those enacted in the past like the American Rescue Plan Act. Try your own policy model at [policyengine.org](http://legacy.policyengine.org).



---

---
# OpenFisca wins Edge of Government's Innovation Award
Slug: openfisca-wins-edge-of-government-innovation-award
Date: 2023-02-15 00:00:00
Authors: Max Ghenis
Tags: global, impact
Description: The success of Rules as Code and its impact on citizens.

---

_UAE Deputy Prime Minister, [Sheikh Saif bin Zayed Al Nahyan](https://en.wikipedia.org/wiki/Saif_bin_Zayed_Al_Nahyan), giving [Matti Schneider](https://www.linkedin.com/in/mattisg/) and [Sandra Chakroun](https://www.linkedin.com/in/sandra-chakroun/) the Edge of Government Innovation Award for OpenFisca._

We are thrilled to congratulate [OpenFisca](http://openfisca.org) on winning the [Edge of Government](https://edge.worldgovernmentsummit.org/)’s Innovation Award from the [World Government Summit 2023](https://www.worldgovernmentsummit.org/events/world-government-summit-2023)! The summit, held in Dubai, brought together global experts, thought leaders, and decision-makers to discuss how to shape future governments through policies, models, and tools. With over 300 sessions, 200 speakers, and 20 reports, the summit focused on six main themes, including accelerating development and governance, future of societies and healthcare, exploring the frontiers, governing economic resilience and connectivity, global city design and sustainability, and prioritizing learning and work.

<center>[Interactive: bz2w1t66EEA]</center>

OpenFisca’s innovative approach to Rules as Code was showcased at the summit, highlighting how its machine-readable code can help citizens understand laws and their impact without consulting a lawyer. OpenFisca has been implemented in various countries, including France and New Zealand, where it has proved to be a success. The technology has enabled citizens to assess their entitlement to social benefits and has given governments new insights into the estimated impact of law reforms.

![*OpenFisca’s description at the [Edge of Government](https://edge.worldgovernmentsummit.org/).*](https://cdn-images-1.medium.com/max/3200/0*EcM_Z_fKd8QIz7-F)
_OpenFisca’s description at the [Edge of Government](https://edge.worldgovernmentsummit.org/)._

At PolicyEngine, we have had the privilege of working closely with the OpenFisca team, and we are proud to have contributed to the growth of this incredible framework. Our journey with OpenFisca began in 2020 when we started building a microsimulation model of the UK tax and benefit system. We were impressed by OpenFisca’s modernness, flexibility, and excellent documentation. Over time, as we built more complex systems and required additional features, we [forked OpenFisca into our own microsimulation framework called PolicyEngine](https://legacy.policyengine.org/us/blog/2022-11-10-from-openfisca-to-policyengine). We are grateful to the OpenFisca team for their collaboration and support throughout this process.

![*PolicyEngine in the [OpenFisca showcase](https://openfisca.org/en/showcase/).*](https://cdn-images-1.medium.com/max/3200/0*HAMMqkNEVc9IQ7uu)_PolicyEngine in the [OpenFisca showcase](https://openfisca.org/en/showcase/)._

The Edge of Government innovation experience at the World Government Summit challenges visitors to think in new and often counterintuitive ways about how to solve the most pressing public challenges of our time. OpenFisca’s innovative use of machine-readable code is a prime example of this approach.

We are excited to see OpenFisca’s innovative use of machine-readable code being recognized with this prestigious award, and we are proud to have played a part in its growth. OpenFisca’s success is a testament to the power of open source collaboration and the potential of Rules as Code in policy and governance. At PolicyEngine, we are inspired to continue our work in this field and look forward to collaborating with OpenFisca and other like-minded organizations to shape a better future for humanity.



---

---
# Massachusetts Governor Maura Healey's FY 2024 Budget Recommendation
Slug: massachusetts-governor-maura-healeys-fy-2024-budget-recommendation
Date: 2023-03-03 00:00:00
Authors: Max Ghenis, Nicholas Rodelo
Tags: us, us-ma, policy
Description: PolicyEngine estimates the distributional impact of two provisions and the household impact of four provisions.

---

**_[See how the proposal would affect your household.](https://legacy.policyengine.org/us/household?focus=intro&reform=5842&region=ma&timePeriod=2023&baseline=2)_**

On Monday, Massachusetts Governor Maura Healey introduced her [fiscal year 2024 budget recommendation](https://www.mass.gov/doc/fy-2024-budget-recommendation-brief-providing-meaningful-tax-relief), which included five main proposals:

1. Replacing the existing dependent and dependent care credits with a Child & Family Credit of $600 per qualifying dependent

2. Reducing estate taxes

3. Increasing the cap on the renter’s tax deduction from $3,000 to $4,000

4. Doubling the maximum Senior Circuit Breaker Credit

5. Reducing the rate on short term capital gains from 12% to 5%

PolicyEngine models the personal income tax code of Massachusetts, including each of the provisions Healey seeks to modify, except the estate tax. Our microsimulation model also supports population-wide impacts of two of the provisions: the Child & Family Credit and the capital gains reform. PolicyEngine estimates that these two provisions would together benefit 38% of the Massachusetts population and reduce the Gini index of income inequality by 0.2%. Our cost projections fall 15% below the state’s, though we can attribute at least some of this divergence to inaccuracies in the Census Bureau’s Current Population Survey.

This post describes these provisions, examines the impact on three hypothetical households, and shows our microsimulation model’s distributional impacts for the available provisions.

## Governor Healey’s Budget Recommendation

[A report from John Caljouw](https://www.mass.gov/doc/fy-2024-budget-recommendation-brief-providing-meaningful-tax-relief/download), the Massachusetts Finance Director, describes and costs the core provisions of Governor Healey’s proposal.

![](https://cdn-images-1.medium.com/max/2844/0*UhP_0DIrLTDke_Ia)

Here we detail each provision.

## Child & Family Credit

**_[See the impact of the Child & Family Credit on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=5843&region=ma&timePeriod=2023&baseline=2) and [on Massachusetts](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=5843&region=ma&timePeriod=2023&baseline=2)._**

Currently, Massachusetts families can claim one of the following two refundable tax credits:

1. **Dependent Tax Credit,** which provides $180 to children up to age 11

1. **Dependent Care Tax Credit,** which provides up to $240 per child, also up to two children, up to age 12 and phasing in with the lesser of the filer head and spouse’s earnings (similar to the federal Child and Dependent Care Credit)

[As she did in her gubernatorial campaign last year](https://maurahealey.com/issues/child-tax-credit/), Governor Healey proposes to replace these with a Child & Family Credit of $600 per qualifying dependent. The Child & Family Tax Credit is structured as the Dependent Tax Credit, except that it increases the amount from $180 to $600, increases the age limit from 11 to 12, and removes the child cap.

## Estate tax

Governor Healey proposes eliminating any Estate Taxes for estates with a value of less than $3,000,000 and providing a non-refundable Estate Tax credit of up to $182,000 for estates valued above $3,000,000. PolicyEngine does not model estate taxes.

## Renter tax deduction increase

[**_See the impact of the renter tax deduction increase on your household._**](https://legacy.policyengine.org/us/household?focus=intro&reform=5370&region=ma&timePeriod=2023&baseline=2)

Massachusetts provides a tax deduction of up to 50% of filers’ yearly rent, capped at $3,000. Governor Healey proposes raising this to $4,000.

## Senior Circuit Breaker Credit increase

[**_See the impact of the Senior Circuit Breaker Credit increase on your household._**](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=5828&region=ma&timePeriod=2023&baseline=2)

Massachusetts provides a Senior Circuit Breaker Tax Credit, which reduces tax liabilities for filers aged 65 or older, depending on their income, rent, and property tax, in particular when rent and property tax exceed 10% of one’s income. Governor Healey proposes doubling the maximum credit from $1,200 to $2,400.

## Short-term capital gains cut

**_[See the impact of the short-term capital gains cut on your household](https://legacy.policyengine.org/us/policy?focus=policyOutput&reform=5830&region=ma&timePeriod=2023&baseline=2) and [on Massachusetts](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=5830&region=ma&timePeriod=2023&baseline=2)._**

Massachusetts currently taxes most income at 5%, except income exceeding $1 million (9%) and short term capital gains (12%). The federal government and two other states also tax capital gains differently depending on whether the assets have been held for a year. Governor Healey proposes equalizing short and long term capital gains rates by reducing the short term rate from 12% to 5%.

## Household examples

To illustrate the impact of the four policies, we show how they would affect three hypothetical households: a family of four with childcare expenses, single renter with short-term capital gains, and senior homeowning couple. In each case, we show the impact to net income and marginal tax rates as the household head’s earnings vary.

## Family of five with childcare expenses

Consider this family of five:

- Spouse earns $20,000 per year, one infant, one six-year-old child, and one ten-year-old child

- Renting in Norfolk County, and paying [$3,600 per month](https://www.zillow.com/rental-manager/market-trends/ma/?bedrooms=3), Zillow’s estimated median for three-bedroom homes in Massachusetts

- Paying the median center-based infant care cost in Norfolk County, which the [US Department of Labor estimates](https://www.dol.gov/agencies/wb/topics/childcare/price-by-age-care-setting) at $26,409 per year in 2022 (the highest in Massachusetts)

- No childcare costs for the six- and ten-year-old children

Governor Healey’s proposal would [provide them a net benefit](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9150) if they earn above $8,000, and $50 if they earn at least $9,500. This is the earnings range over which they would pay income taxes, and where the renter tax deduction begins to reduce their taxable income.

Overall, this family would benefit mainly from the consolidation of the Dependent Credit and the Dependent Care Credit into the Family & Child Tax Credit. Current law entitles them to a maximum credit of $240 per child, up to a max of two children, giving them $480. Governor Healey’s proposal would make three of their children eligible for a $600 credit, [producing a total credit of $1,800](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9183). Compared to current law, Governor Healey’s proposed Renters Deduction increase would also reduce their [income tax liability by $50](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9183).

![](https://cdn-images-1.medium.com/max/2988/0*OP5yHLdqVl6UEIKq)

## Single renter with short-term capital gains

Consider a single person paying $2,050 per month in rent, [Zillow’s estimated median](https://www.zillow.com/rental-manager/market-trends/ma/?bedrooms=0) for studios in Massachusetts.

Governor Healey’s proposal would [provide them a net benefit](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9109) if they earn above $8,000, and $50 if they earn at least $9,500. This is the earnings range over which they would pay income taxes, and where the renter tax deduction begins to reduce their taxable income.

![](https://cdn-images-1.medium.com/max/2988/0*UhFSHuDxId6dchbM)

The reform [lowers their marginal tax rate](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9109) between $8,000 and $9,500 earnings by between zero and five percentage points. The [cuts to the short-term capital gain rate](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9216) are responsible for the majority of the benefit in this case, saving this individual $8,092.

![](https://cdn-images-1.medium.com/max/2988/0*y1BvVcRcT2GzdAh1)

## Senior homeowning couple

Finally, consider a couple, each 70 years old and owning a home.

Each receives $21,348 per year in Social Security retirement benefits, the average according to the [Social Security Administration.](https://www.ssa.gov/policy/docs/quickfacts/stat_snapshot/)

Their home is worth $545,865, [Zillow’s estimated median for the state,](https://www.zillow.com/home-values/26/ma/) and they pay a 1.12% property tax rate, [SmartAsset’s estimated average](https://smartasset.com/taxes/massachusetts-property-tax-calculator#:~:text=Overview%20of%20Massachusetts%20Taxes&text=The%20median%20annual%20property%20tax,the%20national%20average%20at%200.99%25.) for the state. That is, they pay $6,114 per year in property taxes.

Governor Healey’s proposal would [provide them a $784 net gain if they have no earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=5842&region=ma&timePeriod=2023&baseline=2&household=9123), falling to zero if they earn at least $8,000.

![](https://cdn-images-1.medium.com/max/2908/0*2krJxIELH3ov4klK)

This is the income range over which the reform raises the Senior Circuit Breaker Credit.

![](https://cdn-images-1.medium.com/max/3032/0*e7JwEFHk8Vj4uDeQ)

The reform increases the filer’s marginal tax rate by ten percentage points in this phase-out range.

![](https://cdn-images-1.medium.com/max/2832/0*WdJEv_z7HgdyDK42)

## Impact on Massachusetts

PolicyEngine’s microsimulation model pairs our tax-benefit rules engine with the Current Population Survey to estimate the aggregate impact of policy reforms. As the CPS does not contain information about households’ rent, property taxes, or inheritance, we estimate only the impact of the Child & Family Credit and the capital gains reform.

## Budget

Compared to the Finance Director’s report, PolicyEngine projects lower costs of each provision: 11% lower for the Child & Family Credit and 35% lower for the capital gains cut. We will release a [more accurate version of the CPS](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis) this year to address under-reporting of income and benefits.

![](https://cdn-images-1.medium.com/max/2632/1*A_fXJDNYYLxJ2f61JzBjnA.png)

[The Child & Family Credit would reduce the Gini index](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=5365&region=ma&timePeriod=2023&baseline=2) of income inequality by 0.2%, while the [capital gains cut would increase the Gini index](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=5830&region=ma&timePeriod=2023&baseline=2) by less than 0.1%.

## Distributional impact

Together, the two provisions PolicyEngine models population impacts for — the Child & Family Credit and the short-term capital gains cut — would [increase the average household’s net income by $173](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=5902&region=ma&timePeriod=2023&baseline=2), disproportionately among higher income households.

![](https://cdn-images-1.medium.com/max/3628/1*ViMykxuBpi5dmu2ekpTl7g.png)

These provisions would [raise the average household’s net income by 0.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=5902&region=ma&timePeriod=2023&baseline=2), disproportionately among lower income deciles.

![](https://cdn-images-1.medium.com/max/3604/1*pbN71nCWONDxm48BnCdkOw.png)

[38% of Massachusettsans](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=5902&region=ma&timePeriod=2023&baseline=2) live in households that would benefit from the two provisions. A larger share of higher-income households would gain, while a larger share of lower-income households would gain at least 5% of net income (dark green). The provisions do not leave any households worse off than baseline policy.

![](https://cdn-images-1.medium.com/max/3644/1*mp0yQsc2_A5tTX3KDE39WA.png)

PolicyEngine projects [no poverty impact](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=5902&region=ma&timePeriod=2023&baseline=2) of the Child & Family Credit and short-term capital gains cut, while deep poverty (the population share in households with resources below half their poverty line) would [fall 1.6%](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=5902&region=ma&timePeriod=2023&baseline=2).

_PolicyEngine’s poverty impacts in small states are noisy, due to using a single year’s Current Population Survey._

![](https://cdn-images-1.medium.com/max/3668/1*FxLPdCVJYlXYqVvBWmjSDw.png)

The two provisions would [reduce each measure of income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=5902&region=ma&timePeriod=2023&baseline=2) we report.

![](https://cdn-images-1.medium.com/max/3628/1*FN1z8kPnbj_pDk9Yi_pR5A.png)

While the reforms alter marginal tax rates, we do not project any [impact on cliffs](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=5902&region=ma&timePeriod=2023&baseline=2). Like poverty estimates, cliffs are a dichotomous household outcome that can be noisy in small states.

## Conclusion

Governor Healey’s FY 2024 Budget Recommendation proposes several significant policy changes that would impact households in Massachusetts in diverse ways. PolicyEngine’s microsimulation model provides valuable insight into the potential impact of these proposals on different segments of the population. While further analysis may be required to fully understand the impact of these policies on the residents of Massachusetts, PolicyEngine’s ability to enable detailed analysis of policies is a valuable tool for policymakers in designing and evaluating policy proposals. As Massachusetts moves forward with its budget process, PolicyEngine’s analysis can provide valuable information to policymakers and support evidence-based decision-making.



---

---
# The UK's extended Energy Price Guarantee
Slug: projected-impact-of-the-uks-extended-energy-price-guarantee
Date: 2023-03-05 07:30:00
Authors: Nikhil Woodruff, Max Ghenis
Tags: uk, policy
Description: Analysis by PolicyEngine on the expected effects on income, poverty, and inequality.

---

_Credit: DALLE-2_

According to [a report by The Times](https://archive.is/MnyZd#selection-773.0-1329.308), Chancellor Jeremy Hunt is expected to announce an extension of the £2,500 energy price guarantee (EPG) for an additional three months. The government structures the EPG such that the typical household bill does not exceed £2,500 per year. The Times reports that the government estimates this extension to cost approximately £3 billion.

At PolicyEngine, we have conducted an analysis of the projected impact of the extended EPG. Our budgetary impact matches the government’s, at £3.1 billion, and we also find that it will provide greater benefits to high-income households in absolute terms, while lower in relative terms; as a result, the reform would reduce poverty by about 1% and income inequality by about 0.2%.

To model the EPG, we integrate consumption data (including domestic energy) from the Living Costs and Food Survey to our enhanced Family Resources Survey, which powers PolicyEngine. We then simulate energy costs with and without the EPG, controlling for seasonality (see [our model documentation](https://policyengine.github.io/policyengine-uk/programs/gov/ofgem/energy-price-guarantee.html) for more).

![](https://cdn-images-1.medium.com/max/3200/0*uJbpkMLFSK2SZTts)

We model the EPG as an increase in incomes, and find that the [absolute impact increases with income](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileAverageImpact&reform=5847&region=uk&timePeriod=2023&baseline=1): households in the bottom income decile will gain an average of £78, while those in the top decile will gain £155.

![](https://cdn-images-1.medium.com/max/3200/0*RFB646z2NHZEM6yE)

As a [percentage of net income](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileRelativeImpact&reform=5847&region=uk&timePeriod=2023&baseline=1), however, households in the bottom income decile would gain 0.7%, and those in the top decile would gain 0.1%.

![](https://cdn-images-1.medium.com/max/3200/0*wXy3ocBoFdcAR_d3)

Accordingly, we project that the EPG extension would [reduce income inequality by about 0.2%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=5847&region=uk&timePeriod=2023&baseline=1) across metrics including the Gini coefficient, the top-10 and the top-1 percent shares.

![](https://cdn-images-1.medium.com/max/3200/0*ykeEoMNKJXTRjmIb)

Extending the EPG would [lower poverty by 0.9%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=5847&region=uk&timePeriod=2023&baseline=1), disproportionately among pensioners.[^1] It would also[ lower deep poverty by 1%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.deepPovertyImpact&reform=5847&region=uk&timePeriod=2023&baseline=1), similarly across age groups.

![](https://cdn-images-1.medium.com/max/3200/0*uHZzOqtB7nZ7m0TO)

You can [view the impact interactively in PolicyEngine here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=5847&region=uk&timePeriod=2023&baseline=1), and even model your own custom EPG reform. You can also [enter your household information](https://legacy.policyengine.org/uk/household?focus=intro&reform=5847&region=uk&timePeriod=2023&baseline=1) to see how the EPG extension would affect you (to do this, enter the ‘domestic energy consumption’ field under _Consumption / Energy_ or by searching in the top left).

At PolicyEngine, we remain committed to providing free open-source software that enables the analysis of public policy impacts. Users with access to UK Data Service microdata can [reproduce our analysis](https://legacy.policyengine.org/uk/policy?focus=policyOutput.codeReproducibility&reform=5847&region=uk&timePeriod=2023&baseline=1&household=10576) with the [open-source PolicyEngine UK microsimulation model](https://github.com/PolicyEngine/policyengine-uk). For questions or comments on these impacts, feel free to [get in touch](mailto:hello@policyengine.org).

[^1]: PolicyEngine's poverty rate impacts are lower than an initial estimate [published on the day](https://twitter.com/PolicyEngineUK/status/1631600746520010754), due to modelling improvements on cost-of-living payments in the baseline. See the changelog entry in the microsimulation model [here](https://github.com/PolicyEngine/policyengine-uk/compare/0.41.10...0.41.11).



---

---
# Breaking down poverty impacts by sex
Slug: breaking-down-us-poverty-impacts-by-sex
Date: 2023-03-08 07:30:00
Authors: Max Ghenis
Tags: us, technical
Description: PolicyEngine estimates the impact of customizable policy reforms on poverty — overall, by age, and now by sex.

---

Welcome to the latest blog post from PolicyEngine, where we share updates on our work to build free, open-source software that helps people understand the impact of public policies. We’re excited to announce an additional feature for our existing tax and benefit reform calculator that enables users to estimate how customizable tax and benefit reforms affect the poverty rate, split by sex.

Since our inception, we’ve shown how customizable policy reforms would affect the poverty rate, overall and by age group. We model impacts using the Supplemental Poverty Measure (SPM), which the Census Bureau [introduced in 2011](https://crsreports.congress.gov/product/pdf/R/R45031) to expand upon the Official Poverty Measure (OPM), introduced in the 1960s. Unlike the OPM, the SPM considers taxes, in-kind benefits, local housing costs, and other factors.

We estimate that, under current law, 9.6% of the population has resources below their poverty threshold, and 3.3% has resources below half their poverty threshold (deep poverty). Women face higher poverty rates than men, and children face higher poverty rates than working-age adults, who face higher poverty rates than seniors. These poverty trends resemble those in the [Census Bureau’s 2021 poverty report](https://www.census.gov/content/dam/Census/library/publications/2022/demo/p60-277.pdf#page=11), though the exact numbers differ as we adjust survey data based on 2023 policy rules. Deep poverty does not vary much by sex, though working-age adults face higher rates than other age groups.

![](https://cdn-images-1.medium.com/max/5232/1*jk1rnf2EF3DgnFNHr218DA.png)

Let’s consider an example to illustrate the power of our updated tool. Suppose we want to estimate the poverty impact of the Special Supplemental Nutrition Program for Women, Infants, and Children (WIC), which provides nutrition assistance to low-income pregnant women, new mothers, and young children. With PolicyEngine, anyone can compare today’s poverty rate to a scenario without WIC — overall, by age group, and now by sex.

We estimate that WIC reduces poverty by 0.8% and deep poverty by 2.2%. Our pre-existing charts show that WIC disproportionately benefits children, [reducing child poverty by 2.6%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=us&timePeriod=2023&baseline=6454) and [deep child poverty by 8.1%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=us&timePeriod=2023&baseline=6454).

Our new charts show that [WIC lowers poverty by 0.7% for men and 0.9% for women](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderPovertyImpact&reform=2&region=us&timePeriod=2023&baseline=6454).

![](https://cdn-images-1.medium.com/max/3200/0*BQvi2FCn2a6SXUho)

We also find that [WIC lowers deep poverty by 1.9% for men and 2.4% for women](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderDeepPovertyImpact&reform=2&region=us&timePeriod=2023&baseline=6454).

![](https://cdn-images-1.medium.com/max/3200/0*o2Wxc1THrDYKjkxs)

Our updated tax and benefit reform calculator helps policymakers, researchers, and advocates better understand the impact of public policies on poverty rates, both overall and in deep poverty, for men and women. By providing policymakers with more accurate data on the impact of policy decisions, we can inform public discourse and facilitate evidence-based decision-making.



---

---
# Breaking down poverty impacts by sex
Slug: breaking-down-uk-poverty-impacts-by-sex
Date: 2023-03-08 07:30:00
Authors: Nikhil Woodruff
Tags: uk, technical
Description: PolicyEngine estimates the impact of customisable policy reforms on poverty — overall, by age, and now by sex.

---

Welcome to the latest blog post from PolicyEngine, where we share updates on our work to build free, open-source software that helps people understand the impact of public policies. We’re excited to announce an additional feature for our existing tax and benefit reform calculator that enables users to estimate how customisable tax and benefit reforms affect the poverty rate, split by sex.

Since our inception, we’ve shown how customizable policy reforms would affect the poverty rate, overall and by age group. We model impacts under the government’s standard definition of poverty used in the Households Below Average Income publication (considering absolute poverty based on disposable income before housing costs).

We estimate that, under current law, 14.0% of the population has resources below their poverty threshold, and 2.4% has resources below half their poverty threshold (deep poverty). Women face higher poverty rates than men, and children face higher poverty rates than working-age adults, who face higher poverty rates than seniors. These poverty trends resemble those in the [HBAI report](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2021/households-below-average-income-an-analysis-of-the-income-distribution-fye-1995-to-fye-2021#main-stories), though the exact numbers differ as [we adjust survey data](https://policyengine.org/uk/research/how-machine-learning-tools-make-policyengine-more-accurate) and apply 2023 policy rules. Deep poverty does not vary much by sex, though seniors have much lower rates, due largely to Pension Credit.

![](https://cdn-images-1.medium.com/max/5236/1*UR6jZxb9w3nVy02YIkRO_A.png)

Let’s consider an example to illustrate the power of our updated tool. Suppose we want to estimate the poverty impact of the Child Benefit, an unconditional cash transfer to parents of children (or young adults in further education). With PolicyEngine, anyone can compare today’s poverty rate to a scenario without Child Benefit — overall, by age group, and now by sex.

We estimate that the Child Benefit reduces poverty by 9.3% and deep poverty by 18.5%. Our pre-existing charts show that Child Benefit disproportionately benefits children, [reducing child poverty by 15.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=1&region=uk&timePeriod=2023&baseline=3846) and [deep child poverty by 35.6%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.deepPovertyImpact&reform=1&region=uk&timePeriod=2023&baseline=3846).

Our new charts show that the [Child Benefit lowers poverty by 9.2% for men and 9.4% for women](https://legacy.policyengine.org/uk/policy?focus=policyOutput.genderPovertyImpact&reform=1&region=uk&timePeriod=2023&baseline=3846).

![](https://cdn-images-1.medium.com/max/2000/0*dTF1Zl3haJDrPs5n)

We also find that the [Child Benefit lowers deep poverty by 18% for men and 19% for women](https://legacy.policyengine.org/uk/policy?focus=policyOutput.genderDeepPovertyImpact&reform=1&region=uk&timePeriod=2023&baseline=3846).

![](https://cdn-images-1.medium.com/max/2000/0*MWOuUkGGwbL_3_Vz)

Our updated tax and benefit reform calculator is a powerful tool that uses the standard poverty definition to help policymakers, researchers, and advocates better understand the impact of public policies on poverty rates, both overall and in deep poverty, for men and women. By providing policymakers with more accurate data on the impact of policy decisions, we can inform public discourse and facilitate evidence-based decision-making.



---

---
# Analysis of the Spring Budget 2023
Slug: analysis-of-the-spring-budget-2023
Date: 2023-03-15 18:10:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: PolicyEngine analysis estimates the impact of the EPG extension and the fuel duty freeze.

---

[See the full impact on PolicyEngine here.](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=5847&region=uk&timePeriod=2023&baseline=1544)

Today saw the announcement of the 2023 Spring Budget for 2023, with significant changes to energy subsidies in particular. In this report, we analyse the budgetary, distributional, poverty, and inequality aspects of two of the largest reforms using data from the PolicyEngine UK microsimulation model.

## Policy changes modelled

- The Energy Price Guarantee (EPG) is fixed at £2,500 for three extra months (April to June), down from the £3,000 it would have been. The EPG limits the average households’ energy bills, with the government covering spending (for the fixed average household energy usage) above the cap. We estimate the cost of this policy is £3.1 billion.

- Fuel duty is frozen at 53p per litre, instead of increasing to 65p. This continues the temporary 5p cut from last year and cancels the planned Retail Price Index (RPI) inflation increase. We estimate the cost of this policy is £4.2 billion.[^1]

The combined cost of these policy changes is £7.3 billion. This is similar to HM Treasury’s estimate for FY 2023–24 at £7.8bn.[^2]

![](https://cdn-images-1.medium.com/max/2000/0*sb3J3Fm72YWNDoZy)

## Distributional Analysis

The average gain per household across income deciles ranges from £153.03 in the first decile to £484.43 in the tenth decile.

[Chart: x-axis: Age group, y-axis: Poverty rate change, type: bar]

When looking at the relative gains, the impact is largest for the first decile at 1.5%, while the smallest impact is for the tenth decile at 0.4%.

## Poverty and inequality

The reforms contribute to a reduction in poverty rates. The overall poverty rate drops from 14.96% to 14.53%, while deep poverty decreases from 2.11% to 2.05%. Children and seniors see reductions in poverty as well, with the child poverty rate declining from 21.71% to 21.24% and the senior poverty rate falling from 8.47% to 7.86%.

![](https://cdn-images-1.medium.com/max/2000/0*PT7JLE0n2bgMKeGG)

When considering gender, both males and females experience a reduction in poverty rates, with females seeing a decrease from 15.61% to 15.14% and males from 14.30% to 13.92%.

In terms of inequality, the Gini coefficient decreases slightly from 0.336 to 0.335, and the share of income for the top 10% and top 1% of earners also declines slightly.

![](https://cdn-images-1.medium.com/max/2000/0*qRNuJ84GV5roH5Vb)

## Conclusion

The Spring Budget 2023’s policy changes regarding energy and fuel have a budgetary impact of £7.3 billion, with nearly all people (98%) gaining from these reforms. The policies have a larger relative impact on lower-income households, contribute to a reduction in poverty rates and inequality under several different metrics.

[^1]: To estimate the impact of the fuel duty freeze, we compare it against a counterfactual scenario in which the fuel duty rate was raised to 65p.

[^2]: See the policy costing document [here](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/1142824/Costing_Document_-_Spring_Budget_2023.pdf#page=9).



---

---
# Automate policy analysis with PolicyEngine's new ChatGPT integration
Slug: automate-policy-analysis-with-policy-engines-new-chatgpt-integration
Date: 2023-03-17 11:00:00
Authors: Nikhil Woodruff, ChatGPT
Tags: global, technical
Description: Score an economic impact in a few clicks. Write a report in one more.

---

_A man sits in (an artist’s impression of) Parliament Square with a laptop. Credit: Midjourney v4._

OpenAI recently [released](https://openai.com/research/gpt-4) its advanced language model, GPT-4, which demonstrates remarkable human-like performance in complex tasks such as [exams](https://www.scientificamerican.com/article/what-the-new-gpt-4-ai-can-do/). ChatGPT with GPT-3.5 has aided in several of our recent blog posts, and we used it extensively in this blog post with GPT-4. But with today’s release, PolicyEngine uses OpenAI technology for more than blog posts: users can now access GPT prompts directly from our web app.

## Introducing the PolicyEngine-ChatGPT integration

PolicyEngine aims to offer tools for understanding policy reforms’ economic impacts. We’re thrilled to introduce our integration with OpenAI’s ChatGPT, designed to improve policy analysis by producing detailed reports based on PolicyEngine’s web app results.

## How it works

PolicyEngine now auto-generates a ChatGPT prompt when evaluating policy reform impacts, requesting an economic impact analysis in a blog post format. Access it in the economic impact menu within the policy editor. The prompt includes:

1. Affected parameters’ details (including baselines)

1. Quantitative economic impact results (used in charts on other pages)

PolicyEngine provides style guidance (replaceable with your own), which includes instructions for clarity, plain English, and detailed explanations.

![](https://cdn-images-1.medium.com/max/3200/0*EUDaRFkzMdaz-8Az)

_Screenshot of the analysis prompt generator._

The screenshot demonstrates an example policy reform prompt ([restoring the American Rescue Plan Act’s Earned Income Tax Credit expansion](http://legacy.policyengine.org/us/policy?focus=policyOutput.prompt&reform=6524&region=us&timePeriod=2023&baseline=2)). ChatGPT’s unmodified analysis is provided at the end of the post.

Utilizing GPT-4’s capabilities, we hope this integration streamlines policy analysis for researchers, allowing faster iteration. Both GPT-4 (available through [ChatGPT Plus](https://openai.com/blog/chatgpt-plus)) and GPT-3.5 (available on the [free ChatGPT tier](http://chat.openai.com/)) provide clear summaries. We’ve found that GPT-4 offers more clear and accurate results compared to GPT-3.5, although both deliver good outcomes. An example of GPT-3.5’s summary is available below for comparison.

## Conclusion

The PolicyEngine-ChatGPT integration aims to revolutionize policy analysis by combining the powerful capabilities of GPT-4 with PolicyEngine’s intuitive web app. By offering users a streamlined experience, we hope to empower researchers, policymakers, and advocates in their quest for better policy understanding and decision-making. Whether you choose to use GPT-4 or GPT-3.5, the integration will provide valuable insights and analysis, making the policy evaluation process more efficient and accessible.

## Restoring the ARPA EITC: ChatGPT’s commentary (GPT-4)

The “Restoring the ARPA EITC” policy reform aims to change several provisions of the Earned Income Tax Credit (EITC) for the year 2023. This analysis is based on PolicyEngine US v0.243.0 and the 2021 Current Population Survey March Supplement microdata.

First, the reform raises the maximum EITC amount for childless filers from $560 to $1,502. Second, the phase-in and phase-out rates for childless filers are set to 15.3%, up from 7.65%. The phase-in rate is the rate at which the EITC increases as a taxpayer’s earnings rise, while the phase-out rate determines how quickly the credit is reduced as income increases beyond a certain point. Third, the reform raises the income threshold at which the phase-out begins for childless filers from $9,160 to $11,610. Fourth, it lowers the minimum eligibility age for childless filers from 25 to 19 years old and removes the maximum age limit. Lastly, the reform allows separate filers to be eligible for the EITC, a provision that was not present under current law.

The total budgetary impact of the reform is a decrease of $10.4 billion in tax revenue, with no impact on benefit spending.

In terms of income distribution, the average income increases across all income deciles, with the largest increase occurring in the second-lowest decile at $127.53. The relative change in income is highest for the lowest decile at 0.79% and decreases as income decile increases, with the smallest change of 0.01% in the highest decile.

The Supplemental Poverty Measure indicates that the reform reduces the overall poverty rate from 9.6% to 9.4%. Poverty rates decrease for adults (9.8% to 9.5%), children (8.4% to 8.3%), and seniors (10.5% to 10.4%). The deep poverty rates, which refer to individuals living at less than 50% of the poverty threshold, also decline slightly for adults (from 3.9% to 3.8%) and seniors (from 2.6% to 2.5%), while remaining unchanged for children at 2.1%. The reform results in a small decrease in deep poverty rates for both females (3.2% to 3.1%) and males (3.3% to 3.2%), while reducing poverty rates for females (10.0% to 9.9%) and males (9.2% to 8.9%).

Lastly, the reform has a minimal impact on income inequality. The Gini coefficient, which measures income inequality, decreases slightly from 0.4139 to 0.4132. The share of income held by the top 10% of households decreases marginally from 31.6% to 31.5%, and the share held by the top 1% remains relatively stable at 7.8%.

## Restoring the ARPA EITC: ChatGPT’s commentary (GPT-3.5)

The Restoring the ARPA EITC policy reform is designed to change certain provisions of tax and benefit policies for the year 2023. The reform includes several specific provisions, as described below:

- The maximum age for childless EITC eligibility will be increased to 100 years old.

- The minimum age for childless EITC eligibility will be decreased to 19 years old.

- Separate filers will no longer be eligible for the EITC.

- The maximum amount of the EITC will be $1,502.

- The phase-in rate for the EITC will be 15.3%.

- The phase-out rate for the EITC will be 15.3%.

- The phase-out starting point for the EITC will be $11,610.

According to the PolicyEngine microsimulation model, the Restoring the ARPA EITC policy reform will have a budgetary impact of -$10.4 billion, meaning it will decrease tax revenues and benefit spending by that amount. This reform is expected to affect income levels across different deciles, with 3.2% of all households experiencing a gain of more than 5%, and 8.5% of all households experiencing a gain of less than 5%. No households are expected to experience a loss of income.

When examining income changes by decile, the average income gain ranges from $30 to $128, with the largest gains going to those in the second decile. The relative income changes are very small, ranging from 0.0001% to 0.0079%.

The poverty rates for different age groups are expected to change slightly due to the policy reform. The adult poverty rate is expected to decrease from 9.8% to 9.5%, the all-age poverty rate is expected to decrease from 9.6% to 9.4%, the child poverty rate is expected to decrease from 8.4% to 8.3%, and the senior poverty rate is expected to decrease from 10.5% to 10.4%. Similarly, the deep poverty rates for different age groups are expected to decrease slightly.

The policy reform is expected to have a small impact on gender-based poverty rates. The poverty rate for females is expected to decrease from 10.0% to 9.9%, while the poverty rate for males is expected to decrease from 9.2% to 9.0%. The deep poverty rate for females is expected to decrease slightly from 3.2% to 3.2%, while the deep poverty rate for males is expected to decrease slightly from 3.3% to 3.2%.

The policy reform is not expected to significantly impact income inequality. The Gini coefficient of income inequality is expected to decrease slightly from 0.414 to 0.413, the share of income held by the top 10% of households is expected to decrease slightly from 31.6% to 31.6%, and the share held by the top 1% is expected to decrease slightly from 7.8% to 7.8%.



---

---
# How much should James Medlock donate to GiveDirectly?
Slug: medlock-donation-calculator
Date: 2023-03-23 01:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, technical
Description: We built a mini-app with the policyengine-us Python package to crunch the implications of a Twitter bet.

---

[_Jump to the tool_](https://policyengine-james-medlock-donation-solver.streamlit.app/)

One week ago, Twitter user James Medlock tweeted:

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I&#39;ll bet anyone $1 million dollars that the US does not enter hyperinflation</p>&mdash; James Medlock (@jdcmedlock) <a href="https://twitter.com/jdcmedlock/status/1636480393007489024?ref_src=twsrc%5Etfw">March 16, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

The next day, entrepreneur and investor Balaji Srinivasan agreed by quote-tweet:

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I will take that bet.<br>You buy 1 BTC.<br>I will send $1M USD.<br>This is ~40:1 odds as 1 BTC is worth ~$26k.<br>The term is 90 days.<br>All we need is a mutually agreed custodian who will still be there to settle this in the event of digital dollar devaluation.<br>If someone knows how to do this… <a href="https://t.co/hhPr522PQu">https://t.co/hhPr522PQu</a> <a href="https://t.co/6Aav9KeJpe">pic.twitter.com/6Aav9KeJpe</a></p>&mdash; Balaji (@balajis) <a href="https://twitter.com/balajis/status/1636797265317867520?ref_src=twsrc%5Etfw">March 17, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

That is, Srinivasan, the former CTO of Coinbase, is betting that Bitcoin will exceed $1 million US dollars within 90 days.

This bet [appears to be moving forward](https://twitter.com/jdcmedlock/status/1638611778006560768). When discussing how he’d use the potential winnings, Medlock tweeted:

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Yes - my goal is to give myself a 70 effective tax rate between taxes and a GiveDirectly donation</p>&mdash; James Medlock (@jdcmedlock) <a href="https://twitter.com/jdcmedlock/status/1637472476782362624?ref_src=twsrc%5Etfw">March 19, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

[GiveDirectly](http://givedirectly.org) is a charity that gives unconditional cash transfers to low-income households. Medlock [plans to give an unrestricted grant](https://twitter.com/jdcmedlock/status/1637848723052167168), which GiveDirectly currently directs to Africa.

Should Medlock win his bet, how much should he donate to GiveDirectly to fulfill his pledge? The interaction between charitable donations and tax liability means that answering this question requires a model of the tax code — like PolicyEngine’s.

Using [our `policyengine-us` Python package](http://github.com/policyengine/policyengine-us) — the same package that powers our web app — and the [Streamlit](http://streamlit.app) dashboarding software, [**we built a tool**](https://policyengine-james-medlock-donation-solver.streamlit.app/) to calculate how much Medlock should give. The amount to give also depends on other circumstances of Medlock’s finances and household, and our tool includes levers to explore different scenarios.

We find that Medlock should give between $333,000 (if he has at least $4 million in other income) and $565,000 (if he has no other income).

## Who is James Medlock?

James Medlock ([@jdcmedlock](https://twitter.com/jdcmedlock?lang=en)) is a pseudonymous Twitter account known for his social and economic policy content. Relevant information for his taxes include:

- [Lives in Oakland, California](https://twitter.com/jdcmedlock/status/1358307871188865030)

- [Married](https://twitter.com/jdcmedlock/status/1431664648701448195)

- [Doesn’t have children](https://twitter.com/jdcmedlock/status/1484002980466626560) (though he previously cared for a cat, [Midnight](https://twitter.com/jdcmedlock/status/1616950217391362048))

- [Self-employed](https://twitter.com/jdcmedlock/status/1415412142535106560)

- [33 years old](https://twitter.com/jdcmedlock/status/1368113815779385345) (his profile picture is a portrait of economic anthropologist [Karl Polanyi](https://en.wikipedia.org/wiki/Karl_Polanyi) as an older man)

## Using our calculator

[Our calculator](https://policyengine-james-medlock-donation-solver.streamlit.app/) runs Medlock’s household through the `policyengine-us` Python package via the Streamlit dashboarding app. We consider the above characteristics, and then let users set employment and self-employment income for Medlock and his wife.

As an example, suppose Medlock earns $100,000 from self-employment, and his wife earns $100,000 from employment. We would enter this as so:

![](https://cdn-images-1.medium.com/max/3012/0*GnNvsUqhT-LxtSpt)

[The main PolicyEngine app shows](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=16581) that, between payroll tax, self-employment tax, federal income tax, and California income tax, they would pay $58,949 in taxes, leaving a net income of $141,051 (they would not be eligible for any benefits).[^1]

[^1]: California has not yet released its 2023 tax bracket thresholds, so we use values from 2022.

Now with $1 million in gambling winnings, their [tax bill will rise $436,115](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=16582) from $58,949 to $495,064; federal income taxes rise from $26,967 to $361,051, California income taxes rise from $10,202 to $112,233, and payroll and self-employment taxes stay the same. Their net income rises by the remaining $563,886 to $704,937 if he doesn’t donate anything.

To take home $300,000, they might consider donating $700,000. But if they did so, their [taxes would rise $119,088](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=16583), leaving them with only $300,000 — $119,088 = $180,912 net. How much less than $700,000 of a donation will offset the tax change?

Our app shows that, for Medlock’s net income to rise by $300,000, he should donate **$484,848**. [In this scenario](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=16586), his taxes would rise $215,235. (This actually leaves him $299,917; we run an optimization process that gets within $100 or so to save time.)

We also show various donation scenarios as a table:

![](https://cdn-images-1.medium.com/max/2940/0*PCSgFGaaV70lLv8P)

And as a Plotly chart:

![](https://cdn-images-1.medium.com/max/3200/0*BG6ygtFTdgcXdm_a)

Calling the `policyengine-us` `Simulation` object with `axes` makes it easy and fast to simulate many scenarios like this. All in all, the app required 224 lines of Python code, including text and charts. See the full program at[ github.com/PolicyEngine/james-medlock-donation-solver](http://github.com/PolicyEngine/james-medlock-donation-solver/) and the app at [policyengine-james-medlock-donation-solver.streamlit.app](https://policyengine-james-medlock-donation-solver.streamlit.app/).

## Conclusion

While most of our users interact with our software through the web app, our Python packages provide flexible analysis, especially paired with dashboarding tools like Streamlit. We’ll be watching the Medlock-Srinivasan bet, and building more tools to answer one-off questions outside our main app, including those around charitable giving. Stay tuned!



---

---
# FiscalSim and PolicyEngine: Emphasizing collaboration and open-source acknowledgment
Slug: fiscalsim
Date: 2023-03-24 01:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, technical
Description: The Center for Growth and Opportunity launches FiscalSim, a US policy-computing web app drawing heavily from PolicyEngine's work.

---

PolicyEngine, a nonprofit organization, has been dedicated to providing free, open-source software that computes the impact of public policy. Our mission has been to democratize the policy process by making it accessible for everyone, from experts to everyday citizens. To achieve this, we are committed to open-sourcing our models, apps, and reports, allowing anyone to freely use and scrutinize them. [PolicyEngine US](http://legacy.policyengine.org/us), our microsimulation model, is a collaborative project with contributions from over 40 volunteer developers.

Recently, we noticed the launch of [FiscalSim](http://fiscalsim.thecgo.org) by the [Center for Growth and Opportunity at Utah State University (CGO)](http://thecgo.org). In this post, we reflect on its development, our contributions to the project, and our past collaboration with CGO.

## The launch of FiscalSim

FiscalSim, a project of the CGO, allows users to simulate the effects of policy experiments on individuals and the economy. While we appreciate the CGO’s efforts to create a tool that promotes transparency and accessibility in the policy-making process, we feel it’s important to acknowledge the foundational work done by PolicyEngine and our past collaboration with the CGO.

[FiscalSim’s FAQ](https://fiscalsim.thecgo.org/faq/) highlights the capabilities of its tax-benefit microsimulation model, FiscalSim US, and provides a link to its source code on GitHub. As explained in [their GitHub repo](http://github.com/thecgo/fiscalsim-us), “much of the original federal tax and benefit code and some of the state tax logic was developed by PolicyEngine.”

## FiscalSim US model

Currently, the only differences between the FiscalSim US model and PolicyEngine US are the name and the inclusion of Utah’s state income tax policy. Of the policies listed in [their FAQ](https://fiscalsim.thecgo.org/faq/), all but the state income tax and state tax credits (and of those, only Utah) were implemented by PolicyEngine.

![](https://cdn-images-1.medium.com/max/2636/0*62EpTM4TErJ8l9bG)

Indeed, of all line changes in the FiscalSim US repo, 99% come from five [pull requests](https://github.com/TheCGO/fiscalsim-us/pulls?q=is%3Apr+is%3Aclosed) that solely add our updates to their code. The CGO made these pull requests while the repo was private, and a [comment](https://web.archive.org/web/20230324190736/https://github.com/TheCGO/fiscalsim-us/pull/27#issuecomment-1453095703) in one of them suggests that the mechanism to copy our code lies in their fiscalsim-us-maintenance repo, which [remains private](http://github.com/thecgo/fiscalsim-us-maintenance).

We have always made PolicyEngine’s code entirely open source.

## FiscalSim interface

The CGO based FiscalSim’s interface largely on PolicyEngine’s original design, which we used from [March 2022](https://legacy.policyengine.org/us/blog/2022-03-31-policyengine-comes-stateside) to [January 2023](https://legacy.policyengine.org/us/blog/the-new-policyengine). Unlike our open source interface, FiscalSim is closed-source, so we cannot determine how much code traces to our work. But the visual similarities are evident.

Consider these screenshots from our [Washington state launch](https://legacy.policyengine.org/us/blog/2022-08-10-policyengine-launches-in-washington-state), covering the four core screens of the app: household definition, policy reform, household impact, and population impact.

The household screen resembles our original app, with sections of inputs on the left, inputs in the center, page navigation at the top (though they move some navigation to the far left), and reforms on the right. Because the content and organization of the variables follows from the model, those also match.

![](https://cdn-images-1.medium.com/max/2744/0*wVbrT7kMusj7SZd7)

Similarly, FiscalSim’s parameter design mirrors ours.

![](https://cdn-images-1.medium.com/max/3200/0*8Du2q8bZ9XZIgfMr)

The household net income screen breaks down income the same way (our video didn’t include a policy reform on this screen, but it had the same format and content as FiscalSim does).

![](https://cdn-images-1.medium.com/max/3200/0*JOpdYNHh5Q-Ui42c)

The population impact screen also contains the same summaries and charts as our original version did.

![](https://cdn-images-1.medium.com/max/3200/0*S_WY5xxmUgcjYRzt)

Each of the four main sections of the FiscalSim app — household definition, policy reform, household impact, and population impact — draw heavily from our design, and the 99%-similar model code further highlights the resemblances.

## Collaboration with the CGO

About a year ago, the CGO funded PolicyEngine’s development of state income taxes in three states: Maryland, Massachusetts, and Washington. We sought to support their research through continued development, but they opted to build a separate app instead.

We have credited the CGO’s financial contribution on [GitHub](http://github.com/policyengine/policyengine-us) and [our blog](https://legacy.policyengine.org/us/blog/2022-08-10-policyengine-launches-in-washington-state), and we would do the same if we incorporate CGO code (like the Utah income tax) into PolicyEngine. But that contribution now represents a small part of our software, which also includes seven other state income tax models, all federal taxes and major benefit programs, microdata processing, the policyengine-core framework, impact summaries, and the front-end, all of which is the product of over 40 (mostly volunteer) contributors.

## Acknowledging collaborative efforts

We understand that the development of software often involves collaboration and building upon existing frameworks. In the spirit of open-source development, we encourage the sharing and improvement of tools that contribute to better policy outcomes. However, we believe it’s essential to give credit where it’s due and acknowledge the collaborative efforts that have led to the creation of such tools. For instance, we credited the [Policy Simulation Library](http://pslmodels.org) and [SNAP Screener](https://www.snapscreener.com/?p=table) for their helpful transparency in [our US launch](https://legacy.policyengine.org/us/blog/2022-03-31-policyengine-comes-stateside), and [OpenFisca](http://openfisca.org) when we [forked it](https://legacy.policyengine.org/us/blog/2022-11-10-from-openfisca-to-policyengine) into our own microsimulation framework.

## Moving forward

As we move forward, PolicyEngine remains committed to advancing open-source policy modeling tools and fostering collaboration within the community. We encourage the sharing and improvement of tools that contribute to better policy outcomes and believe it’s essential to give credit where it’s due.

We hope that future collaborations between PolicyEngine and other organizations, like the CGO, will result in mutual recognition and an open dialogue that benefits the policy-making community as a whole. As the landscape of policy modeling tools continues to evolve, it is crucial for organizations to work together to advance transparency, collaboration, and innovation. By working together, we can contribute to the ongoing development of accessible, transparent, and effective policy-making solutions.



---

---
# Restoring the American Rescue Plan's Earned Income Tax Credit Expansion
Slug: restoring-arpa-eitc
Date: 2023-03-27 01:00:00
Authors: Arthur Wright
Tags: us, policy
Description: We review how the expansion works and model its impact with PolicyEngine US.

---

Earlier this month, the Biden Administration [announced its budget](https://www.whitehouse.gov/omb/briefing-room/2023/03/09/fact-sheet-the-presidents-budget-for-fiscal-year-2024/) for the 2024 fiscal year. The proposal “calls on the Congress to make the Earned Income Tax Credit expansion for childless workers permanent, which would help pull low-paid workers out of poverty.”

The president’s announcement refers to the expansion of the Earned Income Tax Credit (EITC) temporarily enacted by the American Rescue Plan Act (ARPA) in 2021, which has since expired. This report describes ARPA’s EITC expansion for childless workers and PolicyEngine’s projected impacts of restoring it today.

## What is the Earned Income Tax Credit?

The EITC is a federal tax credit for low- and moderate-income working individuals and families, [originally signed into law](https://sgp.fas.org/crs/misc/R44825.pdf) by President Ford in 1975 and made permanent by President Carter in 1978. The US [limits the EITC](https://www.taxpolicycenter.org/briefing-book/what-earned-income-tax-credit) to filers with earned income, allotting recipients a credit equaling a percentage of earnings up to a certain maximum. The rate and maximum credit vary by family size, with larger credits for families with more children.

A critical feature of the EITC is that it is a “refundable” credit — meaning that if the value of the credit exceeds taxes owed, the taxpayer receives the excess as a refund. It also phases in and out gradually. The credit amount increases as earned income increases, reaches a maximum, and then decreases as earned income exceeds the phase-out threshold.

Historically, the EITC did not support childless workers. That changed with the Omnibus Budget Reconciliation Act of 1993, which created a new credit formula that included low-income workers without qualifying children. In 2021, the American Rescue Plan [further expanded the EITC](https://www.cbpp.org/research/federal-tax/year-end-tax-policy-priority-expand-the-child-tax-credit-for-the-19-million) for workers without qualifying children. That change — which the Biden administration wants to make permanent — expired at the end of 2021.

## What are the current impacts of the childless EITC?

For each individual, the IRS [determines the value of the EITC](https://www.irs.gov/pub/irs-drop/rp-22-38.pdf) by earned income — which includes wages, salaries, and self-employment income. For workers without children in tax year 2023, the EITC provides a credit of 7.65% of earned income with a maximum credit of $600. The phaseout begins when annual income exceeds $9,800 and terminates when income reaches $17,640. To view this graphically, see the chart below from [this PolicyEngine page](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=14695) that displays the credit amount received by a single individual without children at different levels of earned income.

![](https://cdn-images-1.medium.com/max/3076/0*PKoG8QuJtyyrVTe5)

Correspondingly, such an individual faces a spike in their marginal tax rate between $17,500 and $19,000 of employment income when the EITC completely phases out. To model the impact of the childless EITC on marginal tax rates in PolicyEngine, visit [this page](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&household=14695).

To compute the macro impact of the childless EITC using PolicyEngine, [compare current law against abolishing it](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=6525). According to this simulation, [the childless EITC costs](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=6525) $2.3 billion. This represents 5.4% of our [projected total EITC cost](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=us&timePeriod=2023&baseline=5331) of $42.7bn. However, this figure falls 38.8% below the [JCT estimate of the program](https://www.jct.gov/publications/2022/jcx-22-22/), $69.8bn, which likely stems from the CPS under-capturing low-income households. [We will enhance the CPS data later this year](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis), which should more closely align this estimate to administrative totals.

Additionally, we project that the childless EITC [reduces the poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=us&timePeriod=2023&baseline=6525) by 0.6% and [the deep poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=2&region=us&timePeriod=2023&baseline=6525) by 0.8%, and [increases the average household’s net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=2&region=us&timePeriod=2023&baseline=6525) by $17. The childless EITC disproportionately benefits lower-income workers, but due to the small absolute impact, it [reduces income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=us&timePeriod=2023&baseline=6525) by less than 0.1%.

## How did the ARPA expand the childless EITC?

In 2021, ARPA made the following changes to the EITC for childless workers:

1. Lowered the applicable minimum age from 25 to 19

1. Eliminated the maximum age (previously 65)

1. Raised the maximum credit amount from $560[^1] to $1,502

1. Raised the phase-in and phase-out rates from 7.65% to 15.3%

1. Raised the income threshold at which the phase-out begins from $5,280[^2] to $11,610

1. Allowed separate filers in the same household to be eligible for the EITC

[^1]: The value of $600 mentioned in the previous section is the inflation-adjusted figure for 2023.

[^2]: Today’s inflation-adjusted value is $9,800.

## Limitations of PolicyEngine’s EITC model

Before assessing PolicyEngine’s projected impacts of restoring these changes, it is necessary to note the limitations and assumptions of our model.

First, we do not model the full complexity of the modified minimum age, which contained exceptions for students, homeless youth, and former foster youth.[^3] Our forecast assumes that the minimum age is 19 for all childless workers.

[^3]: The minimum age for “[specified students](https://www.law.cornell.edu/definitions/uscode.php?width=840&height=800&iframe=true&def_id=26-USC-2036225077-1503094078&term_occur=999&term_src=title:26:subtitle:A:chapter:1:subchapter:A:part:IV:subpart:C:section:32)” was only lowered to 24, and the minimum age for both “[qualified former foster youth](https://www.law.cornell.edu/definitions/uscode.php?width=840&height=800&iframe=true&def_id=26-USC-488059477-1503094078&term_occur=999&term_src=title:26:subtitle:A:chapter:1:subchapter:A:part:IV:subpart:C:section:32)” and “[qualified homeless youth](https://www.law.cornell.edu/definitions/uscode.php?width=840&height=800&iframe=true&def_id=26-USC-1746670673-1503094078&term_occur=999&term_src=title:26:subtitle:A:chapter:1:subchapter:A:part:IV:subpart:C:section:32)” was lowered further to 18.

Second, our values for the maximum credit amount and income phase-out threshold are taken directly from ARPA itself, which did not contain inflation adjustments (as the provisions expired in the same fiscal year). Restoration of the ARPA EITC expansion would plausibly adjust these values for inflation; accordingly, our model’s projections may understate the impacts of reinstating these changes today.

As discussed above, we follow the CPS data’s understatement of low-income tax credits like the EITC.

## How would restoring the ARPA childless EITC expansion affect the US?

To compute the population-level impacts of restoring ARPA’s EITC expansion, click on ‘find an existing policy’ and select ‘[Restoring the ARPA EITC](https://legacy.policyengine.org/us/policy?focus=gov&region=us&timePeriod=2023&baseline=2&reform=6524).’ According to this model, the reform [would cost $10.4bn](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&region=us&timePeriod=2023&baseline=2&reform=6524) in 2023 and [increase the average household’s net income by $79](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&region=us&timePeriod=2023&baseline=2&reform=6524). Because filers living in the same household can qualify for the EITC, all income deciles would experience a rise in average net income.

![](https://cdn-images-1.medium.com/max/3200/0*ONBi9tKp9KU5r430)

However, in percentage terms, the policy would provide [more significant benefits to lower-income deciles](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&region=us&timePeriod=2023&baseline=2&reform=6524). The relative change in income is highest for the lowest decile at 0.79% and decreases as the income decile increases.

![](https://cdn-images-1.medium.com/max/3200/0*L3XIeQX8BmRApiXG)

These benefits would [affect households comprising 12% of the population](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&region=us&timePeriod=2023&baseline=2&reform=6524). For 3.2% of Americans, the policy would cause net incomes to rise by more than 5% — disproportionately those in the bottom four deciles.

![](https://cdn-images-1.medium.com/max/2744/0*xmfrxZWnWHnjFULM)

Our model of the Supplemental Poverty Measure indicates that the reform [reduces the overall poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&region=us&timePeriod=2023&baseline=2&reform=6524) from 9.6% to 9.4%, a 2% decline.

Unsurprisingly, the most significant poverty reduction would be for working-age adults, as the expanded credits would accrue directly to employed adults without children. However, the child poverty rate would decline as well. This is likely due to adults living in households with children — but who are not themselves parents — newly qualifying for the EITC under the ARPA expansion. Additionally, the poverty rate for seniors would decline by 0.8%, likely due to ARPA eliminating the maximum age requirement.

![](https://cdn-images-1.medium.com/max/2704/0*6vdoNuRsqVxry6Sw)

The expansion would also [lower deep poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&region=us&timePeriod=2023&baseline=2&reform=6524) — the population share below half their Supplemental Poverty Measure threshold — by 0.9%. Again with the most significant reduction for working-age adults.

![](https://cdn-images-1.medium.com/max/2636/0*9n6R0cOgRIp8M_83)

The reductions in [poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderPovertyImpact&region=us&timePeriod=2023&baseline=2&reform=6524) and [deep poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderDeepPovertyImpact&region=us&timePeriod=2023&baseline=2&reform=6524) from restoring ARPA’s childless EITC expansion would be slightly larger for males than females.

![](https://cdn-images-1.medium.com/max/2640/0*0R00fQj5KFC1CeDP)

For men and women, the reform cuts deep poverty by about half as much as it cuts poverty.

![](https://cdn-images-1.medium.com/max/2752/0*LBdDOM9LeUG_w_OQ)

Additionally, the reform would [reduce income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&region=us&timePeriod=2023&baseline=2&reform=6524), but only slightly. The Gini coefficient — a measure of income inequality — would decrease from 0.414 to 0.413. The share of income held by the top decile of households would fall from 31.6% to 31.5%, and the share held by the top 1% would remain stable at 7.8%.

Lastly, restoring the ARPA EITC would make “cliffs” (a.k.a. [benefit cliffs or welfare cliffs](https://legacy.policyengine.org/us/blog/2023-02-02-how-would-reforms-affect-cliffs)) [more prevalent](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&region=us&timePeriod=2023&baseline=2&reform=6524). The cliff rate — the share of households whose net income would fall if each adult earned an additional $2,000 — would remain unchanged. However, the cliff gap — the sum of the losses incurred by all households on a cliff — would increase by 0.4%.

The Biden administration has proposed making ARPA’s EITC expansion for childless workers permanent to “help pull low-paid workers out of poverty.”

We predict that restoring the ARPA expansion in 2023 would reduce the poverty rate by 2.0% and the deep poverty rate by 0.9% while increasing the average net income of households in the lowest three deciles by over $100.

While there are limitations to PolicyEngine’s EITC model, it provides a valuable tool for assessing the potential impacts of this policy change. The expansion would benefit lower-income workers and would, in fact, pull some of them out of poverty.



---

---
# Breaking down policy impacts by wealth decile
Slug: breaking-down-policy-impacts-by-wealth-decile
Date: 2023-03-28 09:00:00
Authors: Nikhil Woodruff
Tags: uk, technical
Description: Income isn't everything.

---

_A UK mansion. Credit: DALLE-2._

Since our earliest days, we’ve broken the impact of policy reforms by income decile. For example, our [very first report](https://policyengine.org/uk/research/analysing-autumn-budget-universal-credit-reforms-with-policyengine) found that the 2021 Autumn Budget Universal Credit reforms would raise the net income of households in the third income decile by 1.6%, more than any other decile.

![](https://cdn-images-1.medium.com/max/2432/0*YvFdT6fnE10-nRUR)

We’ve changed a lot in the past 18 months, but that chart remains one of the most important for conveying the distributional impact of a reform. We also show the impact in pounds, and the distributional impact *within *each income decile.

But income isn’t everything. The UK searched for “wealth inequality” about half as much as “income inequality” in [Google searches](https://trends.google.com/trends/explore?geo=GB&q=income%20inequality,wealth%20inequality), and three-quarters as much in [the news](https://trends.google.com/trends/explore?geo=GB&gprop=news&q=income%20inequality,wealth%20inequality).

![](https://cdn-images-1.medium.com/max/3200/0*CrX9pRSwE_xKc4uq)

Reflecting this interest in wealth inequality, PolicyEngine UK now provides breakdowns by wealth decile as well as income decile.

## How PolicyEngine breaks down by decile

Our approach largely mirrors that of income grouping: we first sort UK households by their total wealth (including corporate and property wealth). We then partition this ordered set of households into ten groups of _equal population size_ (this means that the groups might have different numbers of households, but the same number of people).

Corporate wealth includes the following:

- Non-defined benefit pensions

- Employee shares and options

- Other UK shares

- Investment ISAs

- Unit investment trusts

Property wealth includes:

- Primary residences

- Non-primary residences

- Non-residential property

PolicyEngine simulates policy reforms over a dataset of tens of thousands of households, based on the [Family Resources Survey](https://www.gov.uk/government/collections/family-resources-survey--2) (FRS). The FRS doesn’t include data on households’ wealth, so we use another survey — the [Wealth and Assets Survey](https://www.gov.uk/government/statistics/personal-wealth-statistics-and-the-wealth-and-assets-survey) (WAS) — to estimate wealth values.

## Example: 1% land value tax

Let’s explore a policy that affects income deciles differently than it affects wealth deciles: a land value tax. This policy taxes owners of land (including their residence) based on the value of the land, rather than the land and structure combined.

To see the impacts by decile for [this policy](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileAverageImpact&reform=2320&region=uk&timePeriod=2023&baseline=1), choose from the newly-added chart options in the bottom left. There are three different wealth breakdown charts:

- _Absolute impact by wealth decile_: showing the absolute (£) average impacts by decile

- _Relative impact by wealth decile_: showing the impact as a percentage of income

- _Outcomes by wealth decile_: showing the distribution of outcomes within each wealth decile, in terms of how much it affects households’ net income

![](https://cdn-images-1.medium.com/max/3200/0*p7v9OzI_T7AJz5_k)

At 1%, the policy has a progressively increasing average impact by income decile in absolute terms, but lower income deciles see their income fall more as a percentage of income. This is largely due to households who might be considered ‘asset-rich, cash-poor’. (This might not occur if people respond to the tax by reducing their wealth, but PolicyEngine does not apply such behavioural responses).

![](https://cdn-images-1.medium.com/max/3200/0*4ptlM1KqAxqHWdh7)

But if we look at the impacts by wealth decile, we find that the policy is progressive even as a percentage of income, and the bottom three deciles face no impact at all (rounded to the nearest 0.1%).

![](https://cdn-images-1.medium.com/max/3200/0*92WpS-YPO8PcmXr9)

While decile averages are useful, they don’t tell us how mixed the outcomes were in each decile. For example, a policy might benefit most people in a decile, but have an overall negative impact if those were outweighed by a smaller number of households losing out — and this would look the same as a policy which negatively affected everyone in a decile to a smaller extent.

To see what’s going on inside the deciles, we can use the _Outcomes by wealth decile_ chart. This breaks down each wealth decile, and shows the percentage of people who:

- Gained more than 5% of their income

- Gained less than 5% of their income

- Experienced no change

- Lost more than 5% of their income

- Lost more than 5% of their income

For this policy, the chart shows a clearly increasing impact across the deciles, and reveals something more about the third decile: although there is no overall rounded impact, 14% of the decile experiences some small decrease in net income- just not enough to influence the overall decile average.

![](https://cdn-images-1.medium.com/max/2860/0*15I3IwS6oH2lB4l9)

Understanding the impact of policy reforms on wealth as well as income deciles provides a more comprehensive picture of distributional effects. By incorporating this new feature, PolicyEngine UK enables users to see how different policy ideas affect people given their wealth. We encourage users to [try out the new feature](https://legacy.policyengine.org/uk) and provide feedback or feature requests through [social media](http://twitter.com/thepolicyengine) or [email](mailto:contact@policyengine.org).



---

---
# The District Child Tax Credit proposal
Slug: district-child-tax-credit
Date: 2023-04-02 09:00:00
Authors: Max Ghenis
Tags: us, us-dc, policy
Description: Analysis of DC Councilmember Zachary Parker's new legislation.

---

_We thank the [Mother’s Outreach Network](https://mothersoutreachnetwork.org/) for supporting this research. PolicyEngine conducts all research independently of our funders._

On March 3, 2023, DC Councilmember Zachary Parker, along with eight other councilmembers, introduced the [District Child Tax Credit Amendment Act of 2023](http://ward5.us/dctc) (DCTC), which proposes a credit of up to $500 per child for eligible filers, depending on their income and family structure.

This report delves into the DCTC, providing an overview of the credit, examples of how households could be affected, scenario analysis for various filer types, and potential impacts on poverty and income inequality. Additionally, the report contextualizes the DCTC within DC’s broader tax-benefit system, highlighting the differences in phase-out structures and eligibility criteria compared to other programs.

## The District Child Tax Credit

The DCTC proposes that, starting in the tax year 2026, eligible filers would receive a refundable credit of up to $500 for each qualifying child, up to a limit of three children. Refundable credits can reduce a filer’s tax liability below zero, effectively functioning as benefits paid through the tax code, independent of regular tax liability.

Qualifying children are defined as those eligible for the federal Child Tax Credit, which includes children under the age of 17. The bill also proposes reducing the credit by $20 for each $1,000 (or fraction thereof) by which the taxpayer’s adjusted gross income exceeds the threshold amount, with different thresholds for single filers ($100,000) and joint returns ($145,000). A taxpayer is ineligible to receive this credit if they do not claim the eligible child as a dependent on their federal and District income tax returns, if someone else claims the eligible child, or if the taxpayer has not resided in the District of Columbia for at least one year prior to the date of filing.

## Example household

Consider a household with two children, ages 10 and 16, and an adjusted gross income of $110,000. The DCTC would make them eligible for a maximum credit of $1,000 ($500 per child). However, since their income exceeds the threshold amount for single (head of household) filers by $10,000, the credit falls by $200 ($20 for each $1,000, or 2%). Therefore, the household will receive a final credit of $800.

For a single filer with two children, the credit fully phases out if their income reaches $150,000 ($100,000 phase-out threshold + $1,000 credit / 2% phase-out rate = $100,000 + $50,000).

**To see how the DCTC would affect your own household, [enter your information into our personalized calculator](https://legacy.policyengine.org/us/household?focus=intro&region=dc&timePeriod=2023&baseline=2&reform=6201).**

_Note that our calculator does not reflect the limit of three children or the one-year tenure requirement. It also assumes that your household files taxes together, not married filing separately on the same return._

## Scenario analysis

A filer’s DCTC depends on their marital status, number of children, and income, as illustrated in the following chart. Applying similar math to the previous section, the credit fully phases out for single filers with one child at $125,000, two children at $150,000, and three children at $175,000. For married joint filers, the credit fully phases out at $45,000 higher income: $170,000 for one child, $195,000 for two children, and $220,000 for three children.

![](https://cdn-images-1.medium.com/max/3200/0*1axnkdbHlY3_J45w)

## DC-wide impacts

PolicyEngine estimates population-level impacts by pairing its rules engine with representative survey data released by the US Census Bureau. Specifically, it uses the 2021 [Current Population Survey March Supplement](https://www.census.gov/data/datasets/time-series/demo/cps/cps-asec.html) (CPS), the official source of poverty metrics, and pairs this with policy rules for 2023. Of the 59,148 households in the CPS, 1,135 reside in DC. Given this relatively small sample size, [PolicyEngine plans to enhance this dataset in the future](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis), and this will also facilitate farther-out predictions, such as tax year 2026 when the DCTC would take effect. As we have not yet modeled DC income taxes, we also assume that filers apply the same filing status as on their federal return, rather than married couples filing separately on the same return, as DC allows.

PolicyEngine estimates that the DCTC would [cost about $27 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&region=dc&timePeriod=2023&baseline=2&reform=6201) in 2023. This equates to [$84 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&region=dc&timePeriod=2023&baseline=2&reform=6201), or [0.1% of net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&region=dc&timePeriod=2023&baseline=2&reform=6201), disproportionately to those in the second through fourth income deciles. Overall, the policy would [reduce income inequality by 0.1–0.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201), depending on the metric.

![](https://cdn-images-1.medium.com/max/3200/0*clzTvjQqGl8RPfbg)

[One in five Washingtonians would benefit from the DCTC](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201), also disproportionately those in the second through fourth income deciles. One in twenty would see their net income rise by at least five percent, including one in five in the second income decile. Those in the bottom decile benefit less because these households have fewer children.

![](https://cdn-images-1.medium.com/max/3200/0*ZK8syfSSOghJdTFi)

The DCTC would [reduce the poverty rate by 1.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201), from 14.0% to 13.8%, as measured by the [Supplemental Poverty Measure](https://www.census.gov/topics/income-poverty/supplemental-poverty-measure.html), which considers taxes, transfers, and local housing costs. Child poverty would fall 5.2%, from 13.8% to 13.0%. PolicyEngine also estimates that the DCTC would [disproportionately reduce poverty among men](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderPovertyImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201), and that it would [not affect deep poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201) (people with income below half the poverty line), though these likely result from small sample sizes.

![](https://cdn-images-1.medium.com/max/3200/0*GGCE1U95070AYxGC)

## Context of DC’s tax-benefit system

As a refundable tax credit, the DCTC would effectively serve as a benefit paid through the tax system. Some other refundable tax credits and cash benefits in DC include:

- [DC Earned Income Tax Credit](https://eitc.dc.gov/page/frequently-asked-questions-10) (EITC), which currently matches 70% of the federal EITC and will match 100% beginning in 2026

- [DC Homeowner and Renter Property Tax Credit](https://otr.cfo.dc.gov/sites/default/files/dc/sites/otr/publication/attachments/2022_Sch_H.pdf) provides a credit based on property tax or rent paid, age, and income

- [DC Keep Child Care Affordable Credit](https://otr.cfo.dc.gov/sites/default/files/dc/sites/otr/publication/attachments/2022_Sch_ELC.pdf) provides a credit based on childcare expenses, children and their ages, and income

- [DC Temporary Assistance for Needy Families](https://dhs.dc.gov/service/tanf-district-families) (TANF), which provides cash assistance to low-income families with children

While PolicyEngine does not yet model these programs for a quantitative comparison, we can describe some ways in which the DCTC diverges from them.

One difference is the phase out structure. The DCTC phases out more slowly and at a higher income than other DC programs: at 2% of income exceeding $100,000 or $145,000. For comparison, the DC EITC for filers with children phases out at 11–15% of income exceeding $21,560.[^1] The Homeowner and Renter Property Credit has a [cliff](https://blog.policyengine.org/how-would-reforms-affect-cliffs-c390fffcfdf7) at $57,600 income, or $78,600 for those age 70 or above. The Keep Childcare Affordable Tax Credit also has a cliff, at $157,200 income ($78,600 for married filing separately). TANF too has a cliff at its income limit, which varies with household size (e.g. $712 per month for a family of three). As a result of the DCTC design, it [avoids contributing to welfare cliffs](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&household=24552&region=dc&timePeriod=2023&baseline=2&reform=6201).

[^1]: The EITC phases out at 15.98% for filers with one child and 21.06% for filers with two or more children. These result in 11–15% when multiplied by DC’s 70% multiplier.

The DCTC also depends on fewer household characteristics than other programs. The Homeowner and Renter Property Tax Credit depends on rent and property taxes; the Keep Child Care Affordable Credit depends on childcare expenses; TANF depends on assets. The DCTC depends only on children, marital status, and income.

## Conclusion

The District Child Tax Credit Amendment Act of 2023 proposes a refundable credit of up to $500 per child. The program would take effect for the 2026 tax year, issuing its first refunds in early 2027.

Given full take-up, PolicyEngine estimates that it would cost about $27 million, reach 20% of the DC population, reduce child poverty by about 5%, and reduce income inequality by 0.1–0.2%. The design of the DCTC, featuring a gradual phase-out structure and fewer household characteristic dependencies, distinguishes it from other DC programs and may help to mitigate welfare cliffs.

As PolicyEngine continues to refine its model of other DC programs and improve its microdata, the accuracy of estimates for the DCTC’s distributional, budgetary, and incentive effects within the DC public policy environment will also improve. The availability of more data and enhanced capabilities of PolicyEngine could pave the way for future studies, offering additional insights into the potential impact of the DCTC on families in the District of Columbia.



---

---
# Announcing the addition of Kansas income tax to PolicyEngine
Slug: kansas-income-tax
Date: 2023-04-03 09:00:00
Authors: Max Ghenis
Tags: us, us-ks, policy
Description: We've expanded our tax calculator and customizable reform simulator to the Sunflower State.

---

We are excited to announce the addition of the Kansas income tax code to [PolicyEngine US](http://legacy.policyengine.org/us)! This update allows users to analyze and understand the tax policies in Kansas, including tax rates, deductions, exemptions, and credits available to Kansas residents.

## How Kansas income taxes work

Kansas levies income taxes at different rates for joint and non-joint filers. The tax brackets and rates are as follows:

For joint filers:

- 3.1% on income up to $30,000

- 5.25% on income between $30,000 and $60,000

- 5.7% on income over $60,000

For non-joint filers:

- 3.1% on income up to $15,000

- 5.25% on income between $15,000 and $30,000

- 5.7% on income over $30,000

Kansas offers a personal exemption of $2,250 per person. It allows either itemized deductions or a standard deduction ranging from $3,500 to $8,000, depending on filing status, with a bonus for elderly and blind filers. The state also limits its taxable Social Security subtraction to filers with an adjusted gross income (AGI) at or below $75,000.

In addition to the tax rates and exemptions, Kansas also matches 25% of the federal Child and Dependent Care Credit (CDCC) and 17% of the federal Earned Income Tax Credit (EITC).

The addition of the Kansas income tax code to PolicyEngine will enable users to better understand the impact of tax policies on Kansas residents. Users can now model different policy scenarios, analyze the effects of proposed tax reforms, and explore the intricacies of Kansas state income tax.

We encourage you to explore the new Kansas tax policies on PolicyEngine and see how they affect your own tax situation or the broader population. Our team remains committed to expanding the platform’s capabilities and providing you with the most comprehensive tax policy analysis tool available. Stay tuned for more updates and new features!

_[Martin Holmer](https://martinholmer.github.io/) developed PolicyEngine’s Kansas state income tax model._



---

---
# Revolutionizing policy analysis with AI
Slug: gpt-analysis
Date: 2023-04-03 16:00:00
Authors: Nikhil Woodruff, ChatGPT
Tags: global, technical
Description: Discover PolicyEngine's new GPT-4 integration and audience modes.

---

Just two weeks ago, we [unveiled our ChatGPT integration](https://legacy.policyengine.org/us/blog/2023-03-17-automate-policy-analysis-with-policy-engines-new-chatgpt-integration), which allowed users to generate policy analysis by adjusting parameters in PolicyEngine and interacting with [OpenAI’s chatbot](http://chat.openai.com). Shortly after, OpenAI granted us access to the [GPT-4 API](https://openai.com/product/gpt-4), and we’ve been hard at work finding the best ways to harness its power to enhance PolicyEngine’s capabilities.

Today, we’re excited to launch our revamped **Analysis** product. Now, when you design or retrieve a policy reform in PolicyEngine, you can choose from three levels of policy knowledge and generate a comprehensive report that combines AI-generated computational content with interactive charts. Our goal is to provide a more engaging, personalized experience for our users. Here’s a look at how it works and what you can expect.

## How it works

PolicyEngine now comes with built-in GPT-4 integration, automatically generating a GPT-4 prompt to evaluate policy reform impacts. Users can access this analysis in the “Analysis” tab within the policy editor, with content tailored to their selected audience mode. This accommodates different levels of expertise and background knowledge.

Our new audience modes include:

- **ELI5:** Explain Like I’m 5 — For users who prefer simple language and basic explanations.

- **Normal:** For policy analysts with some background in economics and policy.

- **Wonk:** For seasoned policy analysts who prefer concise, technical language.

These modes allow users to customize the analysis based on their target audience, making the generated content more accessible and relevant.

![](https://cdn-images-1.medium.com/max/2700/0*Ni8xmhYDez5lQdlV)

Once you’ve chosen a mode, you can generate a report. GPT-4 weaves a narrative from our results, and we incorporate our interactive charts to automatically describe the policy reform using computationally precise natural language.

![](https://cdn-images-1.medium.com/max/3200/0*odCcFVHAA5i20GvK)

## A comparison of ELI5, Normal, and Wonk modes

In our mission to make public policy more personal and accessible, PolicyEngine now offers three audience modes for our built-in GPT-4 integration: ELI5, Normal, and Wonk. These modes cater to varying degrees of familiarity with policy analysis, giving users an instant, customized policy analysis experience.

To better illustrate the differences between the modes, here are some quotes from each, applied to [President Biden’s proposal to restore the American Rescue Plan Act’s Earned Income Tax Credit expansion](https://legacy.policyengine.org/us/blog/2023-03-27-restoring-arpa-eitc):

**ELI5:** “The ‘Restoring the ARPA EITC’ policy helps people with lower incomes get more money from the government. It makes it easier for younger and older people to get this help and gives them more money. This change costs the government about $9.8 billion and helps reduce poverty a little bit.”

**Normal:** “The ‘Restoring the ARPA EITC’ policy reform increases the Earned Income Tax Credit for childless taxpayers, resulting in a total budgetary impact of -$9.8 billion. It leads to a decrease in poverty rates and a slight reduction in income inequality, benefiting lower-income deciles more significantly than higher-income deciles.”

**Wonk:** “The hypothetical tax-benefit policy reform ‘Restoring the ARPA EITC’ alters EITC parameters, yielding a -$9.8 billion budgetary impact. This reform reduces poverty rates and produces a negligible decrease in income inequality, with the most considerable relative income increases observed in the first and second deciles.”

By offering these three audience modes, we aim to make policy analysis more accessible to a wider range of users, from those with limited policy knowledge to seasoned policy analysts. You can explore examples of each mode in the appendix of this post, and choose the one that best suits your needs or the needs of your target audience when creating reforms in the future.

## Embracing AI innovation

At PolicyEngine, we’re constantly seeking innovative ways to utilize AI to make public policy more accessible and personal. Our latest GPT-4 integration and audience modes are just the beginning. We are committed to leveraging the power of AI to further enhance our tools, enabling better policy understanding and decision-making for researchers, policymakers, and advocates alike.

## Conclusion

PolicyEngine’s integrated GPT-4 capabilities and new audience modes offer instant personalized policy analysis, transforming the way users interact with and engage in policy evaluation. By providing a seamless, customized experience, we aim to empower users in their pursuit of better policy understanding and more informed decision-making. Give it a try today and experience the advantages of AI-powered policy analysis for yourself!

## Examples

Each applies to the reform to [restore the ARPA EITC](https://legacy.policyengine.org/us/blog/2023-03-27-restoring-arpa-eitc).

## ELI5

The proposed policy reform, called “Restoring the ARPA EITC,” is for the year 2023 in the United States. It makes several changes to the current law:

The maximum age for people without children to get support from the government (called EITC) is raised from 64 to 100 years old.

The minimum age for the same group is lowered from 25 to 19 years old.

The maximum amount of money given by EITC is increased from $600 to $1,502.

The rate at which the EITC amount increases as people earn more money is doubled from 7.65% to 15.3%.

The rate at which the EITC amount decreases as people earn even more money is also doubled from 7.65% to 15.3%.

The point at which the EITC amount starts decreasing is raised from $9,800 to $11,610.

These changes were analyzed using a computer program called PolicyEngine US v0.259.0 and data from the 2021 Current Population Survey March Supplement. The analysis showed that this policy reform would cost the government around $9.8 billion.

When looking at how people’s incomes change because of this reform, we can see that those with lower incomes benefit more. For example, people in the lowest 10% of incomes gain an average of $106, while those in the highest 10% gain an average of $31. {{decileRelativeImpact}}

The policy reform also has a small impact on poverty, which is a measure of how many people are living with not enough money to meet their basic needs. The overall poverty rate decreases slightly from 6.8% to 6.7%. The biggest change is seen among adults (people aged 18–64), with the poverty rate decreasing from 6.9% to 6.7%. {{povertyImpact}}

Inequality, which is a measure of how unevenly money is distributed among people, is also slightly affected by this policy reform. The Gini coefficient, a number used to measure inequality (with 0 being perfect equality and 1 being complete inequality), decreases slightly from 0.394 to 0.394. The share of income held by the top 10% and top 1% of households also decreases a little. {{inequalityImpact}}

In simpler terms, this policy reform helps people with lower incomes by giving them more financial support from the government. It has a small impact on reducing poverty and making the distribution of money more equal among people.

## Normal

The hypothetical tax-benefit policy reform, Restoring the ARPA EITC, involves several changes to the current Earned Income Tax Credit (EITC) parameters for 2023 in the US. The provisions of the reform include:

The maximum age for childless EITC eligibility is increased from 64 to 100.

The minimum age for childless EITC eligibility is decreased from 25 to 19.

The maximum EITC amount for childless filers is increased from $600 to $1,502.

The EITC phase-in rate for childless filers is doubled from 7.65% to 15.3%.

The EITC phase-out rate for childless filers is also doubled from 7.65% to 15.3%.

The EITC phase-out starting point for childless filers is increased from $9,800 to $11,610.

Using PolicyEngine US v0.259.0 and the 2021 Current Population Survey March Supplement microdata, we can analyze the impacts of these changes.

The reform results in a total budgetary impact of -$9.8 billion, with tax revenues decreasing by $9.8 billion and no change in benefit spending.

Looking at income deciles, the reform’s effects are as follows:

{{decileRelativeImpact}}

The first decile sees an average income increase of $106, or 0.66%.

The second decile sees an average income increase of $119, or 0.36%.

The third decile sees an average income increase of $96, or 0.21%.

The fourth decile sees an average income increase of $71, or 0.12%.

The fifth decile sees an average income increase of $55, or 0.08%.

The sixth decile sees an average income increase of $61, or 0.07%.

The seventh decile sees an average income increase of $50, or 0.05%.

The eighth decile sees an average income increase of $41, or 0.03%.

The ninth decile sees an average income increase of $41, or 0.03%.

The tenth decile sees an average income increase of $31, or 0.01%.

In terms of poverty impacts, the reform has the following effects:

{{povertyImpact}}

The overall poverty rate, measured by the Supplemental Poverty Measure, decreases from 6.8% to 6.7%.

The adult poverty rate decreases from 6.9% to 6.7%.

The child poverty rate decreases from 5.9% to 5.9%.

The senior poverty rate decreases from 7.7% to 7.6%.

For deep poverty rates:

The overall deep poverty rate decreases from 1.8% to 1.8%.

The adult deep poverty rate decreases from 2.0% to 2.0%.

The child deep poverty rate remains at 1.2%.

The senior deep poverty rate remains at 1.7%.

When comparing the baseline and reform poverty and deep poverty rates by gender, the reform leads to relative decreases in poverty rates for both females (from 7.1% to 7.0%) and males (from 6.5% to 6.4%). The deep poverty rates also decrease for both females (from 1.8% to 1.8%) and males (from 1.8% to 1.8%).

Regarding inequality metrics, the reform has the following effects:

{{inequalityImpact}}

The Gini coefficient of income inequality decreases slightly from 0.3944 to 0.3938.

The share of income held by the top 10% of households decreases slightly from 30.4% to 30.4%.

The share of income held by the top 1% of households remains nearly constant at 7.5%.

Overall, the Restoring the ARPA EITC reform leads to a decrease in poverty rates and a slight reduction in income inequality. The reform impacts lower-income deciles more significantly than higher-income deciles, with the most considerable relative income increases observed in the first and second deciles.

## Wonk

The hypothetical tax-benefit policy reform for 2023 in the US, known as “Restoring the ARPA EITC,” includes several changes to the Earned Income Tax Credit (EITC) parameters. The impacts described below are based on PolicyEngine US v0.259.0 and the 2021 Current Population Survey March Supplement microdata. The following provisions detail the changes from the baseline to the reform values:

The maximum age for childless EITC eligibility is increased from 64 to 100.

The minimum age for childless EITC eligibility is reduced from 25 to 19.

The maximum EITC amount for childless taxpayers is raised from $600 to $1,502.

The phase-in rate for childless taxpayers is increased from 7.65% to 15.3%.

The phase-out rate for childless taxpayers is increased from 7.65% to 15.3%.

The phase-out start for childless taxpayers is raised from $9,800 to $11,610.

The reform has a total budgetary impact of -$9.8 billion, resulting from a -$9.8 billion decrease in tax revenues and no change to benefit spending.

Regarding income deciles, the {{decileRelativeImpact}} shows that the reform leads to an income gain for 11.2% of the first decile and a gain for 9.5% of the second decile. The reform has no negative income impact, and 88.8% of households experience no change in income.

Poverty impacts, measured using the Supplemental Poverty Measure, show the following relative changes: {{povertyImpact}}

Adult poverty rate decreases from 6.9% to 6.7%.

Overall poverty rate decreases from 6.8% to 6.7%.

Child poverty rate decreases from 5.9% to 5.9%.

Senior poverty rate decreases from 7.7% to 7.6%.

The deep poverty rates, also measured using the Supplemental Poverty Measure, show the following relative changes:

Adult deep poverty rate decreases from 2.0% to 2.0%.

Overall deep poverty rate decreases from 1.8% to 1.8%.

Child deep poverty rate remains at 1.2%.

Senior deep poverty rate remains at 1.7%.

The reform has the following effects on poverty and deep poverty rates by gender:

Female poverty rate decreases from 7.1% to 7.0%.

Male poverty rate decreases from 6.5% to 6.4%.

Female deep poverty rate decreases from 1.8% to 1.8%.

Male deep poverty rate remains at 1.8%.

Inequality impacts are as follows: {{inequalityImpact}}

Gini coefficient of income inequality slightly decreases from 0.394 to 0.394.

Share of income held by the top 10% of households decreases from 30.4% to 30.4%.

Share held by the top 1% remains at 7.5%.



---

---
# Introducing California income tax analysis on PolicyEngine
Slug: california-income-tax
Date: 2023-04-07 09:00:00
Authors: Max Ghenis
Tags: us, us-ca, policy
Description: Expanding our tax calculator and reform simulator capabilities to the most populous state.

---

_We thank [AllHome](http://allhomeca.org) for supporting this model enhancement._

We are thrilled to announce the expansion of PolicyEngine to include the California income tax code! This update enables users to examine, comprehend, and adjust tax policies in California — from rates and brackets to deductions and credits.

## How California income taxes work

California has nine tax brackets, with rates ranging from 1% to 12.3% and thresholds up to $1.35 million, depending on filing status. In addition, California levies a 1% tax on income above $1 million and a use tax of roughly 0.009% of income.

Like on federal income taxes, California filers can take either a standard or itemized deduction when determining their taxable income. The standard deduction is $5,202 for single and married filing separately filers, and double that for others. Itemized deductions mostly mirror the federal set, though California starts to cap their value at income above about $230,000, depending on filing status. California filers can also subtract taxable Social Security payments from their state adjusted gross income.

PolicyEngine also models several California tax credits:

- California Earned Income Tax Credit (CalEITC) applies multipliers to a modified version of the federal EITC for filers with some earned income below $30,000

- Young Child Tax Credit (YCTC) provided up to $1,083 to filers eligible for CalEITC (with some exceptions) and children under age six

- Child and Dependent Care Credit matches up to 50% of the federal program of the same name, for filers with up to $100,000 income

- Exemptions of $140 per filer and spouse, and $433 per dependent; all exemptions phase out starting at income above about $230,000, depending on filing status (the same thresholds as the itemized deduction cap)

- Renter credit provides $60 to single filers who pay rent and have income below $49,220; California doubles the amount and threshold for other filer types

_All values reflect the 2022 tax year. As California bases its inflation adjustments on mid-year price levels, we cannot yet enter 2023 tax parameters._

The integration of the California income tax code into PolicyEngine allows users to gain a deeper understanding of the impact of tax policies on California residents. Users can now simulate different policy scenarios, assess the effects of proposed tax reforms, and delve into the details of California state income tax.

We invite you to explore the new California tax policies on PolicyEngine and see how they influence your tax situation or the broader population. Our team is dedicated to expanding the platform’s capabilities and delivering the most comprehensive tax policy analysis tool available. Keep an eye out for more updates and new features!

_Max Ghenis, Nikhil Woodruff, [Martin Holmer](https://martinholmer.github.io/), and [Josh Marsh](https://www.linkedin.com/in/joshka-marsh/) developed PolicyEngine’s California state income tax model._



---

---
# PolicyEngine adds New York Family Assistance (TANF) to US model
Slug: new-york-tanf
Date: 2023-04-08 09:00:00
Authors: Max Ghenis, Donglai Xu, Lin Tao
Tags: us, us-ny, policy
Description: Enhancing analysis of public policy impacts on needy families.

---

Today we are expanding our tax-benefit model to include [New York Family Assistance](https://otda.ny.gov/programs/temporary-assistance/), the state’s Temporary Assistance for Needy Families (TANF) program. This update allows for better understanding of the program’s impact on recipients and the wider community. In this blog post, we will outline the key features of the New York TANF program, as well as some important considerations in the model’s calculations.

## How New York Family Assistance works

The New York TANF program provides financial assistance to eligible families, with the maximum benefit level dependent on household size. The program determines eligibility through the need standard, which considers both earned and unearned income. The countable income for the need standard is calculated by applying certain disregards and exclusions to the recipient’s earnings.

In New York, the Earned Income Disregard (EID) is set at 50% as of October 1, 2022, and will be adjusted annually beginning June 1, 2023. This means that 50% of a recipient’s earned income is excluded from the countable income calculation for eligibility. Additionally, the first $150 of monthly earnings is disregarded as a work expense. It is important to note that the policy of only applying the EID for earnings up to the Federal Poverty Level (FPL) for those residing in temporary housing shelter types remains unchanged.

Eligibility for the New York TANF program is also determined by demographic factors. Generally, a child is eligible if they are under 18 years of age or under 19 if they are a full-time student. New York limits eligibility to households with less than $2,000 in resources, or $3,000 if the household contains anyone aged 60 or older. While New York technically applies income limits, it is structured to mirror the benefit amount exceeding zero, making it effectively null.

## Example household

Consider a [single parent of one](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=29579) in the chart below. They could receive up to $252 per month ($3,024 per year) if they earn less than the $150 earnings disregard. The benefit then phases out at 50 cents per dollar of earnings, until it reaches zero when they earn $654 ($7,848 per year).

_This chart doesn’t exactly capture all vertices, as it is in $500 earnings increments._

![](https://cdn-images-1.medium.com/max/2848/0*7GPmyNzntYSko6uX)

PolicyEngine’s model computes various factors to provide a comprehensive understanding of the New York TANF program’s effects on eligible families and the broader community. The model’s inclusion of the New York TANF program aids policymakers, researchers, and the public in examining the program’s impact, exploring potential policy changes, and facilitating informed discussions on the future of public assistance programs like TANF.

In conclusion, PolicyEngine’s model, now featuring the New York TANF program, serves as an essential resource for those interested in the effects of social welfare policies, leading to better-informed policy decisions and an enhanced understanding of the program’s impact on families and communities.



---

---
# Analysis of the DC Financial Support for Families with Children Amendment Act
Slug: dc-financial-support-for-families-with-children
Date: 2023-04-16 09:00:00
Authors: Max Ghenis
Tags: us, us-dc, policy
Description: Evaluating Councilmember Zachary Parker's second Child Tax Credit proposal of 2023.

---

_We thank the [Mother’s Outreach Network](https://mothersoutreachnetwork.org/) for supporting this research. PolicyEngine conducts all research independently of our funders._

[We recently examined the District Child Tax Credit (DCTC)](https://legacy.policyengine.org/us/blog/district-child-tax-credit), a proposed bill from DC Councilmember Zachary Parker. Today, we will examine another proposal from Councilmember Parker called the [Financial Support for Families with Children Amendment Act (FSFC)](https://www.dropbox.com/s/14865nw8firxgo2/CM%20Parker%20Basic%20Income%20Bill%203.21.23_FINAL.pdf?dl=0) and its potential economic impact on Washington, D.C. residents.

## The Financial Support for Families with Children Amendment Act

Beginning in the 2024 tax year, the FSFC would provide up to $1,000 per year to children eligible for the federal Child Tax Credit (those below age 17). It reduces the credit by $100 per $1,000 (10% marginal tax rate) of adjusted gross income (AGI) exceeding specific thresholds: $10,000, or $20,000 for joint filers.

## Example household

Consider a married household with two children, ages 10 and 16, and an adjusted gross income of $25,000. The FSFCA would make them eligible for a maximum credit of $2,000 ($1,000 per child). However, since their income exceeds the $20,000 threshold amount for joint filers by $5,000, the credit falls by $500 ($100 for each $1,000, or 10%). Therefore, the household will receive a final credit of $1,500.

For a joint filer with two children, the credit fully phases out if their income reaches $40,000 ($20,000 phase-out threshold + $2,000 credit / 10% phase-out rate = $20,000 + $20,000).

**To see how the FSFC would affect your own household, [enter your information into our personalized calculator](https://legacy.policyengine.org/us/household?focus=intro&reform=8007&region=us&timePeriod=2023&baseline=2).**

_Note that our calculator assumes that your household files taxes together, not married filing separately on the same return._

## Scenario analysis

A filer’s FSFC depends on their marital status, number of children, and income, as illustrated in the following chart. Applying similar math to the previous section, the credit fully phases out for single filers with one child at $20,000 income, two children at $30,000, and three children at $40,000. For married joint filers, the credit fully phases out at $10,000 higher income: $30,000 for one child, $40,000 for two children, and $50,000 for three children.

![](https://cdn-images-1.medium.com/max/3200/0*BCBH9b-nkhBgfGih)

## DC-wide impacts

We estimate DC-wide impacts by pairing our 2023 rules engine with the 2021 [Current Population Survey March Supplement](https://www.census.gov/data/datasets/time-series/demo/cps/cps-asec.html) (CPS), which contains 1,135 DC households. As we have not yet modeled DC income taxes, we also assume that filers apply the same filing status as on their federal return, rather than married couples filing separately on the same return, as DC allows.

PolicyEngine estimates that the FSFA would [cost about $27 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=8007&region=dc&timePeriod=2023&baseline=2) in 2023. This equates to [$84 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=8007&region=dc&timePeriod=2023&baseline=2), or [0.1% of net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=8007&region=dc&timePeriod=2023&baseline=2), disproportionately to households in the second income decile (households in the bottom income decile have fewer children). Overall, the policy would [reduce income inequality by 0.0–0.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=8007&region=dc&timePeriod=2023&baseline=2), depending on the metric.

![](https://cdn-images-1.medium.com/max/2828/0*Zv6RqNmcgMkrlHWa)

[The FSFC would benefit one in ten Washingtonians](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=8007&region=dc&timePeriod=2023&baseline=2), and one in twelve would see their net income rise by at least five percent.

![](https://cdn-images-1.medium.com/max/2820/0*Z3wEluteyWjEyx3R)

14.0% of Washingtonians have resources below their [Supplemental Poverty Measure](https://www.census.gov/topics/income-poverty/supplemental-poverty-measure.html) threshold. We estimate that the FSFC would affect poverty rates [identically to the DCTC](https://legacy.policyengine.org/us/blog/district-child-tax-credit): lowering the rate 1.3% to 13.8%, child poverty by 5.2%, larger poverty reductions among men, and no deep poverty impact. In reality, the policies would have different effects, but given the small sample sizes, similar surveyed households fall near the poverty line and would be pushed above it by both the DCTC and FSFC.

![](https://cdn-images-1.medium.com/max/2848/0*JkBfpEumAbVkTxpM)

According to our data, the FSFC’s poverty reduction would be [entirely felt by Black non-Hispanic Washingtonians](https://legacy.policyengine.org/us/policy?focus=policyOutput.racialPovertyImpact&reform=8007&region=dc&timePeriod=2023&baseline=2), reducing their poverty rate from 22.9% to 22.5%.

![](https://cdn-images-1.medium.com/max/2844/0*CDnH3pVVtjeVdm8o)

To contextualize our results in DC, which carry noise due to the small sample size, we can compare poverty impacts to the FSFC’s if it were enacted nationwide. Across the US, the FSFC would reduce deep poverty by 60% more than it reduces poverty, including 31% deep child poverty reductions. It would have similar poverty impacts by sex, but reduce deep poverty more among women. Its impact on Black and Hispanic poverty rates would be about double the impact on White non-Hispanic poverty rates.

**FSFC poverty reduction by population subset and geography**

![](https://cdn-images-1.medium.com/max/2000/1*Tw9pytP4VTrTj4C108ee1g.png)

## Comparing Financial Support for Families with Children to the District Child Tax Credit

Councilmember Parker proposed the FSFC on March 23, three weeks after proposing the DCTC. Councilmembers George, Allen, Pinto, and Robert White joined Parker by co-introducing both bills (Chair Mendelson and Councilmembers Henderson, Trayon White Sr., and Nadeau additionally co-introduced the DCTC). While the proposals share common features as tax credits for families with children, and PolicyEngine projects similar impacts, they also differ in important respects.

FSFC provides larger benefits to a lower-income population and phases out faster; however, the DCTC targets in some ways that FSFC does not, by enacting a child cap and residency requirement. FSFC would also take effect two years before the DCTC.

![](https://cdn-images-1.medium.com/max/2784/1*cLrx9sthXcVS5AsNduRdIA.png)

PolicyEngine estimates that FSFC has identical impacts to the DCTC on the budget and poverty rates, though [more comprehensive data](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis) would likely identify differences. FSFC would reduce inequality about 50% more by targeting transfers to a population about half the size of the DCTC.

![](https://cdn-images-1.medium.com/max/2776/1*7mA6fraWhMVGC2I2c_-Srg.png)

## Context of other DC programs for low-income families

Like the DCTC, the FSFC would be available to families that don’t have to otherwise file taxes. To complement the background we provided in the DCTC report on TANF and the EITC, we provide some relevant statistics on Temporary Assistance for Needy Families and the Homeowner and Renter Property Tax Credit.

The DC Department of Health and Human Services administers DC’s Temporary Assistance for Needy Families (TANF) program, which targets similarly low-income families with children. The federal Department of Health and Human Services reports that [4,288 families](https://www.acf.hhs.gov/sites/default/files/documents/ofa/fy2022_tanf_caseload.pdf) participated in DC’s TANF program in an average month in 2022.

DC residents can claim the Homeowner and Renter Property Tax Credit (HRPTC) on the [Schedule H](https://otr.cfo.dc.gov/sites/default/files/dc/sites/otr/publication/attachments/2020_Schedule_H_0.pdf) tax form. Residents that pay rent or property tax can claim the HRPTC, unless they live in one of the District’s roughly [10,000 public housing units](https://www.dchousing.org/wordpress/about-us/dcha-by-the-numbers/), or exceed the income limits. Roughly [250,000 individuals](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=9008&region=dc&timePeriod=2023&baseline=2) are in tax filing units with income below the $57,600 main HRPTC income limit (higher-income filers can qualify if they are age 70 or above).

FSFC, meanwhile, would be available to about 70,000 individuals.

## Conclusion

The Financial Support for Families with Children Amendment Act of 2023 proposes a refundable credit of up to $1,000 per child for low-income families. The program would take effect for the 2024 tax year, issuing its first refunds in early 2025.

Given full take-up, PolicyEngine estimates that it would cost about $27 million, reach 10% of the DC population, reduce child poverty by about 5%, and reduce a broad measure of income inequality by 0.3%.

Beyond data limitations, a dynamic macroeconomic model may project different results than we do. Standard labor supply models consider the extent to which a program affects net income (“income effect”) and the extent to which it affects one’s marginal tax rate (“substitution effect”). Compared to the District Child Tax Credit, the FSFC would create both effects in larger magnitudes, since it increases income more on a relative basis for those affected (by targeting low income households) and phases out at a faster rate (adding ten rather than two percentage points to marginal tax rates).

As policymakers and stakeholders evaluate the FSFC in the context of existing programs like TANF, the DCTC, and the HRPTC, a comprehensive understanding of each proposal’s unique aspects will be essential for informed decision-making. This analysis serves as a basis for further discussion and evaluation of the potential effects of the FSFC on families and children across various income levels in Washington, D.C.



---

---
# Introducing Utah State Income Tax Analysis on PolicyEngine
Slug: introducing-utah-state-income-tax-analysis-on-policyengine
Date: 2023-04-17 09:00:00
Authors: Nikhil Woodruff
Tags: us, us-ut, policy
Description: Expanding our tax calculator and reform simulator capabilities to the Beehive State.

---

_Utah’s State Capitol. Credit: Ramon M._

Today, we are excited to announce the expansion of PolicyEngine to include the Utah State income tax code. This update enables users to simulate, and adjust tax policies in Utah on their own household or the State’s economy — from rates and credits to deductions and exemptions.

## Utah State’s income tax code

Utah has a main income tax rate of 4.85% (as of the 2022 tax year) that applies to all taxable income. The Utah income tax system allows a set of non-refundable tax credits, of which we model five:

- Utah taxpayer credit: an initial amount that phases out with income

- Utah EITC: 15% of the federal Earned Income Tax Credit

- Utah Social Security Benefits Credit (SSBC): a credit that effectively makes social security tax-exempt for filers under an income threshold, phasing out

- Utah retirement credit: an alternative to the Utah SSBC that provides a flat rate instead, phasing out earlier

- Utah at-home parent credit: $100 per child under 12 months, with income cutoffs for both the stay-at-home parent and the tax unit

These credits reduce the income tax liability for qualifying taxpayers, resulting in the overall tax schedule shown below.

![](https://cdn-images-1.medium.com/max/3152/0*f7_wm_N_NCceKF7l)

_Utah’s income tax, by household type and employment income._

## The Utah taxpayer credit

The taxpayer credit is calculated as a percentage of the sum of the taxpayer’s federal deductions and the Utah taxpayer credit personal exemption. The maximum taxpayer credit rate is 6%. In 2022, the Utah taxpayer credit personal exemption is $1,802. This exemption is added to the taxpayer’s federal standard or itemized deductions when calculating the taxpayer credit.

The taxpayer credit is subject to phase-out based on income levels and filing status. The credit reduces by a rate of 1.3% for each dollar of income above the phase-out threshold. In 2022, the phase-out thresholds for different filing statuses are as follows:

- Single: $15,548

- Married filing separately: $15,548

- Married filing jointly: $31,096

- Head of household: $23,322

- Qualifying widow(er): $31,096

## The Utah EITC

The Utah EITC is a flat percentage of the federal EITC, with no modifications to federal rules. In 2022, this percentage is 15%.

## The Utah Social Security Benefits Credit

This credit essentially exempts social security from Utah taxable income for filers with income below a filing-status-determined threshold, and phases the Utah tax on federally-taxable social security back in at a marginal rate of 2.5%. The phase-out thresholds for 2022 are:

- Single: $37,000

- Married filing separately: $31,000

- Married filing jointly: $62,000

- Head of household: $62,000

- Qualifying widow(er): $62,000

## The Utah retirement credit

The Utah retirement credit is an alternative to the Utah Social Security Benefits Credit (SSBC) and provides a flat rate credit for eligible taxpayers. To qualify for the Utah retirement credit, residents must have been born before 1952.

The maximum per-person value of the Utah retirement credit is $450. This credit is subject to phase-out based on modified adjusted gross income (AGI) levels and filing status. The phase-out rate is 2.5%. In 2022, the modified AGI phase-out thresholds for different filing statuses are as follows:

- Single: $25,000

- Married filing separately: $16,000

- Married filing jointly: $32,000

- Head of household: $32,000

- Qualifying widow(er): $32,000

Utah residents can claim only one of either the retirement credit or the social security benefits credit. It is assumed that they claim the one with the higher value. The Utah retirement credit is calculated using the taxpayer’s age, income, and filing status to determine eligibility and the appropriate phase-out reduction. If the retirement credit is refundable, it will be limited by the taxpayer’s income tax liability before credits, minus the Utah taxpayer credit and Utah EITC.

## The Utah at-home parent credit

Parents of children under 12 months can claim the at-home parent credit if:

- At least one of the parents has earned income below $3,000

- The adjusted gross income of the tax unit is less than $50,000

The value of the credit is $100 per qualifying child. The income cutoffs create a small [cliff effect](https://legacy.policyengine.org/us/blog/how-would-reforms-affect-cliffs)- any rise in income over either income limit imposes an instant $100 tax increase, regardless of the size of the rise in income.

## Marginal tax rates

The interaction of the flat tax rate and the taxpayer credit effectively creates a multi-rate tax schedule, with rates between 0% and 12% (and a cliff at $50,000 employment income due to the at-home parent credit).

![](https://cdn-images-1.medium.com/max/3152/0*t7JrT6OCDnGb611u)

_Marginal tax rates attributable to Utah’s income tax, by household type and income._

The integration of the Utah State income tax code into PolicyEngine allows users to gain a deeper understanding of the impact of tax policies on Utah residents. Users can now simulate different policy scenarios, assess the effects of proposed tax reforms, and delve into the details of Utah State income tax.

## Example reforms

Utah’s headline tax rate is currently 4.85%, but has seen reforms over recent years. Using PolicyEngine’s economic impact calculator, we can estimate the revenue impacts of small and large changes to the tax rate, shown below.

| **Tax rate** | **Tax rate change** | **Revenue impact** | **Average gain per household** | **PolicyEngine link**                                                                                                                           |
| ------------ | ------------------- | ------------------ | ------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| 3.85%        | -1pp                | -$1.1bn            | $1,036                         | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10724&region=ut&timePeriod=2023&baseline=2) |
| 4.35%        | -0.5pp              | -$573m             | $518                           | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10723&region=ut&timePeriod=2023&baseline=2) |
| 4.75%        | -0.1pp              | -$115m             | $104                           | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10722&region=ut&timePeriod=2023&baseline=2) |
| **4.85%**    | **No change**       | **No change**      | **No change**                  | **Current law**                                                                                                                                 |
| 4.95%        | +0.1pp              | +$115m             | -$104                          | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10613&region=ut&timePeriod=2023&baseline=2) |
| 5.35%        | +0.5pp              | +$572m             | $518                           | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10720&region=ut&timePeriod=2023&baseline=2) |
| 5.85%        | +1pp                | +$1.1bn            | $1,035                         | [See on PolicyEngine](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=10721&region=ut&timePeriod=2023&baseline=2) |

Because PolicyEngine uses a household survey, its revenue impacts are around a third lower than official estimates which use administrative tax datasets (which are less likely to miss out high-income filers). Our [planned data enhancement process](https://legacy.policyengine.org/us/blog/enhancing-the-current-population-survey-for-policy-analysis) will improve accuracy up to the level of administrative datasets later this year.

## Try it out

We invite you to explore the new Utah tax policies on PolicyEngine and see how they influence your tax situation or the broader population. Our team is dedicated to expanding the platform’s capabilities and delivering the most comprehensive tax policy analysis tool available. Keep an eye out for more updates and new features!



---

---
# Building the roots of PolicyEngine Nigeria
Slug: building-the-roots-of-policyengine-nigeria
Date: 2023-04-21 09:00:00
Authors: Nikhil Woodruff, Max Ghenis
Tags: ng, technical
Description: We're expanding PolicyEngine's reach by empowering Nigerians to understand personal income tax policies.

---

In February, at Code for Africa’s [Hacky New Year](https://democracylab.org/events/hackynewyear2023) event, our team tackled the task of developing a prototype for [PolicyEngine Nigeria](http://legacy.policyengine.org/ng).

In the US, UK, and Canada, users can visit [policyengine.org](http://legacy.policyengine.org/) and input their household details or policy reforms to calculate the effects of taxes and benefits using the rules applicable to their jurisdiction. Thanks to our global, open-source code infrastructure and our modern, standardised framework, expanding functionality for countries like Nigeria primarily involves understanding and implementing legislation without reworking the user interface.

In this blog post, we provide a step-by-step tutorial on using the app and showcase its features.

## Walkthrough

First, to see the impact of tax-benefit policy on a household, choose “Calculate my household income” from the homepage ([policyengine.org/ng](http://legacy.policyengine.org/ng)) to start the questionnaire.

Next, provide information about your marital status, number of children, their ages, and employment incomes.

After entering your data, the app shows a breakdown of your disposable income, including market income, taxes, and benefits. We currently only model Nigeria’s personal income tax.

- Market income: Total income from non-government sources (e.g., employment or dividend income).

- Tax: Government programs reducing your net income, such as personal income tax. PolicyEngine models Nigeria’s core rate structure, consolidated relief allowance, tax-exempt threshold, and minimum tax.

- Benefits: Government payments or subsidies received, like child benefits or tax credits. PolicyEngine Nigeria does not currently model any benefits.

Consider an [individual with ₦1,000,000 earnings](https://legacy.policyengine.org/ng/household?focus=householdOutput.netIncome&household=30071) ($2,170 USD, roughly Nigeria’s GDP per capita). We calculate that they would owe ₦54,000 in tax.

![](https://cdn-images-1.medium.com/max/2880/1*5eZFVJ3FzpYAs1tm1plkzQ.png)

You can also view how your household’s income would change with [varying income levels](https://legacy.policyengine.org/ng/household?focus=householdOutput.earnings&household=30071). Select “Varying your earnings” in the bottom left to display a chart showing how different outcomes (e.g., net income or tax) change with income.

![](https://cdn-images-1.medium.com/max/2952/1*vVrsRE_X7Av6b8WhJ3PVxg.png)

[Marginal tax rates](https://legacy.policyengine.org/ng/household?focus=householdOutput.mtr&household=30071), or the percentage of each marginal income increase taken by the government through taxes or withdrawn benefits, are often important to households. Select this option in the bottom left to see a chart displaying both your current marginal tax rate and how it varies with income. Nigeria’s tax system applies mostly monotonically increasing marginal tax rates, except for a spike around ₦30,000 due to a tax-free allowance.

![](https://cdn-images-1.medium.com/max/2928/1*yFs72UiWOqai3SnxdO5noQ.png)

From here, you can edit your household to view different results. Alternatively, you can explore how policy reform affects the results above.

## Altering the rules

Choose “Create a policy reform” to enter the policy view of the app, where you can examine all the parameters used to calculate tax-benefit outcomes.

![](https://cdn-images-1.medium.com/max/2868/1*KhRcSC7c1h-Hwpa-9EhrQw.png)

Let’s test a sample reform: go to Tax, choose the Consolidated relief allowance (similar to the standard deduction in the US or the personal allowance in the UK), and [set this parameter to zero](https://legacy.policyengine.org/ng/policy?focus=gov.tax.consolidated_relief_allowance.flat&household=30071&region=ng&timePeriod=2023&baseline=4&reform=10868).

![](https://cdn-images-1.medium.com/max/2920/1*upfrLm5jqoGzeFdf39cjEw.png)

Now click “Calculate my household impact.” You will return to the household page, where you can observe the [₦30,000 tax increase](https://legacy.policyengine.org/ng/household?focus=householdOutput.netIncome&household=30071&region=ng&timePeriod=2023&baseline=4&reform=10868) for the household we initially created. Go back to the [earnings variation](https://legacy.policyengine.org/ng/household?focus=householdOutput.earnings&household=30071&region=ng&timePeriod=2023&baseline=4&reform=10868) or [marginal tax rate](https://legacy.policyengine.org/ng/household?focus=householdOutput.mtr&household=30071&region=ng&timePeriod=2023&baseline=4&reform=10868) charts to see how the policy reform’s impact changes with different income levels.

![](https://cdn-images-1.medium.com/max/2884/1*bBgewQXh0sTsi-dkUQuzkg.png)

## Give it a try

You can follow the same examples at [policyengine.org/ng](http://legacy.policyengine.org/ng) or experiment with your own household or reform ideas. We’re excited to expand PolicyEngine to more countries and compute public policy impact worldwide. If you or your organisation have questions or collaboration suggestions, please don’t hesitate to contact us.

Thanks to Sakina Salem for research assistance during the hackathon.



---

---
# Kansas's Flat Tax Proposal — SB169
Slug: kansas-flat-income-tax-sb-169
Date: 2023-04-23 09:00:00
Authors: Arthur Wright
Tags: us, us-ks, policy
Description: We review how the bill works and model its impact with PolicyEngine US.

---

Following the [Kansas state house passing](https://fastdemocracy.com/bill-search/ks/2023-2024/bills/KSB00009649/) [Senate Bill 169](http://www.kslegislature.org/li/b2023_24/measures/documents/sb169_02_0000.pdf) last week, Governor Laura Kelly today [vetoed](https://www.kcur.org/news/2023-04-24/kansas-governor-vetoes-huge-a-tax-relief-plan-saying-its-flat-tax-favors-the-rich) the tax reform legislation. SB169 would have replaced its three-bracket income tax to a single 5.25% rate, making it the sixth state to enact legislation [converting to a flat income tax structure](https://taxfoundation.org/flat-tax-state-income-tax-reform/). The bill also has provisions that affect corporate, sales, property, and bank taxes, as well as several exemptions, deductions, and credits.

This post examines the details of these reforms and [PolicyEngine’s forecasted impacts](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&region=ks&timePeriod=2023&baseline=2&reform=8918) of implementing SB 169 in the current tax year.

[See how SB 169 would affect your household with PolicyEngine’s personalized calculator.](https://legacy.policyengine.org/us/household?focus=intro&region=ks&timePeriod=2023&baseline=2&reform=8918)

## How would SB169 change Kansas’s tax system, and how much does PolicyEngine model?

SB169 would enact nine changes to the tax system. Below we list them, and also note the extent to which PolicyEngine models them.

1. **Flatten the current graduated-rate income tax,** which currently reaches 5.7%, to 5.25% on income above $5,225 (single) and $12,300 (joint).
   _Fully modeled._

1. **Increase the standard deduction for single filers** from $3,500 to $4,000.
   _Fully modeled._

1. **Inflation-adjust the standard deduction** in future years for all filers.
   _Not applicable to PolicyEngine’s one-year model._

1. **Eliminate the nonrefundable Food Sales Tax credit,** which would otherwise end in 2025.
   _Fully modeled._

1. **Eliminate the sales tax on unprepared food.** _PolicyEngine does not model sales taxes. Note however that food purchased with Supplemental Nutrition Assistance Program benefits (food stamps) are already [exempt from sales taxes](<https://ask.usda.gov/s/article/Can-sales-tax-be-charged-on-items-I-bought-with-Supplemental-Nutrition-Assistance-Program-benefits#:~:text=Information&text=No%2C%20retailers%20cannot%20charge%20sales,Assistance%20Program%20(SNAP)%20benefits.>)._

1. **Expand the income tax exemption for Social Security benefits:** Under current law, Kansans whose total adjusted gross income is $75,000 or less are exempt from taxes on their social security benefits, while those above this threshold are fully taxed. Instead, SB169 would gradually phase out the subtraction for Social Security benefits between $75,000 and $100,000 of adjusted gross income.
   _PolicyEngine models the existing exemption, but this reform amends the structure of the exemption in a way that the app cannot model. We therefore exclude it from this analysis, though invite analysts to model it in our Python package._

1. **Decrease the normal tax rate for corporations.** _Not modeled._

1. **Raise the exemption ceiling for residential property taxes.** _Not modeled._

1. **Reduce the tax rate on banks.** _Not modeled._

PolicyEngine’s limitations may result in our understating the net income benefits to Kansans and the state revenue losses from implementing SB169. Beyond the policies we do not model, our reliance on the Current Population Survey creates inaccuracies that we [intend to remedy later this year](https://legacy.policyengine.org/us/blog/2022-12-28-enhancing-the-current-population-survey-for-policy-analysis).

## How would SB169 affect individual households?

To explore the effect of SB169 on individuals, we will examine three different sample households: a single 55-year-old, a family of four, and a 70-year-old who receives Social Security.

For an able-bodied single 55-year-old with no dependents, the bill would [increase their net income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&region=ks&timePeriod=2023&baseline=2&reform=8918&household=30049) if they earn less than $16,500 annually or greater than $30,000 annually. Between these two earnings levels, SB169 causes losses of up to $100 of net income due to the bill eliminating the [food sales tax credit](https://www.kansas.gov/kdor/webfile/help/modal-food-sales-credit-details.html#:~:text=The%20amount%20of%20credit%20is,exemption%20for%20Head%20of%20Household).) (FSTC) that currently applies to those with an adjusted gross income (AGI) below $30,615.

We must reiterate that our model does not include eliminating the food sales tax, which may counteract some of these losses. A single individual with no dependents earning more than $17,676 annually is [not eligible for SNAP](https://content.dcf.ks.gov/EES/KEESM/Appendix/F-2_FA_Standards.pdf) in Kansas, so their expenditures on unprepared food are [currently taxed](https://www.ksrevenue.gov/pub1223.html) at 4%. SB169 would eliminate this tax, so our model may overstate the net income losses for such individuals earning between $17,676-$30,615 of AGI.

With that in mind, the chart below shows our projected [change in net income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&region=ks&timePeriod=2023&baseline=2&reform=8918&household=30049) for a Kansan with these characteristics at different earning levels.

![](https://cdn-images-1.medium.com/max/2000/1*zs4irO8pZV0D55TycVH9Qw.png)

The sudden spike above $30,000 occurs when they are no longer eligible for the FSTC, so SB169 would lower their income tax rate without causing them to lose these benefits. Net income gains continue to increase linearly above $35,500 as the bill reduces the rate for individuals in the top marginal tax bracket from 5.7% to 5.25%.

Currently, a 55-year-old with no dependents between $18,500-$19,500 of AGI faces an effective marginal tax rate greater than 100%, meaning their net income actually declines as their earnings increase. Under SB169, this cliff would extend to $20,000 of AGI, as shown by the chart below.

![](https://cdn-images-1.medium.com/max/2000/1*qd_RP_kweLSuNuyKTCEoDw.png)

The following chart shows the [percentage point change in marginal tax rates](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&region=ks&timePeriod=2023&baseline=2&reform=8918&household=30049) for these individuals at different income levels. The difference stabilizes above $36,000 of AGI, reflecting the tax decrease for higher earners who experience no changes to their state benefits.

![](https://cdn-images-1.medium.com/max/2000/1*gNvnldVmUxMrndZqNToFag.png)

Next, we will consider the impacts of SB169 on a 40-year-old married individual with two children. As shown by the next chart, the bill would [increase or cause no change](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&region=ks&timePeriod=2023&baseline=2&reform=8918&household=30065) to their net income at all earnings levels. Up to $20,000 of AGI, the bill would have no effect, and if they earn more, they would benefit. (The flat value between $47,000-$77,000 is slightly positive, though close to 0).

![](https://cdn-images-1.medium.com/max/2000/1*sqd7AEEDFippG852CY5UWA.png)

However, SB169 would slightly extend a cliff between $39,00-$47,500 for families with these characteristics and leave a second cliff between $55,500-$59,000 intact. This results from the increased marginal tax rates it would create in that earnings range.

![](https://cdn-images-1.medium.com/max/2000/1*4ur6n5R3osxEQzMQEvX7Gw.png)

Next, we will consider the [projected changes in net income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&region=ks&timePeriod=2023&baseline=2&reform=8918&household=30070) for a single 70-year-old with no dependents. These effects are almost identical in shape and magnitude to those for a single 55-year-old, as shown by the chart below. This is because we do not model SB169’s expansion of the income tax exemption for Social Security benefits, which would benefit seniors between $75,000-$100,000 of AGI.

![](https://cdn-images-1.medium.com/max/2000/1*FCRNnAdNG9MScT9JbFl8wQ.png)

## How would SB169 affect Kansas as a whole?

To simulate the state-wide impacts of SB169 in 2023, navigate to ‘compute the impact of policy reforms’ from PolicyEngine’s homepage, click on ‘find an existing policy,’ select ‘[Kansas SB169 2023](https://legacy.policyengine.org/us/policy?focus=gov&region=ks&timePeriod=2023&baseline=2&reform=8918)’ from the dropdown box, and choose Kansas from the list of states. According to this model, the reform would cost the state [approximately $240 million in lost tax revenue](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&region=ks&timePeriod=2023&baseline=2&reform=8918) and increase the average household’s [net income by $201](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&region=ks&timePeriod=2023&baseline=2&reform=8918).

![](https://cdn-images-1.medium.com/max/2000/1*QztrXJyJb8iTD3FFKs2-dQ.png)

[In percentage terms](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&region=ks&timePeriod=2023&baseline=2&reform=8918), the average change in disposable income also increases for higher earners, ranging from +0.1% for the lowest income decile to +0.5% for the highest income decile.

![](https://cdn-images-1.medium.com/max/2000/1*NzJrJ3JSoAOpWG0kKQ5Gqw.png)

Those benefits would [accrue to households comprising 67%](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&region=ks&timePeriod=2023&baseline=2&reform=8918) of Kansas’s population. Yet, 0.6% of Kansans would lose out due to SB169, all in the bottom three income deciles. This is likely because the bill eliminates the FSTC. (Again, keep in that our model does not include eliminating the food sales tax itself, which, depending on SNAP eligibility, may counteract some of these losses).

![](https://cdn-images-1.medium.com/max/2000/1*kfhRjwqmheqozjEzJXtwbg.png)

Despite causing gains in net income for many individuals, the bill would not affect [the poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&region=ks&timePeriod=2023&baseline=2&reform=8918) or [deep poverty rate](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&region=ks&timePeriod=2023&baseline=2&reform=8918) in Kansas. Additionally, although the share of income earned by the top 10% and 1% of earners [will increase due to SB169](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=8918&region=ks&timePeriod=2023&baseline=2), the Gini index — a measure of income inequality — will remain unchanged.

![](https://cdn-images-1.medium.com/max/2000/1*d5H7vilV23Ha9r3I-0Yk-w.png)

Lastly, the bill would make cliffs [more prevalent](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=8918&region=ks&timePeriod=2023&baseline=2). The cliff rate — the share of households whose net income would fall if each adult earned an additional $2,000 — would rise 15.8% from 1.7% to 2%. And the cliff gap — the sum of losses incurred by households on a cliff — would increase by 3.6% from $50.5 million to $52.3 million.

![](https://cdn-images-1.medium.com/max/2000/1*ECyeIZGQEBxzqkylYLWxGQ.png)

As demonstrated when we considered specific individuals, the bill increases marginal tax rates in particular earning ranges in ways that interact with the phaseout of benefits like SNAP and the FSTC to cause these cliffs.

If enacted, SB169 would replace Kansas’s progressive tax system with a flat income tax rate of 5.25% and alter several other tax provisions. According to PolicyEngine’s model of a subset of income tax provisions, the reform would result in a revenue loss of around $240 million for the state while increasing the average household’s net income by $201, with people in higher income deciles gaining the most.

We forecast that 0.6% of Kansans would experience losses due to SB169 eliminating the Food Sales Tax Credit, primarily in the bottom three income deciles. However, our model does not account for eliminating the food sales tax, which may offset these losses for some individuals.

The bill would not impact Kansas’s poverty or deep poverty rates, and though the share of income earned by the wealthiest citizens would increase, the Gini index would remain unchanged. Lastly, the reform would make income cliffs more prevalent, with the cliff rate rising by 15.8% and the cliff gap increasing by 3.6%.

As policymakers and Kansans weigh the benefits and drawbacks of this reform, it is essential to consider these impacts and their broader implications for the state’s tax and benefits system.



---

---
# Digital Public Goods Alliance recognizes PolicyEngine as a Digital Public Good
Slug: digital-public-goods-alliance-recognizes-policyengine-as-a-digital-public-good
Date: 2023-04-26 09:00:00
Authors: Nikhil Woodruff
Tags: global, impact
Description: The UN-endorsed initiative highlights PolicyEngine's open source approach to supporting the Sustainable Development Goals.

---

We are excited to announce that the Digital Public Goods Alliance (DPGA) has added PolicyEngine to their [DPG Registry](http://digitalpublicgoods.net/registry/). This multi-stakeholder initiative, endorsed by the United Nations Secretary-General and consisting of organizations such as UNICEF, iSPIRT, the Norwegian Agency for Development Cooperation (Norad), and the Government of Sierra Leone, aims to create a more equitable world by promoting digital public goods that embody open-source principles and address global challenges.

In recognizing PolicyEngine as a DPG, the DPGA affirms that we meet the [DPG Standard](http://digitalpublicgoods.net/standard/): open-source software, open data, open AI models, open standards, and open content that adhere to privacy and other applicable laws and best practices, do no harm, and help attain the United Nations’ Sustainable Development Goals (SDGs). In particular, the DPGA affirmed our view that PolicyEngine’s free, open source tax-benefit microsimulation software enables policymakers, researchers, and organizations to analyze and develop effective policies for addressing:

- [SDG1:](https://sdgs.un.org/goals/goal1) End poverty in all its forms everywhere

- [SDG5:](https://sdgs.un.org/goals/goal5) Achieve gender equality and empower all women and girls

- [SDG8:](https://sdgs.un.org/goals/goal8) Promote sustained, inclusive and sustainable economic growth, full and productive employment and decent work for all

- [SDG10:](https://sdgs.un.org/goals/goal10) Reduce inequality within and among countries

[You can see our full DPG registry listing here.](https://app.digitalpublicgoods.net/a/10482)

While PolicyEngine originated in the UK and has grown to the US, we are also developing models in Canada and Nigeria, and we intend to expand to more countries in the future, especially those where the SDGs carry the greatest importance. We are honored to join the esteemed registry of organizations contributing to a global effort to improve policy development and create a more equitable and sustainable world.

![](https://cdn-images-1.medium.com/max/2480/1*XUQZjvUWLZfasEp-ZVAXtQ.png)



---

---
# How PolicyEngine shaped the outcome of the $1 million bet James Medlock won today
Slug: medlock-wins
Date: 2023-05-02 16:00:00
Authors: Max Ghenis
Tags: us, technical
Description: Our free tax calculator helped determine Balaji Srinivasan's $500,000 payments to Medlock and GiveDirectly.

---

The high-profile Twitter bet between [James Medlock](https://twitter.com/jdcmedlock) and [Balaji Srinivasan](http://twitter.com/balajis) has reached its conclusion, and PolicyEngine played a pivotal role in shaping the outcome. On March 16, 2023, [Medlock bet](https://twitter.com/jdcmedlock/status/1636480393007489024?ref_src=twsrc%5Etfw) that the US would not enter hyperinflation, with [Srinivasan taking the bet](https://twitter.com/balajis/status/1636797265317867520?ref_src=twsrc%5Etfw) and wagering that Bitcoin would exceed $1 million US dollars within 90 days. The bet garnered widespread attention, with Medlock pledging to donate a portion of his potential winnings to [GiveDirectly](http://givedirectly.org), a charity that provides unconditional cash transfers to extremely poor households in East Africa.

Today Medlock announced the settlement of the bet, revealing that Srinivasan had donated $500,000 to GiveDirectly and transferred an additional $500,000 to Medlock. Srinivasan also donated $500,000 in BTC to support Bitcoin Core development via Chaincode.

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">It&#39;s nice that my original plan to give myself my desired 70% tax rate worked out to nice round numbers, thanks again to <a href="https://twitter.com/ThePolicyEngine?ref_src=twsrc%5Etfw">@ThePolicyEngine</a> for helping me figure out how much to donate<a href="https://t.co/p9FPW45xKD">https://t.co/p9FPW45xKD</a></p>&mdash; James Medlock (@jdcmedlock) <a href="https://twitter.com/jdcmedlock/status/1653453502365196288?ref_src=twsrc%5Etfw">May 2, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

In [our March 23 blog post](https://legacy.policyengine.org/us/blog/medlock-donation-calculator), we presented a [mini-app](https://policyengine-james-medlock-donation-solver.streamlit.app/) built with the [policyengine-us Python package](http://github.com/policyengine/policyengine-us) to calculate how much Medlock should donate to GiveDirectly in order to fulfill his pledge of achieving a 70% effective tax rate between taxes and donations. Our calculations ranged from $333,000 to $565,000, depending on Medlock’s other income.

![Medlock’s optimal donation size, assuming he and his wife each earn $100,000.](https://miro.medium.com/v2/0*BG6ygtFTdgcXdm_a)

_Medlock’s optimal donation size, assuming he and his wife each earn $100,000._

Our free tax calculator and custom app informed Medlock and Srinivasan’s decision on a $500,000 donation to GiveDirectly, highlighting the impact of PolicyEngine’s tools in real-life decision-making scenarios.

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Tax policy didn&#39;t have major implications for me here. Per calculations using PolicyEngine, getting $500k + Balaji giving $500k worked out the same for me as getting $1 mil and donating. Better for him probably, but main reason was this: <a href="https://t.co/Pj2fpczyzT">https://t.co/Pj2fpczyzT</a></p>&mdash; James Medlock (@jdcmedlock) <a href="https://twitter.com/jdcmedlock/status/1653452413809094657?ref_src=twsrc%5Etfw">May 2, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

GiveDirectly, too, has confirmed and shared the outcome (note our Twitter account is [@ThePolicyEngine](http://twitter.com/thepolicyengine) rather than [@PolicyEngine](http://twitter.com/policyengine)).

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">How did <a href="https://twitter.com/balajis?ref_src=twsrc%5Etfw">@balajis</a> and <a href="https://twitter.com/jdcmedlock?ref_src=twsrc%5Etfw">@jdcmedlock</a> arrive at the $500k figure? Read <a href="https://twitter.com/PolicyEngine?ref_src=twsrc%5Etfw">@PolicyEngine</a>&#39;s piece. <a href="https://t.co/tMxu8AaFkx">https://t.co/tMxu8AaFkx</a></p>&mdash; GiveDirectly💸 (@GiveDirectly) <a href="https://twitter.com/GiveDirectly/status/1653445848221757441?ref_src=twsrc%5Etfw">May 2, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

We are thrilled that our `policyengine-us` Python package and Streamlit-built dashboarding app could contribute to this charitable outcome by providing Medlock with the necessary calculations to determine his donation amount. This example demonstrates the power and flexibility of our Python packages, and we look forward to continuing to build tools that can answer unique questions and support decision-making in various scenarios.

To learn more about how our free tax calculator guided the decision on Medlock’s donation amount, please refer to our previous blog post: [How much should James Medlock donate to GiveDirectly?](https://legacy.policyengine.org/us/blog/medlock-donation-calculator)



---

---
# Analysis of Guaranteed Income for the 21st Century
Slug: analysis-of-guaranteed-income-for-the-21st-century
Date: 2023-06-08 13:45:00
Authors: Max Ghenis
Tags: us, featured, policy
Description: The proposal from the New School and the Economic Security Project would lower poverty and inequality while expanding cliffs.

---

In May 2021, researchers at the [New School’s Institute on Race and Political Economy](https://www.newschool.edu/institute-race-power-political-economy/), with support from the [Economic Security Project](https://www.economicsecurityproject.org/), released a paper titled, _[“Guaranteed Income for the 21st Century.”](https://drive.google.com/file/d/1UDFPwUYu2Rf4RGgXuOTacmBj2Gt9paAV/view)_ The paper proposed a policy that expands the Earned Income Tax Credit by guaranteeing $12,500 per adult and $4,500 per child, phasing out for income above certain thresholds.

In this report, we depict the impact on a sample household, as well as on US-wide metrics like the budget, poverty, inequality, and cliffs. We also compare some estimates to the New School’s.

Overall, we find that the reform would, in 2023:

- [Cost $1.26 trillion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=1006&region=us&timePeriod=2023&baseline=2)

- [Benefit three in five Americans](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=1006&region=us&timePeriod=2023&baseline=2)

- [Cut poverty 94%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=1006&region=us&timePeriod=2023&baseline=2)

- [Lower the Gini index of income inequality 19%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=1006&region=us&timePeriod=2023&baseline=2)

- [Increase the prevalence and severity of cliffs by 466% and 100%, respectively](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=1006&region=us&timePeriod=2023&baseline=2)

This report describes and compares the New School’s proposal and analysis; calculates the impact for a sample household; and goes into these US-wide results in greater depth.

[See how Guaranteed Income for the 21st Century would affect your household.](https://legacy.policyengine.org/us/household?focus=intro&reform=1006&region=us&timePeriod=2023&baseline=2)

## The Guaranteed Income for the 21st Century proposal

_Guaranteed Income for the 21st Century_, or _21GI_ as the New School abbreviates it, would abolish the Earned Income Tax Credit and provide $12,500 per adult and $4,500 per child. The proposal then phases out the new benefit linearly with respect to the tax unit’s adjusted gross income, depending on number of adults: It would phase out from $10,000 to $50,000 for single-adult tax units, and from $15,000 to $70,000 for two-adult tax units. The below graphic, from 39:18 of the New School’s [video](https://vimeo.com/552064973), depicts the reform.

![](https://cdn-images-1.medium.com/max/3740/1*DHxTvbjPGSJggUDISIbuzg.jpeg)

## Sample household

Consider a [single parent of one child in New York City](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=1006&region=us&timePeriod=2023&baseline=2&household=31338). As they earn more, the net benefit of the 21GI falls, due to the shape of the EITC (in this case, federal, state, and local EITCs, since NYS and NYC based their EITCs on the federal), and the phase-out of the new payment itself.

![](https://cdn-images-1.medium.com/max/3940/1*XTHawfysW_0cTtQTtO3V_w.jpeg)

This chart shows baseline (gray) and 21GI (blue) net income as the parent earns more. The shaded regions indicate “earnings dead zones”, where the household is worse off for earning due to cliffs. The doubly-shaded regions are earnings dead zones in the baseline and reform, while the more lightly shaded regions are only cliffs in the reform. Because 21GI adds more phase-out (marginal tax rates), it extends existing cliffs, which in this case result from SNAP and reduced price school meals.

![](https://cdn-images-1.medium.com/max/3868/1*MUWablXY0CIQ68sPpdlC-g.jpeg)

We can also visualize these cliff and incentive impacts in marginal tax rates. 21GI would raise marginal tax rates for all low-income households. For this household, it will raise it by up to 95 percentage points, at an earnings level where the new payment is phasing out, and the federal/state/local EITCs would all otherwise have phased in, lowering marginal tax rates.

![](https://cdn-images-1.medium.com/max/3792/1*zG4Qk5b3B492r3jUonrtZg.jpeg)

Similar to the net income chart above, we can see how 21GI affects total marginal tax rates. This household under 21GI would face marginal tax rates above 70% continuously for most of the earnings range from $13,500 to $49,000.

![](https://cdn-images-1.medium.com/max/3908/1*3OMiseQ87hvfdLXSxd718A.jpeg)

## US-wide impacts

Our static microsimulation model, which applies 2023 tax and benefit rules to the 2021 Current Population Survey March Supplement, finds the following results.

### Budgetary impact

We project that 21GI would cost [$1.26 trillion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=1006&region=us&timePeriod=2023&baseline=2), including the main benefit and the EITC elimination.

This estimate exceeds the New School’s estimate of $876 billion by 43%. This discrepancy could result from multiple factors, including importantly the source dataset and tax filing unit assumption.

While we apply the benefit and phase-out to tax units in the 2021 Current Population Survey, the New School applied it to households in the 2019 Survey of Consumer Finances. To the extent that SCF households include multiple tax filing units, it would tend to underestimate the cost by phasing out the benefit for a household whose income would include multiple tax units.

As an example, suppose a 22-year-old, who earns $30,000, lives with their parent, who earns $100,000. 21GI would provide the parent nothing and the child $6,250, half the maximum benefit, given their earnings fall halfway within the $10,000–50,000 phase-out range. But the SCF would show the household as a single tax filing unit with $130,000 income, and thus disqualified from any 21GI benefit.

21GI would alter incentives to file separately; however, neither PolicyEngine nor New School models changing filing behavior as a result.

### Impact by income decile

The reform would [add 11.7% to net incomes](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=1006&region=us&timePeriod=2023&baseline=2) overall, and this percentage decreases with income, from 110% at the bottom decile to 0.7% at the top.

![](https://cdn-images-1.medium.com/max/3132/1*oD2ReebhMv_OYA5zBWfiyA.jpeg)

### Distributional impacts

21GI would [benefit 60% of the population](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=1006&region=us&timePeriod=2023&baseline=2), of whom 97% would gain at least 5% of net income. Over 99% of the bottom fifth would gain, as would 23% of those in the top decile (due to households that comprise multiple filing units).

![](https://cdn-images-1.medium.com/max/3120/1*maqbky4pbH-RJX46kvBBnA.jpeg)

### Poverty

Under 21GI, poverty would fall by [94% overall](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=1006&region=us&timePeriod=2023&baseline=2), and by at least 90% for most subgroups. [Deep poverty would also fall 99%](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=1006&region=us&timePeriod=2023&baseline=2).

![](https://cdn-images-1.medium.com/max/3200/1*whSNdoMuLeXE-bRmDGtilw.jpeg)

### Inequality

21GI would lower income inequality, disproportionately for the broadest measure we report, the Gini index, which would fall 19%.

![](https://cdn-images-1.medium.com/max/3248/1*wvHl0ybCQYcgyOngym2YJA.jpeg)

### Cliffs

Currently, PolicyEngine estimates that 0.6% of households face a cliff, by which an additional $2,000 of earnings per adult would make the household financially worse off. We expect that this underestimates the prevalence of cliffs, since we have not yet modeled all tax and benefit programs that would increase marginal tax rates or introduce explicit cliffs.

As a result of 21GI’s additional marginal tax rates, that rate of [cliffs would rise 466% to 3.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=1006&region=us&timePeriod=2023&baseline=2) (one in 30 households). The total lost income from those facing cliffs would also double from $6 billion to $12 billion.

![](https://cdn-images-1.medium.com/max/2580/1*SwzbJH9pK-foIfuICcq0Gw.jpeg)



---

---
# Analysis of the Working Families Tax Cut Act
Slug: malliotakis-steel-working-families-tax-cut-act
Date: 2023-06-08 20:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, featured, policy
Description: How the proposal to increase the standard deduction would affect households and society.

---

On Tuesday, Representatives Nicole Malliotakis (R-NY-11) and Michelle Steel (R-CA-45) introduced the [Working Families Tax Cut Act (WFTCA](https://waysandmeans.house.gov/malliotakis-steel-lead-legislation-to-provide-tax-relief-to-working-families/)) in the House, proposing a broad tax cut through increasing the federal standard deduction.

The standard deduction (which the [bill](https://acrobat.adobe.com/link/review?uri=urn:aaid:scds:US:f2203ce9-a41a-3a28-8b45-509e0b364e45) renames to _“Guaranteed Deduction”_) reduces taxable income for taxpayers who choose not to itemize their deductions. The proposals would increase it by between $2,000 and $4,000 depending on filing status in 2024 and 2025.

![](https://cdn-images-1.medium.com/max/3200/0*WkVYnCrwjLgDdnQp)

The bill reduces this additional standard deduction by 5% of adjusted gross income exceeding:

- $200,000 for single and separate filers

- $300,000 for head of household filers

- $400,000 for married and widowed filers

[**See how the Working Families Tax Credit Act would affect you.**](https://legacy.policyengine.org/us/household?focus=intro&reform=14512&region=us&timePeriod=2023&baseline=2)

## Household impacts

Consider a [single filer in New York](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=14512&region=ny&timePeriod=2023&baseline=2&household=31355) with no itemized deductions other than state income tax. The WFTCA would provide [benefits](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=14512&region=ny&timePeriod=2023&baseline=2&household=31356) if they earn between $13,851 ($1 above the current standard deduction) and $240,000, with the maximum dollar benefit of $640 at around $200,000 earnings.

![](https://cdn-images-1.medium.com/max/3200/0*dv92M9FKwiIP5zCY)

The WFTCA would reduce the filer’s marginal tax rates by up to -10% in specific earnings ranges, around $15,000 and $60,000. The phase-out then raises [marginal tax rates](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=14512&region=ny&timePeriod=2023&baseline=2&household=31356) by about 1.7% when earning between $200,000 and $240,000.

![](https://cdn-images-1.medium.com/max/3200/0*C_DfomXSDdHQWOct)

The WFTCA would affect other filers differently, depending on the marital status, children, and itemized deductions like charitable contributions.

## Budgetary impact

We project that the WFTCA would cost [$50 billion in 2023](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=14512&region=us&timePeriod=2023&baseline=2). As comparison, the Urban-Brookings Tax Policy Center estimated that the bill would cost [$95 billion for 2024/25](https://twitter.com/jbuhl35/status/1666924708967727112), or an average of $47.5 billion in each year (they also provided [distributional analysis](https://www.taxpolicycenter.org/model-estimates/working-families-tax-cut-act-june-2023/t23-0061-proposal-increase-standard-deduction)). The American Enterprise Institute, using the open-source [Tax-Calculator microsimulation model](https://taxcalc.pslmodels.org/), estimates that the bill would cost [$43 billion in 2024](https://www.aei.org/economics/flawed-approach-the-working-families-tax-cut-act-as-a-response-to-inflation/).

Both TPC and AEI use the IRS public use file (PUF) rather than the Current Population Survey March Supplement (CPS), as PolicyEngine does. They also project the microdata into future years, while we use the 2021 CPS as-is, overwriting taxes and benefits with 2023 policy rules. We will [integrate the PUF into the CPS and project it to future years](https://legacy.policyengine.org/us/blog/enhancing-the-current-population-survey-for-policy-analysis) in the coming months.

In New York and California, the states the authors represent, the bill would reduce tax liabilities by [$3 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=14512&region=ny&timePeriod=2023&baseline=2) and [$6 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=14512&region=ca&timePeriod=2023&baseline=2), respectively.

## Distributional impact

On average, the proposal would raise net incomes by [$382 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=14512&region=us&timePeriod=2023&baseline=2); this increases with income, except for the 10th decile due to the phase-out.

![](https://cdn-images-1.medium.com/max/2884/0*gheY-rtEMwYZBSAt)

On a [relative basis](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=14512&region=us&timePeriod=2023&baseline=2), the bill would raise incomes a similar amount for deciles four through nine.

![](https://cdn-images-1.medium.com/max/2732/0*HuuthcudLSRD2551)

We estimate that the WFTCA would benefit [75% of the population](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=14512&region=us&timePeriod=2023&baseline=2), disproportionately those in deciles five through nine. As context, Representative Steel claimed in her announcement that the bill would benefit [82% of tax filers in her district](https://waysandmeans.house.gov/malliotakis-steel-lead-legislation-to-provide-tax-relief-to-working-families/).

![](https://cdn-images-1.medium.com/max/2712/0*uK_cr-x6857z88-F)

The WFTCA would [lower poverty by 0.4%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=14512&region=us&timePeriod=2023&baseline=2), disproportionately for working-age adults and [Hispanics](https://legacy.policyengine.org/us/policy?focus=policyOutput.racialPovertyImpact&reform=14512&region=us&timePeriod=2023&baseline=2).

The proposal would [lower income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=14512&region=us&timePeriod=2023&baseline=2) according to the three measures we estimate. It reduces the broadest measure, the Gini index, the least, and the narrowest, the share held by the top 1%, the most.

![](https://cdn-images-1.medium.com/max/2756/0*B_gr7YmtNKBXJshQ)

As a result of lowering marginal tax rates for low-income households, the WFTCA would [make cliffs about 1 percent less prevalent](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=14512&region=us&timePeriod=2023&baseline=2).

[**See more details on the Working Families Tax Credit**](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=14512&region=us&timePeriod=2023&baseline=2), including in your state or for [your household](https://legacy.policyengine.org/us/household?focus=intro&reform=14512&region=us&timePeriod=2023&baseline=2), at PolicyEngine.



---

---
# Unveiling poverty impacts by race and ethnicity
Slug: poverty-race-ethnicity
Date: 2023-06-19 20:00:00
Authors: Max Ghenis
Tags: us, technical
Description: A new feature from PolicyEngine reveals how customizable tax and benefit reforms affect poverty rates for Black, White, Hispanic, and other Americans.

---

As we observe Juneteenth, a day that marks the end of slavery in the United States, PolicyEngine sheds new light on the complex issue of poverty with new capacity to compute impact by race and ethnicity.

## Current poverty rates: a racial and ethnic breakdown

In our commitment to bring transparency to the impact of public policies, we’re excited to extend PolicyEngine to include racial and ethnic breakdowns, supplementing our existing age and [sex](https://legacy.policyengine.org/us/blog/breaking-down-us-poverty-impacts-by-sex) analyses.

To provide a comprehensive perspective, we use the Supplemental Poverty Measure (SPM) in our evaluations. This measure goes beyond the traditional Official Poverty Measure (OPM) by accounting for variables such as taxes, in-kind benefits, local housing costs, among others.

Applying current law to the 2021 Current Population Survey March Supplement, we estimate that 8.8% of the population currently falls below their SPM poverty threshold. However, this figure diverges significantly when examined through the lens of race and ethnicity, revealing the following rates of poverty:

- 6.1% for White non-Hispanic individuals

- 10.9% for Other non-Hispanic individuals

- 12.2% for Hispanic individuals

- 15.0% for Black non-Hispanic individuals

## Policy reforms through a racial and ethnic lens

To illustrate these new capabilities, consider the example of a [universal basic income of $100 per month](https://legacy.policyengine.org/us/policy?focus=policyOutput.racialPovertyImpact&reform=15208&region=us&timePeriod=2023&baseline=2). Our analysis reveals that this reform would lower the SPM poverty rate by 24%, with a more pronounced effect among Black and Hispanic Americans.

![](https://cdn-images-1.medium.com/max/2876/0*ZjUKWl8gUE0jKxVT)

## Towards inclusive policymaking

This additional feature to our tax and benefit reform calculator enables policymakers, researchers, and advocates to better assess how public policies influence poverty rates across various racial and ethnic groups.

As we commemorate Juneteenth, we recognize the existing racial and ethnic disparities in poverty rates, and encourage those shaping public policy to consider how impacts on these disparities align to societal values.



---

---
# Scott Winship's individualized Earned Income Tax Credit proposal
Slug: winship-individualized-eitc
Date: 2023-07-14 08:00:00
Authors: Max Ghenis
Tags: us, policy, featured
Description: An analysis and note on the value of open-source models.

---

On Monday, Scott Winship, senior fellow and the director of the Center on Opportunity and Social Mobility at the American Enterprise Institute, published [“Reforming the EITC to Reduce Single Parenthood and Ease Work-Family Balance”](https://ifstudies.org/blog/reforming-the-eitc-to-reduce-single-parenthood-and-ease-work-family-balance) for the Institute for Family Studies. The blog proposed a set of reforms to the Earned Income Tax Credit, most notably basing eligibility on individual rather than joint earnings for married earners. It would also limit EITC eligibility to filers with combined income below $100,000. This report reviews the individual, budgetary, and distributional impacts of that reform using PolicyEngine.

[**_See how an individualized EITC would affect you._**](https://legacy.policyengine.org/us/household?focus=intro&reform=17331&region=us&timePeriod=2023&baseline=2)

## EITC marriage incentives

The Earned Income Tax Credit is a refundable tax credit based, as all other federal income tax programs are, on a filer’s total income, including the combined income of spouses for joint filers. The credit increases with the number of children (up to three), phases in with respect to total earned income, and phases out with respect to adjusted gross income.

The structure of the EITC can create a marriage penalty for some people. A marriage penalty occurs when a couple’s total tax bill as a result of getting married exceeds what it would be if they were single and filing individually. As Winship notes:

> Consider an unmarried couple, in which one partner with two children makes $20,000 per year and the other (childless) partner makes $30,000 per year. Under current policy, while they remain unmarried, the parent gets a $6,604 EITC benefit, so their combined income is $56,604. If they get married, their EITC drops to $1,991 because the couple’s income is relatively high and the benefit phases out. They are worse off by $4,613.

PolicyEngine confirms these results, and also provides total net income after taxes and benefits. Table 1 illustrates how this penalty would work for a couple in Texas.

**Table 1: EITC and net income for a sample household under current law**

| Household                                                                                                                                | EITC   | Net income |
| ---------------------------------------------------------------------------------------------------------------------------------------- | ------ | ---------- |
| [Single parent of two, $20,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32119)   | $6,604 | $35,073    |
| [Single person, no kids, $30,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32120) | $0     | $25,987    |
| Total if unmarried                                                                                                                       | $6,604 | $61,060    |
| [Married parents of two, $50,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32121) | $1,998 | $51,600    |
| Marriage penalty                                                                                                                         | $4,606 | $9,460     |

The EITC therefore contributes about half of the total marriage penalty faced by this couple, with other tax and benefit provisions contributing the other half. If they marry, they will lose $9,460, or 15% of their net income if unmarried.

## Individualizing the EITC

Winship proposes basing the EITC on individual earnings to reduce these marriage penalties. Specifically, his proposal applies the same EITC structure to married individuals, based on their number of kids and treating them as married, but phasing it in and out with respect to individual earnings. He also limits the credit to filers with combined adjusted gross income below $100,000.

Returning to the previous household (if married), they would see their EITC rise by $10,816. As a result, they would now face a marriage bonus of $1,356 (2%), including a $6,210 marriage bonus from the EITC, most of which is offset by a marriage penalty from other tax and benefit programs.

**Table 2: EITC and net income for a sample household under Winship’s individualized EITC**

| Household                                                                                                                                                                                  | EITC    | Net income |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------- | ---------- |
| [Single parent of two, $20,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32119&region=us&timePeriod=2023&baseline=2&reform=17331)   | $6,604  | $35,073    |
| [Single person, no kids, $30,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32120&region=us&timePeriod=2023&baseline=2&reform=17331) | $0      | $25,987    |
| Total if unmarried                                                                                                                                                                         | $6,604  | $61,060    |
| [Married parents of two, $50,000 earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=32121&region=us&timePeriod=2023&baseline=2&reform=17331) | $12,814 | $62,416    |
| Marriage penalty                                                                                                                                                                           | -$6,210 | -$1,356    |

We can also examine the “shape” of the reform by [varying the head’s earnings](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=17331&region=us&timePeriod=2023&baseline=2&household=32055), holding the spouse’s earnings constant at $20,000.

Under current law (gray), the head starts on the “plateau” of the EITC due to their spouse’s earnings. As they earn more, they get no additional EITC, and then it phases out. In the reform (blue), their spouse’s EITC is constant, and their own EITC stacks atop it until it fully phases around $59,000 earnings. When the head earns $80,000, they hit the $100,000 AGI cap, and both the head and spouse lose their EITC, creating a [cliff](https://legacy.policyengine.org/us/blog/how-would-reforms-affect-cliffs).

![](https://cdn-images-1.medium.com/max/3040/0*0EhFGZyfMcDJ5bi5)

The difference between these lines indicates the net effect of the reform. For someone with two children whose spouse earns $20,000, the reform would provide the maximum benefit of $10,816 if they earn between $28,500 and $39,500.

![](https://cdn-images-1.medium.com/max/3048/0*z_QMwgr6-SHd1oU5)

## Nationwide impacts

PolicyEngine’s microsimulation model estimates budgetary and distributional impacts of policy reforms. The model runs over the Current Population Survey and is static: it does not assume any behavioral effects with respect to labor supply, marriage, child development, fertility, economic growth, or other factors. The model finds that Winship’s reform would:

- [Cost $38.2 billion in 2023](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=17331&region=us&timePeriod=2023&baseline=2)

- [Benefit 13% of the population](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=17331&region=us&timePeriod=2023&baseline=2)

- [Lower poverty by 0.7% and child poverty by 1.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=17331&region=us&timePeriod=2023&baseline=2), [disproportionately among Hispanic Americans](https://legacy.policyengine.org/us/policy?focus=policyOutput.racialPovertyImpact&reform=17331&region=us&timePeriod=2023&baseline=2)

- [Lower deep poverty by 0.4% and deep child poverty by 0.6%](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=17331&region=us&timePeriod=2023&baseline=2)

- [Lower the Gini index of income inequality by 0.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=17331&region=us&timePeriod=2023&baseline=2)

- [Increase the share of households facing cliffs by 16%](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=17331&region=us&timePeriod=2023&baseline=2)[^1]

[^1]: Winship shared with me that he intended for legislative staff to shift the cliff to a phase-out.

[Households in the fifth income decile](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=17331&region=us&timePeriod=2023&baseline=2) would gain the largest share of their income, at 1.4%.

![](https://cdn-images-1.medium.com/max/3200/0*dt4R1nm9QxO11v28)

[The reform would benefit 13% of Americans](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=17331&region=us&timePeriod=2023&baseline=2), and 8% of Americans would see their net income rise at least 5% (dark green). Gains are most concentrated in the fifth income decile, 29% of whom would benefit.

![](https://cdn-images-1.medium.com/max/3200/0*gSnAHg8M-S9Hxhv1)

## Differences from Winship’s initial (now revised) estimate

When Winship first released his blog post, he estimated that the reform would cost $155 billion from 2024 to 2033, citing his colleague Bodi Yang. Yang produced this estimate in a [notebook](https://github.com/bodiyang/EITC-reform/blob/cbd79625b2fad708b8dbfc8768bcc73135ec1007/eitc_reform.ipynb) that estimated a $13.2 billion cost in 2023, allowing for a direct comparison to PolicyEngine, which currently estimates impacts in 2023 only.[^2] After we successfully investigated the discrepancy between this figure and our higher one, he revised the post and [credited us](https://twitter.com/swinshi/status/1678746851330105345) for the research. We found the issue subtle and the case study instructive.

[^2]: Winship and Yang did not report distributional impacts.

To produce this cost estimate, Winship ran the open source Tax-Calculator microsimulation model over the IRS Public Use File (PUF). As a sample of tax returns, analysts generally regard the PUF as a more accurate source of income data than the CPS — and we are currently [incorporating that information into our data](https://legacy.policyengine.org/us/blog/enhancing-the-current-population-survey-for-policy-analysis). However, the PUF lacks information on each spouse’s earnings, since filers only need to report the combined total on tax forms. To fill this gap, the Tax-Calculator project determines the average split of income between filer and spouse from the CPS, and applies that equally to PUF records.

PolicyEngine instead uses the CPS directly, where respondents report the income of each person separately. As a result, we capture the diversity of couples with respect to spousal earnings splits. Because this reform disproportionately affects those with large earnings differences between spouses, this difference is material. We believe our $38 billion estimate is more accurate, because it uses income splits directly from the Current Population Survey (CPS).

We shared our findings with Winship the day he released the report, and the next day he corrected it to use the Tax-Calculator CPS data, crediting our find. Winship now reports a $395 billion cost from 2024 to 2033, and Yang’s notebook shows a $43 billion cost in 2023.

This instance taught three lessons in our view:

1. **Open source models facilitate better policy analysis.** We were only able to diagnose the discrepancy because the [Tax-Calculator](https://github.com/PSLmodels/Tax-Calculator/blob/master/taxcalc/calcfunctions.py#L2327) and [Tax-Data](https://github.com/PSLmodels/taxdata/blob/master/taxdata/puf/finalprep.py#L219) code are publicly available on GitHub, as was AEI analyst Bodi Yang’s [code](https://github.com/bodiyang/EITC-reform/tree/main) that produced the estimates. Those who have identified opportunities to improve our own open source software have improved our policy analysis as well.

1. **The Current Population Survey outperforms the IRS Public Use File for some policy questions.** We use the CPS to capture personal relationships within a household, benefit receipt, poverty, and other factors absent from the sample of tax returns in the IRS Public Use File. This comes at a cost: the CPS truncates income more than the PUF, has more measurement error, and lacks some characteristics like specific deductions. We will address those deficiencies by [integrating the datasets](https://legacy.policyengine.org/us/blog/enhancing-the-current-population-survey-for-policy-analysis) later this year, but in the meantime, this analysis revealed a particular research question where the CPS can outperform the PUF.

1. **Stochastic imputations produce more realistic data.** If Tax-Data applied a stochastic technique, such as [quantile regression](https://towardsdatascience.com/quantile-regression-from-linear-models-to-trees-to-deep-learning-af3738b527c3), it would have produced greater spread of the spousal earnings share, compared to the constant approach. When we integrate PUF information into the CPS, we will do so using the [survey-enhance](https://github.com/PolicyEngine/survey-enhance) software package we developed to combine the accuracy of machine learning with the stochasticity of quantile regression ([here’s our working paper](https://github.com/PolicyEngine/survey-enhance/blob/main/docs/paper/project_paper.pdf)).

Scott Winship’s EITC reform proposal would directionally achieve its goal of reducing marriage penalties — even shifting some into marriage bonuses — though we have yet to estimate the aggregate impact on marriage incentives. It would also cost about $40 billion in 2023, reduce poverty and inequality, and make cliffs more prevalent.

We’re grateful to Winship and Yang for their collaborative spirit in identifying and resolving a subtle data issue that resulted in significant deviations across datasets, and look forward to further collaborations with open source models to improve the quality and reproducibility of policy analysis.



---

---
# Dive Into New Mexico's Income Tax Analysis on PolicyEngine
Slug: new-mexico-income-tax-launch
Date: 2023-08-02 16:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, us-nm, featured, policy
Description: Expanding our tax calculator and reform simulator capabilities to the Land of Enchantment.

---

_We’re grateful to the [**Gerald Huff Fund for Humanity**](https://fundforhumanity.org/), which funded the development of this PolicyEngine feature and report._

Today we’ve added New Mexico income taxes to PolicyEngine, enabling any New Mexican to estimate their own income taxes, as well as to design a state tax policy reform and see how it affects their household and the state overall. Here we describe New Mexico’s tax system and show it in action.

## New Mexico’s income tax

New Mexico uses a progressive tax system on individual income, meaning the tax rate increases with higher income, peaking at 5.9%. To calculate this rate, New Mexico subtracts certain deductions and exemptions from gross income, such as for dependents, medical expenses, Social Security benefits, low- and middle-income earners, blind and aged filers, and people who are 100 years or older. New Mexico additionally follows the federal rules for standard and itemized deductions.

New Mexico also provides several rebates and refundable income tax credits:

- **Earned Income Tax Credit:** 25% of the federal EITC, also including filers age 18–24 without children

- **Child and Dependent Care Credit:** Up to 40% of the federal CDCC

- **Child Tax Credit:** Up to $600 per child

- **Unreimbursed Medical Care Expense Credit:** Up to $2,800 per filer

- **Low income comprehensive tax rebate:** Up to $730 per filer

- **Property tax rebate:** Up to $250 per filer

- **Rebates for 2021 only:** Up to $2,500 per filer ($500 main, $1,000 additional, $1,000 supplemental)

PolicyEngine now models these rules from 2021 to 2023 (as available).

## Example household

To illustrate the New Mexico income tax, consider a single parent with two children, paying $1,000 per month in rent and $500 per month in childcare. If they earn $30,000, they will pay no state income tax and [receive $2,127 from four refundable tax credits](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=33113).

![](https://cdn-images-1.medium.com/max/2948/0*GfIZU3Qdmhw82mfM)

This filer would have negative [net state tax liability](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=33113) if they earn $50,000 or less.

![](https://cdn-images-1.medium.com/max/3104/0*l58k4e3xc5HUKbBZ)

To show the effect of the state’s income taxes on marginal tax rates, we can abolish New Mexico income taxes (separately as before refundable credits and refundable credits) and swap the baseline and reform. From there, view the [marginal tax rate chart](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&household=33113&region=us&timePeriod=2023&baseline=22176&reform=2) and select _Difference_.

![](https://cdn-images-1.medium.com/max/3076/0*wC8StujJOgS34Kj4)

As the filer earns up to $15,000 or so, their state tax credits and rebates phase in, reducing their marginal tax rate by about 10 percentage points. As they phase out up to $55,000 income, the state creates additional marginal tax rates of 10 to 15 percentage points, before it stabilizes around the statutory rate of 5 to 6 percent.

## Aggregate impact of New Mexico state income taxes

Simulating over the 2021 Current Population Survey, and reversing the abolition of New Mexico taxes, we can estimate the impact of New Mexico’s state income taxes. PolicyEngine estimates that the full system:

- [Raises $1.3 billion per year](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=2&region=nm&timePeriod=2023&baseline=22000)

- [Benefits 41% of New Mexicans](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&household=32970&region=nm&timePeriod=2023&baseline=21992&reform=2), including 96% of those in the bottom income decile and 0% in the top income decile

- Lowers the Gini index of [income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&household=32970&region=nm&timePeriod=2023&baseline=21992&reform=2) by 3.6%

- Has no discernible impact on [poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=2&region=nm&timePeriod=2023&baseline=22000) or [cliffs](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=2&region=nm&timePeriod=2023&baseline=22000)

![](https://cdn-images-1.medium.com/max/3064/1*mT4JTaCi2c6PT1eIG69epg.png)

These estimates may not align with official government figures, given inaccuracies and gaps in the Current Population Survey. For instance, the CPS does not capture incomes above $1 million, which could deflate tax revenues, though it also does not capture rent or property tax, which could work in the opposite direction via New Mexico’s property tax rebate. We are currently working to [fill these gaps with modern data analytics](https://legacy.policyengine.org/us/blog/enhancing-the-current-population-survey-for-policy-analysis).

## Try it out

Delve into the updated tax policies in New Mexico on PolicyEngine and discover how these changes could alter your tax situation or impact the wider community. Our dedicated team constantly improves the platform to provide the most comprehensive tool for tax policy analysis. Don’t miss out on future updates and novel features!

And remember, PolicyEngine is completely free and open source. That means you can easily share your findings with others or even contribute to our project. We encourage you to share your insights, spark discussions, or give feedback on your experience. Your participation helps make PolicyEngine even better. Let’s work together to make tax policy understanding accessible to all!



---

---
# Repealing the Universal Credit two-child limit
Slug: repealing_the_two_child_limit
Date: 2023-08-07 16:00:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: How removing the limit of some benefits to two children would affect the UK in 2023.

---

_[See the full, customisable impacts on PolicyEngine
here.](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=18304&region=uk&timePeriod=2023&baseline=1)_

## Summary

Introduced in 2017, the two-child limit in Universal Credit restricted
parents from receiving financial support for more than two children
(with children born before 2017 exempt). Using the PolicyEngine
microsimulation model, we estimate that [repealing it would cost £1.8
billion in
2023](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=18304&region=uk&timePeriod=2023&baseline=1),
rising to £2.8 billion in 2025 as non-exempt age cohorts replace exempt
children. The repeal would also lower absolute child poverty before
housing costs by 310,000 this year.

While the Cameron-led Conservative government introduced the two-child
limit, last month, Labour Party leader Sir Keir Starmer [confirmed that
a Labour government would keep the
policy](https://www.theguardian.com/politics/2023/jul/16/labour-keep-two-child-benefit-cap-says-keir-starmer)
due to the cost of repealing it.

In this analysis, we examine how the policy currently affects
households, and use PolicyEngine to estimate the distributional and
poverty impacts of both full and partial repeals proposed by the Child
Poverty Action Group and the Fabian Society. We also attempt to
reproduce claims made using other microsimulation models. The
[open-source code powering the custom analyses in this report can be
found
here](https://gist.github.com/nikhilwoodruff/447d86032ff481bdeb1e35aeeb3ea18c).

[**_See how repealing the two-child limit would affect your household
here._**](https://legacy.policyengine.org/uk/household?focus=intro&reform=7226&region=uk&timePeriod=2023&baseline=1)

# How the policy affects households

Households claiming Universal Credit, or the legacy Child Tax Credit,
currently do not receive additional benefits for their third or
subsequent children. With benefit levels recently uprated as of April
2023, the two-child limit reduces benefits by up to £2,935 per child
(lowered with increased parental earnings as the family reduces their
Universal Credit entitlement). The cap applies regardless of whether a
household is in or out of work, but its impact changes with earnings due
to the normal Universal Credit taper.

Figure 1 shows the impact of removing the two-child limit under a range
of employment incomes for a single parent family. The gains are highest
(and equal) for families under around £30,000 in employment income,
after which point the taper rate begins to reclaim the extra benefit
value. For a single parent with 5 children, this value will not be
reduced to zero before more than £60,000 in earnings.

![A graph with numbers and lines Description automatically
generated](/images/posts/repealing_the_two_child_limit/hh_impact.png)

_Figure 1: the impact of removing the UC child limit on net income for a
single parent by number of children and employment income. Note: this
does not incorporate housing costs, which would extend the phase-out
region to the right._

## Repealing the cap

The most straightforward way to repeal the cap is to remove it entirely,
at a cost of £1.8bn in 2023. [^1] This net cost rises over time due to
age cohort transitions: with each year, the minimum age required to be
exempt under the 2017 transitional protection rule increases.[^2]

Under a full abolition, we estimate that the number of children in
absolute poverty before housing costs would fall by 255,000 in 2023
(relative, after housing costs child poverty would fall by 162,000). The
overall absolute, before housing costs poverty rate for all individuals
would fall by 0.7 percentage points, bringing just under 450,000 people
out of absolute poverty.

Table 1 shows a range of other estimates made by the Child Poverty
Action Group using the UKMOD microsimulation model, and PolicyEngine's
replications for comparison. The appendix contains more details about
the reasons PolicyEngine's microsimulation modelling differs from other
estimates.

| Estimate                                                      | CPAG/UKMOD | PolicyEngine | Difference | Relative |
| ------------------------------------------------------------- | ---------- | ------------ | ---------- | -------- |
| Net cost                                                      | £1.3bn     | £1.8bn       | +£500m     | +38%     |
| Child poverty reduction (relative, AHC)                       | 250,000    | 162,000      | -88,000    | -35%     |
| Children in affected households                               | 1,500,000  | 1,780,000    | +280,000   | +19%     |
| Children benefitting but remaining in poverty (relative, AHC) | 850,000    | 1,320,000    | +470,000   | +55%     |

_Table 1: comparisons between CPAG's UKMOD-based modelling results and
PolicyEngine's replications_ _for 2023._

## Alternative repeal methods

The Fabian Society's 2021 report _"Going with the grain"_ proposes
instead repealing the two-child limit for families with a parent who
meets one of the following conditions:

- Having employment or self-employment income

- Receiving disability benefits

- Having a child aged two or under

We estimate this partial abolition would cost £1.3 billion in 2023,
saving £500m compared to the full repeal. The Fabian Society modelling,
based on the IPPR tax-transfer model, projected that the number of
households hit by the two-child limit would fall by 94% from 790,000 to
75,000. This projection assumes a full roll-out of the policy as it
would be in 2035, where the transitional protection rule does not occur.

PolicyEngine estimates in 2023 that 333,000 households are affected by
the two-child limit (close to [estimates by the House of Commons Library
in April 2021 that 317,500 families were
affected](https://commonslibrary.parliament.uk/research-briefings/cbp-9301/)),
and that this would fall by 302,000 to 31,000 (a reduction of 93%, close
to the Fabian Society estimate).

## Conclusion

PolicyEngine's modelling largely aligns with the findings from other
microsimulation models but finds around 30% lower net costs and poverty
impacts than CPAG.

Funding proposals also feature in the discussion around the two-child
limit. Tom Clark, fellow at the Joseph Rowntree Foundation, [pointed to
a 1p increase in the higher rate of income tax as a possible
option](https://twitter.com/prospect_clark/status/1680875250542575618?s=20).
Given our higher net cost estimate for the two-child limit repeal, we
estimate this would leave £470m deficit (distributional impacts shown in
Figure 2).

![A graph of a graph showing the amount of income decile Description
automatically generated](/images/posts/repealing_the_two_child_limit/decile_chart.png)

_Figure 2: [the distributional impacts of funding the two-child limit
repeal with a 1p higher rate
increase.](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileRelativeImpact&reform=18067&region=uk&timePeriod=2023&baseline=1)_

PolicyEngine's microsimulation modelling is completely open-source. [See
the full analysis for the repeal on PolicyEngine
here.](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileRelativeImpact&reform=7226&region=uk&timePeriod=2023&baseline=1)
If you have feedback or questions on the results in this report, please
do [get in touch](mailto:hello@policyengine.org).

## Appendix: reconciling administrative and survey data

When first estimating the impacts of this reform, we used our Family Resources Survey-based
microdata and reached impacts of lower magnitude. However,
administrative statistics suggested that the true impacts may in fact be
larger, so we extended our data enhancement process to repair the
specific biases remaining present in the FRS under the guidance of the
administrative statistics.

Microsimulation models based on survey microdata often reach estimates
differing from administrative data, due to sampling or measurement bias
in the data collection process. PolicyEngine applies a calibration
process to adjust for this as much as possible by both imputing missing
income data and reweighting households to repair consistency with
administrative totals.

To illustrate, take the following example (based on completely
hypothetical characteristics).

| Household               | Total income | Original weight | Calibrated weight |
| ----------------------- | ------------ | --------------- | ----------------- |
| High-earner             | £80,000      | 2m              | 5m                |
| Low-earner              | £25,000      | 25m             | 22m               |
| Original survey total   | £785bn       | 27m             | 27m               |
| Administrative total    | £950bn       | 27m             |                   |
| Calibrated survey total | £950bn       | 27m             |                   |

By adjusting survey weights, we can shift the distributions of survey
variables to reconcile them with more trusted administrative data. This
requires collecting as many administrative statistics as possible, and
calibrating as closely as possible to them all, together. In the example
above, it was possible to match exactly, but this often isn't possible
in practice because we are operating on a survey, and not a census.

A key learning point in this report was the government's [administrative
statistics on households affected by the two-child
limit](https://www.gov.uk/government/statistics/universal-credit-and-child-tax-credit-claimants-statistics-related-to-the-policy-to-provide-support-for-a-maximum-of-2-children-april-2023/universal-credit-and-child-tax-credit-claimants-statistics-related-to-the-policy-to-provide-support-for-a-maximum-of-two-children-april-2023).
Using benefit administrative databases, the Department for Work and
Pensions estimated that in April 2023 around 1.5 million children lived
in households meeting two conditions:

- The household claims Universal Credit or the Child Tax Credit.

- The household does not receive a child element for at least one
  child.

Our initial model estimate was lower than this (around £1.3m children),
largely due to biases in the Family Resources Survey not fully countered
by our data enhancement process (although we included child counts and
Universal Credit caseloads in our calibration function, we did not
include this specific intersection).

To correct this underestimate, we recalibrated the survey microdata,
applying an extra penalty to the algorithm for deviating from:

- The number of households affected by the UC and CTC two-child
  limits, respectively.

- The number of children living in UC- and CTC-claiming households
  with 3, 4, and 5-plus children, respectively.

Figure 3 shows how this process operates for the first of these
parameters. Note that PolicyEngine still carries out this process for
the other 2,000+ statistics we target, ensuring that the model weights
do not over-calibrate towards this new set of statistical targets.

![A graph of a graph Description automatically
generated](/images/posts/repealing_the_two_child_limit/calibration.png)

_Figure 3: An example of PolicyEngine's calibration process, in which
survey weights are adjusted to shift the FRS projection of UC-claiming,
child limit-affected households towards the administrative estimate._

PolicyEngine now reproduces this 1.5m statistic. However, what we
subsequently found suggests that the 1.5m figure is an underestimate of
the true number of children affected by the reform. Because the
administrative data does not include households brought into eligibility
by reforms, it cannot include households who are not currently eligible
for Universal Credit but would be under an abolition of the two-child
limit.[^3] These households are represented by points on the diagonal
slope in Figure 1.

We estimate 200,000 children fall into this category, bringing the
number of children living in households affected by the two-child limit
to 1.7 million.

[^1]:
    Our cost estimate of £1.8bn is 38% higher than the widely-reported
    £1.3bn [estimate by the Child Poverty Action
    Group](https://cpag.org.uk/sites/default/files/files/policypost/CPAG_Budget_Submission_March_2023.pdf),
    drawn from the UKMOD microsimulation model. PolicyEngine [applies
    machine learning-based algorithms to survey
    microdata](https://policyengine.org/uk/research/how-machine-learning-tools-make-policyengine-more-accurate)
    to counter measurement and sampling bias present in the input data,
    which could explain some of the disparity.

[^2]:
    For example, in 2019 only children aged below two could be
    affected. This age of exemption increases until 2035, at which point
    no children can be exempt under the transitional protection rule.

[^3]:
    Administrative data might in practice include a small number of
    these households, because households whose income fluctuations mean
    they move along the edge of entitlement might stay on administrative
    databases.



---

---
# New King's College London research uses PolicyEngine
Slug: citizens-economic-council
Date: 2023-11-04 09:00:00
Authors: Nikhil Woodruff
Tags: uk, impact
Description: A ‘Citizens' Economic Council' explores PolicyEngine-scored tax-benefit impacts.

---

Findings from a new deliberative public engagement project, [published](https://citizensecon.org.uk/project-report) this week by King’s College London and Ipsos, used PolicyEngine’s open-source modelling to examine public preferences for tax-benefit policymaking. Entitled the _[Citizens’ Economic Council on the Cost of Living](https://citizensecon.org.uk)_, the project was led by Dr Christopher Holmes and sought to understand the public’s answer to “_how the UK government should respond to the cost-of-living crisis through fiscal policy?”_. This project followed a previous iteration of the _Citizens’ Economic Council_ focussed on monetary policy

Guided by an advisory board of 18 experts in economic policymaking and deliberative research, the project recruited 39 UK citizens and, over six three-hour sessions involving economic background guidance from expert speakers, explored their views on a ‘menu of options’ for fiscal policy reforms.

![Advisory board](/images/posts/citizens-economic-council/advisory-board.png)
_See the full advisory board [here](https://citizensecon.org.uk/about-us)._

A key focus of the project was on the ability of deliberative engagement to understand how the public views benefits and tradeoffs of individual policy choices when combined together, rather than individual policy provisions on their own. From the report:

_“The project team worked with PolicyEngine in order to develop two contrasting policy package options… this budget-equivalence meant that **participants faced a trade-off** in terms of how the costs and benefits of each policy package were distributed amongst UK households”_

PolicyEngine worked directly with the project team to draw the budget-equivalent policy options presented to the participants, with illustrative impacts both at the macro level and on individual households.

_“The policy modelling provided by Policy Engine was a **key strength** of the project because, in the two policy scenarios it was used for, it gave very clear ‘stakes’ to the hypothetical policy decisions that participants were being asked to make. **They made the trade-offs self-evident and unavoidable.**”_

For the project, PolicyEngine also created an interactive, simplified tool for participants to try their own variations of the policy packages and see how they’d affect the UK and a set of example households. This tool is freely accessible for everyone on the project website [here](https://citizensecon.org.uk/policymodelling) and embedded below.

You can read the full report by [King’s College London](https://citizensecon.org.uk/project-report) here.

[Interactive: cec]



---

---
# Autumn Statement 2023 tax-benefit reforms
Slug: autumn-statement-2023
Date: 2023-11-22 17:25
Authors: Nikhil Woodruff
Tags: uk, policy
Description: Chancellor Jeremy Hunt just announced National Insurance cuts and benefit uprating. We've evaluated these reforms.

---

_See the Autumn Statement 2023 on PolicyEngine [here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=37636&region=uk&timePeriod=2024&baseline=1)._

Today, the Chancellor of the Exchequer Jeremy Hunt delivered the annual [Autumn Statement](https://assets.publishing.service.gov.uk/media/655d0a83544aea000dfb321d/Autumn_Statement_2023_Policy_Costings_-_Final.pdf), in which he announced several tax and benefit reforms, including two to National Insurance Contributions (NICs):

- Lowering the main rate of Class 1 (employee) NICs by 2p
- Lowering the main rate of Class 4 (self-employed) NICs by 1p
- Abolishing Class 2 NICs

In this post, we'll use PolicyEngine to estimate the budgetary, distributional and poverty impacts of these reforms.

_See how the combined reforms would affect your own household using our [personalised calculator](https://legacy.policyengine.org/uk/household?focus=intro&reform=37636&region=uk&timePeriod=2023&baseline=1)_

## Autumn Budget 2023 reforms

The Autumn Budget included reforms to National Insurance and benefit uprating, which we have modelled in our baseline and as a reform, respectively. It also includes other reforms absent from the PolicyEngine model, and notably omits previously speculated reforms.

### National Insurance

Chancellor Hunt announced three reforms to National Insurance:

- [Lowering Employee (Class 1) NICs by 2p](https://assets.publishing.service.gov.uk/media/655d0a83544aea000dfb321d/Autumn_Statement_2023_Policy_Costings_-_Final.pdf#page=9), from 12% to 10%, from 6 January 2024
- [Lowering Self-Employed (Class 4) NICs by 1p](https://assets.publishing.service.gov.uk/media/655d0a83544aea000dfb321d/Autumn_Statement_2023_Policy_Costings_-_Final.pdf#page=10), from 9% to 8%, from April 2024
- [Abolishing Class 2 NICs](https://assets.publishing.service.gov.uk/media/655d0a83544aea000dfb321d/Autumn_Statement_2023_Policy_Costings_-_Final.pdf#page=11), a £3.15 per week levy on self-employed people's profits above £12,570, from April 2024

This aligns in part with [The Times's report last night](https://www.thetimes.co.uk/article/national-living-wage-rise-jeremy-hunt-autumn-statement-j9f0pssxw) that Hunt would lower the main NIC rates (Class 1 and 4) by 1p; the report did not mention the Class 2 NICs.

In modelling these NIC reforms, we assume they all take effect on 1 January 2024, and evaluate their impact over calendar year 2024. In the future, we intend to model the true mid-year effective dates of policies like these.

### Benefit uprating

Hunt also announced uprating benefits by inflation. While the Times reported last night that he would do this, [Christians against Poverty](https://capuk.org/news-and-blog/what-will-be-in-the-autumn-statement) and [others](https://www.theguardian.com/society/2023/nov/15/jeremy-hunt-urged-not-to-use-sharp-fall-in-inflation-to-squeeze-benefits) had previously reported that they may rise by less. Historically, the government has often but not always uprated benefits with inflation.

Specifically, the State Pension will rise by 8.5%, the pace of earnings growth. State Pension is uprated by the triple lock, which guarantees that the payment level increases by the highest of inflation, average earnings growth, or 2.5%.

Non-State Pension benefits will rise by 6.7%, the inflation rate as measured by the difference in the Consumer Price Index (CPI) from September 2022 to September 2023.

In its [Autumn Statement 2023 Policy Costings document](https://assets.publishing.service.gov.uk/media/655d0a83544aea000dfb321d/Autumn_Statement_2023_Policy_Costings_-_Final.pdf#page=64), HM Treasury defines its _Default indexation assumed in the baseline_ as above. Since HM Treasury treats these announcements as following defaults rather than reforms, we follow suit and have only updated the baseline.

Compared to a counterfactual where benefits are not uprated at all, we estimate that this set of upratings will [cost £5.9 billion in 2024](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&timePeriod=2024&region=uk&reform=1&baseline=37721).

### Other reforms

Hunt also announced a number of other reforms not modelled in PolicyEngine, including a freeze on alcohol duty, additional business tax breaks, investment in AI and manufacturing, and a rise in the minimum wage.

He notably did _not_ announce reforms that outlets had previously reported he was considering, such as lowering the basic rate of Income Tax from 20p to 19p ([the Financial Times](https://www.ft.com/content/aafea716-30d5-4518-98fe-169f6995173e)) or cutting Stamp Duty and Inheritance tax ([The Times](https://www.thetimes.co.uk/article/autumn-statement-2023-predictions-jeremy-hunt-budget-tax-cuts-03sms6x82)).

## Household impacts of NIC cuts

For a [single person with only employment income](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=37636&region=uk&timePeriod=2023&baseline=1&household=32608), this reform produces a benefit if they earn at least £12,570. It would produce the maximum benefit of £377 if they earn at least £50,500.

![Figure 1: Impact of cutting 2p from NI rates on a single person](https://user-images.githubusercontent.com/6076111/285001945-5d30d660-75c5-4fcd-9651-9b2fccab300a.png)

These reforms lower marginal tax rates for individuals earning within that region by 2 percentage points.

![Figure 2: Impact of cutting 2p from NI rates on a single person's marginal tax rates](https://user-images.githubusercontent.com/6076111/285002391-620c0fa8-7a39-4bd5-a68f-c0afa987d029.png)

_See how the National Insurance cuts would affect your own household using our [personalised calculator](https://legacy.policyengine.org/uk/household?focus=intro&reform=37636&region=uk&timePeriod=2023&baseline=1)._

## Societal impact of NIC cuts

Applying the PolicyEngine microsimulation model, we can estimate the impact of these reforms on the UK's budget, distributional outcomes, and poverty. We assume the NIC reforms take effect on 1 January 2024, and evaluate their impact over calendar year 2024.

### Budgetary impacts

Our microsimulation model projects that this NI cut will [cost £10.5 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=37636&region=uk&timePeriod=2024&baseline=1) in 2024.

Our estimates exceed those from HM Treasury by about 12%, disproportionately due to Class 4 NICs. This largely results from our static model, compared to HM Treasury's behavioural responses, which assume that earnings will rise in response to lower tax rates. However, unlike HM Treasury, we also model the impact on benefits, which lowers our cost estimate: as benefits are calculated on post-tax income, tax cuts reduce benefits payments.

| Reform                             | HM Treasury | PolicyEngine | Relative difference | PolicyEngine link                                                                                                                  |
| ---------------------------------- | ----------- | ------------ | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| Lower Class 1 NICs from 12% to 10% | 8.72        | 9.69         | 11.2%               | [#28973](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=28973&region=uk&timePeriod=2024&baseline=1) |
| Lower Class 4 NICs from 9% to 8%   | 0.35        | 0.44         | 26.9%               | [#37642](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=37642&region=uk&timePeriod=2024&baseline=1) |
| Abolish Class 2 NICs               | 0.38        | 0.41         | 8.8%                | [#37665](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=37665&region=uk&timePeriod=2024&baseline=1) |
| Total                              | 9.44        | 10.54        | 11.7%               | [#37636](https://legacy.policyengine.org/uk/policy?focus=policyOutput.netIncome&reform=37636&region=uk&timePeriod=2024&baseline=1) |

### Distributional impacts

Households in the bottom income decile would [gain an average of £12](https://legacy.policyengine.org/uk/policy?focus=policyOutput.decileAverageImpact&reform=37636&region=uk&timePeriod=2024&baseline=1), while those in the top decile would gain an average of £1,067.

![Figure 3: Relative impact by income decile of Autumn Budget NI reforms](https://user-images.githubusercontent.com/6076111/284982468-181d24ac-ff5c-498b-95eb-35a1311af7bb.png)

As a result of the reform, [66% of the population](https://legacy.policyengine.org/uk/policy?focus=policyOutput.intraDecileImpact&reform=37636&region=uk&timePeriod=2024&baseline=1) would see their household net income rise, disproportionately those in higher-income households: around 90% of the top three deciles benefit, compared to around 25% of the bottom three.

![Figure 4: Percentage of individuals gaining from Autumn Budget NI reforms, by income decile](https://user-images.githubusercontent.com/6076111/284982567-35937f5f-a82a-44e0-8a11-fb651413519b.png)

The reform has a [small, ambiguous effect on income inequality](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=37636&region=uk&timePeriod=2024&baseline=1): while the Gini index rises by 0.4%, the top 1% share of income falls by 0.4%. It [does not affect cliffs](https://legacy.policyengine.org/uk/policy?focus=policyOutput.cliffImpact&reform=37636&region=uk&timePeriod=2024&baseline=1). Absolute, before-housing-costs [poverty falls by 0.5%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact&reform=37636&region=uk&timePeriod=2024&baseline=1), or around 60,000 individuals.

## Conclusion

In summary, PolicyEngine estimates the Autumn Budget 2023's National Insurance reforms will cost £10.5 billion in 2024, and will benefit two in three Britons, disproportionately those in higher-income households. We project a small, ambiguous effect on income inequality, and a 0.5% poverty reduction. We invite readers to use our [personalised calculator](https://legacy.policyengine.org/uk/household?focus=intro&reform=37636&region=uk&timePeriod=2023&baseline=1) to estimate the impact on their own household, and to follow our work for more analyses of current tax and benefit policies.



---

---
# Autumn 2023 model calibration update
Slug: uk-calibration-2023-q4
Date: 2023-12-04 09:00:00
Authors: Nikhil Woodruff
Tags: uk, technical
Description: Evaluating PolicyEngine's model performance with the latest official statistics.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "PolicyEngine's free and open-source microsimulation model estimates the budgetary, distributional and poverty impacts of UK tax and benefit reforms by simulating the full details of policy over a large representative dataset of UK households. In this post, we'll provide a brief overview of how PolicyEngine UK's microsimulation model works, and an update on how we maintain and validate the model's accuracy.\n",
    "\n",
    "## Model overview\n",
    "\n",
    "PolicyEngine UK is a *static* microsimulation model- it does not (yet) incorporate behavioural responses like labour supply reactions to policy changes. Instead, we assume that households do not change their behaviour in response to policy changes, and that the only way that policy changes affect households is through their direct effects on household incomes.\n",
    "\n",
    "To estimate the direct effects of policy changes, we apply the actual policy rules as specified in legislation to each of a large (tens of thousands) survey of UK households. We can then change the rules, and see how the totals of different variables change. For example, we could change the personal tax allowance from £12,570 to £15,000 and aggregate the tax payments before and after the policy change to estimate how much more tax is collected from the households in our survey.\n",
    "\n",
    "The model is written in Python, and you can follow all of our real-time development [on GitHub](https://github.com/PolicyEngine/PolicyEngine-UK). Other models exists maintained by other organisations which use the same microsimulation approach: the IFS' TAXBEN, UKMOD at the University of Essex, and, the IPPR model, and internal models at HMRC and DWP. However, only PolicyEngine UK and UKMOD publish their policy implementation details and validation statistics.\n",
    "\n",
    "## How PolicyEngine differs from other models\n",
    "\n",
    "PolicyEngine's core approach to estimate policy impacts is the same as other static microsimulation models. However, we use a novel data science-based approach to improve the accuracy of the model's outputs significantly compared to other models (where we have been able to compare).\n",
    "\n",
    "Microsimulation models are widely used by researchers to estimate policy impacts (questions for which we don't know the answer). But when we attempt to validate the models by asking them questions for which we do know the answer (for example, total Income Tax revenue in 2021), we often find that the model answers are significantly different from the ground truth. This problem is large and *exists in every microsimulation model that publishes details of attempts to measure it*.\n",
    "\n",
    "Assuming that the policy implementations in the model are correct (while the law is complex and we cannot test every possible household, we publish and meet hundreds of automated tests on every version update), the most likely explanation for this is that the model's survey data is not representative of the population: the model's outputs are only as good as the data that we feed into it.\n",
    "\n",
    "We have adopted an approach to reduce this problem by using machine learning techniques to improve the survey's accuracy by using data from other trusted sources: OBR, HMRC, DWP, ONS and others. We essentially do the following:\n",
    "\n",
    "1. Take the initial survey data\n",
    "2. Add synthetic households (using other microdata) and previous-year households with zero weight\n",
    "3. Collect trusted external statistics describing tax-benefit and demographic properties of the UK\n",
    "4. Train a machine learning model adjust the weights of the survey to best fit those external statistics\n",
    "\n",
    "The resulting weighted survey powers PolicyEngine's impact estimates.\n",
    "\n",
    "## Validation\n",
    "\n",
    "PolicyEngine meets tax-benefit and demographic totals closely, and estimates program impacts over a five-year horizon. For example, the chart below shows our projections for three key benefits: Child Benefit, Housing Benefit and Universal Credit.\n",
    "\n",
    "*Figure 1: PolicyEngine UK's projections for three key benefits*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "alignmentgroup": "True",
         "hovertemplate": "time_period=2023<br>name=%{x}<br>value=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "2023",
         "marker": {
          "color": "rgb(208, 225, 242)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2023",
         "offsetgroup": "2023",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "13",
          "14",
          "51"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "xaxis": "x",
         "y": [
          13383145472,
          13913753600,
          50906255360
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "time_period=2024<br>name=%{x}<br>value=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "2024",
         "marker": {
          "color": "rgb(148, 196, 223)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2024",
         "offsetgroup": "2024",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "14",
          "14",
          "60"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "xaxis": "x",
         "y": [
          13624675328,
          14093811712,
          60263690240
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "time_period=2025<br>name=%{x}<br>value=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "2025",
         "marker": {
          "color": "rgb(74, 152, 201)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2025",
         "offsetgroup": "2025",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "13",
          "12",
          "74"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "xaxis": "x",
         "y": [
          13181886464,
          11833491456,
          74151739392
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "time_period=2026<br>name=%{x}<br>value=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "2026",
         "marker": {
          "color": "rgb(23, 100, 171)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2026",
         "offsetgroup": "2026",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "13",
          "11",
          "85"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "xaxis": "x",
         "y": [
          12733571072,
          10747688960,
          84828307456
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "time_period=2027<br>name=%{x}<br>value=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "2027",
         "marker": {
          "color": "rgb(8, 48, 107)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2027",
         "offsetgroup": "2027",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "13",
          "11",
          "85"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "xaxis": "x",
         "y": [
          12897866752,
          11162318848,
          84850057216
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "barmode": "group",
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.2,
          "sizey": 0.2,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Calendar year"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "ticktext": [
          "Child Benefit",
          "Housing Benefit",
          "Universal Credit"
         ],
         "tickvals": [
          "Child Benefit budgetary impact (UK)",
          "Housing Benefit budgetary impact (GB)",
          "Universal Credit budgetary impact (GB)"
         ],
         "title": {
          "text": ""
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Budgetary impact (£)"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import plotly.express as px\n",
    "from policyengine_core.charts import *\n",
    "from plotly.express.colors import sample_colorscale\n",
    "\n",
    "training_log_cps = pd.read_csv(\n",
    "    \"/Users/nikhil/policyengine/policyengine-uk/calibration_log_cps.csv.gz\"\n",
    ")\n",
    "\n",
    "chosen_metrics = [\n",
    "    \"Child Benefit budgetary impact (UK)\",\n",
    "    \"Housing Benefit budgetary impact (GB)\",\n",
    "    \"Universal Credit budgetary impact (GB)\",\n",
    "]\n",
    "\n",
    "training_log_cps[\"Source dataset\"] = \"Enhanced FRS\"\n",
    "\n",
    "training_log = training_log_cps\n",
    "training_log_targets = training_log.copy()\n",
    "training_log_targets[\"value\"] = training_log_targets[\"target\"]\n",
    "training_log_targets[\"Source dataset\"] = \"Official\"\n",
    "training_log = pd.concat([training_log, training_log_targets])\n",
    "\n",
    "last_value_df = (\n",
    "    training_log[training_log.name.isin(chosen_metrics)]\n",
    "    .groupby([\"Source dataset\", \"time_period\", \"name\"])\n",
    "    .last()\n",
    "    .reset_index()[[\"name\", \"value\", \"Source dataset\", \"time_period\"]]\n",
    ")\n",
    "\n",
    "x = np.linspace(0.2, 1, 5)\n",
    "c = sample_colorscale(\"Blues\", list(x))\n",
    "\n",
    "last_value_df[\"time_period\"] = last_value_df.time_period.astype(str)\n",
    "last_value_df[\"text\"] = last_value_df[\"value\"].apply(lambda x: f\"{x/1e9:,.0f}\")\n",
    "fig = px.bar(\n",
    "    last_value_df[last_value_df[\"Source dataset\"] == \"Enhanced FRS\"],\n",
    "    y=\"value\",\n",
    "    color=\"time_period\",\n",
    "    x=\"name\",\n",
    "    barmode=\"group\",\n",
    "    text=\"text\",\n",
    ")\n",
    "\n",
    "fig = format_fig(fig)\n",
    "\n",
    "for i in range(len(fig.data)):\n",
    "    fig.data[i].marker.color = c[i]\n",
    "\n",
    "fig.update_layout(\n",
    "    legend_title=\"Calendar year\",\n",
    "    xaxis_tickvals=chosen_metrics,\n",
    "    xaxis_ticktext=[\"Child Benefit\", \"Housing Benefit\", \"Universal Credit\"],\n",
    "    xaxis_title=\"\",\n",
    "    yaxis_title=\"Budgetary impact (£)\",\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "But how does PolicyEngine align with the best estimates of the ground truth? We can compare PolicyEngine's estimates with two other sources to estimate how our data enhancement approach performs: the original survey data, and official statistics and projections from government. Shown below is, for each calendar year in the budget horizon, how the relative errors in tax-benefit-related statistical targets become better or worse. Over 80% of these targets improve.\n",
    "\n",
    "*Figure 2: Relative errors in tax-benefit-related statistical targets over the budget horizon*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.1<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.1",
         "marker": {
          "color": "rgb(208, 225, 242)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.1",
         "offsetgroup": "0.1",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-97%",
          "-97%",
          "-96%",
          "-95%",
          "-95%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.967161295679655,
          -0.9665338614596114,
          -0.9614765266017463,
          -0.9494102637212299,
          -0.9492514722153143
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.2<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.2",
         "marker": {
          "color": "rgb(186, 214, 235)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.2",
         "offsetgroup": "0.2",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-90%",
          "-93%",
          "-88%",
          "-89%",
          "-88%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.9043447421673796,
          -0.9337532953599778,
          -0.8847304521490373,
          -0.8896093752424434,
          -0.8792145712751785
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.3<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.3",
         "marker": {
          "color": "rgb(157, 201, 225)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.3",
         "offsetgroup": "0.3",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-81%",
          "-87%",
          "-81%",
          "-73%",
          "-74%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.8110603644944836,
          -0.8738339683905142,
          -0.81124316954283,
          -0.7349765689564652,
          -0.740099859529137
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.4<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.4",
         "marker": {
          "color": "rgb(121, 181, 217)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.4",
         "offsetgroup": "0.4",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-69%",
          "-73%",
          "-62%",
          "-60%",
          "-61%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.6867712887373829,
          -0.7276712410620164,
          -0.6183807519887554,
          -0.5967738509121482,
          -0.6136852889015592
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.5<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.5",
         "marker": {
          "color": "rgb(89, 162, 207)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.5",
         "offsetgroup": "0.5",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-53%",
          "-49%",
          "-42%",
          "-46%",
          "-46%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.532507788089771,
          -0.48792520537155004,
          -0.4234084965363902,
          -0.456630710766908,
          -0.4570276610369267
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.6<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.6",
         "marker": {
          "color": "rgb(61, 141, 195)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.6",
         "offsetgroup": "0.6",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-31%",
          "-35%",
          "-23%",
          "-15%",
          "-28%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.30926114209345007,
          -0.351501400264333,
          -0.22566637202479098,
          -0.15250959815339463,
          -0.27905846896201036
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.7<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.7",
         "marker": {
          "color": "rgb(37, 117, 183)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.7",
         "offsetgroup": "0.7",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "-7%",
          "-9%",
          "+16%",
          "+15%",
          "+2%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.07258991422363714,
          -0.09278470931922089,
          0.16282420521911092,
          0.15342919085323034,
          0.023917597681361376
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.8<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.8",
         "marker": {
          "color": "rgb(19, 95, 167)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.8",
         "offsetgroup": "0.8",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "+40%",
          "+35%",
          "+80%",
          "+75%",
          "+58%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.4000869790054718,
          0.3468064382617247,
          0.7978370276367839,
          0.7524222196862302,
          0.5756495132681535
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "decile=0.9<br>time_period=%{x}<br>rel_error_abs_change=%{y}<br>text=%{text}<extra></extra>",
         "legendgroup": "0.9",
         "marker": {
          "color": "rgb(8, 71, 142)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "0.9",
         "offsetgroup": "0.9",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "+145%",
          "+139%",
          "+205%",
          "+190%",
          "+154%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          1.454125352347277,
          1.3895231672651769,
          2.0456083047397895,
          1.9031989913182896,
          1.535294585914649
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "barmode": "group",
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.2,
          "sizey": 0.2,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Quantile"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "uniformtext": {
         "minsize": 8
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Calendar year"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "tickformat": "+.0%",
         "title": {
          "text": "Change in relative error"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Convert to [name, value, time_period, source]\n",
    "# source: (value at epoch=0 -> \"Original FRS\", value at epoch=last -> \"Enhanced FRS\", target at epoch=0 -> \"Official\")\n",
    "import warnings\n",
    "\n",
    "warnings.filterwarnings(\"ignore\")\n",
    "\n",
    "original_frs_values = (\n",
    "    training_log_cps[training_log_cps.epoch == 0]\n",
    "    .copy()[[\"name\", \"value\", \"time_period\"]]\n",
    "    .sort_values([\"name\", \"time_period\"])\n",
    ")\n",
    "original_frs_values[\"source\"] = \"Original FRS\"\n",
    "\n",
    "enhanced_frs_values = (\n",
    "    training_log_cps[training_log_cps.epoch == training_log_cps.epoch.max()]\n",
    "    .copy()[[\"name\", \"value\", \"time_period\"]]\n",
    "    .sort_values([\"name\", \"time_period\"])\n",
    ")\n",
    "enhanced_frs_values[\"source\"] = \"Enhanced FRS\"\n",
    "\n",
    "official_values = (\n",
    "    training_log_cps[training_log_cps.epoch == 0]\n",
    "    .copy()[[\"name\", \"target\", \"time_period\"]]\n",
    "    .sort_values([\"name\", \"time_period\"])\n",
    ")\n",
    "official_values[\"value\"] = official_values[\"target\"]\n",
    "del official_values[\"target\"]\n",
    "official_values[\"source\"] = \"Official\"\n",
    "\n",
    "enhanced_frs_values[\"error\"] = (\n",
    "    official_values[\"value\"].values - enhanced_frs_values[\"value\"].values\n",
    ")\n",
    "original_frs_values[\"error\"] = (\n",
    "    official_values[\"value\"].values - original_frs_values[\"value\"].values\n",
    ")\n",
    "enhanced_frs_values[\"abs_error\"] = np.abs(enhanced_frs_values[\"error\"].values)\n",
    "original_frs_values[\"abs_error\"] = np.abs(original_frs_values[\"error\"].values)\n",
    "enhanced_frs_values[\"rel_error\"] = (\n",
    "    enhanced_frs_values[\"error\"].values / official_values[\"value\"].values\n",
    ")\n",
    "original_frs_values[\"rel_error\"] = (\n",
    "    original_frs_values[\"error\"].values / official_values[\"value\"].values\n",
    ")\n",
    "enhanced_frs_values[\"rel_error_abs\"] = np.abs(\n",
    "    enhanced_frs_values[\"rel_error\"].values\n",
    ")\n",
    "original_frs_values[\"rel_error_abs\"] = np.abs(\n",
    "    original_frs_values[\"rel_error\"].values\n",
    ")\n",
    "\n",
    "enhanced_frs_values[\"rel_error_original\"] = original_frs_values[\n",
    "    \"rel_error_abs\"\n",
    "].values\n",
    "enhanced_frs_values[\"rel_error_abs_change\"] = (\n",
    "    enhanced_frs_values[\"rel_error_abs\"].values\n",
    "    / original_frs_values[\"rel_error_abs\"].values\n",
    "    - 1\n",
    ")\n",
    "enhanced_frs_values[\"error_abs_change\"] = (\n",
    "    enhanced_frs_values[\"abs_error\"].values\n",
    "    / original_frs_values[\"abs_error\"].values\n",
    "    - 1\n",
    ")\n",
    "\n",
    "df = enhanced_frs_values\n",
    "\n",
    "a = (\n",
    "    df[df.rel_error_original > 0.03]\n",
    "    .groupby(\"time_period\")\n",
    "    .rel_error_abs_change.quantile(\n",
    "        [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]\n",
    "    )\n",
    "    .reset_index()\n",
    ")\n",
    "a.columns = [\"time_period\", \"decile\", \"rel_error_abs_change\"]\n",
    "a[\"decile\"] = a.decile.astype(str)\n",
    "a[\"text\"] = a[\"rel_error_abs_change\"].apply(lambda x: f\"{x:+.0%}\")\n",
    "fig = (\n",
    "    px.bar(\n",
    "        a,\n",
    "        x=\"time_period\",\n",
    "        y=\"rel_error_abs_change\",\n",
    "        color=\"decile\",\n",
    "        barmode=\"group\",\n",
    "        text=\"text\",\n",
    "    )\n",
    "    .update_traces(\n",
    "        # text should always be horizontal\n",
    "        # textangle=0,\n",
    "    )\n",
    "    .update_layout(\n",
    "        uniformtext_minsize=8,\n",
    "    )\n",
    ")\n",
    "\n",
    "x = np.linspace(0.2, 1, 10)\n",
    "c = sample_colorscale(\"Blues\", list(x))\n",
    "\n",
    "fig = format_fig(fig)\n",
    "\n",
    "for i in range(len(fig.data)):\n",
    "    fig.data[i].marker.color = c[i]\n",
    "\n",
    "fig.update_layout(\n",
    "    legend_title=\"Quantile\",\n",
    "    xaxis_title=\"Calendar year\",\n",
    "    yaxis_title=\"Change in relative error\",\n",
    "    yaxis_tickformat=\"+.0%\",\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We've also made all our calibration validation results available in an interactive dashboard, which is available on GitHub [here](https://github.com/nikhilwoodruff/policyengine-uk-validation) (screenshot below). We welcome feedback or comments on our approach- feel free to [get in touch](https://legacy.policyengine.org/uk/contact).\n",
    "\n",
    "![Figure 3: PolicyEngine UK's calibration validation dashboard](https://github.com/PolicyEngine/policyengine-app/assets/35577657/c4d0e71e-cc6b-4191-aaaa-5970f4ac3cc9)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# Preliminary analysis of the Wyden-Smith Child Tax Credit expansion
Slug: wyden-smith-ctc
Date: 2024-01-11 12:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, impact, featured, child-tax-credit
Description: PolicyEngine estimates the impact of the reported compromise to expand the Child Tax Credit's refundable component.

---

Politico’s Benjamin Guggenheim [reported today](https://twitter.com/ben_guggenheim/status/1745403401695908256) that Senate Finance Committee Chair Ron Wyden (D-OR) and House Ways and Means Committee Chair Jason Smith (R-MO) are proposing a multifaceted reform to the Child Tax Credit (CTC). This report analyzes two of the three provisions of that reform: raising the maximum refundable CTC amount, and phasing in the refundable CTC with respect to the number of children. We illustrate how this affects a sample household and estimate its impact on society.

From 2023 to 2025 — in our static model assuming full take-up — we project these provisions would:

- Cost $16.4 billion, owing mostly to the more rapid phase-in rate

- Lower poverty by about 1% and child poverty by about 4%

- Benefit 6% of the population

- Lower the Gini index of income inequality by 0.2%

[**_Click here to see how the Wyden-Smith proposal would affect your own household’s 2023 taxes._**](https://legacy.policyengine.org/us/household?focus=intro&reform=44066&region=us&timePeriod=2023&baseline=2)

## How Wyden-Smith Would Reform the Child Tax Credit

The Child Tax Credit (CTC) in the United States consists of two parts: the nonrefundable Child Tax Credit and the refundable Additional Child Tax Credit (ACTC). The Tax Cuts and Jobs Act of 2017 (TCJA) established the ACTC at $1,400 and the core CTC at $2,000 per child. The ACTC is indexed to inflation, which led to its increase to $1,600 by 2023 and $1,700 in 2024. The refundable portion of the CTC (ACTC) is available to families with earnings, phasing in at a rate of 15% of earnings above a certain threshold.

Guggenheim reported that the Wyden-Smith reform includes three parts:

1. **Raising the refundable CTC amount:** The maximum ACTC would rise from $1,600 to $1,800 in 2023, from $1,700 to $1,900 in 2024, and from $1,700 to the full $2,000 in 2025, with the amount indexed to inflation thereafter.

1. **Phasing in the refundable CTC with the number of children:** Rather than a flat 15% phase-in rate, the CTC would phase in at 15% times the number of qualifying children.

1. **Allowing prior years’ income to count toward the CTC calculation:** Guggenheim did not provide further detail on this provision, nor is PolicyEngine currently equipped to model it, given we use cross-sectional survey and tax data for our projections.

As the TCJA is set to expire after 2025, including its CTC expansion provisions, it is unclear what this proposal would do beyond 2025, so we constrain our analysis to 2023–2025, and focus on 2023 for illustrative examples.

## Impact on a Household

Shortly after Guggenheim reported the reform, Sharon Parrott, President of the [Center on Budget and Policy Priorities](https://www.cbpp.org/), [tweeted an example](https://twitter.com/ParrottCBPP/status/1745497766137053289): “A mom w/ 2 kids who earns $15k wld get a $3600 #CTC in ’23, up from $1,875 under current law.” PolicyEngine reproduces that example, showing they [gain $1,725](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=44066&region=us&timePeriod=2023&baseline=2&household=39725). Rather than being partly phased in to the $3,200 ACTC ($1,600 for each of two children), the faster phase-in (30% instead of 15%) brings them all the way up to the $3,600 ACTC.

**Figure 1: Refundable Child Tax Credit with respect to earnings for a single parent of two children, under current law and the Wyden-Smith reform proposal.**

![](https://cdn-images-1.medium.com/max/2084/0*bV6_hQkfJ4Oq4TMK)

This earnings level is where nearly the peak benefit occurs for this family: if they earned $14,500, they would gain a full $1,800. They will benefit if their earnings range from $2,500 to $29,000.

**Figure 2: Impact of Wyden-Smith Child Tax Credit reform proposal on the net income of a single parent of two children.**

![](https://cdn-images-1.medium.com/max/2072/0*bO4aeUdIBSTe9cGQ)

The reform would lower the household’s marginal tax rate by 15 percentage points where the ACTC phases in faster, then raise it by 15 percentage points where it stabilizes instead of previously continuing to phase in, then raise it by 10 percentage points where it begins to interact with the non-refundable CTC.

**Figure 3: Impact of Wyden-Smith Child Tax Credit reform proposal on the marginal tax rates of a single parent of two children.**

![](https://cdn-images-1.medium.com/max/2020/0*j1z2Wmv_ShPm_jVN)

## Societal Impact

Applying our static tax-benefit microsimulation model over the 2022 Current Population Survey, we estimate that these two provisions would cost $5.1 billion in 2023, $5.5 billion in 2024, and $5.9 billion in 2024, for a total three-year cost of $16.4 billion.

Breaking this down between the provisions reveals that they amplify each other: summed separately, they total $4.1 billion, but together they cost $5.1 billion, since the faster phase-in rate goes further when the maximum is higher.

**Table 1: Cost of Wyden-Smith Child Tax Credit reform by provision and year.**

|               | **Refundable amount**                                                                                                                           | **Phase-in rate**                                                                                                                               | **Combined**                                                                                                                                    |
| ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| **2023**      | [\$0.5 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&timePeriod=2023&region=us&baseline=2&reform=44046) | [\$3.6 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44030&region=us&timePeriod=2023&baseline=2) | [\$5.1 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44066&region=us&timePeriod=2023&baseline=2) |
| **2024**      | [\$0.4 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44043&region=us&timePeriod=2024&baseline=2) | [\$4.1 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44030&region=us&timePeriod=2024&baseline=2) | [\$5.5 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44099&region=us&timePeriod=2024&baseline=2) |
| **2025**      | [\$0.6 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=43895&region=us&timePeriod=2024&baseline=2) | [\$4.1 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=44030&region=us&timePeriod=2024&baseline=2) | [\$5.9 billion](https://legacy.policyengine.org/us/policy?reform=44131&focus=policyOutput.policyBreakdown&region=us&timePeriod=2024&baseline=2) |
| **2023-2025** | \$1.5 billion                                                                                                                                   | \$11.8 billion                                                                                                                                  | \$16.4 billion                                                                                                                                  |

Households in the third income decile benefit most on both an [absolute](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=44066&region=us&timePeriod=2023&baseline=2) and [relative](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileRelativeImpact&reform=44066&region=us&timePeriod=2023&baseline=2) basis. They benefit more than lower income households who have fewer children and don’t meet the earnings requirement, and more than higher income households who take the non-refundable CTC instead.

**Figure 4: Impact of Wyden-Smith Child Tax Credit reform proposal by income decile.**

![](https://cdn-images-1.medium.com/max/2580/0*ZO7CVih4HQQ6BiN4)

These provisions [benefit 6.4% of US residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.intraDecileImpact&reform=44066&region=us&timePeriod=2023&baseline=2): 2.3% who gain at least 5% of net income, and 4.1% who gain less. Again, the prevalence of gains concentrates in the third income decile.

**Figure 5: Population share gaining from Wyden-Smith Child Tax Credit reform proposal by income decile.**

![](https://cdn-images-1.medium.com/max/2564/0*buBusyS9y4OmYCjA)

The number of people with resources below the poverty line would fall 1.3%, disproportionately [children](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact&reform=44066&region=us&timePeriod=2023&baseline=2) (4.3%), [Hispanics](https://legacy.policyengine.org/us/policy?focus=policyOutput.racialPovertyImpact&reform=44066&region=us&timePeriod=2023&baseline=2) (2.4%), and [men](https://legacy.policyengine.org/us/policy?focus=policyOutput.genderPovertyImpact&reform=44066&region=us&timePeriod=2023&baseline=2) (1.5%). The number of children in deep poverty would also [fall 0.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.deepPovertyImpact&reform=44066&region=us&timePeriod=2023&baseline=2), and the Gini index of income inequality would [fall 0.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=44066&region=us&timePeriod=2023&baseline=2).

Results are similar in 2024 and 2025, with child poverty falling by 3.8% or 3.9%, rather than 4.3%.

## Conclusion

Wyden and Smith have proposed a three-part expansion to the Child Tax Credit, of which PolicyEngine can currently model two. Firstly, it raises the maximum refundable ACTC amount incrementally from 2023 to 2025; secondly, it modifies the phase-in rate of the refundable CTC to be a function of the number of qualifying children; and thirdly, it includes a provision to allow the CTC calculation to be based on prior years’ income, a feature not currently supported.

The estimated impacts of the first two provisions on households include adjustments in the Child Tax Credit received at various income levels; for instance, a single parent of two would benefit if their earnings range from $2,500 to $29,000. These changes also influence marginal tax rates due to the modified phase-in rate of the ACTC.

From 2023 to 2025, the first two provisions would cost $16.4 billion, cut child poverty about 4%, benefit about 6% of Americans, and reduce deep poverty and income inequality. These impacts are relatively stable across the three years, and we do not project further due to the expiration of the Tax Cuts and Jobs Act after 2025.

As negotiations proceed, we will continue to develop our software platform to support a range of Child Tax Credit analyses, including those like the third provision to base the credit on prior years’ income (which also require further definition). Stay tuned and [**check out our personalized calculator**](https://legacy.policyengine.org/us/household?focus=intro&reform=44066&region=us&timePeriod=2023&baseline=2) to see how the reform would affect you.



---

---
# Spring Budget 2024 proposals
Slug: spring-budget-2024
Date: 2024-03-04 09:00:00
Authors: Anthony Volk, Nikhil Woodruff
Tags: uk, policy
Description: PolicyEngine estimates reported likely tax-benefit reforms ahead of the UK Spring Budget.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "On Wednesday, 6th March, Chancellor of the Exchequer Jeremy Hunt will present the government's 2024 Spring Budget. Ahead of the announcement, media reports speculate that the Chancellor is considering cutting the main National Insurance rate, in an extension to his previous cuts in the Autumn Statement 2023 (analysed by PolicyEngine in [this report](https://legacy.policyengine.org/uk/research/autumn-statement-2023)).\n",
    "\n",
    "In this post, we'll estimate the impacts of such a cut upon the budget, as well as upon society-wide economic outcomes. We'll also look at the impact these changes would have upon individual UK households.\n",
    "\n",
    "## Budget reform options\n",
    "\n",
    "Separate media sources identify four potential reforms that the Chancellor is considering:\n",
    "\n",
    "* Cuts to Employee (Class 1) National Insurance Contributions (NICs) by either 1p[^1] or 2p[^2]\n",
    "* A 2p cut to the basic rate of tax, lowering the rate from 20p to 18p[^3]\n",
    "\n",
    "PolicyEngine's top-level economic impact estimates follow below. In modelling these reforms, we assume each took effect on 1 January 2024 and will evaluate their impacts over calendar year 2024.\n",
    "\n",
    "[^1]:\n",
    "      [The Guardian, 2024](https://www.theguardian.com/politics/2024/mar/02/tax-and-spending-cuts-will-backfire-economists-warn-jeremy-hunt)\n",
    "[^2]:\n",
    "      [Financial Times, 2024](https://www.ft.com/content/c2d56d45-c061-4d5a-bf4f-1eddd1fa7d25)\n",
    "[^3]:\n",
    "      [Financial Times, 2024](https://www.ft.com/content/1b4f19d7-c7e5-4d16-a7c1-1c12ec0d0592)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Table 1: Potential budget reforms and their impacts*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "ename": "KeyboardInterrupt",
     "evalue": "",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mKeyboardInterrupt\u001b[0m                         Traceback (most recent call last)",
      "Cell \u001b[0;32mIn[1], line 68\u001b[0m\n\u001b[1;32m     65\u001b[0m percentages_better_off \u001b[38;5;241m=\u001b[39m []\n\u001b[1;32m     67\u001b[0m \u001b[38;5;28;01mfor\u001b[39;00m i \u001b[38;5;129;01min\u001b[39;00m \u001b[38;5;28mrange\u001b[39m(\u001b[38;5;28mlen\u001b[39m(provisions)):\n\u001b[0;32m---> 68\u001b[0m     impacts \u001b[38;5;241m=\u001b[39m \u001b[43mget_impacts\u001b[49m\u001b[43m(\u001b[49m\u001b[43mreforms\u001b[49m\u001b[43m[\u001b[49m\u001b[43mi\u001b[49m\u001b[43m]\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     69\u001b[0m     budgetary_impacts\u001b[38;5;241m.\u001b[39mappend(impacts[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mbudgetary_impact\u001b[39m\u001b[38;5;124m\"\u001b[39m])\n\u001b[1;32m     70\u001b[0m     reform_ids\u001b[38;5;241m.\u001b[39mappend(impacts[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mreform_id\u001b[39m\u001b[38;5;124m\"\u001b[39m])\n",
      "Cell \u001b[0;32mIn[1], line 37\u001b[0m, in \u001b[0;36mget_impacts\u001b[0;34m(reform_dict)\u001b[0m\n\u001b[1;32m     34\u001b[0m reform \u001b[38;5;241m=\u001b[39m Reform\u001b[38;5;241m.\u001b[39mfrom_dict(reform_dict, country_id\u001b[38;5;241m=\u001b[39m\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124muk\u001b[39m\u001b[38;5;124m\"\u001b[39m)\n\u001b[1;32m     35\u001b[0m reformed \u001b[38;5;241m=\u001b[39m Microsimulation(reform\u001b[38;5;241m=\u001b[39mreform)\n\u001b[0;32m---> 37\u001b[0m budgetary_impact \u001b[38;5;241m=\u001b[39m \u001b[43mbaseline\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mhousehold_net_income\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[38;5;241;43m2024\u001b[39;49m\u001b[43m)\u001b[49m\u001b[38;5;241m.\u001b[39msum() \u001b[38;5;241m-\u001b[39m reformed\u001b[38;5;241m.\u001b[39mcalculate(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mhousehold_net_income\u001b[39m\u001b[38;5;124m\"\u001b[39m, \u001b[38;5;241m2024\u001b[39m)\u001b[38;5;241m.\u001b[39msum()\n\u001b[1;32m     38\u001b[0m poverty_baseline \u001b[38;5;241m=\u001b[39m baseline\u001b[38;5;241m.\u001b[39mcalculate(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124min_poverty\u001b[39m\u001b[38;5;124m\"\u001b[39m, map_to\u001b[38;5;241m=\u001b[39m\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mperson\u001b[39m\u001b[38;5;124m\"\u001b[39m, period\u001b[38;5;241m=\u001b[39m\u001b[38;5;241m2024\u001b[39m)\u001b[38;5;241m.\u001b[39mmean()\n\u001b[1;32m     39\u001b[0m poverty_reform \u001b[38;5;241m=\u001b[39m reformed\u001b[38;5;241m.\u001b[39mcalculate(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124min_poverty\u001b[39m\u001b[38;5;124m\"\u001b[39m, map_to\u001b[38;5;241m=\u001b[39m\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mperson\u001b[39m\u001b[38;5;124m\"\u001b[39m, period\u001b[38;5;241m=\u001b[39m\u001b[38;5;241m2024\u001b[39m)\u001b[38;5;241m.\u001b[39mmean()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:784\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    782\u001b[0m \u001b[38;5;28;01mfor\u001b[39;00m added_variable \u001b[38;5;129;01min\u001b[39;00m adds_list:\n\u001b[1;32m    783\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m added_variable \u001b[38;5;129;01min\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mtax_benefit_system\u001b[38;5;241m.\u001b[39mvariables:\n\u001b[0;32m--> 784\u001b[0m         values \u001b[38;5;241m=\u001b[39m values \u001b[38;5;241m+\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    785\u001b[0m \u001b[43m            \u001b[49m\u001b[43madded_variable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[43mvariable\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mentity\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mkey\u001b[49m\n\u001b[1;32m    786\u001b[0m \u001b[43m        \u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    787\u001b[0m     \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[1;32m    788\u001b[0m         \u001b[38;5;28;01mtry\u001b[39;00m:\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:849\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    847\u001b[0m     array \u001b[38;5;241m=\u001b[39m formula(population, period)\n\u001b[1;32m    848\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 849\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[43mformula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mparameters_at\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    851\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m array\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_uk/variables/household/income/benefit.py:101\u001b[0m, in \u001b[0;36mhousehold_benefits.formula\u001b[0;34m(household, period, parameters)\u001b[0m\n\u001b[1;32m     95\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m contrib\u001b[38;5;241m.\u001b[39mabolish_council_tax:\n\u001b[1;32m     96\u001b[0m     benefits \u001b[38;5;241m=\u001b[39m [\n\u001b[1;32m     97\u001b[0m         benefit\n\u001b[1;32m     98\u001b[0m         \u001b[38;5;28;01mfor\u001b[39;00m benefit \u001b[38;5;129;01min\u001b[39;00m benefits\n\u001b[1;32m     99\u001b[0m         \u001b[38;5;28;01mif\u001b[39;00m benefit \u001b[38;5;241m!=\u001b[39m \u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mcouncil_tax_benefit\u001b[39m\u001b[38;5;124m\"\u001b[39m\n\u001b[1;32m    100\u001b[0m     ]\n\u001b[0;32m--> 101\u001b[0m general_benefits \u001b[38;5;241m=\u001b[39m \u001b[43madd\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    102\u001b[0m \u001b[43m    \u001b[49m\u001b[43mhousehold\u001b[49m\u001b[43m,\u001b[49m\n\u001b[1;32m    103\u001b[0m \u001b[43m    \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\n\u001b[1;32m    104\u001b[0m \u001b[43m    \u001b[49m\u001b[43m[\u001b[49m\n\u001b[1;32m    105\u001b[0m \u001b[43m        \u001b[49m\u001b[43mbenefit\u001b[49m\n\u001b[1;32m    106\u001b[0m \u001b[43m        \u001b[49m\u001b[38;5;28;43;01mfor\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43mbenefit\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;129;43;01min\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43mbenefits\u001b[49m\n\u001b[1;32m    107\u001b[0m \u001b[43m        \u001b[49m\u001b[38;5;28;43;01mif\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43mbenefit\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;129;43;01mnot\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[38;5;129;43;01min\u001b[39;49;00m\u001b[43m \u001b[49m\u001b[43m[\u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mbasic_income\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m]\u001b[49m\n\u001b[1;32m    108\u001b[0m \u001b[43m    \u001b[49m\u001b[43m]\u001b[49m\u001b[43m,\u001b[49m\n\u001b[1;32m    109\u001b[0m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    110\u001b[0m non_sp_benefits \u001b[38;5;241m=\u001b[39m add(\n\u001b[1;32m    111\u001b[0m     household,\n\u001b[1;32m    112\u001b[0m     period,\n\u001b[0;32m   (...)\u001b[0m\n\u001b[1;32m    117\u001b[0m     ],\n\u001b[1;32m    118\u001b[0m )\n\u001b[1;32m    119\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m (\n\u001b[1;32m    120\u001b[0m     add(household, period, benefits)\n\u001b[1;32m    121\u001b[0m     \u001b[38;5;241m+\u001b[39m general_benefits \u001b[38;5;241m*\u001b[39m uprating\u001b[38;5;241m.\u001b[39mall\n\u001b[1;32m    122\u001b[0m     \u001b[38;5;241m+\u001b[39m non_sp_benefits \u001b[38;5;241m*\u001b[39m uprating\u001b[38;5;241m.\u001b[39mnon_sp\n\u001b[1;32m    123\u001b[0m )\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/commons/formulas.py:227\u001b[0m, in \u001b[0;36madd\u001b[0;34m(entity, period, variables, options)\u001b[0m\n\u001b[1;32m    207\u001b[0m \u001b[38;5;28;01mdef\u001b[39;00m \u001b[38;5;21madd\u001b[39m(\n\u001b[1;32m    208\u001b[0m     entity: Population,\n\u001b[1;32m    209\u001b[0m     period: Period,\n\u001b[1;32m    210\u001b[0m     variables: List[\u001b[38;5;28mstr\u001b[39m],\n\u001b[1;32m    211\u001b[0m     options: List[\u001b[38;5;28mstr\u001b[39m] \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;01mNone\u001b[39;00m,\n\u001b[1;32m    212\u001b[0m ):\n\u001b[1;32m    213\u001b[0m \u001b[38;5;250m    \u001b[39m\u001b[38;5;124;03m\"\"\"Sums a list of variables.\u001b[39;00m\n\u001b[1;32m    214\u001b[0m \n\u001b[1;32m    215\u001b[0m \u001b[38;5;124;03m    Args:\u001b[39;00m\n\u001b[0;32m   (...)\u001b[0m\n\u001b[1;32m    225\u001b[0m \u001b[38;5;124;03m        ArrayLike: The result of the operation.\u001b[39;00m\n\u001b[1;32m    226\u001b[0m \u001b[38;5;124;03m    \"\"\"\u001b[39;00m\n\u001b[0;32m--> 227\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mfor_each_variable\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    228\u001b[0m \u001b[43m        \u001b[49m\u001b[43mentity\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mvariables\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43magg_func\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43madd\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43moptions\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[43moptions\u001b[49m\n\u001b[1;32m    229\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/commons/formulas.py:197\u001b[0m, in \u001b[0;36mfor_each_variable\u001b[0;34m(entity, period, variables, agg_func, group_agg_func, options)\u001b[0m\n\u001b[1;32m    192\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:  \u001b[38;5;66;03m# Group-to-group aggregation\u001b[39;00m\n\u001b[1;32m    193\u001b[0m     variable_population \u001b[38;5;241m=\u001b[39m entity\u001b[38;5;241m.\u001b[39msimulation\u001b[38;5;241m.\u001b[39mpopulations[\n\u001b[1;32m    194\u001b[0m         variable_entity\u001b[38;5;241m.\u001b[39mkey\n\u001b[1;32m    195\u001b[0m     ]\n\u001b[1;32m    196\u001b[0m     person_shares \u001b[38;5;241m=\u001b[39m variable_population\u001b[38;5;241m.\u001b[39mproject(\n\u001b[0;32m--> 197\u001b[0m         \u001b[43mvariable_population\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    198\u001b[0m     ) \u001b[38;5;241m/\u001b[39m variable_population\u001b[38;5;241m.\u001b[39mproject(variable_population\u001b[38;5;241m.\u001b[39mnb_persons())\n\u001b[1;32m    199\u001b[0m     values \u001b[38;5;241m=\u001b[39m entity\u001b[38;5;241m.\u001b[39msum(person_shares)\n\u001b[1;32m    200\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m result \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:134\u001b[0m, in \u001b[0;36mPopulation.__call__\u001b[0;34m(self, variable_name, period, options)\u001b[0m\n\u001b[1;32m    130\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39msimulation\u001b[38;5;241m.\u001b[39mcalculate_divide(\n\u001b[1;32m    131\u001b[0m         variable_name, period, \u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mcalculate_kwargs\n\u001b[1;32m    132\u001b[0m     )\n\u001b[1;32m    133\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 134\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43msimulation\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    135\u001b[0m \u001b[43m        \u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[43mcalculate_kwargs\u001b[49m\n\u001b[1;32m    136\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:849\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    847\u001b[0m     array \u001b[38;5;241m=\u001b[39m formula(population, period)\n\u001b[1;32m    848\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 849\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[43mformula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mparameters_at\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    851\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m array\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_uk/variables/gov/dwp/housing_benefit.py:255\u001b[0m, in \u001b[0;36mhousing_benefit.formula\u001b[0;34m(benunit, period, parameters)\u001b[0m\n\u001b[1;32m    254\u001b[0m \u001b[38;5;28;01mdef\u001b[39;00m \u001b[38;5;21mformula\u001b[39m(benunit, period, parameters):\n\u001b[0;32m--> 255\u001b[0m     housing_benefit_entitlement \u001b[38;5;241m=\u001b[39m \u001b[43mbenunit\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    256\u001b[0m \u001b[43m        \u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mhousing_benefit_pre_benefit_cap\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\n\u001b[1;32m    257\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    258\u001b[0m     benefit_cap_reduction \u001b[38;5;241m=\u001b[39m benunit(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mbenefit_cap_reduction\u001b[39m\u001b[38;5;124m\"\u001b[39m, period)\n\u001b[1;32m    259\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m where(\n\u001b[1;32m    260\u001b[0m         housing_benefit_entitlement \u001b[38;5;241m>\u001b[39m \u001b[38;5;241m0\u001b[39m,\n\u001b[1;32m    261\u001b[0m         max_(\u001b[38;5;241m0\u001b[39m, housing_benefit_entitlement \u001b[38;5;241m-\u001b[39m benefit_cap_reduction),\n\u001b[1;32m    262\u001b[0m         \u001b[38;5;241m0\u001b[39m,\n\u001b[1;32m    263\u001b[0m     )\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:134\u001b[0m, in \u001b[0;36mPopulation.__call__\u001b[0;34m(self, variable_name, period, options)\u001b[0m\n\u001b[1;32m    130\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39msimulation\u001b[38;5;241m.\u001b[39mcalculate_divide(\n\u001b[1;32m    131\u001b[0m         variable_name, period, \u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mcalculate_kwargs\n\u001b[1;32m    132\u001b[0m     )\n\u001b[1;32m    133\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 134\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43msimulation\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    135\u001b[0m \u001b[43m        \u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[43mcalculate_kwargs\u001b[49m\n\u001b[1;32m    136\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:849\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    847\u001b[0m     array \u001b[38;5;241m=\u001b[39m formula(population, period)\n\u001b[1;32m    848\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 849\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[43mformula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mparameters_at\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    851\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m array\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_uk/variables/gov/dwp/housing_benefit.py:241\u001b[0m, in \u001b[0;36mhousing_benefit_pre_benefit_cap.formula\u001b[0;34m(benunit, period, parameters)\u001b[0m\n\u001b[1;32m    240\u001b[0m \u001b[38;5;28;01mdef\u001b[39;00m \u001b[38;5;21mformula\u001b[39m(benunit, period, parameters):\n\u001b[0;32m--> 241\u001b[0m     entitlement \u001b[38;5;241m=\u001b[39m \u001b[43mbenunit\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mhousing_benefit_entitlement\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    242\u001b[0m     eligible \u001b[38;5;241m=\u001b[39m benunit(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mhousing_benefit_eligible\u001b[39m\u001b[38;5;124m\"\u001b[39m, period)\n\u001b[1;32m    243\u001b[0m     would_claim \u001b[38;5;241m=\u001b[39m benunit(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mwould_claim_HB\u001b[39m\u001b[38;5;124m\"\u001b[39m, period)\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:134\u001b[0m, in \u001b[0;36mPopulation.__call__\u001b[0;34m(self, variable_name, period, options)\u001b[0m\n\u001b[1;32m    130\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39msimulation\u001b[38;5;241m.\u001b[39mcalculate_divide(\n\u001b[1;32m    131\u001b[0m         variable_name, period, \u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mcalculate_kwargs\n\u001b[1;32m    132\u001b[0m     )\n\u001b[1;32m    133\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 134\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43msimulation\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    135\u001b[0m \u001b[43m        \u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[43mcalculate_kwargs\u001b[49m\n\u001b[1;32m    136\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:849\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    847\u001b[0m     array \u001b[38;5;241m=\u001b[39m formula(population, period)\n\u001b[1;32m    848\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 849\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[43mformula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mparameters_at\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    851\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m array\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_uk/variables/gov/dwp/housing_benefit.py:215\u001b[0m, in \u001b[0;36mhousing_benefit_entitlement.formula\u001b[0;34m(benunit, period, parameters)\u001b[0m\n\u001b[1;32m    214\u001b[0m \u001b[38;5;28;01mdef\u001b[39;00m \u001b[38;5;21mformula\u001b[39m(benunit, period, parameters):\n\u001b[0;32m--> 215\u001b[0m     rent \u001b[38;5;241m=\u001b[39m \u001b[43mbenunit\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mbenunit_rent\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    216\u001b[0m     LHA \u001b[38;5;241m=\u001b[39m benunit(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mLHA_eligible\u001b[39m\u001b[38;5;124m\"\u001b[39m, period\u001b[38;5;241m.\u001b[39mthis_year)\n\u001b[1;32m    217\u001b[0m     applicable_amount \u001b[38;5;241m=\u001b[39m benunit(\n\u001b[1;32m    218\u001b[0m         \u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mhousing_benefit_applicable_amount\u001b[39m\u001b[38;5;124m\"\u001b[39m, period\n\u001b[1;32m    219\u001b[0m     )\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:134\u001b[0m, in \u001b[0;36mPopulation.__call__\u001b[0;34m(self, variable_name, period, options)\u001b[0m\n\u001b[1;32m    130\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39msimulation\u001b[38;5;241m.\u001b[39mcalculate_divide(\n\u001b[1;32m    131\u001b[0m         variable_name, period, \u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mcalculate_kwargs\n\u001b[1;32m    132\u001b[0m     )\n\u001b[1;32m    133\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 134\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43msimulation\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    135\u001b[0m \u001b[43m        \u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[38;5;241;43m*\u001b[39;49m\u001b[43mcalculate_kwargs\u001b[49m\n\u001b[1;32m    136\u001b[0m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:784\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    782\u001b[0m \u001b[38;5;28;01mfor\u001b[39;00m added_variable \u001b[38;5;129;01min\u001b[39;00m adds_list:\n\u001b[1;32m    783\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m added_variable \u001b[38;5;129;01min\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mtax_benefit_system\u001b[38;5;241m.\u001b[39mvariables:\n\u001b[0;32m--> 784\u001b[0m         values \u001b[38;5;241m=\u001b[39m values \u001b[38;5;241m+\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    785\u001b[0m \u001b[43m            \u001b[49m\u001b[43madded_variable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[43mvariable\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mentity\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mkey\u001b[49m\n\u001b[1;32m    786\u001b[0m \u001b[43m        \u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    787\u001b[0m     \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[1;32m    788\u001b[0m         \u001b[38;5;28;01mtry\u001b[39;00m:\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:554\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    550\u001b[0m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_period_consistency(period, variable)\n\u001b[1;32m    552\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m variable\u001b[38;5;241m.\u001b[39mdefined_for \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    553\u001b[0m     mask \u001b[38;5;241m=\u001b[39m (\n\u001b[0;32m--> 554\u001b[0m         \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    555\u001b[0m \u001b[43m            \u001b[49m\u001b[43mvariable\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mdefined_for\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[43mvariable\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mentity\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mkey\u001b[49m\n\u001b[1;32m    556\u001b[0m \u001b[43m        \u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    557\u001b[0m         \u001b[38;5;241m>\u001b[39m \u001b[38;5;241m0\u001b[39m\n\u001b[1;32m    558\u001b[0m     )\n\u001b[1;32m    559\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m np\u001b[38;5;241m.\u001b[39mall(\u001b[38;5;241m~\u001b[39mmask):\n\u001b[1;32m    560\u001b[0m         array \u001b[38;5;241m=\u001b[39m holder\u001b[38;5;241m.\u001b[39mdefault_array()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/microsimulation.py:54\u001b[0m, in \u001b[0;36mMicrosimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, use_weights, decode_enums)\u001b[0m\n\u001b[1;32m     52\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m \u001b[38;5;129;01mand\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     53\u001b[0m     period \u001b[38;5;241m=\u001b[39m get_period(\u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mdefault_calculation_period)\n\u001b[0;32m---> 54\u001b[0m values \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43msuper\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mcalculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mmap_to\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdecode_enums\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     55\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;129;01mnot\u001b[39;00m use_weights:\n\u001b[1;32m     56\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m values\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:377\u001b[0m, in \u001b[0;36mSimulation.calculate\u001b[0;34m(self, variable_name, period, map_to, decode_enums)\u001b[0m\n\u001b[1;32m    374\u001b[0m np\u001b[38;5;241m.\u001b[39mrandom\u001b[38;5;241m.\u001b[39mseed(\u001b[38;5;28mhash\u001b[39m(variable_name \u001b[38;5;241m+\u001b[39m \u001b[38;5;28mstr\u001b[39m(period)) \u001b[38;5;241m%\u001b[39m \u001b[38;5;241m1000000\u001b[39m)\n\u001b[1;32m    376\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[0;32m--> 377\u001b[0m     result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_calculate\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable_name\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    378\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(result, EnumArray) \u001b[38;5;129;01mand\u001b[39;00m decode_enums:\n\u001b[1;32m    379\u001b[0m         result \u001b[38;5;241m=\u001b[39m result\u001b[38;5;241m.\u001b[39mdecode_to_str()\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:570\u001b[0m, in \u001b[0;36mSimulation._calculate\u001b[0;34m(self, variable_name, period)\u001b[0m\n\u001b[1;32m    568\u001b[0m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[1;32m    569\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_check_for_cycle(variable\u001b[38;5;241m.\u001b[39mname, period)\n\u001b[0;32m--> 570\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[38;5;28;43mself\u001b[39;49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43m_run_formula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mvariable\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    572\u001b[0m     \u001b[38;5;66;03m# If no result, use the default value and cache it\u001b[39;00m\n\u001b[1;32m    573\u001b[0m     \u001b[38;5;28;01mif\u001b[39;00m array \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m    574\u001b[0m         \u001b[38;5;66;03m# Check if the variable has a previously defined value\u001b[39;00m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:849\u001b[0m, in \u001b[0;36mSimulation._run_formula\u001b[0;34m(self, variable, population, period)\u001b[0m\n\u001b[1;32m    847\u001b[0m     array \u001b[38;5;241m=\u001b[39m formula(population, period)\n\u001b[1;32m    848\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n\u001b[0;32m--> 849\u001b[0m     array \u001b[38;5;241m=\u001b[39m \u001b[43mformula\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpopulation\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mparameters_at\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    851\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m array\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_uk/variables/household/demographic/person.py:293\u001b[0m, in \u001b[0;36mis_household_head.formula\u001b[0;34m(person, period, parameters)\u001b[0m\n\u001b[1;32m    292\u001b[0m \u001b[38;5;28;01mdef\u001b[39;00m \u001b[38;5;21mformula\u001b[39m(person, period, parameters):\n\u001b[0;32m--> 293\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[43mperson\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mget_rank\u001b[49m\u001b[43m(\u001b[49m\u001b[43mperson\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mhousehold\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperson\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[38;5;124;43mage\u001b[39;49m\u001b[38;5;124;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mperiod\u001b[49m\u001b[43m)\u001b[49m\u001b[43m)\u001b[49m \u001b[38;5;241m==\u001b[39m \u001b[38;5;241m0\u001b[39m\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:242\u001b[0m, in \u001b[0;36mPopulation.get_rank\u001b[0;34m(self, entity, criteria, condition)\u001b[0m\n\u001b[1;32m    238\u001b[0m ids \u001b[38;5;241m=\u001b[39m entity\u001b[38;5;241m.\u001b[39mmembers_entity_id\n\u001b[1;32m    240\u001b[0m \u001b[38;5;66;03m# Matrix: the value in line i and column j is the value of criteria for the jth person of the ith entity\u001b[39;00m\n\u001b[1;32m    241\u001b[0m matrix \u001b[38;5;241m=\u001b[39m numpy\u001b[38;5;241m.\u001b[39masarray(\n\u001b[0;32m--> 242\u001b[0m     [\n\u001b[1;32m    243\u001b[0m         entity\u001b[38;5;241m.\u001b[39mvalue_nth_person(\n\u001b[1;32m    244\u001b[0m             k, filtered_criteria, default\u001b[38;5;241m=\u001b[39mnumpy\u001b[38;5;241m.\u001b[39minf\n\u001b[1;32m    245\u001b[0m         )\n\u001b[1;32m    246\u001b[0m         \u001b[38;5;28;01mfor\u001b[39;00m k \u001b[38;5;129;01min\u001b[39;00m \u001b[38;5;28mrange\u001b[39m(biggest_entity_size)\n\u001b[1;32m    247\u001b[0m     ]\n\u001b[1;32m    248\u001b[0m )\u001b[38;5;241m.\u001b[39mtranspose()\n\u001b[1;32m    250\u001b[0m \u001b[38;5;66;03m# We double-argsort all lines of the matrix.\u001b[39;00m\n\u001b[1;32m    251\u001b[0m \u001b[38;5;66;03m# Double-argsorting gets the rank of each value once sorted\u001b[39;00m\n\u001b[1;32m    252\u001b[0m \u001b[38;5;66;03m# For instance, if x = [3,1,6,4,0], y =  numpy.argsort(x) is [4, 1, 0, 3, 2] (because the value with index 4 is the smallest one, the value with index 1 the second smallest, etc.) and z =  numpy.argsort(y) is [2, 1, 4, 3, 0], the rank of each value.\u001b[39;00m\n\u001b[1;32m    253\u001b[0m sorted_matrix \u001b[38;5;241m=\u001b[39m numpy\u001b[38;5;241m.\u001b[39margsort(numpy\u001b[38;5;241m.\u001b[39margsort(matrix))\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/population.py:243\u001b[0m, in \u001b[0;36m<listcomp>\u001b[0;34m(.0)\u001b[0m\n\u001b[1;32m    238\u001b[0m ids \u001b[38;5;241m=\u001b[39m entity\u001b[38;5;241m.\u001b[39mmembers_entity_id\n\u001b[1;32m    240\u001b[0m \u001b[38;5;66;03m# Matrix: the value in line i and column j is the value of criteria for the jth person of the ith entity\u001b[39;00m\n\u001b[1;32m    241\u001b[0m matrix \u001b[38;5;241m=\u001b[39m numpy\u001b[38;5;241m.\u001b[39masarray(\n\u001b[1;32m    242\u001b[0m     [\n\u001b[0;32m--> 243\u001b[0m         \u001b[43mentity\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mvalue_nth_person\u001b[49m\u001b[43m(\u001b[49m\n\u001b[1;32m    244\u001b[0m \u001b[43m            \u001b[49m\u001b[43mk\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mfiltered_criteria\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43mdefault\u001b[49m\u001b[38;5;241;43m=\u001b[39;49m\u001b[43mnumpy\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43minf\u001b[49m\n\u001b[1;32m    245\u001b[0m \u001b[43m        \u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m    246\u001b[0m         \u001b[38;5;28;01mfor\u001b[39;00m k \u001b[38;5;129;01min\u001b[39;00m \u001b[38;5;28mrange\u001b[39m(biggest_entity_size)\n\u001b[1;32m    247\u001b[0m     ]\n\u001b[1;32m    248\u001b[0m )\u001b[38;5;241m.\u001b[39mtranspose()\n\u001b[1;32m    250\u001b[0m \u001b[38;5;66;03m# We double-argsort all lines of the matrix.\u001b[39;00m\n\u001b[1;32m    251\u001b[0m \u001b[38;5;66;03m# Double-argsorting gets the rank of each value once sorted\u001b[39;00m\n\u001b[1;32m    252\u001b[0m \u001b[38;5;66;03m# For instance, if x = [3,1,6,4,0], y =  numpy.argsort(x) is [4, 1, 0, 3, 2] (because the value with index 4 is the smallest one, the value with index 1 the second smallest, etc.) and z =  numpy.argsort(y) is [2, 1, 4, 3, 0], the rank of each value.\u001b[39;00m\n\u001b[1;32m    253\u001b[0m sorted_matrix \u001b[38;5;241m=\u001b[39m numpy\u001b[38;5;241m.\u001b[39margsort(numpy\u001b[38;5;241m.\u001b[39margsort(matrix))\n",
      "File \u001b[0;32m/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages/policyengine_core/populations/group_population.py:320\u001b[0m, in \u001b[0;36mGroupPopulation.value_nth_person\u001b[0;34m(self, n, array, default)\u001b[0m\n\u001b[1;32m    316\u001b[0m result \u001b[38;5;241m=\u001b[39m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mfilled_array(default, dtype\u001b[38;5;241m=\u001b[39marray\u001b[38;5;241m.\u001b[39mdtype)\n\u001b[1;32m    317\u001b[0m \u001b[38;5;66;03m# For households that have at least n persons, set the result as the value of criteria for the person for which the position is n.\u001b[39;00m\n\u001b[1;32m    318\u001b[0m \u001b[38;5;66;03m# The map is needed b/c the order of the nth persons of each household in the persons vector is not necessarily the same than the household order.\u001b[39;00m\n\u001b[1;32m    319\u001b[0m result[nb_persons_per_entity \u001b[38;5;241m>\u001b[39m n] \u001b[38;5;241m=\u001b[39m array[members_map][\n\u001b[0;32m--> 320\u001b[0m     \u001b[43mpositions\u001b[49m\u001b[43m[\u001b[49m\u001b[43mmembers_map\u001b[49m\u001b[43m]\u001b[49m \u001b[38;5;241m==\u001b[39m n\n\u001b[1;32m    321\u001b[0m ]\n\u001b[1;32m    323\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m \u001b[38;5;28misinstance\u001b[39m(array, EnumArray):\n\u001b[1;32m    324\u001b[0m     result \u001b[38;5;241m=\u001b[39m EnumArray(result, array\u001b[38;5;241m.\u001b[39mpossible_values)\n",
      "\u001b[0;31mKeyboardInterrupt\u001b[0m: "
     ]
    }
   ],
   "source": [
    "from policyengine_uk.model_api import *\n",
    "from policyengine_uk import Microsimulation\n",
    "import pandas as pd\n",
    "\n",
    "# DataFrame with columns: [provision name, provision cost in 2024, percent better off, provision poverty impact in 2024, inequality impact in 2024]\n",
    "\n",
    "reforms = []\n",
    "\n",
    "ni_rate_cut_1p = {\n",
    "    \"gov.hmrc.national_insurance.class_1.rates.employee.main\": {\n",
    "        \"year:2024:5\": 0.09,\n",
    "    }\n",
    "}\n",
    "\n",
    "ni_rate_cut_2p = {\n",
    "    \"gov.hmrc.national_insurance.class_1.rates.employee.main\": {\n",
    "        \"year:2024:5\": 0.08,\n",
    "    }\n",
    "}\n",
    "\n",
    "base_rate_cut_2p = {\n",
    "    \"gov.hmrc.income_tax.rates.uk[0].rate\": {\n",
    "        \"year:2024:5\": 0.18,\n",
    "    }\n",
    "}\n",
    "\n",
    "reforms = [ni_rate_cut_1p, ni_rate_cut_2p, base_rate_cut_2p]\n",
    "\n",
    "provisions = [\"1p NI cut\", \"2p NI cut\", \"2p basic rate cut\"]\n",
    "\n",
    "baseline = Microsimulation()\n",
    "\n",
    "\n",
    "def get_impacts(reform_dict: dict) -> dict:\n",
    "    reform = Reform.from_dict(reform_dict, country_id=\"uk\")\n",
    "    reformed = Microsimulation(reform=reform)\n",
    "\n",
    "    budgetary_impact = (\n",
    "        baseline.calculate(\"household_net_income\", period=2024).sum()\n",
    "        - reformed.calculate(\"household_net_income\", 2024).sum()\n",
    "    )\n",
    "    poverty_baseline = baseline.calculate(\n",
    "        \"in_poverty\", map_to=\"person\", period=2024\n",
    "    ).mean()\n",
    "    poverty_reform = reformed.calculate(\n",
    "        \"in_poverty\", map_to=\"person\", period=2024\n",
    "    ).mean()\n",
    "    poverty_rate_change = (\n",
    "        poverty_reform - poverty_baseline\n",
    "    ) / poverty_baseline\n",
    "\n",
    "    gini_baseline = baseline.calculate(\n",
    "        \"equiv_household_net_income\", map_to=\"person\", period=2024\n",
    "    ).gini()\n",
    "    gini_reform = reformed.calculate(\n",
    "        \"equiv_household_net_income\", map_to=\"person\", period=2024\n",
    "    ).gini()\n",
    "    gini_rate_change = (gini_reform - gini_baseline) / gini_baseline\n",
    "\n",
    "    hnet_reformed = reformed.calculate(\n",
    "        \"household_net_income\", period=2024, map_to=\"person\"\n",
    "    )\n",
    "    hnet_baseline = baseline.calculate(\n",
    "        \"household_net_income\", period=2024, map_to=\"person\"\n",
    "    )\n",
    "    percent_better_off = (hnet_reformed > hnet_baseline).mean()\n",
    "    # Poverty headcount relative change\n",
    "    # Inequality gini index relative change\n",
    "    # Percent better off\n",
    "\n",
    "    return dict(\n",
    "        budgetary_impact=budgetary_impact,\n",
    "        reform_id=reform.api_id,\n",
    "        poverty_rate_change=poverty_rate_change,\n",
    "        gini_rate_change=gini_rate_change,\n",
    "        percent_better_off=percent_better_off,\n",
    "    )\n",
    "\n",
    "\n",
    "budgetary_impacts = []\n",
    "reform_ids = []\n",
    "poverty_rate_changes = []\n",
    "gini_rate_changes = []\n",
    "percentages_better_off = []\n",
    "\n",
    "for i in range(len(provisions)):\n",
    "    impacts = get_impacts(reforms[i])\n",
    "    budgetary_impacts.append(impacts[\"budgetary_impact\"])\n",
    "    reform_ids.append(impacts[\"reform_id\"])\n",
    "    poverty_rate_changes.append(impacts[\"poverty_rate_change\"])\n",
    "    gini_rate_changes.append(impacts[\"gini_rate_change\"])\n",
    "    percentages_better_off.append(impacts[\"percent_better_off\"])\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Reform\": provisions,\n",
    "        \"Budgetary impact\": budgetary_impacts,\n",
    "        \"Percent gaining\": percentages_better_off,\n",
    "        \"Poverty change\": poverty_rate_changes,\n",
    "        \"Inequality change\": gini_rate_changes,\n",
    "        \"PolicyEngine\": reform_ids,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Budgetary impact\"] = df[\"Budgetary impact\"].apply(\n",
    "    lambda x: f\"{x/1e9:+,.1f}\"\n",
    ")\n",
    "df[\"PolicyEngine\"] = df[\"PolicyEngine\"].apply(\n",
    "    lambda x: f\"[#{x}](https://legacy.policyengine.org/uk/policy?reform={x}&baseline=1&time_period=2024&region=uk)\"\n",
    ")\n",
    "df[\"Percent gaining\"] = df[\"Percent gaining\"].apply(lambda x: f\"{x:+.1%}\")\n",
    "df[\"Poverty change\"] = df[\"Poverty change\"].apply(lambda x: f\"{x:+.1%}\")\n",
    "df[\"Inequality change\"] = df[\"Inequality change\"].apply(lambda x: f\"{x:+.1%}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "| Reform            |   Budgetary impact | Percent gaining   | Poverty change   | Inequality change   | PolicyEngine                                                                                    |\n",
       "|:------------------|-------------------:|:------------------|:-----------------|:--------------------|:------------------------------------------------------------------------------------------------|\n",
       "| 1p NI cut         |               -5   | +63.8%            | +0.0%            | +0.2%               | [#49642](https://legacy.policyengine.org/uk/policy?reform=49642&baseline=1&time_period=2024&region=uk) |\n",
       "| 2p NI cut         |              -10   | +63.8%            | -0.3%            | +0.3%               | [#49643](https://legacy.policyengine.org/uk/policy?reform=49643&baseline=1&time_period=2024&region=uk) |\n",
       "| 2p basic rate cut |              -11.1 | +69.8%            | -0.4%            | +0.3%               | [#49644](https://legacy.policyengine.org/uk/policy?reform=49644&baseline=1&time_period=2024&region=uk) |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 51,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import Markdown\n",
    "\n",
    "Markdown(df.to_markdown(index=False))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Distributional impacts"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement already satisfied: pandas in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (2.2.1)\n",
      "^C\n",
      "\u001b[31mERROR: Operation cancelled by user\u001b[0m\u001b[31m\n",
      "\u001b[0m\n",
      "\u001b[1m[\u001b[0m\u001b[34;49mnotice\u001b[0m\u001b[1;39;49m]\u001b[0m\u001b[39;49m A new release of pip is available: \u001b[0m\u001b[31;49m23.3.1\u001b[0m\u001b[39;49m -> \u001b[0m\u001b[32;49m24.0\u001b[0m\n",
      "\u001b[1m[\u001b[0m\u001b[34;49mnotice\u001b[0m\u001b[1;39;49m]\u001b[0m\u001b[39;49m To update, run: \u001b[0m\u001b[32;49mpython3 -m pip install --upgrade pip\u001b[0m\n",
      "Note: you may need to restart the kernel to use updated packages.\n",
      "Requirement already satisfied: nbformat in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (5.9.2)\n",
      "Requirement already satisfied: fastjsonschema in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from nbformat) (2.19.1)\n",
      "Requirement already satisfied: jsonschema>=2.6 in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from nbformat) (4.21.1)\n",
      "Requirement already satisfied: jupyter-core in /Users/administrator/Library/Python/3.9/lib/python/site-packages (from nbformat) (5.5.1)\n",
      "Requirement already satisfied: traitlets>=5.1 in /Users/administrator/Library/Python/3.9/lib/python/site-packages (from nbformat) (5.14.0)\n",
      "Requirement already satisfied: attrs>=22.2.0 in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat) (23.2.0)\n",
      "Requirement already satisfied: jsonschema-specifications>=2023.03.6 in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat) (2023.12.1)\n",
      "Requirement already satisfied: referencing>=0.28.4 in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat) (0.33.0)\n",
      "Requirement already satisfied: rpds-py>=0.7.1 in /Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages (from jsonschema>=2.6->nbformat) (0.18.0)\n",
      "Requirement already satisfied: platformdirs>=2.5 in /Users/administrator/Library/Python/3.9/lib/python/site-packages (from jupyter-core->nbformat) (4.1.0)\n",
      "\n",
      "\u001b[1m[\u001b[0m\u001b[34;49mnotice\u001b[0m\u001b[1;39;49m]\u001b[0m\u001b[39;49m A new release of pip is available: \u001b[0m\u001b[31;49m23.3.1\u001b[0m\u001b[39;49m -> \u001b[0m\u001b[32;49m24.0\u001b[0m\n",
      "\u001b[1m[\u001b[0m\u001b[34;49mnotice\u001b[0m\u001b[1;39;49m]\u001b[0m\u001b[39;49m To update, run: \u001b[0m\u001b[32;49mpython3 -m pip install --upgrade pip\u001b[0m\n",
      "Note: you may need to restart the kernel to use updated packages.\n"
     ]
    }
   ],
   "source": [
    "%pip install -U pandas\n",
    "%pip install nbformat"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Figure 1: Each provision's change in net income, by decile*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=1p NI cut<br>Decile=%{x}<br>Relative change=%{y}<br>Text=%{text}<extra></extra>",
         "legendgroup": "1p NI cut",
         "marker": {
          "color": "#17354F",
          "pattern": {
           "shape": ""
          }
         },
         "name": "1p NI cut",
         "offsetgroup": "1p NI cut",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "0.0%",
          "0.1%",
          "0.2%",
          "0.3%",
          "0.4%",
          "0.6%",
          "0.7%",
          "0.8%",
          "0.7%",
          "0.5%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          0.00017939409994996214,
          0.0005470910704261151,
          0.001545359108935586,
          0.0028808928885603272,
          0.004016404435987526,
          0.0057513039354001785,
          0.006865034386079139,
          0.007562389021527562,
          0.007463826656961707,
          0.0045059033811456805
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=2p NI cut<br>Decile=%{x}<br>Relative change=%{y}<br>Text=%{text}<extra></extra>",
         "legendgroup": "2p NI cut",
         "marker": {
          "color": "#2C6496",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2p NI cut",
         "offsetgroup": "2p NI cut",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "0.0%",
          "0.1%",
          "0.3%",
          "0.5%",
          "0.7%",
          "1.1%",
          "1.3%",
          "1.4%",
          "1.4%",
          "0.8%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          0.00033316025394293346,
          0.0010160252393705508,
          0.002869956962169209,
          0.005350232103900272,
          0.0074590449925261895,
          0.010680997385029636,
          0.012749354213501067,
          0.014044440537681295,
          0.013861406875454198,
          0.008368111894940009
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=2p basic rate cut<br>Decile=%{x}<br>Relative change=%{y}<br>Text=%{text}<extra></extra>",
         "legendgroup": "2p basic rate cut",
         "marker": {
          "color": "#616161",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2p basic rate cut",
         "offsetgroup": "2p basic rate cut",
         "orientation": "v",
         "showlegend": true,
         "text": [
          "0.1%",
          "0.3%",
          "0.4%",
          "0.5%",
          "0.8%",
          "1.0%",
          "1.2%",
          "1.3%",
          "1.4%",
          "0.9%"
         ],
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          0.0013572272663274023,
          0.002662130975722555,
          0.0043837633089392185,
          0.005372476324289575,
          0.007754855192808479,
          0.009822784942066606,
          0.012040846851525486,
          0.013215637454867495,
          0.013703926139213663,
          0.009045902660274002
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "barmode": "group",
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.2,
          "sizey": 0.2,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Reform"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Change in net income by decile"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Reform"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "tickformat": "+.1%",
         "title": {
          "text": "Relative change in net income"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from policyengine_core.charts.api import get_api_chart_data\n",
    "import plotly.express as px\n",
    "from policyengine_core.charts import *\n",
    "\n",
    "decile_df = pd.DataFrame()\n",
    "\n",
    "for i in range(len(provisions)):\n",
    "    impacts = get_impacts(reforms[i])\n",
    "    decile_data = get_api_chart_data(\n",
    "        \"uk\",\n",
    "        Reform.from_dict(reforms[i], \"uk\").api_id,\n",
    "        \"decile\",\n",
    "        \"uk\",\n",
    "        2024,\n",
    "        1,\n",
    "    )[\"relative\"]\n",
    "    for decile in range(1, 11):\n",
    "        decile_df = pd.concat(\n",
    "            [\n",
    "                decile_df,\n",
    "                pd.DataFrame(\n",
    "                    {\n",
    "                        \"Reform\": [provisions[i]],\n",
    "                        \"Decile\": [decile],\n",
    "                        \"Relative change\": [decile_data[str(decile)]],\n",
    "                        \"Text\": [f\"{decile_data[str(decile)]:.1%}\"],\n",
    "                    }\n",
    "                ),\n",
    "            ]\n",
    "        )\n",
    "\n",
    "fig = px.bar(\n",
    "    decile_df,\n",
    "    x=\"Decile\",\n",
    "    y=\"Relative change\",\n",
    "    color=\"Reform\",\n",
    "    barmode=\"group\",\n",
    "    color_discrete_map={\n",
    "        \"1p NI cut\": BLUE_PRESSED,\n",
    "        \"2p NI cut\": BLUE,\n",
    "        \"2p basic rate cut\": DARK_GRAY,\n",
    "    },\n",
    "    text=\"Text\",\n",
    ").update_layout(\n",
    "    title=\"Change in net income by decile\",\n",
    "    xaxis_title=\"Reform\",\n",
    "    yaxis_title=\"Relative change in net income\",\n",
    "    yaxis_tickformat=\"+.1%\",\n",
    ")\n",
    "\n",
    "fig = format_fig(fig)\n",
    "fig"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*This figure divides the UK into ten income groups, called 'deciles', of equal population. Decile '1' corresponds to the lowest-income Britons, and '10' corresponds to the highest. It then shows the change in post-tax income for the average member of each decile, under each possible reform.*"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## National Insurance contributions, 2p decrease\n",
    "\n",
    "Under this policy, the government would reduce required contributions to the National Insurance system (Class 1 contributions) for individuals employed by an employer. The current rate of 10p, brought into force on 6 January 2024, would be further lowered to 8p.\n",
    "\n",
    "The PolicyEngine model projects that a reduction in the Class 1 NIC contribution rate by 2p costs the government approximately £10.0 billion. Under this cut, every income decile gains in aggregate, with 63.8% of households increasing their post-tax income, and none seeing a decrease in disposable. This reform would increase inequality, as measured by the Gini coefficient, by 0.3%, while reducing the poverty rate by 0.2%.\n",
    "\n",
    "For a married couple with two children making £35,000 a year, this reform would lower National Insurance payments by £214 for 2024. However, their maximum possible Universal Credit benefit also falls by £118, providing a net benefit of £96 for the year.\n",
    "\n",
    "## National Insurance contributions, 1p decrease\n",
    "\n",
    "Similar to the 2p National Insurance rate cut, under this reform, the government would reduce Class 1 National Insurance contributions by 1p, from the current rate of 10p to 9p.\n",
    "\n",
    "PolicyEngine projects that this cut would cost the government £5.0 billion. Similar to the 2p cut, under this reform, post-tax income increases for every income decile, with the same 63.8% of households gaining disposable income. This reform would slightly increase the Gini coefficient, by 0.2%, while having a negiligible impact upon the poverty rate.\n",
    "\n",
    "For the same hypothetical couple from above, this reform would lower National Insurance payments by £115 for the year. However, this family's maximum Universal Credit benefit would fall by a corresponding £63, providing an overall benefit of £52 for 2024.\n",
    "\n",
    "## Basic Rate decrease\n",
    "\n",
    "Under another speculated reform, the government would lower the Basic Rate, the tax rate of the UK's lowest tax bracket, by 2p, from its current 20p to 18p. \n",
    "\n",
    "As the Basic Rate taxes a larger pool of household income sources than the National Insurance system, PolicyEngine estimates the cost of this reform to be £11.1 billion for 2024. This policy would increase the net income of 69.6% of UK households, with every individual decile also experiencing an increase in net income. Households in higher deciles do particularly well under this reform; households in the UK's top decile would receive £1,175 in extra net income in 2024, while households in the country's lowest decile would receive £16. This policy would lower the poverty rate by 0.4% relative to its current value. However, it would raise the Gini coefficient by 0.3%.\n",
    "\n",
    "For a two-child household earning £35,000 gross income in 2024, this reform would lower income tax by £197. However, this family's maximum Universal Credit benefit would also decrease by £108, generating a net increase in post-tax income of £89.\n",
    "\n",
    "## Conclusion\n",
    "\n",
    "In anticipation of the Chancellor's Spring Budget 2024, PolicyEngine has modelled the impacts of three speculative tax reforms: two different rate cuts to Class 1 National Insurance contributions and a 2p decrease in the Basic Rate. PolicyEngine estimates the cost of a 2p Basic Rate cut to be £11.1 billion, while a 2p decrease to National Insurance contributions would be slightly less, at £10.0 billion, and a 1p National Insurance contribution decrease would be half of that, at £5.0 billion. \n",
    "\n",
    "All three policies would raise the net income of two-thirds of Britons, especially those in higher-income households, though a 2p cut to the Basic Rate would be slightly broader than the other two reforms, benefitting 69.8% of households. All three policies would exhibit small, ambiguous effects on income inequality, as well as slight reductions to the poverty rate. \n",
    "\n",
    "Finally, in a sample household composed of a married couple with two children under age 18 and a pre-tax income of £35,000, PolicyEngine would project the 2p cuts to the Basic Rate and National Insurance contributions to lower the household's tax payments by roughly £200, with a 1p National Insurance cut saving the household £115. However, these savings would correspond with a lower maximum Universal Credit for the household in each case.\n",
    "\n",
    "For more information about how these possible tax reform provisions might affect one's household or community, we invite our readers to use one of the three personalised calculators in Table 1 above, as well as to follow us on any of the social media platforms linked at the bottom of this page."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.13"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# Spring Budget 2024
Slug: uk-2024-spring-budget
Date: 2024-03-06 09:00:00
Authors: Nikhil Woodruff, Anthony Volk
Tags: uk, policy
Description: PolicyEngine estimates the impact of the UK Spring Budget.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Today, Chancellor of the Exchequer Jeremy Hunt announced the Government's Spring Budget 2024. This budget includes a variety of reforms, delineated by the Treasury [here](https://www.gov.uk/government/publications/spring-budget-2024).\n",
    "\n",
    "In this post, PolicyEngine will model the budgetary, societal, and distributional impacts of the budget's reforms to National Insurance, the High Income Child Benefit Charge, and the fuel duty. *To view the impacts of these reforms upon society in PolicyEngine's interactive reform modeling tool, visit [this link](https://legacy.policyengine.org/uk/policy?reform=49773&baseline=1&time_period=2024&region=uk&focus=policyOutput.policyBreakdown&timePeriod=2024).*\n",
    "\n",
    "## Spring Budget 2024 reforms\n",
    "The Spring 2024 Budget includes reforms to various different segments of the tax code. Of these, PolicyEngine will be modelling the following in this article:\n",
    "\n",
    "#### National Insurance Contributions (NICs)\n",
    "* Lowering the main rate of Class 1 NICs from 10p to 8p\n",
    "* Cutting the main rate of Class 4 self-employed NICs from 8p to 6p\n",
    "\n",
    "#### High Income Child Benefit Charge\n",
    "* Increasing the income threshold for the charge from £60,000 to £80,000\n",
    "* Increasing the charge's taper range from £60,000 to £80,000\n",
    "\n",
    "#### Fuel Duty\n",
    "* Extending the fuel duty's 5p rate cut for 12 months\n",
    "* Forgoing the fiscal year 2024-2025 RPI increase for the fuel duty\n",
    "\n",
    "When modelling these reforms, PolicyEngine assumes they take effect on 1 January 2024 and evaluates their impacts over calendar year 2024, differing slightly from Treasury's estimates, which are aligned with the fiscal calendar.\n",
    "\n",
    "#### Other reforms\n",
    "The Chancellor's Spring Budget 2024 also codifies a number of reforms not included in the PolicyEngine model, such as a freeze on the alcohol duty, changes to the non-domiciled taxation regime, and a duty on vaping products. These reforms will not be modelled in this article.\n",
    "\n",
    "## Reform outcomes\n",
    "Table 1 below presents PolicyEngine's estimate of each policy reform provision's key household, budgetary, and societal impact metrics. Cumulatively, the reforms are modelled to cost HM Treasury a total of £14.1 billion for calendar year 2024 and raise the net income of 77.4% of British households, particularly those with higher pre-tax income. The policies also present ambiguous impacts upon the poverty rate, while raising inequality by 0.4%."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Table 1: Household and societal impacts of each Spring Budget 2023 reform provision*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "from policyengine_uk import Microsimulation\n",
    "from policyengine_uk.model_api import *\n",
    "\n",
    "reform = {\n",
    "    \"gov.hmrc.fuel_duty.petrol_and_diesel\": {\n",
    "        \"year:2024:5\": 0.5295,\n",
    "    },\n",
    "    \"gov.hmrc.income_tax.charges.CB_HITC.phase_out_start\": {\n",
    "        \"year:2024:5\": 60_000,\n",
    "    },\n",
    "    \"gov.hmrc.income_tax.charges.CB_HITC.phase_out_rate\": {\n",
    "        \"year:2024:5\": 0.05,\n",
    "    },\n",
    "    \"gov.hmrc.national_insurance.class_1.rates.employee.main\": {\n",
    "        \"year:2024:5\": 0.08,\n",
    "    },\n",
    "    \"gov.hmrc.national_insurance.class_4.rates.main\": {\n",
    "        \"year:2024:5\": 0.06,\n",
    "    },\n",
    "}\n",
    "import pandas as pd\n",
    "\n",
    "# DataFrame with columns: [provision name, provision cost in 2024, percent better off, provision poverty impact in 2024, inequality impact in 2024]\n",
    "\n",
    "reforms = []\n",
    "\n",
    "fuel_duty_freeze = {\n",
    "    \"gov.hmrc.fuel_duty.petrol_and_diesel\": {\n",
    "        \"year:2024:5\": 0.5295,\n",
    "    }\n",
    "}\n",
    "\n",
    "cb_hitc_cut = {\n",
    "    \"gov.hmrc.income_tax.charges.CB_HITC.phase_out_start\": {\n",
    "        \"year:2024:5\": 60_000,\n",
    "    },\n",
    "    \"gov.hmrc.income_tax.charges.CB_HITC.phase_out_rate\": {\n",
    "        \"year:2024:5\": 0.05,\n",
    "    },\n",
    "}\n",
    "\n",
    "ni_class_1_cut = {\n",
    "    \"gov.hmrc.national_insurance.class_1.rates.employee.main\": {\n",
    "        \"year:2024:5\": 0.08,\n",
    "    },\n",
    "}\n",
    "\n",
    "ni_class_4_cut = {\n",
    "    \"gov.hmrc.national_insurance.class_4.rates.main\": {\n",
    "        \"year:2024:5\": 0.06,\n",
    "    },\n",
    "}\n",
    "\n",
    "complete_reform = {\n",
    "    **fuel_duty_freeze,\n",
    "    **cb_hitc_cut,\n",
    "    **ni_class_1_cut,\n",
    "    **ni_class_4_cut,\n",
    "}\n",
    "\n",
    "reforms = [\n",
    "    fuel_duty_freeze,\n",
    "    cb_hitc_cut,\n",
    "    ni_class_1_cut,\n",
    "    ni_class_4_cut,\n",
    "    complete_reform,\n",
    "]\n",
    "\n",
    "provisions = [\n",
    "    \"Fuel duty freeze\",\n",
    "    \"CB HITC cut\",\n",
    "    \"NI class 1 cut\",\n",
    "    \"NI class 4 cut\",\n",
    "    \"Combined\",\n",
    "]\n",
    "\n",
    "baseline = Microsimulation()\n",
    "\n",
    "\n",
    "def get_impacts(reform_dict: dict) -> dict:\n",
    "    reform = Reform.from_dict(reform_dict, country_id=\"uk\")\n",
    "    reformed = Microsimulation(reform=reform)\n",
    "\n",
    "    budgetary_impact = (\n",
    "        baseline.calculate(\"household_net_income\", period=2024).sum()\n",
    "        - reformed.calculate(\"household_net_income\", 2024).sum()\n",
    "    )\n",
    "    poverty_baseline = baseline.calculate(\n",
    "        \"in_poverty\", map_to=\"person\", period=2024\n",
    "    ).mean()\n",
    "    poverty_reform = reformed.calculate(\n",
    "        \"in_poverty\", map_to=\"person\", period=2024\n",
    "    ).mean()\n",
    "    poverty_rate_change = (\n",
    "        poverty_reform - poverty_baseline\n",
    "    ) / poverty_baseline\n",
    "\n",
    "    gini_baseline = baseline.calculate(\n",
    "        \"equiv_household_net_income\", map_to=\"person\", period=2024\n",
    "    ).gini()\n",
    "    gini_reform = reformed.calculate(\n",
    "        \"equiv_household_net_income\", map_to=\"person\", period=2024\n",
    "    ).gini()\n",
    "    gini_rate_change = (gini_reform - gini_baseline) / gini_baseline\n",
    "\n",
    "    hnet_reformed = reformed.calculate(\n",
    "        \"household_net_income\", period=2024, map_to=\"person\"\n",
    "    )\n",
    "    hnet_baseline = baseline.calculate(\n",
    "        \"household_net_income\", period=2024, map_to=\"person\"\n",
    "    )\n",
    "    percent_better_off = (hnet_reformed > hnet_baseline).mean()\n",
    "    # Poverty headcount relative change\n",
    "    # Inequality gini index relative change\n",
    "    # Percent better off\n",
    "\n",
    "    return dict(\n",
    "        budgetary_impact=budgetary_impact,\n",
    "        reform_id=reform.api_id,\n",
    "        poverty_rate_change=poverty_rate_change,\n",
    "        gini_rate_change=gini_rate_change,\n",
    "        percent_better_off=percent_better_off,\n",
    "    )\n",
    "\n",
    "\n",
    "budgetary_impacts = []\n",
    "reform_ids = []\n",
    "poverty_rate_changes = []\n",
    "gini_rate_changes = []\n",
    "percentages_better_off = []\n",
    "\n",
    "for i in range(len(provisions)):\n",
    "    impacts = get_impacts(reforms[i])\n",
    "    budgetary_impacts.append(impacts[\"budgetary_impact\"])\n",
    "    reform_ids.append(impacts[\"reform_id\"])\n",
    "    poverty_rate_changes.append(impacts[\"poverty_rate_change\"])\n",
    "    gini_rate_changes.append(impacts[\"gini_rate_change\"])\n",
    "    percentages_better_off.append(impacts[\"percent_better_off\"])\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Reform\": provisions,\n",
    "        \"Budgetary impact\": budgetary_impacts,\n",
    "        \"Percent gaining\": percentages_better_off,\n",
    "        \"Poverty change\": poverty_rate_changes,\n",
    "        \"Inequality change\": gini_rate_changes,\n",
    "        \"PolicyEngine\": reform_ids,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Budgetary impact\"] = df[\"Budgetary impact\"].apply(\n",
    "    lambda x: f\"{x/1e9:+,.1f}\"\n",
    ")\n",
    "df[\"PolicyEngine\"] = df[\"PolicyEngine\"].apply(\n",
    "    lambda x: f\"[#{x}](https://legacy.policyengine.org/uk/policy?reform={x}&baseline=1&time_period=2024&region=uk)\"\n",
    ")\n",
    "df[\"Percent gaining\"] = df[\"Percent gaining\"].apply(lambda x: f\"{x:+.1%}\")\n",
    "df[\"Poverty change\"] = df[\"Poverty change\"].apply(lambda x: f\"{x:+.1%}\")\n",
    "df[\"Inequality change\"] = df[\"Inequality change\"].apply(lambda x: f\"{x:+.1%}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "| Reform           |   Budgetary impact | Percent gaining   | Poverty change   | Inequality change   | PolicyEngine                                                                                    |\n",
       "|:-----------------|-------------------:|:------------------|:-----------------|:--------------------|:------------------------------------------------------------------------------------------------|\n",
       "| Fuel duty freeze |               -1.7 | +44.7%            | -0.2%            | -0.1%               | [#49760](https://legacy.policyengine.org/uk/policy?reform=49760&baseline=1&time_period=2024&region=uk) |\n",
       "| CB HITC cut      |               -1.4 | +7.0%             | +0.0%            | +0.0%               | [#49761](https://legacy.policyengine.org/uk/policy?reform=49761&baseline=1&time_period=2024&region=uk) |\n",
       "| NI class 1 cut   |              -10   | +63.8%            | +0.0%            | +0.3%               | [#49643](https://legacy.policyengine.org/uk/policy?reform=49643&baseline=1&time_period=2024&region=uk) |\n",
       "| NI class 4 cut   |               -1   | +8.0%             | +0.0%            | +0.0%               | [#49762](https://legacy.policyengine.org/uk/policy?reform=49762&baseline=1&time_period=2024&region=uk) |\n",
       "| Combined         |              -14.1 | +78.9%            | -0.4%            | +0.3%               | [#49773](https://legacy.policyengine.org/uk/policy?reform=49773&baseline=1&time_period=2024&region=uk) |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import Markdown\n",
    "\n",
    "Markdown(df.to_markdown(index=False))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "reformed = Microsimulation()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Budgetary impacts\n",
    "\n",
    "The PolicyEngine microsimulation model projects that the six reforms covered in this article will cost a combined [£14.1 billion in 2024](https://legacy.policyengine.org/uk/policy?reform=49773&baseline=1&time_period=2024&region=uk&focus=policyOutput.policyBreakdown&timePeriod=2024). This is only slightly higher than the Treasury's projected cost of [£13.7 billion](https://assets.publishing.service.gov.uk/media/65e7920c08eef600155a5617/Published_Costing_Document_Spring_Budget_2024_Final.pdf) for the same six reforms in fiscal year 2024-2025. Some of the variance in these projections are attributable to HM Treasury's inclusion of behavioural responses to policy reforms, as well as Treasury's modelling over a the fiscal year, as opposed to the calendar year.\n",
    "\n",
    "Table 2 below presents PolicyEngine's broader estimates over 2024, 2025, and 2026, as compared to HM Treasury's [estimates](https://assets.publishing.service.gov.uk/media/65e8578eb559930011ade2cb/E03057752_HMT_Spring_Budget_Mar_24_Web_Accessible__2_.pdf) over the corresponding fiscal years (2024-2025, etc.) for the six policies investigated in this article."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "from policyengine_uk import Microsimulation\n",
    "from policyengine_uk.model_api import *\n",
    "\n",
    "import pandas as pd\n",
    "\n",
    "# DataFrame with columns: [provision name, provision cost in 2024, percent better off, provision poverty impact in 2024, inequality impact in 2024]\n",
    "\n",
    "rows = [\"PolicyEngine\", \"HM Treasury\", \"Difference\"]\n",
    "years = [\"2024\", \"2025\", \"2026\"]\n",
    "\n",
    "baseline = Microsimulation()\n",
    "\n",
    "# Assign values for HM Treasury from report\n",
    "treasury_values_bn = {\n",
    "    \"2024\": {\n",
    "        \"ni_class_1_cut\": -9.360,\n",
    "        \"ni_class_4_cut\": -0.710,\n",
    "        \"cb_hitc_cut\": -0.540,\n",
    "        \"fuel_duty_freeze\": -3.090,\n",
    "    },\n",
    "    \"2025\": {\n",
    "        \"ni_class_1_cut\": -9.295,\n",
    "        \"ni_class_4_cut\": -0.850,\n",
    "        \"cb_hitc_cut\": -0.635,\n",
    "        \"fuel_duty_freeze\": -0.820,\n",
    "    },\n",
    "    \"2026\": {\n",
    "        \"ni_class_1_cut\": -9.490,\n",
    "        \"ni_class_4_cut\": -0.735,\n",
    "        \"cb_hitc_cut\": -0.640,\n",
    "        \"fuel_duty_freeze\": -0.830,\n",
    "    },\n",
    "}\n",
    "\n",
    "treasury_totals_bn = {}\n",
    "for year in treasury_values_bn:\n",
    "    treasury_totals_bn[year] = sum(treasury_values_bn[year].values())\n",
    "\n",
    "\n",
    "# Get impacts of entire policy reform for each year and place into dict\n",
    "def get_budget_impact_year(reform_dict: dict, year: str) -> float:\n",
    "    reform = Reform.from_dict(reform_dict, country_id=\"uk\")\n",
    "    reformed = Microsimulation(reform=reform)\n",
    "\n",
    "    budgetary_impact = (\n",
    "        baseline.calculate(\"household_net_income\", period=year).sum()\n",
    "        - reformed.calculate(\"household_net_income\", year).sum()\n",
    "    )\n",
    "    return budgetary_impact\n",
    "\n",
    "\n",
    "pe_totals_bn = {}\n",
    "for year in years:\n",
    "    pe_totals_bn[year] = get_budget_impact_year(complete_reform, year) / 1e9\n",
    "\n",
    "# Calculate difference between values\n",
    "diff_totals_bn = {}\n",
    "\n",
    "for year in years:\n",
    "    diff_totals_bn[year] = treasury_totals_bn[year] - pe_totals_bn[year]\n",
    "\n",
    "chart_data = []\n",
    "for i in range(len(years)):\n",
    "    chart_data.append([])\n",
    "    chart_data[i].append(pe_totals_bn[years[i]])\n",
    "    chart_data[i].append(treasury_totals_bn[years[i]])\n",
    "    chart_data[i].append(diff_totals_bn[years[i]])\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Estimates\": rows,\n",
    "        \"2024 (£bn)\": chart_data[0],\n",
    "        \"2025 (£bn)\": chart_data[1],\n",
    "        \"2026 (£bn)\": chart_data[2],\n",
    "    }\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "df[\"2024 (£bn)\"] = df[\"2024 (£bn)\"].apply(lambda x: f\"{x:+,.1f}\")\n",
    "df[\"2025 (£bn)\"] = df[\"2025 (£bn)\"].apply(lambda x: f\"{x:+,.1f}\")\n",
    "df[\"2026 (£bn)\"] = df[\"2026 (£bn)\"].apply(lambda x: f\"{x:+,.1f}\")\n",
    "\n",
    "# Note - I am unsure how to format the sole percentage row"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "| Estimates    |   2024 (£bn) |   2025 (£bn) |   2026 (£bn) |\n",
       "|:-------------|-------------:|-------------:|-------------:|\n",
       "| PolicyEngine |        -14.1 |        -15.8 |        -16.4 |\n",
       "| HM Treasury  |        -13.7 |        -11.6 |        -11.7 |\n",
       "| Difference   |          0.4 |          4.2 |          4.7 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import Markdown\n",
    "\n",
    "Markdown(df.to_markdown(index=False))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Distributional impacts\n",
    "The six modeled reforms of the Spring Budget 2023 would increase the net income of households by 1.2% on average. Under this reform, top-earning deciles would disproportionately benefit. Decile 9, the biggest beneficiary in relative terms, would experience a 1.9% gain in disposable income, while deciles 1 through 3 receive between 0.3% and 0.4%. In absolute terms, this equates to a £46 increase in post-tax income for earners in the lowest decile and a £1,402 increase for those in the top decile (£1,386 for those in decile 9). Similarly, 99.6% of earners in decile 9 and 77.4% of earners in decile 10 experience an increase in net income under these reforms, while 36.2% of earners in the lowest decile gain."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "from policyengine_uk import Simulation\n",
    "from policyengine_core.reforms import Reform\n",
    "from policyengine_core.periods import instant\n",
    "\n",
    "\n",
    "def modify_parameters(parameters):\n",
    "    parameters.gov.hmrc.fuel_duty.petrol_and_diesel.update(\n",
    "        start=instant(\"2024-01-01\"), stop=instant(\"2028-12-31\"), value=0.5295\n",
    "    )\n",
    "    parameters.gov.hmrc.income_tax.charges.CB_HITC.phase_out_rate.update(\n",
    "        start=instant(\"2024-01-01\"), stop=instant(\"2028-12-31\"), value=0.05\n",
    "    )\n",
    "    parameters.gov.hmrc.income_tax.charges.CB_HITC.phase_out_start.update(\n",
    "        start=instant(\"2024-01-01\"), stop=instant(\"2028-12-31\"), value=60000\n",
    "    )\n",
    "    parameters.gov.hmrc.national_insurance.class_1.rates.employee.main.update(\n",
    "        start=instant(\"2024-01-01\"), stop=instant(\"2028-12-31\"), value=0.08\n",
    "    )\n",
    "    parameters.gov.hmrc.national_insurance.class_4.rates.main.update(\n",
    "        start=instant(\"2024-01-01\"), stop=instant(\"2028-12-31\"), value=0.06\n",
    "    )\n",
    "    return parameters\n",
    "\n",
    "\n",
    "class reform(Reform):\n",
    "    def apply(self):\n",
    "        self.modify_parameters(modify_parameters)\n",
    "\n",
    "\n",
    "single_situation = {\n",
    "    \"people\": {\"you\": {\"age\": {\"2024\": 40}}},\n",
    "    \"benunits\": {\"your immediate family\": {\"members\": [\"you\"]}},\n",
    "    \"households\": {\n",
    "        \"your household\": {\n",
    "            \"members\": [\"you\"],\n",
    "            \"BRMA\": {\"2024\": \"MAIDSTONE\"},\n",
    "            \"local_authority\": {\"2024\": \"MAIDSTONE\"},\n",
    "            \"region\": {\"2024\": \"LONDON\"},\n",
    "        }\n",
    "    },\n",
    "    \"axes\": [\n",
    "        [{\"name\": \"employment_income\", \"count\": 200, \"min\": 0, \"max\": 200000}]\n",
    "    ],\n",
    "}\n",
    "\n",
    "married_situation = {\n",
    "    \"people\": {\n",
    "        \"you\": {\"age\": {\"2024\": 40}},\n",
    "        \"your partner\": {\"age\": {\"2024\": 40}},\n",
    "        \"your first child\": {\"age\": {\"2024\": 10}},\n",
    "        \"your second child\": {\"age\": {\"2024\": 10}},\n",
    "    },\n",
    "    \"benunits\": {\n",
    "        \"your immediate family\": {\n",
    "            \"members\": [\n",
    "                \"you\",\n",
    "                \"your partner\",\n",
    "                \"your first child\",\n",
    "                \"your second child\",\n",
    "            ]\n",
    "        }\n",
    "    },\n",
    "    \"households\": {\n",
    "        \"your household\": {\n",
    "            \"members\": [\n",
    "                \"you\",\n",
    "                \"your partner\",\n",
    "                \"your first child\",\n",
    "                \"your second child\",\n",
    "            ],\n",
    "            \"BRMA\": {\"2024\": \"MAIDSTONE\"},\n",
    "            \"local_authority\": {\"2024\": \"MAIDSTONE\"},\n",
    "            \"region\": {\"2024\": \"LONDON\"},\n",
    "        }\n",
    "    },\n",
    "    \"axes\": [\n",
    "        [{\"name\": \"employment_income\", \"count\": 200, \"min\": 0, \"max\": 200000}]\n",
    "    ],\n",
    "}\n",
    "\n",
    "baseline_single_simulation = Simulation(situation=single_situation)\n",
    "\n",
    "reform_single_simulation = Simulation(\n",
    "    reform=reform,\n",
    "    situation=single_situation,\n",
    ")\n",
    "\n",
    "baseline_married_simulation = Simulation(situation=married_situation)\n",
    "\n",
    "reform_married_simulation = Simulation(\n",
    "    reform=reform,\n",
    "    situation=married_situation,\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Household impacts\n",
    "For a single person with only employment income, the six reforms evaluated in this article produce a benefit if they earn at least £12,750, producing a maximum benefit of £754 if the individual earns £50,270 per year. This assumes the individual consumes no fuel impacted by the fuel duty freeze; if the same person were to spend the UK average of [£1,176](https://www.nimblefins.co.uk/cheap-car-insurance/average-cost-petrol-car) in 2024 on petrol, they would save a further £96, no matter what their pre-tax income.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "hovertemplate": "Employment income=%{x}<br>Net income=%{y}<extra></extra>",
         "legendgroup": "",
         "line": {
          "color": "#2C6496",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "lines",
         "name": "",
         "orientation": "v",
         "showlegend": false,
         "type": "scatter",
         "x": [
          0,
          1067.2659912109375,
          2134.531982421875,
          3201.7978515625,
          4269.06396484375,
          5336.32958984375,
          6403.595703125,
          7470.861328125,
          8538.1279296875,
          9605.3935546875,
          10672.6591796875,
          11739.9248046875,
          12807.19140625,
          13874.4560546875,
          14941.72265625,
          16008.9892578125,
          17076.255859375,
          18143.521484375,
          19210.787109375,
          20278.05078125,
          21345.318359375,
          22412.583984375,
          23479.849609375,
          24547.1171875,
          25614.3828125,
          26681.6484375,
          27748.912109375,
          28816.1796875,
          29883.4453125,
          30950.7109375,
          32017.978515625,
          33085.2421875,
          34152.51171875,
          35219.7734375,
          36287.04296875,
          37354.3046875,
          38421.57421875,
          39488.83984375,
          40556.1015625,
          41623.37109375,
          42690.63671875,
          43757.90234375,
          44825.16796875,
          45892.4375,
          46959.69921875,
          48026.96484375,
          49094.234375,
          50161.49609375,
          51228.765625,
          52296.02734375,
          53363.296875,
          54430.5625,
          55497.82421875,
          56565.09375,
          57632.359375,
          58699.625,
          59766.890625,
          60834.16015625,
          61901.421875,
          62968.6875,
          64035.95703125,
          65103.21875,
          66170.484375,
          67237.75,
          68305.0234375,
          69372.28125,
          70439.546875,
          71506.8125,
          72574.0859375,
          73641.3515625,
          74708.609375,
          75775.875,
          76843.1484375,
          77910.4140625,
          78977.6796875,
          80044.9453125,
          81112.203125,
          82179.4765625,
          83246.7421875,
          84314.0078125,
          85381.2734375,
          86448.546875,
          87515.8046875,
          88583.0703125,
          89650.3359375,
          90717.6015625,
          91784.875,
          92852.1328125,
          93919.3984375,
          94986.6640625,
          96053.9296875,
          97121.203125,
          98188.46875,
          99255.7265625,
          100322.9921875,
          101390.265625,
          102457.53125,
          103524.796875,
          104592.0546875,
          105659.3203125,
          106726.59375,
          107793.859375,
          108861.125,
          109928.390625,
          110995.6484375,
          112062.921875,
          113130.1875,
          114197.453125,
          115264.71875,
          116331.984375,
          117399.25,
          118466.515625,
          119533.78125,
          120601.046875,
          121668.3203125,
          122735.578125,
          123802.84375,
          124870.109375,
          125937.375,
          127004.6484375,
          128071.9140625,
          129139.171875,
          130206.4375,
          131273.703125,
          132340.96875,
          133408.234375,
          134475.5,
          135542.765625,
          136610.046875,
          137677.296875,
          138744.5625,
          139811.84375,
          140879.09375,
          141946.375,
          143013.625,
          144080.890625,
          145148.171875,
          146215.421875,
          147282.703125,
          148349.96875,
          149417.21875,
          150484.5,
          151551.75,
          152619.03125,
          153686.296875,
          154753.546875,
          155820.828125,
          156888.078125,
          157955.359375,
          159022.625,
          160089.890625,
          161157.15625,
          162224.40625,
          163291.6875,
          164358.953125,
          165426.21875,
          166493.484375,
          167560.734375,
          168628.015625,
          169695.28125,
          170762.546875,
          171829.8125,
          172897.09375,
          173964.34375,
          175031.609375,
          176098.875,
          177166.140625,
          178233.421875,
          179300.671875,
          180367.9375,
          181435.203125,
          182502.46875,
          183569.75,
          184637,
          185704.265625,
          186771.53125,
          187838.796875,
          188906.078125,
          189973.328125,
          191040.59375,
          192107.859375,
          193175.125,
          194242.40625,
          195309.65625,
          196376.9375,
          197444.1875,
          198511.453125,
          199578.734375,
          200645.984375,
          201713.265625,
          202780.53125,
          203847.78125,
          204915.0625,
          205982.3125,
          207049.59375,
          208116.859375,
          209184.109375,
          210251.390625,
          211318.640625,
          212385.921875
         ],
         "xaxis": "x",
         "y": [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          4.744140625,
          26.08984375,
          47.4345703125,
          68.7802734375,
          90.1259765625,
          111.470703125,
          132.81640625,
          154.16015625,
          175.5078125,
          196.8515625,
          218.197265625,
          239.54296875,
          260.888671875,
          282.232421875,
          303.578125,
          324.923828125,
          346.26953125,
          367.615234375,
          388.958984375,
          410.3046875,
          431.65234375,
          452.99609375,
          474.341796875,
          495.685546875,
          517.03125,
          538.37890625,
          559.72265625,
          581.06640625,
          602.4140625,
          623.76171875,
          645.10546875,
          666.44921875,
          687.79296875,
          709.140625,
          730.484375,
          751.83203125,
          754,
          754.00390625,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754.00390625,
          754,
          754,
          754,
          754.00390625,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754.00390625,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754.0078125,
          754,
          754.0078125,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.2,
          "sizey": 0.2,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "tracegroupgap": 0
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "showlegend": false,
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Change to household net income by employment income for a single person"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "tickformat": ",.0f",
         "tickprefix": "£",
         "title": {
          "text": "Employment income"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "tickformat": ",.0f",
         "tickprefix": "£",
         "title": {
          "text": "Change to net income"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from policyengine_core.charts import *\n",
    "\n",
    "single_diff = pd.DataFrame(\n",
    "    {\n",
    "        \"Net income\": (\n",
    "            reform_single_simulation.calculate(\"household_net_income\", 2024)\n",
    "            - baseline_single_simulation.calculate(\n",
    "                \"household_net_income\", 2024\n",
    "            )\n",
    "        ),\n",
    "        \"Employment income\": reform_single_simulation.calculate(\n",
    "            \"employment_income\", 2024\n",
    "        ),\n",
    "    }\n",
    ")\n",
    "fig = px.line(\n",
    "    single_diff,\n",
    "    y=\"Net income\",\n",
    "    x=\"Employment income\",\n",
    "    color_discrete_sequence=[BLUE],\n",
    "    title=\"Change to household net income by employment income for a single person\",\n",
    ").update_layout(\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"Change to net income\",\n",
    "    yaxis_tickformat=\",.0f\",\n",
    "    yaxis_tickprefix=\"£\",\n",
    "    xaxis_tickformat=\",.0f\",\n",
    "    xaxis_tickprefix=\"£\",\n",
    "    showlegend=False,\n",
    ")\n",
    "format_fig(fig)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "For the same hypothetical person, if their income falls within the range specified above, the tax reforms analysed here would yield a 2% drop in their marginal tax rate; all others would see no change. *View this household in the interactive PolicyEngine tax calculator [here](https://legacy.policyengine.org/uk/household?reform=49773&baseline=1&time_period=2024&region=uk&focus=householdOutput.netIncome&timePeriod=2024&household=42359).*\n",
    "\n",
    "For a married couple with two children, the impacts of this reform package are slightly more complext. Again, these reforms would produce no increase to post-tax income until the head of household earns £12,750 per year, after which the families net income will rise, until reaching a peak of £2,874 when the head makes £60,000. After this point, the post-tax benefit drops as the High Income Child Benefit Charge phases in, until the end of its taper at £80,000, at which all households see a net income increase of £754. These figures do not include the impact of the fuel duty freeze. *View this household in the interactive PolicyEngine tax calculator [here](https://legacy.policyengine.org/uk/household?reform=49773&baseline=1&time_period=2024&region=uk&focus=householdOutput.earnings&timePeriod=2024&household=42361).*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "hovertemplate": "Employment income=%{x}<br>Net income=%{y}<extra></extra>",
         "legendgroup": "",
         "line": {
          "color": "#2C6496",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "lines",
         "name": "",
         "orientation": "v",
         "showlegend": false,
         "type": "scatter",
         "x": [
          0,
          1067.2659912109375,
          2134.531982421875,
          3201.7978515625,
          4269.06396484375,
          5336.32958984375,
          6403.595703125,
          7470.861328125,
          8538.1279296875,
          9605.3935546875,
          10672.6591796875,
          11739.9248046875,
          12807.19140625,
          13874.4560546875,
          14941.72265625,
          16008.9892578125,
          17076.255859375,
          18143.521484375,
          19210.787109375,
          20278.05078125,
          21345.318359375,
          22412.583984375,
          23479.849609375,
          24547.1171875,
          25614.3828125,
          26681.6484375,
          27748.912109375,
          28816.1796875,
          29883.4453125,
          30950.7109375,
          32017.978515625,
          33085.2421875,
          34152.51171875,
          35219.7734375,
          36287.04296875,
          37354.3046875,
          38421.57421875,
          39488.83984375,
          40556.1015625,
          41623.37109375,
          42690.63671875,
          43757.90234375,
          44825.16796875,
          45892.4375,
          46959.69921875,
          48026.96484375,
          49094.234375,
          50161.49609375,
          51228.765625,
          52296.02734375,
          53363.296875,
          54430.5625,
          55497.82421875,
          56565.09375,
          57632.359375,
          58699.625,
          59766.890625,
          60834.16015625,
          61901.421875,
          62968.6875,
          64035.95703125,
          65103.21875,
          66170.484375,
          67237.75,
          68305.0234375,
          69372.28125,
          70439.546875,
          71506.8125,
          72574.0859375,
          73641.3515625,
          74708.609375,
          75775.875,
          76843.1484375,
          77910.4140625,
          78977.6796875,
          80044.9453125,
          81112.203125,
          82179.4765625,
          83246.7421875,
          84314.0078125,
          85381.2734375,
          86448.546875,
          87515.8046875,
          88583.0703125,
          89650.3359375,
          90717.6015625,
          91784.875,
          92852.1328125,
          93919.3984375,
          94986.6640625,
          96053.9296875,
          97121.203125,
          98188.46875,
          99255.7265625,
          100322.9921875,
          101390.265625,
          102457.53125,
          103524.796875,
          104592.0546875,
          105659.3203125,
          106726.59375,
          107793.859375,
          108861.125,
          109928.390625,
          110995.6484375,
          112062.921875,
          113130.1875,
          114197.453125,
          115264.71875,
          116331.984375,
          117399.25,
          118466.515625,
          119533.78125,
          120601.046875,
          121668.3203125,
          122735.578125,
          123802.84375,
          124870.109375,
          125937.375,
          127004.6484375,
          128071.9140625,
          129139.171875,
          130206.4375,
          131273.703125,
          132340.96875,
          133408.234375,
          134475.5,
          135542.765625,
          136610.046875,
          137677.296875,
          138744.5625,
          139811.84375,
          140879.09375,
          141946.375,
          143013.625,
          144080.890625,
          145148.171875,
          146215.421875,
          147282.703125,
          148349.96875,
          149417.21875,
          150484.5,
          151551.75,
          152619.03125,
          153686.296875,
          154753.546875,
          155820.828125,
          156888.078125,
          157955.359375,
          159022.625,
          160089.890625,
          161157.15625,
          162224.40625,
          163291.6875,
          164358.953125,
          165426.21875,
          166493.484375,
          167560.734375,
          168628.015625,
          169695.28125,
          170762.546875,
          171829.8125,
          172897.09375,
          173964.34375,
          175031.609375,
          176098.875,
          177166.140625,
          178233.421875,
          179300.671875,
          180367.9375,
          181435.203125,
          182502.46875,
          183569.75,
          184637,
          185704.265625,
          186771.53125,
          187838.796875,
          188906.078125,
          189973.328125,
          191040.59375,
          192107.859375,
          193175.125,
          194242.40625,
          195309.65625,
          196376.9375,
          197444.1875,
          198511.453125,
          199578.734375,
          200645.984375,
          201713.265625,
          202780.53125,
          203847.78125,
          204915.0625,
          205982.3125,
          207049.59375,
          208116.859375,
          209184.109375,
          210251.390625,
          211318.640625,
          212385.921875
         ],
         "xaxis": "x",
         "y": [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          2.134765625,
          11.7421875,
          21.345703125,
          30.951171875,
          40.556640625,
          50.162109375,
          59.765625,
          69.373046875,
          78.978515625,
          88.58203125,
          98.1875,
          107.79296875,
          117.400390625,
          127.001953125,
          136.611328125,
          146.212890625,
          155.8203125,
          165.427734375,
          175.03515625,
          184.63671875,
          194.2421875,
          203.8515625,
          213.453125,
          223.05859375,
          232.6640625,
          242.2734375,
          261.0703125,
          581.06640625,
          602.4140625,
          623.76171875,
          645.10546875,
          666.44921875,
          687.79296875,
          709.140625,
          730.484375,
          786.0625,
          1014.453125,
          1240.67578125,
          1466.89453125,
          1693.1171875,
          1919.3359375,
          2145.55859375,
          2371.77734375,
          2598,
          2824.22265625,
          2785.2265625,
          2672.1171875,
          2559.00390625,
          2445.89453125,
          2332.78125,
          2219.67578125,
          2106.5625,
          1993.453125,
          1880.33984375,
          1767.23046875,
          1654.125,
          1541.0078125,
          1427.8984375,
          1314.78515625,
          1201.67578125,
          1088.56640625,
          975.45703125,
          862.34375,
          754,
          754,
          754.00390625,
          754,
          754,
          754,
          754,
          754,
          754,
          753.99609375,
          754,
          754.00390625,
          754,
          754,
          754,
          754.00390625,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754.0078125,
          754,
          754.0078125,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754.0078125,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          754,
          753.9921875,
          754,
          754,
          754,
          754,
          754,
          754.0078125,
          754,
          754,
          754,
          754,
          754,
          754.0078125
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.2,
          "sizey": 0.2,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "tracegroupgap": 0
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Change to household net income by employment income for a married couple with two children"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "tickformat": ",.0f",
         "tickprefix": "£",
         "title": {
          "text": "Employment income"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "tickformat": ",.0f",
         "tickprefix": "£",
         "title": {
          "text": "Change to net income"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "married_diff = pd.DataFrame(\n",
    "    {\n",
    "        \"Net income\": (\n",
    "            reform_married_simulation.calculate(\"household_net_income\", 2024)\n",
    "            - baseline_married_simulation.calculate(\n",
    "                \"household_net_income\", 2024\n",
    "            )\n",
    "        ),\n",
    "        \"Employment income\": reform_married_simulation.calculate(\n",
    "            \"employment_income\", 2024, map_to=\"household\"\n",
    "        ),\n",
    "    }\n",
    ")\n",
    "fig = px.line(\n",
    "    married_diff,\n",
    "    y=\"Net income\",\n",
    "    x=\"Employment income\",\n",
    "    color_discrete_sequence=[BLUE],\n",
    "    title=\"Change to household net income by employment income for a married couple with two children\",\n",
    ").update_layout(\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"Change to net income\",\n",
    "    yaxis_tickformat=\",.0f\",\n",
    "    yaxis_tickprefix=\"£\",\n",
    "    xaxis_tickformat=\",.0f\",\n",
    "    xaxis_tickprefix=\"£\",\n",
    ")\n",
    "format_fig(fig)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Conclusion\n",
    "PolicyEngine estimates the cost of the Spring Budget 2023's reforms to National Insurance, the High Income Child Benefit Charge, and the fuel duty at £14.1 billion in 2024. Cumulatively, these reforms will raise the net income of 77.4% of British households, with a disproportionately positive impact upon higher-income households. We also find a small effect on poverty reduction, as well as a 0.5% increase in inequality. For readers interested in generating their own society-wide tax reform simulations or better understanding how these reforms will impact their household in the coming fiscal year, we invite you to use our personalised [PolicyEngine calculator](https://legacy.policyengine.org/uk/policy?reform=49773&baseline=1&time_period=2024&region=uk&focus=policyOutput.policyBreakdown&timePeriod=2024), available on desktop and mobile devices."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# Beta-launch: PolicyEngine's enhanced microdata for policy analysis
Slug: enhanced-cps-beta
Date: 2024-03-25 09:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, technical, featured
Description: By integrating and calibrating multiple datasets, PolicyEngine makes world-class tax-benefit microsimulation modeling available to anyone.

---

When policy analysts predict the effects of tax and benefit reforms, they often turn to microsimulation. By combining a rules engine with representative survey or administrative datasets, microsimulation supports intricate policy analysis at a detailed household level. Think TurboTax, but for hundreds of thousands of households at once, and over a range of policy rule scenarios. This technology is at the heart of tax-benefit analysis around the world—including PolicyEngine's.

Microsimulation's first ingredient is a robust rules engine. Here, PolicyEngine is well proven, with a detailed federal income tax model, state income tax models complete and [validated](https://github.com/PolicyEngine/policyengine-us/issues/993) against [NBER's TAXSIM](https://www.nber.org/research/data/taxsim) in nearly every state, and benefit program models powering [multiple benefit](https://myfriendben.org) [navigation apps](https://imaginela.org/social-benefit) via our API, we provide comprehensive, well-tested rules for most major programs affecting Americans' pocket books.

Today, we're beta-launching a significant upgrade to the second ingredient. Since [December 2022](enhancing-the-current-population-survey-for-policy-analysis), we've been building an enhanced open dataset for more accurate microsimulation. While other prominent analysts also enhance microdata, we're taking a different approach that leverages the best of modern data science to support our broad scope of taxes and benefits, at the federal, state and local levels. By starting with the (openly available) Current Population Survey and integrating non-identifiable information from tax records, we are also introducing the first open alternative to restricted tax microdata for microsimulation.

Our launch accompanies three topical reports leveraging the new data:

1. [Child Tax Credit provisions of the Tax Relief for American Families and Workers Act](trafwa-ctc) (PolicyEngine)
1. [Individual income tax provisions of President Biden's 2025 Budget](biden-budget-2025) (PolicyEngine)
1. [Building a stronger foundation for American families: Options for Child Tax Credit reform](https://www.niskanencenter.org/building-a-stronger-foundation-for-american-families-options-for-child-tax-credit-reform/) (Niskanen Center)

This blog post lays out our approach, results from our validation dashboard, and our plans to further advance the field. We've also included information on how to use this free, open-source dataset in your own work, either via the PolicyEngine web app or locally.

## Motivation

PolicyEngine's broad policy scope creates special opportunities and challenges for microdata. Federal tax analysts like the Joint Committee on Taxation and the Tax Foundation have generally focused on data to support federal tax reform. Here, open resources like [Quantria Strategies' technical documentation](https://quantria.com/assets/img/TechnicalDocumentationV4-2.pdf) and the [Policy Simulation Library's open-source Tax-Data project](https://pslmodels.github.io/taxdata/) have served an essential role, documenting and demonstrating how to calibrate datasets of tax returns to best represent the national landscape, and how to construct and integrate nonfilers from surveys to capture reforms that could make them liable for tax or eligible for refundable credits.

Adding benefit programs and state taxes to the model, and reporting on other outcomes like poverty, requires a different approach. Tax returns lack the detailed person-level characteristics, hierarchical data structures, and information on benefits needed to capture the impacts of these programs. For example, Maryland limits its state Child Tax Credit to children under six, or those under age 17 with a disability—an intersection of signals not available in tax returns.

After introducing this approach to microdata enhancement to PolicyEngine UK [over two years ago](../../uk/research/how-machine-learning-tools-make-policyengine-more-accurate), we've refined it and adapted it to the (much more complex) US context. We're excited to have it ready for use and further advances.

## Methodology

We construct our enhanced data, which we call the Enhanced Current Population Survey, or ECPS, from three sources:

1. [**Current Population Survey March Supplement (CPS).**](https://www.census.gov/data/datasets/time-series/demo/cps/cps-asec.html) The CPS is a monthly nationwide survey that estimates unemployment rates and other key monthly indicators. Each March, the Census Bureau expands the sample and set of questions, to collect more information on the prior year among respondents. The March Supplement, also called the Annual Social and Economic Supplement (ASEC), powers reports such as official poverty estimates. Census releases the microdata and its results each September, so the latest currently available represents calendar year 2022. The data is hierarchical, with entities for people, families, tax filing units, households, and "SPM units", referring to the Supplemental Poverty Measure and representing groups of cohabitating individuals who share resources. The 2022 ASEC includes 146,133 people across 88,978 households.
2. [**Internal Revenue Service Public Use File (PUF).**](https://www.irs.gov/statistics/soi-tax-stats-individual-public-use-microdata-files) The IRS makes a flat dataset with information on a sample of tax returns available to researchers who pay a fee and agree not to distribute the data. The most recent PUF represents tax year 2015, with [179 characteristics for 207,696 records](https://drive.google.com/file/d/17_SeKv9cmWJW-blALlSgl53yg3UUYzHE/view?usp=sharing), statistically altered to avoid disclosure. From 2016 forward, the IRS will instead release a [synthetic PUF, in partnership with the Urban Institute](https://www.urban.org/research/publication/synthetic-supplemental-public-use-file-low-income-information-return-data-methodology-utility-and-privacy-implications).
3. **Administrative totals.** For instance, the total US population, income tax revenue, dividends, SNAP benefits, and so on. We collect 92 of these from historical sources and Congressional Budget Office (CBO) forecasts.

Our procedure maps to the above sequence. As shown in Figure 1 ([high resolution](https://docs.google.com/drawings/d/1DMExtIYWJMzn2Dii_S9eWXyuGsEtr_7JDl_vfU9F4IY/preview)), we first "age" the CPS and PUF to the current year (e.g., by growing PUF wages by the average growth of wages since 2015), then incorporate information from the PUF onto the CPS (while also preserving the original CPS), and finally reweighting the data. This contrasts to the standard approach among tax analysts: similarly age the CPS and PUF, but use the PUF as a base file, append nonfilers from the CPS, then reweight.

![Figure 1: PolicyEngine's data flow to create PUF-enhanced CPS file](/images/posts/enhanced_cps_beta/data_hierarchy.png)

Specifically, here are our steps:

##### Prepare PUF for training:

1.  Select common variables: demographics, filing status, number of child dependents, and number of other dependents (NB: IRS caps dependent counts at 3 in PUF).
1.  Impute PUF demographics from the 119,675 records with demographics to all 207,696 PUF records using quantile regression forests.

##### Create PUF-structured CPS file:

1.  Aggregate CPS to tax unit to create a dataset with all common variables (includes transformations like capping dependent counts at 3).
1.  Impute PUF variables to PUF-structured CPS file using quantile regression forests.
1.  Break down the PUF-imputed CPS tax unit file by person.
1.  Attach other CPS characteristics to the PUF-structure.
1.  Stack the PUF-based CPS with the original.

##### Reweight with gradient descent:

1.  Calculate the deviation between the dataset's aggregates and administrative totals for each of 90 targets (population, income component, benefit participation, etc.).
1.  Construct a "loss function" that condenses these individual deviations into a single metric.
1.  Apply gradient descent to iteratively adjust the household weights to minimize the loss function.

We've built a new open-source Python package, [`survey-enhance`](https://policyengine.github.io/survey-enhance/), to streamline the usage of quantile regression forests for integration and gradient descent for reweighting. We have also submitted a [paper](https://github.com/nikhilwoodruff/survey-enhance/blob/main/docs/paper/project_paper.pdf) to the International Journal of Microsimulation describing the methodology in greater detail (in the UK context), and comparing it to standard methods. For instance, we show in a [holdout experiment](https://colab.research.google.com/drive/1E8F7S1Uvfw_3PmpS226Sl1LWV5NBi0CE) that quantile regression forests significantly outperform statistical matching for data integration, and also show that the gradient descent approach outperforms percentile matching when correcting surveys for high-income representation.

## Results

We've assessed our approach chiefly by comparing aggregates against administrative totals. We sum each of our 93x targets in the aged PUF, aged CPS, and ECPS, in 2022 to 2025 (applying our rules engine for computed targets). In almost every target, the ECPS performs best, coming within one percent of every target.

To see how our totals compare, explore our [interactive dashboard](https://policyengine-us-calibration-validation.streamlit.app/) (screenshot below).

![PolicyEngine's calibration dashboard](/images/posts/enhanced_cps_beta/dashboard.png)

We have additionally compared results from reforms, and we will launch a similar dashboard with those comparisons in the future.

## How you can use it

You can use the ECPS in the PolicyEngine web app, in the policyengine-us Python package, or by downloading files.

To use the ECPS in the PolicyEngine web app, run a microsimulation as normal, and then toggle the _Use Enhanced CPS_ switch in the right panel, or bottom on mobile. We will make this the default option after we exit beta, as it has been in PolicyEngine UK since we introduced the enhanced data.

![Enhanced CPS switch](/images/posts/enhanced_cps_beta/app_screenshot.png)

To use the ECPS in the policyengine-us Python package, specify it in the Microsimulation call as follows, then use it as you would otherwise.

```python
ecps = Microsimulation(dataset="enhanced_cps_2024")
```

To download the ECPS, visit the [release page](https://github.com/PolicyEngine/policyengine-us/releases/tag/enhanced-cps-2022) and download the h5 file.

## Future development

We've received valuable feedback from many in the economics community throughout the development process, and consider this launch only the beginning. Our plans for future development fall into four broad categories:

1. _More targets and validation._ As of this writing, we have [39 open issues related to calibration](https://github.com/PolicyEngine/policyengine-us/issues?q=is%3Aissue+is%3Aopen+label%3Acalibration), ranging from adding targets to better aligning our definitions to available targets.
1. _Comparison to other models._ For instance, we are currently working with the [Policy Simulation Library](pslmodels.org) to validate this dataset against their PUF-based [TaxData](https://github.com/PSLmodels/taxdata) project. We are also collecting estimates from other analysts, such as the Joint Committee on Taxation, Congressional Budget Office, Tax Policy Center, and ITEP, to compare projected results of reforms.
1. _Integrating more data._ Beyond the CPS and PUF, we would like to integrate information from other sources. For example, assets from the Survey of Consumer Finances would improve our modeling of asset limits in programs like SNAP and SSI; consumption from the Consumer Expenditure Survey would enable modeling of a hypothetical Value Added Tax or carbon tax ([as our UK model has](../../uk/research/how-policyengine-estimates-the-effects-of-uk-carbon-taxes)); and rent expenses from the the American Community Survey would improve our modeling of state rental tax credits.
1. _Finer geographic detail._ Having calibrated our data to the US as a whole, we are equipped to replicate the process for smaller geographies. We will avoid the issues of small sample sizes by reweighting the full nationwide dataset to each local area's administrative targets—starting at the state level, then Congressional district and ultimately state legislative district or other locales.

We are setting new standards in policy simulations and evidence-based policymaking by enhancing the CPS with IRS tax records and reweighting. Our ongoing innovation and transparency align with PolicyEngine's mission to compute the impact of public policy accurately and objectively.



---

---
# Child Tax Credit Provisions of the Tax Relief for American Workers and Families Act
Slug: trafwa-ctc
Date: 2024-03-25 09:00:00
Authors: Max Ghenis
Tags: us, policy, featured
Description: How the Wyden-Smith bipartisan tax package would affect families through 2025.

---

When Politico [reported](https://twitter.com/ben_guggenheim/status/1745403401695908256) the bipartisan tax package on January 11, we provided the [first budgetary and distributional analysis](https://policyengine.org/us/research/wyden-smith-ctc) of its main Child Tax Credit (CTC) provisions, that day. Today, we’re expanding that analysis to reflect all CTC provisions in the [Tax Relief for American Families and Workers Act of 2024](https://www.finance.senate.gov/imo/media/doc/the_tax_relief_for_american_families_and_workers_act_of_2024_technical_summary.pdf) (TRAFWA), which Senate Finance Committee Chair Ron Wyden (D-OR) and House Ways and Means Committee Chair Jason Smith (R-MO) [announced on January 16](https://waysandmeans.house.gov/smith-wyden-announce-agreement-on-tax-framework-to-help-families-and-main-street-businesses/). The House [passed the bill](https://www.congress.gov/bill/118th-congress/house-bill/7024/all-actions) 357–70 on January 31, and it currently sits in the Senate.

From 2023 to 2025 — in our static model assuming full take-up — we project the TRAFWA’s CTC reforms would:

- Cost $40 billion

- Lower child poverty by 4.7% in 2023, rising to 9.5% in 2025

- Benefit 9% of the population in 2023, and about 40% in 2024–25

- Lower the Gini index of income inequality by 0.1% in 2023, rising to 0.3% in 2025

This report describes these results in more detail, both for individual households and society at large. We’ll show the [custom mini-app](https://legacy.policyengine.org/us/trafwa-ctc-calculator) we built to capture the multi-year effects of the bill on your own family. This is also the first analysis we’ve published using our Enhanced Current Population Survey, we’ve built to give everyone access to the most accurate tax-benefit microsimulation modeling available — learn more about our launch of this cutting-edge dataset [here](enhanced-cps-beta). We close with a comparison to the Joint Committee on Taxation’s results.

[**Click here**](../trafwa-ctc-calculator) to see how the Tax Relief for American Families and Workers Act would affect your own household’s Child Tax Credit.

## How the Tax Relief for American Workers and Families Act of 2024 Would Reform the Child Tax Credit

The United States provides the Child Tax Credit (CTC) in two parts: the nonrefundable CTC and the refundable Additional Child Tax Credit (ACTC). The Tax Cuts and Jobs Act of 2017 (TCJA) established the ACTC at $1,400 and set the core CTC at $2,000 per child. While the TCJA did not index the core CTC to inflation, it did index the ACTC, resulting in its rise to $1,600 by 2023 and $1,700 in 2024. The ACTC phases in at 15 cents per dollar of earnings in excess of $2,500.

The TRAFWA makes four changes to the CTC:

1. **Raising the ACTC, starting in 2023:** The maximum ACTC would rise from $1,600 to $1,800 in 2023, from $1,700 to $1,900 in 2024, and from $1,700 to the value of the full CTC in 2025. If inflation follows the Congressional Budget Office’s projections, the ACTC will rise to $2,100 in 2025 (see provision 4 below).

1. **Phasing in the ACTC with the number of children, starting in 2023:** The ACTC would phase in at 15 cents multiplied by the number of CTC-eligible children, for each dollar of earnings above $2,500.

1. **Calculating the ACTC from the greater of earnings in the current and prior year, starting in 2024:** Filers who earn more in 2023 than 2024 will be eligible for the ACTC based on 2023 earnings, and similarly for those who earn more in 2024 than 2025.

1. **Inflation-indexing the CTC, rounded down to the nearest $100, starting in 2024:** This will increase the CTC to $2,100 in 2024, and unless inflation significantly outpaces CBO projections, it will remain at $2,100 in 2025.

## Impact on a Household

In our [previous report](https://policyengine.org/us/research/wyden-smith-ctc), we showed how the TRAFWA would affect a single parent of two in 2023. That analysis still holds, so here we’ll show a more complex example: a married family with three children, in 2025, with $10,000 of earnings in 2024. This household would be affected by all TRAWFA CTC reforms: the refundability rise, phase-in rate, inflation adjustment, and lookback provision.

Before getting into the analytics, let’s plug this household into our [new TRAFWA calculator](https://legacy.policyengine.org/us/trafwa-ctc-calculator). This tool lets you plug in a few pieces of information to see how the bill would affect you (we don’t collect any personally identifiable information). Let’s suppose they earned $30,000 in 2023, $10,000 in 2024, and $0 in 2025.

![](https://cdn-images-1.medium.com/max/3200/0*-TiVkn4xxhEmM812)

After clicking **Calculate**, we can see that they gain $9,225 total. $7,950 of that comes in 2024 and 2025, largely due to the lookback provision, though they also gain from other provisions in each year.

![](https://cdn-images-1.medium.com/max/3200/0*iirHzRPbLja-E4Yk)

Now let’s return to the main app for deeper analytics. If this family has [no earned income in 2025](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=44823&region=us&timePeriod=2025&baseline=2&household=40256), they would be ineligible for any credit under current law. However, TRAFWA would make them eligible for an ACTC phasing in at 45% (15% times three children) of earnings in excess of $2,500, based on their $10,000 of 2024 earnings, up to a maximum of $6,300 ($2,100 for each of three children). That’s 45% of $7,500, or $3,375, which is below the cap.

TRAFWA would affect this family differently [depending on their earnings in 2025](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=44823&region=us&timePeriod=2025&baseline=2&household=40256). Under current law (gray), their ACTC phases in beginning at $2,500, up to a maximum of $5,100 when their earnings reach $36,500. Under TRAFWA, they receive $3,375 until their 2025 earnings exceed their 2024 earnings, at which point it phases in at 45% before reaching $6,300. The non-refundable CTC then displaces the ACTC at higher earnings in both scenarios.

![](https://cdn-images-1.medium.com/max/2940/0*fkV9Z2PdXtG6FUxI)

The [net effect](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=44823&region=us&timePeriod=2025&baseline=2&household=40256) is a gain of up to $4,200 at $16,500 earnings, stabilizing at $300 from the inflation adjustment only at $38,500 earnings.

![](https://cdn-images-1.medium.com/max/2912/0*1-gBRdTFzk20GBj1)

## Societal Impact

Using PolicyEngine US v0.717.0 project that the TRAFWA CTC would cost $39.8 billion over the three years, with the cost rising each year. Appendix A compares the cost by year and provision to the Joint Committee on Taxation. Here we otherwise focus on 2024 impacts; to see other years, you can click the links and change the year in the right menu.

In 2024, households in the third income decile benefit most on an [absolute](https://legacy.policyengine.org/us/policy?focus=policyOutput.decileAverageImpact&reform=44066&region=us&timePeriod=2023&baseline=2) basis, while those in the second decile benefit most on a [relative](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.decileRelativeImpact&region=enhanced_us&timePeriod=2024&baseline=2) basis. They benefit more than lower income households who have fewer children and don’t meet the earnings requirement, and more than higher income households who take the non-refundable CTC instead.

![](https://cdn-images-1.medium.com/max/3200/0*KYmHcVBQHNKS2M8f)

These provisions would [benefit 40% of US residents](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.intraDecileImpact&region=enhanced_us&timePeriod=2024&baseline=2) in 2024. 4% of Americans gain at least 5% of net income, disproportionately those in the bottom four deciles.

![](https://cdn-images-1.medium.com/max/3200/0*fCLAKxRJJbob4GOV)

The number of people with resources below the poverty line would fall 2.0%, disproportionately [children](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.povertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (6.9%), [Blacks](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.racialPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (3.6%), and [women](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.genderPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (2.2%). We project that the bill would reduce the [number of children in poverty](https://colab.research.google.com/drive/1CApzPOg-qXbvYPdwmp0gIPK__kffixQH?authuser=1#scrollTo=OqtYayw8YNhu) by 345,000 in 2023, 573,000 in 2024, and 740,000 in 2025.[^1] Deep child poverty would [fall 6.1%](https://legacy.policyengine.org/us/policy?reform=46315&focus=policyOutput.deepPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2), and the Gini index of income inequality would [fall 0.25%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=44066&region=us&timePeriod=2023&baseline=2).

[^1]: The Center on Budget and Policy Priorities [forecasted](https://www.cbpp.org/research/federal-tax/about-16-million-children-in-low-income-families-would-gain-in-first-year-of) that "In the first year, the expansion would lift as many as 400,000 children above the poverty line. [...] When the expansion is fully in effect, it would lift some 500,000 or more children above the poverty line."

## Conclusion

As the Senate considers the Tax Relief for American Families and Workers Act, we present a new analysis into the budgetary, household, and distributional impacts it would generate. We do so using a new calculator, and a new dataset tuned for accurate policy forecasting, which we will continue to develop for greater accuracy in the future. Like all forecasts, ours carry uncertainty; for instance, our assumptions around full take-up and zero behavioral responses may not fully reflect reality, and future model enhancements will provide more flexible assumptions on these points.

To stay informed on our computational modeling of TRAFWA as it proceeds, analysis of new policies, and novel software to understand policy impacts, subscribe for our latest updates.

## Appendix A: Comparison to the Joint Committee on Taxation

The Joint Committee on Taxation expanded upon their official score in [this letter](https://chrissmith.house.gov/uploadedfiles/118-0673.pdf), which includes methodology and a provision-by-provision budgetary breakdown (they did not provide distributional impacts). They estimate the CTC provision cost $33.6 billion over the three years, while we estimate $39.8 billion, 18% higher.

As shown in the table below, major differences include:

1. PolicyEngine assumes the $2,000 CTC rises to $2,100 in 2024; JCT assumes 2025. This is based on [PolicyEngine’s research into the law and C-CPI-U values](https://github.com/PolicyEngine/policyengine-us/discussions/3726), and aligns with the Tax Foundation’s interpretation.

1. PolicyEngine finds a substantially larger impact of the lookback provision. We [build a panel from the 2018 and 2019 ASEC files](https://www2.census.gov/programs-surveys/cps/methodology/How%20To%20Link%20CPS%20Public%20Use%20Files.pdf), limiting to those who responded to employment and self-employment income questions, then build a quantile regression forests model to predict the distribution of prior-year earnings for each person in the CPS. This prediction algorithm adjusts the sampling distribution to match the total employment and self-employment income in the relevant year. Our model uses [these variables](https://github.com/PolicyEngine/policyengine-us/blob/1d3ca3ef54e2904a547a1e649b90979aaad0509a/policyengine_us/data/datasets/cps/enhanced_cps/enhanced_cps.py#L57-L71) as predictors. JCT shared with us that the allocation of dependents to tax units within the household likely explains the discrepancy; we have filed [this GitHub issue](https://github.com/PolicyEngine/policyengine-us/issues/4392) to improve our modeling on this front.

| Provision            | 2023 (JCT) | 2023 (PE)                                                                                                                                      | 2024 (JCT) | 2024 (PE)                                                                                                                                       | 2025 (JCT) | 2025 (PE)                                                                                                                                       | 2023-2025 (JCT) | 2023-2025 (PE) |
| :------------------- | ---------: | :--------------------------------------------------------------------------------------------------------------------------------------------- | ---------: | :---------------------------------------------------------------------------------------------------------------------------------------------- | ---------: | :---------------------------------------------------------------------------------------------------------------------------------------------- | --------------: | -------------: |
| Per-child phase-in   |        5.5 | [4.2](https://legacy.policyengine.org/us/policy?reform=49823&baseline=2&timePeriod=2023&region=enhanced_us&focus=policyOutput.policyBreakdown) |          6 | [5.0](https://legacy.policyengine.org/us/policy?reform=49823&baseline=2&timePeriod=2024&region=enhanced_us&focus=policyOutput.policyBreakdown)  |        5.7 | [4.7](https://legacy.policyengine.org/us/policy?reform=49823&baseline=2&timePeriod=2025&region=enhanced_us&focus=policyOutput.policyBreakdown)  |            17.2 |           13.9 |
| Look-back            |          0 | [0.0](https://legacy.policyengine.org/us/policy?reform=49855&baseline=2&timePeriod=2023&region=enhanced_us&focus=policyOutput.policyBreakdown) |        0.8 | [3.7](https://legacy.policyengine.org/us/policy?reform=49855&baseline=2&timePeriod=2024&region=enhanced_us&focus=policyOutput.policyBreakdown)  |        0.7 | [4.5](https://legacy.policyengine.org/us/policy?reform=49855&baseline=2&timePeriod=2025&region=enhanced_us&focus=policyOutput.policyBreakdown)  |             1.5 |            8.2 |
| Refund-able increase |        2.7 | [1.7](https://legacy.policyengine.org/us/policy?reform=49861&baseline=2&timePeriod=2023&region=enhanced_us&focus=policyOutput.policyBreakdown) |        2.5 | [2.1](https://legacy.policyengine.org/us/policy?reform=49861&baseline=2&timePeriod=2024&region=enhanced_us&focus=policyOutput.policyBreakdown)  |        3.4 | [3.1](https://legacy.policyengine.org/us/policy?reform=49861&baseline=2&timePeriod=2025&region=enhanced_us&focus=policyOutput.policyBreakdown)  |             8.6 |            6.9 |
| Indexing CTC         |          0 | [0.0](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2023&region=enhanced_us&focus=policyOutput.policyBreakdown) |        1.4 | [4.9](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2024&region=enhanced_us&focus=policyOutput.policyBreakdown)  |        4.7 | [5.9](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2025&region=enhanced_us&focus=policyOutput.policyBreakdown)  |             6.1 |           10.8 |
| Com-bined            |        8.2 | [5.9](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2023&region=enhanced_us&focus=policyOutput.policyBreakdown) |       10.7 | [15.7](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2024&region=enhanced_us&focus=policyOutput.policyBreakdown) |       14.7 | [18.2](https://legacy.policyengine.org/us/policy?reform=49862&baseline=2&timePeriod=2025&region=enhanced_us&focus=policyOutput.policyBreakdown) |            33.6 |           39.8 |

Our estimates may also differ due to different data, take-up assumptions (we assume full take-up, including of the lookback provision), and behavioral responses (though JCT said that they project minimal labor supply effects).

To contextualize the higher estimate of the lookback provision, we used the constructed 2018–19 ASEC panel to compare the ACTC amounts between 2018 and 2019 for the same filers. [We found](https://colab.research.google.com/drive/1NSYogO-uKBeSA7ECz0vDDURVX8LvJrso?usp=sharing) that the greater of 2018 and 2019 ACTC sums to 34% above the 2019 ACTC for filers in the panel (and with reported rather than imputed employment and self-employment incomes). Applying this to the total 2019 ACTC, this suggests that filers would have received an additional $8.3 billion in ACTC payments if they could choose the greater of their 2018 and 2019 payment, though this would have been partly offset by lower non-refundable CTC payments.

_Nikhil Woodruff, Pavel Makarchuk, and Riley Kotlus contributed to this report._



---

---
# Individual income tax provisions of President Biden's 2025 Budget
Slug: biden-budget-2025
Date: 2024-03-27 09:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, policy, featured
Description: PolicyEngine projects the impact of expanding tax credits and raising taxes on high-income filers.

---

President Biden introduced his [2025 Budget](https://www.whitehouse.gov/briefing-room/statements-releases/2024/03/11/fact-sheet-the-presidents-budget-for-fiscal-year-2025/) earlier this month, proposing a mix of reforms to both revenues and outlays. This report applies the PolicyEngine US microsimulation model to analyze four of its main individual income tax reforms:

1. Restoring the 2021 Child Tax Credit expansion

1. Restoring the 2021 Earned Income Tax Credit expansion for filers without qualifying children

1. Raising the top marginal tax rate to 39.6%

1. Increasing the Medicare and Net Investment Income taxes

We estimate that, in 2024 and assuming no behavioral responses, these reforms would cost $40.5 billion, lower poverty 12%, and lower income inequality. 59% of Americans would see a higher net income, while 3% would see a lower net income. This report describes these impacts in more detail, and examines effects on individual households.

**See how President Biden’s 2025 Budget affects your household with our [personalized calculator.](https://legacy.policyengine.org/us/household?reform=50893&focus=intro&region=enhanced_us&timePeriod=2024&baseline=2)**

## The reforms

Here we summarize the four provisions of Biden’s 2025 Budget that PolicyEngine models, based on the [Department of the Treasury’s details](https://home.treasury.gov/system/files/131/General-Explanations-FY2025.pdf).

### Restoring the 2021 Child Tax Credit expansion

Biden’s budget restores the expansion to the Child Tax Credit (CTC) enacted in the American Rescue Plan Act (ARPA). It would make the CTC fully refundable beginning in 2024, and for 2024 and 2025 increase the age limit from 16 to 17. Additionally, it increases the maximum credit per child to $3,600 for children under 6, and $3,000 for older children, phasing out at 5% of income in excess of a threshold dependent on filing status: $150,000 (married joint), $112,500 (head of household), and $75,000 (other). These amounts are not inflation-adjusted.

For example, this reform would provide an additional $3,600 to a single parent of two children, with one below six, if their income is below $6,600. The net benefit would phase out until their earnings reach $164,000, as shown [here](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=3826&region=us&timePeriod=2024&baseline=2&household=43046).

![](https://cdn-images-1.medium.com/max/2972/0*b4iPi1yq5BgsTHux)

To learn more, read our [**2023 report on restoring the ARPA CTC.**](https://policyengine.org/us/research/restoration-of-the-american-rescue-plan-acts-expanded-child-tax-credit)

### Restoring the 2021 Earned Income Tax Credit expansion for filers without qualifying children

Biden similarly proposed restoring ARPA’s expansion of the Earned Income Tax Credit (EITC) for filers without qualifying children. His plan would:

- Increase the phase-in and phase-out rates from 7.65% to 15.3%

- Lower the minimum age from 25 to 19 (or 24 for students)

- Remove the maximum age, currently 65

- Raise the maximum credit from $632 to $1,749 (adjusted for inflation from 2021)

This would change the EITC [as follows](https://legacy.policyengine.org/us/household?reform=50974&focus=householdOutput.earnings&region=enhanced_us&timePeriod=2024&baseline=2&household=40437) for a single person between 25 and 65:

![](https://cdn-images-1.medium.com/max/3004/0*O92F233Vaga2cfI8)

Producing a net benefit of up to $1,360 at $13,500 earnings, phasing out until earnings reach $25,000.

![](https://cdn-images-1.medium.com/max/3000/0*8yOkbR3oWf6mNbRM)

To learn more, read our [2023 report on restoring the ARPA EITC.](https://policyengine.org/us/research/restoring-arpa-eitc)

### Increasing the top marginal rate to 39.6%

The President proposed raising the top marginal tax rate from 37% to 39.6%, its value prior to the Tax Cuts and Jobs Act of 2017. The new rate would apply to income above $400,000 for single filers, $425,000 for head of household filers, $450,000 for married filers, and $225,000 for married separate filers. The reform would take effect in 2024, and the thresholds would rise with inflation starting in 2025.

For a [single person](https://legacy.policyengine.org/us/household?reform=50882&focus=householdOutput.earnings&region=enhanced_us&timePeriod=2024&baseline=2&household=43050) without itemized deductions, taxes would begin rising at $414,600 ($400,000 plus the standard deduction), and reach $19,400 in additional taxes at $1 million earnings.

![](https://cdn-images-1.medium.com/max/2260/0*B4zBerNqDKQtXONc)

### Increasing the Medicare and Net Investment Income taxes

Finally, the President proposed increasing both the top Medicare tax rate and top Net Investment Income Tax (NIIT) rate by 1.2 percentage points for individuals with income over $400,000. Since this is based on wages or net investment income, it kicks in at $400,000, not the higher amount resulting from the standard deduction. For an [individual](https://legacy.policyengine.org/us/household?reform=50660&focus=householdOutput.earnings&region=enhanced_us&timePeriod=2024&baseline=2&household=43051) with $1 million in wages, it would increase their taxes by $7,200.

![](https://cdn-images-1.medium.com/max/2268/0*EG5QzaVzXMfuxZ3c)

### Provisions not modeled

The Budget introduces four additional individual income tax reforms that PolicyEngine does not yet model:

1. Applying the NIIT to pass-through business income of taxpayers with income above $400,000

1. Tax long-term capital gains and qualified dividends as ordinary income for filers with taxable income above $1 million

1. Repeal “step-up basis” that increases the basis of inherited assets to the value at inheritance

1. Impose a minimum tax of 25% on total income (including unrealized capital gains) for taxpayers with wealth exceeding $100 million

Additionally, it reforms some of the programs we model in additional ways, such as a monthly CTC advance, and introduces many reforms outside the individual income tax. As we enhance our model, we will be able to forecast impacts of these types of reforms.

## Combined household impacts

To see the combined impacts of all four reforms on net income and work incentives, we examine two household types: a single person and a married couple with two young children.

### Single person

The [single person](https://legacy.policyengine.org/us/household?reform=51189&focus=householdOutput.earnings&region=enhanced_us&timePeriod=2024&baseline=2&household=43051) would see a larger EITC at low incomes, then a tax increase when their wages exceed $400,000, reaching a $26,600 total impact at $1 million earnings.

![](https://cdn-images-1.medium.com/max/3152/0*G3krZSBCHVu2Xbwf)

Their [marginal tax rate](https://legacy.policyengine.org/us/household?reform=51189&focus=householdOutput.mtr&region=enhanced_us&timePeriod=2024&baseline=2&household=43051) would fall up to 20pp in the earnings range where the EITC phases in further, then rise 15.3 percentage points as it phases out. It would then rise by 1.2pp from $400,000 to $414,600 (due to the additional Medicare rate, before the 39.6% rate kicks in), 5.8pp until earnings reach $623,950 (before they reach the current top marginal rate), and stabilize at a 3.8pp rise. The total marginal rate on top earnings would reach 43.2%.

![](https://cdn-images-1.medium.com/max/3108/0*YxlpJfHqW5R3BIEp)

### Family of four

A [married couple with two children](https://legacy.policyengine.org/us/household?reform=51189&focus=householdOutput.earnings&region=enhanced_us&timePeriod=2024&baseline=2&household=43059) under six will gain up to $7,200 from the expanded CTC, until their earnings reach $220,000 (assuming only one earner). Their taxes will then rise beginning at $400,000 earnings, and by $1 million earnings their taxes would rise by $27,500.

![](https://cdn-images-1.medium.com/max/3176/0*0IBvj5oF5Jv_cAva)

The reform increases their [marginal tax rate](https://legacy.policyengine.org/us/household?reform=51189&focus=householdOutput.mtr&region=enhanced_us&timePeriod=2024&baseline=2&household=43059), due to making the CTC fully refundable (removing the phase-in that reduces marginal tax rates), phasing out the additional CTC benefit for higher earners, and the high-income tax increases. The marginal tax rate increase stabilizes at 3.8pp for earnings above $770,000.

![](https://cdn-images-1.medium.com/max/3080/0*vzdISr5GI4VcDmjY)

## Nationwide results

We run the PolicyEngine tax-benefit microsimulation model v0.717.0, using our [Enhanced Current Population Survey](enhanced-cps-beta) and assuming no behavioral responses, to project budgetary and distributional impacts.

These provisions together would cost [$41 billion in 2024](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.netIncome&region=enhanced_us&timePeriod=2024&baseline=2) and [$35 billion in 2025](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.netIncome&region=enhanced_us&timePeriod=2025&baseline=2), according to the PolicyEngine model. While all provisions grow in magnitude, the tax increases grow faster, resulting in a smaller net impact. See Appendix A for a breakdown by provision and comparison to Treasury’s projections.

The net income of the bottom nine deciles would [rise](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.decileAverageImpact&region=enhanced_us&timePeriod=2024&baseline=2), on average, while the top decile’s would fall.

![](https://cdn-images-1.medium.com/max/3200/0*U8PVwgIOPwao0B3a)

As a [percentage](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.decileRelativeImpact&region=enhanced_us&timePeriod=2024&baseline=2) of net income, the impact falls monotonically with income decile:

![](https://cdn-images-1.medium.com/max/3200/0*FYfP1qgE6EF0ojl4)

Three in five Americans would see an [increase](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.intraDecileImpact&region=enhanced_us&timePeriod=2024&baseline=2) in net income, while three percent–almost entirely in the top income decile–would see it fall.

![](https://cdn-images-1.medium.com/max/3200/0*zUezlVy2vxvAqKqt)

The Supplemental Poverty Measure would fall 12%, disproportionately among [children](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.povertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (31%), [women](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.genderPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (13%), and [Blacks and Hispanics](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.racialPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) (14–15%).

![](https://cdn-images-1.medium.com/max/3200/0*fPcXYZPC77uYeIZj)

[Deep poverty](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.deepPovertyImpact&region=enhanced_us&timePeriod=2024&baseline=2) falls at a similar rate, while [income inequality](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.inequalityImpact&region=enhanced_us&timePeriod=2024&baseline=2) falls 1.7% to 2.7%, depending on the measure.

## Conclusion

President Biden’s proposed individual income tax reforms in his 2025 Budget, as analyzed by PolicyEngine, would have notable impacts on American households and the economy. The restoration of the expanded Child Tax Credit and Earned Income Tax Credit from the American Rescue Plan Act, along with the proposed increases in the top marginal tax rate, Medicare tax, and Net Investment Income Tax, are projected to result in a net cost of approximately $41 billion in 2024 and $35 billion in 2025.

The analysis suggests that the reforms would have a progressive impact on income distribution, with the bottom nine deciles experiencing an average increase in net income, while the top decile would see a decrease. The proposed changes are also projected to reduce the Supplemental Poverty Measure by 12%, with varying impacts across demographic groups. Income inequality would also be affected, with reductions ranging from 1.7% to 2.7%, depending on the measure used.

This analysis does not account for potential behavioral responses to the proposed tax changes, and differs from Treasury’s budgetary estimates for reasons described below (Treasury does not provide distributional estimates). As policymakers and the public consider these reforms, it will be crucial to carefully examine the potential impacts and trade-offs associated with the proposed changes to the individual income tax system.

## Appendix A: Budgetary breakdown

This table compares PolicyEngine’s estimates in 2024 and 2025 to those of the Treasury Department.

**Table 1: Effect of Budget Proposals on Projected Deficits ($ billions)**

| Proposal                                 | Treasury 2024                                                                            | Treasury 2025                                                                             | PolicyEngine 2024                                                                                                                                | PolicyEngine 2025                                                                                                                                |
| ---------------------------------------- | ---------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Restore the ARPA CTC expansion**       | [5.4](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=150)  | [209.9](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=150) | [110.9](https://legacy.policyengine.org/us/policy?reform=50634&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2024&baseline=2) | [111.9](https://legacy.policyengine.org/us/policy?reform=50634&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2025&baseline=2) |
| **Restore the ARPA EITC expansion**      | [0.4](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=150)  | [15.3](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=150)  | [33.5](https://legacy.policyengine.org/us/policy?reform=50974&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2024&baseline=2)  | [35.2](https://legacy.policyengine.org/us/policy?reform=51171&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2025&baseline=2)  |
| **Raise the top marginal rate to 39.6%** | [-9.9](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=149) | [-75.4](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=149) | [-72.7](https://legacy.policyengine.org/us/policy?reform=51191&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2024&baseline=2) | [-76.9](https://legacy.policyengine.org/us/policy?reform=51191&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2025&baseline=2) |
| **Increase the Medicare tax and NIIT**   | [-8.4](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=154) | [-42.9](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=154) | [-31.8](https://legacy.policyengine.org/us/policy?reform=51192&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2024&baseline=2) | [-34.4](https://legacy.policyengine.org/us/policy?reform=51192&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2025&baseline=2) |
| **Total**                                | **-12.5**                                                                                | **106.9**                                                                                 | **[40.5](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.netIncome&region=enhanced_us&timePeriod=2024&baseline=2)**    | **[34.7](https://legacy.policyengine.org/us/policy?reform=51189&focus=policyOutput.netIncome&region=enhanced_us&timePeriod=2025&baseline=2)**    |

Due to timing considerations — we place the budgetary impact of tax credits in the tax year, while Treasury does so only when paid in advance, mirroring the delivery of most payments in the following year — the combined impact across years provides more comparable numbers than either year in isolation. Here, Treasury estimates $94.4 billion from 2024–25, while PolicyEngine estimates $75.2 billion. This does not fully account for timing considerations, since Treasury allocates part of our 2025 estimates to 2026.

Other deviations could result from multiple causes. For example, we do not model the provision to apply the NIIT to pass-through business income of high-income filers, which occurs prior to the NIIT increase; accounting for this would thus increase our estimate of that provision. Further calibration of our [microdata](enhanced-cps-beta) to existing costs of programs could also better align these estimates; for example, [to the EITC](https://github.com/PolicyEngine/policyengine-us/issues/4276).

_Riley Kotlus contributed to this report._



---

---
# PolicyEngine launches state income tax modeling nationwide
Slug: state-tax-model-beta
Date: 2024-04-15 09:00:00
Authors: Pavel Makarchuk
Tags: us, policy, featured
Description: Free, open-source platform now covers all 50 states and D.C., just in time for tax season.

---

Today, as tax season closes, PolicyEngine is thrilled to announce the beta launch of state income tax modeling for all 50 states and Washington D.C. This significant milestone expands our existing suite of policy analysis tools, which already includes a comprehensive model of federal income taxes and benefit programs like the Supplemental Nutrition Assistance Program and Supplemental Security Income.

## What this means for our users

With this launch, anyone can now use PolicyEngine’s free, open-source platform to:

1. Enter their household information and estimate their state income taxes, along with federal taxes and benefit amounts.

1. Access free analytics, such as how net income and marginal tax rates change with respect to earnings.

1. Design customizable policy reforms for state income taxes and estimate the impact on households and society, including changes to the budget, poverty rates by age, race, and gender, income inequality, the distribution of benefits and costs, and impacts by income decile.

This launch represents a critical step towards our full launch later this year, which will include further enhancements such as:

1. Full validation against the[ National Bureau of Economic Research’s TAXSIM model](https://taxsim.nber.org/feenberg-coutts.pdf) for all states and tax years. We already validate PolicyEngine against TAXSIM for hundreds of thousands of tax units in each state and match to the penny for the [vast majority of cases](https://github.com/PolicyEngine/policyengine-us/issues/993) (for the 2021 tax year, TAXSIM’s latest). We’re grateful to be collaborating with Daniel Feenberg, TAXSIM’s creator, and a PolicyEngine advisory board member, to improve both models for the benefit of all users.

1. Adding more recent tax law, including legislation that defines tax rules for 2024 and beyond, as well as future-dated legal changes and inflation adjustments.

1. Allowing users to model how federal reforms affect state taxes, such as states that match a percentage of the federal Earned Income Tax Credit.

1. Incorporating this into our federal model of the state and local tax (SALT) deduction by imputing property taxes, the other element of this hotly-debated policy. This means we’ll be able to model real state income tax policies into SALT analysis, rather than reported amounts from prior years’ data.[^1]

[^1]: Currently, for the purposes of the SALT deduction and baseline net income in US simulations, we use state income tax as the Census Bureau calculates it from the Current Population Survey March Supplement, indexed for inflation.

Looking ahead, we also aspire to extend our [recently beta-launched microdata enhancement](https://policyengine.org/us/research/enhanced-cps-beta) to the state level, further improving the accuracy of state impact estimates for both state and federal reforms. We are actively seeking financial support to make this vision a reality.

To see examples of how to make the most of these new features, check out our state-specific launch posts for [New Mexico](https://policyengine.org/us/research/new-mexico-income-tax-launch), [Utah](https://policyengine.org/us/research/introducing-utah-state-income-tax-analysis-on-policyengine), [California](https://policyengine.org/us/research/california-income-tax), [Kansas](https://policyengine.org/us/research/kansas-income-tax), [New York](https://policyengine.org/us/research/policyengine-launches-in-new-york-state), and [Washington](https://policyengine.org/us/research/policyengine-launches-in-washington-state).

At PolicyEngine, we remain committed to setting new standards in policy simulations and evidence-based policymaking. By providing a powerful, transparent, and accessible platform for public policy analysis, we aim to empower policymakers, researchers, advocates, and the general public to better understand the impacts of tax and benefit policies.

We would like to extend our heartfelt gratitude to our incredible team of [over 100 open-source contributors](https://github.com/PolicyEngine/policyengine-us/graphs/contributors) who have made this milestone possible. Their tireless efforts and commitment to our mission have been instrumental in bringing PolicyEngine to where it is today.

Stay tuned for more exciting developments as we continue to expand and refine our tools. Together, we can build a more informed and engaged society, one policy at a time.



---

---
# PolicyEngine's Spring 2024 update
Slug: obr-forecast-update-spring-24
Date: 2024-04-16 09:00:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: How PolicyEngine compares to the latest external forecasts.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Office for Budget Responsibility's [March 2024 Economic and Fiscal Outlook](https://obr.uk/docs/dlm_uploads/E03057758_OBR_EFO-March-2024_Web-AccessibleFinal.pdf) updates government forecasts for a five-year budget window for key tax and spending programs, incorporating recent changes in both policy decisions and economic factors. Some parts of PolicyEngine's model are calibrated to be consistent with the OBR's forecasts, and today we're publishing a new version of the model that incorporates the latest information from government publications.\n",
    "\n",
    "This report contains a high-level and a detailed comparison of PolicyEngine's underlying model against government (principally OBR) and other third-party models.\n",
    "\n",
    "## UK household outlook"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "from tqdm import tqdm\n",
    "\n",
    "PE_VARIABLES = [\n",
    "    \"income_tax\",\n",
    "    \"total_national_insurance\",\n",
    "    \"child_benefit\",\n",
    "    \"universal_credit\",\n",
    "    \"tax_credits\",\n",
    "    \"housing_benefit\",\n",
    "    \"ESA_income\",\n",
    "    \"income_support\",\n",
    "    \"pension_credit\",\n",
    "    \"pip\",\n",
    "    \"dla\",\n",
    "    \"attendance_allowance\",\n",
    "    \"state_pension\",\n",
    "    \"carers_allowance\",\n",
    "    \"fuel_duty\",\n",
    "    \"vat\",\n",
    "    \"council_tax\",\n",
    "    \"household_net_income\",\n",
    "]\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": list(range(2021, 2028)),\n",
    "    }\n",
    ")\n",
    "for var in PE_VARIABLES:\n",
    "    df[var] = [0] * len(df[\"Year\"])\n",
    "\n",
    "for year in range(2021, 2028):\n",
    "    from policyengine_uk import Microsimulation\n",
    "\n",
    "    sim = Microsimulation()\n",
    "    for variable in PE_VARIABLES:\n",
    "        df.loc[df[\"Year\"] == year, variable] = round(\n",
    "            sim.calculate(variable, year).sum() / 1e9, 1\n",
    "        )\n",
    "\n",
    "df[\"Fuel duties\"] = df[\"fuel_duty\"]\n",
    "df[\"National Insurance\"] = df[\"total_national_insurance\"]\n",
    "df[\"Main taxes\"] = df[\"income_tax\"] + df[\"total_national_insurance\"]\n",
    "df[\"Legacy benefits\"] = (\n",
    "    df[\"tax_credits\"]\n",
    "    + df[\"housing_benefit\"]\n",
    "    + df[\"ESA_income\"]\n",
    "    + df[\"income_support\"]\n",
    ")\n",
    "df[\"Main benefits\"] = (\n",
    "    df[\"child_benefit\"]\n",
    "    + df[\"universal_credit\"]\n",
    "    + df[\"Legacy benefits\"]\n",
    "    + df[\"pension_credit\"]\n",
    "    + df[\"pip\"]\n",
    "    + df[\"dla\"]\n",
    "    + df[\"attendance_allowance\"]\n",
    "    + df[\"state_pension\"]\n",
    "    + df[\"carers_allowance\"]\n",
    ")\n",
    "\n",
    "pe_df = pd.melt(df, id_vars=[\"Year\"], value_vars=df.columns[1:])\n",
    "pe_df = pe_df.replace(\n",
    "    {\n",
    "        variable.name: variable.label\n",
    "        for variable in sim.tax_benefit_system.variables.values()\n",
    "    }\n",
    ")\n",
    "pe_df = pe_df.rename(columns={\"variable\": \"Variable\", \"value\": \"Value\"})\n",
    "\n",
    "\n",
    "# Data from latest UKMOD country report (in million GBP)\n",
    "ukmod_df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": [2021, 2022, 2023, 2024, 2025, 2026, 2027],\n",
    "        \"Income Tax\": [207751, 245771, 303005, 364319, 372215, 383896, 398249],\n",
    "        \"NIC Employees\": [63016, 65432, 60613, 55161, 56067, 57567, 59411],\n",
    "        \"NIC Self-employed\": [5069, 5377, 5126, 4401, 4479, 4610, 4769],\n",
    "        \"NIC Employers\": [\n",
    "            95576,\n",
    "            107253,\n",
    "            110702,\n",
    "            114677,\n",
    "            116797,\n",
    "            120339,\n",
    "            124771,\n",
    "        ],\n",
    "        \"Universal Credit\": [38091, 40899, 47833, 59290, 69939, 70292, 70531],\n",
    "        \"Child Benefit\": [11040, 11150, 11845, 12382, 12677, 12697, 12660],\n",
    "        \"Child and Working Tax Credits\": [5797, 5139, 4536, 2565, 0, 0, 0],\n",
    "        \"Housing Benefit\": [10212, 9498, 9031, 7098, 5117, 5145, 5159],\n",
    "        \"Income Support\": [2523, 2317, 2049, 1199, 0, 0, 0],\n",
    "        \"ESA (income-based)\": [4991, 4593, 4124, 2321, 0, 0, 0],\n",
    "        \"Pension Credit\": [4574, 4653, 5341, 6483, 6664, 6849, 7026],\n",
    "        \"Personal Independence Payment\": [\n",
    "            13740,\n",
    "            14170,\n",
    "            15601,\n",
    "            16649,\n",
    "            17204,\n",
    "            17478,\n",
    "            17729,\n",
    "        ],\n",
    "        \"Disability Living Allowance\": [\n",
    "            3713,\n",
    "            3829,\n",
    "            4216,\n",
    "            4499,\n",
    "            4649,\n",
    "            4723,\n",
    "            4791,\n",
    "        ],\n",
    "        \"Attendance Allowance\": [3285, 3388, 3731, 3981, 4114, 4179, 4239],\n",
    "        \"New/basic State Pension\": [\n",
    "            75080,\n",
    "            77399,\n",
    "            85229,\n",
    "            92475,\n",
    "            95804,\n",
    "            98199,\n",
    "            100654,\n",
    "        ],\n",
    "        \"Second State Pension\": [\n",
    "            18574,\n",
    "            19150,\n",
    "            21082,\n",
    "            22498,\n",
    "            23247,\n",
    "            23620,\n",
    "            23958,\n",
    "        ],\n",
    "        \"Carers Allowance\": [3000, 3093, 3406, 3634, 3755, 3815, 3870],\n",
    "        \"Council Tax\": [44047, 45585, 47986, 50093, 52159, 54317, 56562],\n",
    "    }\n",
    ")\n",
    "\n",
    "ukmod_df[\"National Insurance\"] = ukmod_df[\n",
    "    [\"NIC Employees\", \"NIC Self-employed\", \"NIC Employers\"]\n",
    "].sum(axis=1)\n",
    "ukmod_df[\"Main taxes\"] = ukmod_df[\n",
    "    [\"Income Tax\", \"NIC Employees\", \"NIC Self-employed\", \"NIC Employers\"]\n",
    "].sum(axis=1)\n",
    "ukmod_df[\"Legacy benefits\"] = ukmod_df[\n",
    "    [\n",
    "        \"Child and Working Tax Credits\",\n",
    "        \"Housing Benefit\",\n",
    "        \"Income Support\",\n",
    "        \"ESA (income-based)\",\n",
    "    ]\n",
    "].sum(axis=1)\n",
    "ukmod_df[\"Main benefits\"] = ukmod_df[\n",
    "    [\n",
    "        \"Universal Credit\",\n",
    "        \"Child Benefit\",\n",
    "        \"Legacy benefits\",\n",
    "        \"Pension Credit\",\n",
    "        \"Personal Independence Payment\",\n",
    "        \"Disability Living Allowance\",\n",
    "        \"Attendance Allowance\",\n",
    "        \"Carers Allowance\",\n",
    "        \"New/basic State Pension\",\n",
    "        \"Second State Pension\",\n",
    "    ]\n",
    "].sum(axis=1)\n",
    "\n",
    "ukmod_df = pd.melt(ukmod_df, id_vars=[\"Year\"], value_vars=ukmod_df.columns[1:])\n",
    "ukmod_df = ukmod_df.rename(columns={\"variable\": \"Variable\", \"value\": \"Value\"})\n",
    "ukmod_df.Value = ukmod_df.Value / 1e3\n",
    "\n",
    "obr_df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": [2022, 2023, 2024, 2025, 2026, 2027],\n",
    "        \"Income Tax\": [250.5, 279.2, 302.7, 315.8, 331.4, 348.7],\n",
    "        \"National Insurance\": [179.2, 168.1, 173.6, 179.8, 186.1, 192.1],\n",
    "        \"Child Benefit\": [12.5, 13.5, 13.5, 13.5, 13.5, 13.5],\n",
    "        \"Personal Tax Credits\": [7.3, 1.6, -0.1, -0.1, -0.1, -0.1],\n",
    "        \"Housing Benefit (within cap)\": [14.8, 13.8, 11.9, 11.9, 11.6, 10.7],\n",
    "        \"Housing Benefit (outside cap)\": [0.1, 0.0, 0.0, 0.0, 0.0, 0.0],\n",
    "        \"Universal Credit (within cap)\": [40.7, 49.5, 55.0, 57.9, 60.8, 63.7],\n",
    "        \"Universal Credit (outside cap)\": [11.1, 17.4, 19.3, 19.7, 20.0, 20.1],\n",
    "        \"DLA and PIP\": [28.4, 32.7, 35.3, 38.0, 40.9, 43.4],\n",
    "        \"Attendance Allowance\": [6.7, 7.7, 8.0, 8.2, 8.4, 8.6],\n",
    "        \"Pension Credit\": [5.4, 5.8, 5.9, 5.7, 5.4, 5.1],\n",
    "        \"State Pension\": [124.6, 138.1, 146.0, 150.5, 153.2, 155.1],\n",
    "        \"Fuel duties\": [25.1, 24.6, 24.7, 27.3, 27.6, 28.0],\n",
    "        \"VAT\": [159.7, 169.6, 173.9, 180.3, 188.0, 195.9],\n",
    "        \"Council Tax\": [44.0, 46.3, 48.6, 51.2, 53.9, 56.8],\n",
    "    }\n",
    ")\n",
    "\n",
    "obr_df[\"Universal Credit\"] = obr_df[\n",
    "    [\"Universal Credit (within cap)\", \"Universal Credit (outside cap)\"]\n",
    "].sum(axis=1)\n",
    "obr_df[\"Housing Benefit\"] = obr_df[\n",
    "    [\"Housing Benefit (within cap)\", \"Housing Benefit (outside cap)\"]\n",
    "].sum(axis=1)\n",
    "obr_df[\"Main taxes\"] = obr_df[[\"Income Tax\", \"National Insurance\"]].sum(axis=1)\n",
    "obr_df[\"Legacy benefits\"] = obr_df[\n",
    "    [\n",
    "        \"Personal Tax Credits\",\n",
    "        \"Housing Benefit (within cap)\",\n",
    "        \"Housing Benefit (outside cap)\",\n",
    "    ]\n",
    "].sum(axis=1)\n",
    "obr_df[\"Main benefits\"] = obr_df[\n",
    "    [\n",
    "        \"Universal Credit (within cap)\",\n",
    "        \"Universal Credit (outside cap)\",\n",
    "        \"Child Benefit\",\n",
    "        \"DLA and PIP\",\n",
    "        \"Attendance Allowance\",\n",
    "        \"Pension Credit\",\n",
    "        \"State Pension\",\n",
    "    ]\n",
    "].sum(axis=1)\n",
    "\n",
    "obr_df = pd.melt(obr_df, id_vars=[\"Year\"], value_vars=obr_df.columns[1:])\n",
    "obr_df = obr_df.rename(columns={\"variable\": \"Variable\", \"value\": \"Value\"})\n",
    "\n",
    "pe_df[\"Source\"] = \"PolicyEngine\"\n",
    "ukmod_df[\"Source\"] = \"UKMOD\"\n",
    "obr_df[\"Source\"] = \"OBR\"\n",
    "df = pd.concat([pe_df, ukmod_df, obr_df])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "import plotly.express as px\n",
    "from policyengine_core.charts import *\n",
    "from plotly.express.colors import sample_colorscale\n",
    "import numpy as np\n",
    "\n",
    "# RF-style 'rainbow' chart.\n",
    "\n",
    "# Compute average income in each decile for each year\n",
    "\n",
    "\n",
    "def rainbow_chart(variable: str):\n",
    "    dist_net_income_df = pd.DataFrame()\n",
    "\n",
    "    for year in range(2021, 2028):\n",
    "        sim = Microsimulation()\n",
    "        net_income = sim.calculate(variable, year) * sim.calculate(\n",
    "            \"inflation_adjustment\", year\n",
    "        )\n",
    "        decile = sim.calculate(\"household_income_decile\", year)\n",
    "        avg_by_decile = net_income.groupby(decile).mean()\n",
    "        avg_by_decile = avg_by_decile.reset_index()\n",
    "        avg_by_decile[\"Year\"] = year\n",
    "        dist_net_income_df = pd.concat([dist_net_income_df, avg_by_decile])\n",
    "\n",
    "    dist_net_income_df = dist_net_income_df[dist_net_income_df.index > 0]\n",
    "    dist_net_income_df.columns = [\"Decile\", \"Value\", \"Year\"]\n",
    "\n",
    "    dist_net_income_df_forward_shifted = dist_net_income_df.copy()\n",
    "    dist_net_income_df_forward_shifted.Year += 1\n",
    "    dist_net_income_change_df = (\n",
    "        dist_net_income_df.set_index([\"Decile\", \"Year\"])\n",
    "        / dist_net_income_df_forward_shifted.set_index([\"Decile\", \"Year\"])\n",
    "        - 1\n",
    "    ).reset_index()\n",
    "    dist_net_income_change_df = dist_net_income_change_df.dropna()\n",
    "    dist_net_income_change_df.Decile = dist_net_income_change_df.Decile.astype(\n",
    "        str\n",
    "    )\n",
    "    x = np.linspace(0.1, 0.9, 10)\n",
    "    c = sample_colorscale(\"balance\", list(x))\n",
    "\n",
    "    fig = px.bar(\n",
    "        dist_net_income_change_df,\n",
    "        x=\"Year\",\n",
    "        y=\"Value\",\n",
    "        color=\"Decile\",\n",
    "        barmode=\"group\",\n",
    "        color_discrete_map={str(i): c[i - 1] for i in range(1, 11)},\n",
    "    )\n",
    "\n",
    "    return format_fig(fig).update_layout(\n",
    "        title=\"Figure 1: annual year-on-year change in real household net income forecast by decile\",\n",
    "        height=400,\n",
    "        yaxis_tickformat=\"+.0%\",\n",
    "        yaxis_range=[-0.1, 0.1],\n",
    "        yaxis_title=\"Relative year-on-year change\",\n",
    "    )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=1<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "1",
         "marker": {
          "color": "rgb(38, 62, 148)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "1",
         "offsetgroup": "1",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.06098550302574912,
          -0.024777739988302017,
          -0.06919046377067062,
          0.02568336434674312,
          -0.034802688160677775,
          -0.024373664670781947
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=2<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "2",
         "marker": {
          "color": "rgb(16, 105, 189)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "2",
         "offsetgroup": "2",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.01604705517785776,
          -0.044150857440637736,
          -0.04928612532101795,
          0.011212540159080353,
          -0.005984095325190175,
          -0.011708984889061136
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=3<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "3",
         "marker": {
          "color": "rgb(73, 146, 186)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "3",
         "offsetgroup": "3",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.023927406540540375,
          -0.02588969963203125,
          -0.05766072876991135,
          0.019617924796277553,
          -0.003459407854223051,
          -0.00919984699556009
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=4<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "4",
         "marker": {
          "color": "rgb(144, 182, 195)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "4",
         "offsetgroup": "4",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          -0.019351008351608856,
          -0.018928234520711684,
          -0.04400594501352828,
          0.010420792542917168,
          -0.006890706292805637,
          -0.01543495328029909
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=5<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "5",
         "marker": {
          "color": "rgb(210, 216, 219)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "5",
         "offsetgroup": "5",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.008041644903471257,
          -0.01635818299901548,
          -0.026779281687234424,
          -0.0011183785639852228,
          -0.021142575618871895,
          -0.01776586554249282
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=6<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "6",
         "marker": {
          "color": "rgb(230, 210, 204)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "6",
         "offsetgroup": "6",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.053361422154542204,
          -0.05195141967140937,
          -0.008388390670859835,
          0.0014066026592536307,
          -0.012417506245419596,
          -0.009155019914818485
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=7<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "7",
         "marker": {
          "color": "rgb(214, 159, 139)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "7",
         "offsetgroup": "7",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.06885705752116045,
          -0.0730764604461368,
          0.007512420668321695,
          0.0056511371291085855,
          0.0023882315861369907,
          -0.009976150495451863
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=8<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "8",
         "marker": {
          "color": "rgb(197, 104, 76)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "8",
         "offsetgroup": "8",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.06363717711829153,
          -0.039491342890727976,
          0.012743846908935375,
          0.004380777926949575,
          0.00462299597657867,
          -0.001350515752682968
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=9<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "9",
         "marker": {
          "color": "rgb(174, 48, 39)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "9",
         "offsetgroup": "9",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.03390593979175516,
          -6.199970403297783e-05,
          0.003100317550160714,
          0.009654179412011077,
          -0.0010631178772319005,
          0.006137202431111488
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Decile=10<br>Year=%{x}<br>Value=%{y}<extra></extra>",
         "legendgroup": "10",
         "marker": {
          "color": "rgb(125, 17, 40)",
          "pattern": {
           "shape": ""
          }
         },
         "name": "10",
         "offsetgroup": "10",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.051711122865027326,
          -0.022260216445154524,
          0.011172574332359186,
          0.010072355896902474,
          0.03511376610909589,
          0.0028147473179358506
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "barmode": "group",
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 400,
        "images": [
         {
          "sizex": 0.15,
          "sizey": 0.15,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1.1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Decile"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Figure 1: annual year-on-year change in real household net income forecast by decile"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Year"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "range": [
          -0.1,
          0.1
         ],
         "tickformat": "+.0%",
         "title": {
          "text": "Relative year-on-year change"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "rainbow_chart(\"household_net_income\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Figure 1 shows PolicyEngine's principal forecast for (real) household disposable incomes, up to and including calendar year 2027. In 2025, we project average relative increases in real disposable income for most income deciles, of between 0 and 3%. In 2026 and 2027, net income falls for most deciles, except for the top four.\n",
    "\n",
    "All income measures in this report are before housing costs."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "def poverty_rate_chart_df():\n",
    "    pov_df = pd.DataFrame()\n",
    "    for year in range(2022, 2028):\n",
    "        sim = Microsimulation()\n",
    "        in_poverty = sim.calculate(\"in_poverty\", map_to=\"person\", period=year)\n",
    "        child_poverty = in_poverty[sim.calculate(\"is_child\")].mean()\n",
    "        wa_poverty = in_poverty[sim.calculate(\"is_WA_adult\")].mean()\n",
    "        senior_poverty = in_poverty[sim.calculate(\"is_SP_age\")].mean()\n",
    "        all_poverty = in_poverty.mean()\n",
    "        pov_df = pd.concat(\n",
    "            [\n",
    "                pov_df,\n",
    "                pd.DataFrame(\n",
    "                    {\n",
    "                        \"Year\": [year],\n",
    "                        \"Children\": [child_poverty],\n",
    "                        \"Working-age adults\": [wa_poverty],\n",
    "                        \"Seniors\": [senior_poverty],\n",
    "                        \"All\": [all_poverty],\n",
    "                    }\n",
    "                ),\n",
    "            ]\n",
    "        )\n",
    "\n",
    "    return pov_df\n",
    "\n",
    "\n",
    "pov_df = poverty_rate_chart_df()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "hovertemplate": "variable=All<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "All",
         "line": {
          "color": "#4C78A8",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "All",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.14915348845705703,
          0.15255748691590837,
          0.17178459441404054,
          0.16456900659431725,
          0.17376096837592594,
          0.1839555876431336
         ],
         "yaxis": "y"
        },
        {
         "hovertemplate": "variable=Children<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "Children",
         "line": {
          "color": "#F58518",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "Children",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.27281412587719256,
          0.3039218034607991,
          0.31191894762846734,
          0.2910883325456953,
          0.29423284133503347,
          0.31178026278011817
         ],
         "yaxis": "y"
        },
        {
         "hovertemplate": "variable=Working-age adults<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "Working-age adults",
         "line": {
          "color": "#E45756",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "Working-age adults",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.10929488945587383,
          0.11802532720613122,
          0.13606327885571504,
          0.1283247688889464,
          0.13584665237975,
          0.1416472090065762
         ],
         "yaxis": "y"
        },
        {
         "hovertemplate": "variable=Seniors<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "Seniors",
         "line": {
          "color": "#72B7B2",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "Seniors",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.12418169874974387,
          0.07091406830812352,
          0.1138586834299001,
          0.12944351080881158,
          0.1584197776217525,
          0.17507432232385708
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.15,
          "sizey": 0.15,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1.1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Age group"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Figure 2: absolute poverty forecast by age group"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Year"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "range": [
          0,
          0.4
         ],
         "tickformat": ".0%",
         "title": {
          "text": "Percentage"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig = px.line(\n",
    "    pov_df,\n",
    "    x=\"Year\",\n",
    "    y=[\"All\", \"Children\", \"Working-age adults\", \"Seniors\"],\n",
    "    color_discrete_sequence=px.colors.qualitative.T10,\n",
    ")\n",
    "\n",
    "fig = format_fig(fig).update_layout(\n",
    "    yaxis_range=[0, 0.4],\n",
    "    yaxis_tickformat=\".0%\",\n",
    "    title=\"Figure 2: absolute poverty forecast by age group\",\n",
    "    legend_title=\"Age group\",\n",
    "    yaxis_title=\"Percentage\",\n",
    ")\n",
    "# Add squares to each point\n",
    "\n",
    "fig.update_traces(mode=\"markers+lines\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Figure 2 shows the forecast for poverty rates (absolute, before housing costs): increases for all major age groups. With the exception of a reduction in pensioner poverty in 2023 (largely due to benefit increases), we forecast increases in absolute poverty rates for all age groups until at least 2027.\n",
    "\n",
    "The [latest](https://www.gov.uk/government/statistics/households-below-average-income-for-financial-years-ending-1995-to-2023/households-below-average-income-an-analysis-of-the-uk-income-distribution-fye-1995-to-fye-2023) official absolute poverty rates from the government's Households Below Average Income series (which is for FY2022-23) differs slightly from our 2022 estimates (see Appendix A for a comparison and explanation of senior poverty rate trend differences):\n",
    "\n",
    "| Age group         | HBAI (%) | PolicyEngine (%) | Difference |\n",
    "|--------------------|------|--------------|--|\n",
    "| Children           | 22   | 27           |+5|\n",
    "| Working-age adults | 15   | 11           |-4|\n",
    "| Seniors            | 19   | 12           |-5|\n",
    "| All                | 17   | 15           |-2|\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "\n",
    "PolicyEngine replicates official forecasts closely, largely due to both calibrating some outputs directly to be consistent (making many of these comparisons - all but VAT and fuel duty - _ex post_), and replicating the use of the OBR's economic determinant forecasts. The next sections evaluate PolicyEngine's model forecasts against OBR forecasts for key programs. We also compare against UKMOD, developed at the University of Essex, using their latest (March 2024) [country report](https://www.iser.essex.ac.uk/research/publications/working-papers/cempa/cempa4-24) as reference.\n",
    "\n",
    "PolicyEngine’s calibration routine (specified in more detail in our [working paper](https://legacy.policyengine.org/uk_data_enhancement.pdf)) calibrates the underlying household survey data weights to reduce inconsistency between the Family Resources Survey and other, more accurate government statistics on taxes and benefits. We use optimisation techniques [like the DWP does](https://assets.publishing.service.gov.uk/media/5a7dddcc40f0b65d88634e32/initial-review-family-resources-survey-weighting-scheme.pdf) in generating the initial FRS household weights, but we include statistics on tax revenues and benefit expenditures as well as demographics instead of excluding them. We also include imputations from other surveys on income and expenditure as part of this process. For a comparison to UKMOD’s approach, see Appendix B.\n",
    "\n",
    "### Income Tax\n",
    "\n",
    "PolicyEngine matches Income Tax revenue within 1% in 2024, with this accuracy falling to within 3% in 2027 as we project receipts to grow more slowly than the OBR."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 | 250.5 |          250.2 |   245.8 |                     -0.1 |              -1.9 |\n",
       "|   2023 | 279.2 |          279.4 |   303   |                      0.1 |               8.5 |\n",
       "|   2024 | 302.7 |          299.8 |   364.3 |                     -1   |              20.4 |\n",
       "|   2025 | 315.8 |          310.1 |   372.2 |                     -1.8 |              17.9 |\n",
       "|   2026 | 331.4 |          324.2 |   383.9 |                     -2.2 |              15.8 |\n",
       "|   2027 | 348.7 |          339.3 |   398.2 |                     -2.7 |              14.2 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import Markdown\n",
    "\n",
    "\n",
    "def variable_table(variable):\n",
    "    table = df[df.Variable.isin([variable]) & (df.Year > 2021)].pivot_table(\n",
    "        index=\"Year\", columns=[\"Source\"], values=\"Value\"\n",
    "    )\n",
    "    table[\"PolicyEngine / OBR (%)\"] = (\n",
    "        table.PolicyEngine / table.OBR - 1\n",
    "    ).apply(lambda x: f\"{x * 100:+.1f}\")\n",
    "    if \"UKMOD\" in table.columns:\n",
    "        table.UKMOD = table.UKMOD.apply(lambda x: round(x, 1))\n",
    "        table[\"UKMOD / OBR (%)\"] = (table.UKMOD / table.OBR - 1).apply(\n",
    "            lambda x: f\"{x * 100:+.1f}\"\n",
    "        )\n",
    "    return Markdown(table.to_markdown())\n",
    "\n",
    "\n",
    "variable_table(\"Income Tax\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### National Insurance\n",
    "\n",
    "PolicyEngine underestimates total National Insurance receipts by around 6% in 2024, rising to 8% in 2027."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 | 179.2 |          165.7 |   178.1 |                     -7.5 |              -0.6 |\n",
       "|   2023 | 168.1 |          164.7 |   176.4 |                     -2   |               4.9 |\n",
       "|   2024 | 173.6 |          163.8 |   174.2 |                     -5.6 |               0.3 |\n",
       "|   2025 | 179.8 |          166.8 |   177.3 |                     -7.2 |              -1.4 |\n",
       "|   2026 | 186.1 |          171.5 |   182.5 |                     -7.8 |              -1.9 |\n",
       "|   2027 | 192.1 |          176.5 |   189   |                     -8.1 |              -1.6 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"National Insurance\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### VAT\n",
    "\n",
    "PolicyEngine and the OBR match closely despite PolicyEngine not explicitly calibrating to VAT receipts. The difference is less than 1% in 2024 and 2025, and 2% in 2027 (UKMOD does not model VAT so is unavailable for comparison)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   PolicyEngine / OBR (%) |\n",
       "|-------:|------:|---------------:|-------------------------:|\n",
       "|   2022 | 159.7 |          156   |                     -2.3 |\n",
       "|   2023 | 169.6 |          165.7 |                     -2.3 |\n",
       "|   2024 | 173.9 |          175.6 |                      1   |\n",
       "|   2025 | 180.3 |          181.2 |                      0.5 |\n",
       "|   2026 | 188   |          186.7 |                     -0.7 |\n",
       "|   2027 | 195.9 |          193.2 |                     -1.4 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"VAT\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Council Tax\n",
    "\n",
    "We match Council Tax receipts closely (as does UKMOD)- Council Tax is imputed but relying on reported values by region (rather than simulated across local authorities), and all three models use the same OBR uprating forecasts to increase year-by-year."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 |  44   |           42   |    45.6 |                     -4.5 |               3.6 |\n",
       "|   2023 |  46.3 |           45.2 |    48   |                     -2.4 |               3.7 |\n",
       "|   2024 |  48.6 |           47.9 |    50.1 |                     -1.4 |               3.1 |\n",
       "|   2025 |  51.2 |           50.4 |    52.2 |                     -1.6 |               2   |\n",
       "|   2026 |  53.9 |           53.3 |    54.3 |                     -1.1 |               0.7 |\n",
       "|   2027 |  56.8 |           55.9 |    56.6 |                     -1.6 |              -0.4 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Council Tax\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Fuel duty\n",
    "\n",
    "Fuel duty is matched by around 10% on average, but is more volatile in PolicyEngine's model than the OBR forecast (UKMOD does not model fuel duty so cannot be used for comparison).\n",
    "\n",
    "The deviation is likely caused by the fact that the OBR accounts for the impact of car electrification on revenues, unlike PolicyEngine which does not.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   PolicyEngine / OBR (%) |\n",
       "|-------:|------:|---------------:|-------------------------:|\n",
       "|   2022 |  25.1 |           24.1 |                     -4   |\n",
       "|   2023 |  24.6 |           23.5 |                     -4.5 |\n",
       "|   2024 |  24.7 |           28   |                     13.4 |\n",
       "|   2025 |  27.3 |           29.5 |                      8.1 |\n",
       "|   2026 |  27.6 |           30.9 |                     12   |\n",
       "|   2027 |  28   |           33.3 |                     18.9 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Fuel duties\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Universal Credit\n",
    "\n",
    "PolicyEngine's Universal Credit forecast is around 4% higher in 2024 than the OBR's, rising to 7.5% in 2027. This likely reflects uncertainty over the rollout of Universal Credit from legacy benefits."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 |  51.8 |           57.6 |    40.9 |                     11.2 |             -21   |\n",
       "|   2023 |  66.9 |           68.7 |    47.8 |                      2.7 |             -28.6 |\n",
       "|   2024 |  74.3 |           77.6 |    59.3 |                      4.4 |             -20.2 |\n",
       "|   2025 |  77.6 |           83   |    69.9 |                      7   |              -9.9 |\n",
       "|   2026 |  80.8 |           87.2 |    70.3 |                      7.9 |             -13   |\n",
       "|   2027 |  83.8 |           90.1 |    70.5 |                      7.5 |             -15.9 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Universal Credit\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Legacy benefits\n",
    "\n",
    "We match the OBR's forecasts for legacy benefit spending by around 7% on average."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 |  22.2 |           24.2 |    21.5 |                      9   |              -3.2 |\n",
       "|   2023 |  15.4 |           17.2 |    19.7 |                     11.7 |              27.9 |\n",
       "|   2024 |  11.8 |           13.4 |    13.2 |                     13.6 |              11.9 |\n",
       "|   2025 |  11.8 |           11.9 |     5.1 |                      0.8 |             -56.8 |\n",
       "|   2026 |  11.5 |           12.3 |     5.1 |                      7   |             -55.7 |\n",
       "|   2027 |  10.6 |           11.7 |     5.2 |                     10.4 |             -50.9 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Legacy benefits\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Child Benefit\n",
    "\n",
    "We match Child Benefit spending by around 10% on average."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 |  12.5 |           12.6 |    11.2 |                      0.8 |             -10.4 |\n",
       "|   2023 |  13.5 |           14.4 |    11.8 |                      6.7 |             -12.6 |\n",
       "|   2024 |  13.5 |           15   |    12.4 |                     11.1 |              -8.1 |\n",
       "|   2025 |  13.5 |           15   |    12.7 |                     11.1 |              -5.9 |\n",
       "|   2026 |  13.5 |           14.9 |    12.7 |                     10.4 |              -5.9 |\n",
       "|   2027 |  13.5 |           15   |    12.7 |                     11.1 |              -5.9 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Child Benefit\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Pension Credit\n",
    "\n",
    "Pension Credit sees the most divergence between PolicyEngine and the OBR of all simulated programs: £3bn on average, which represents aroud 40% of the size of the OBR forecast. UKMOD also shows differences up to 40% (but lower overall). Given that Pension Credit affects the pensioners with extremely low incomes (whose data in the FRS is less reliable), this is an area for further investigation."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   UKMOD |   PolicyEngine / OBR (%) |   UKMOD / OBR (%) |\n",
       "|-------:|------:|---------------:|--------:|-------------------------:|------------------:|\n",
       "|   2022 |   5.4 |            9.3 |     4.7 |                     72.2 |             -13   |\n",
       "|   2023 |   5.8 |            5.2 |     5.3 |                    -10.3 |              -8.6 |\n",
       "|   2024 |   5.9 |            2.9 |     6.5 |                    -50.8 |              10.2 |\n",
       "|   2025 |   5.7 |            3.1 |     6.7 |                    -45.6 |              17.5 |\n",
       "|   2026 |   5.4 |            3.6 |     6.8 |                    -33.3 |              25.9 |\n",
       "|   2027 |   5.1 |            4.2 |     7   |                    -17.6 |              37.3 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"Pension Credit\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### State Pension\n",
    "\n",
    "In 2024, we match the OBR on State Pension forecast within 7%, though this narrows to within 2% in 2026 and 2027."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "|   Year |   OBR |   PolicyEngine |   PolicyEngine / OBR (%) |\n",
       "|-------:|------:|---------------:|-------------------------:|\n",
       "|   2022 | 124.6 |          125.1 |                      0.4 |\n",
       "|   2023 | 138.1 |          148.2 |                      7.3 |\n",
       "|   2024 | 146   |          155.9 |                      6.8 |\n",
       "|   2025 | 150.5 |          157.5 |                      4.7 |\n",
       "|   2026 | 153.2 |          155.9 |                      1.8 |\n",
       "|   2027 | 155.1 |          153.5 |                     -1   |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "variable_table(\"State Pension\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Appendix: senior poverty rates\n",
    "\n",
    "We project a significantly lower senior poverty estimate for 2023 than HBAI largely because of our modelling of the Energy Price Guarantee. We modelled this as an increase to incomes, rather than a decrease in consumption. Figure 3 shows the senior poverty rate with and without this intervention."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "from policyengine_core.reforms import Reform\n",
    "\n",
    "no_epg_subsidy = Reform.from_dict(\n",
    "    {\n",
    "        \"gov.ofgem.energy_price_guarantee\": {\n",
    "            \"year:2020:10\": 1_000_000,\n",
    "        }\n",
    "    },\n",
    "    country_id=\"uk\",\n",
    ")\n",
    "\n",
    "\n",
    "def poverty_rate_chart_df():\n",
    "    pov_df = pd.DataFrame()\n",
    "    for year in range(2022, 2028):\n",
    "        baseline = Microsimulation()\n",
    "        sim = Microsimulation(reform=no_epg_subsidy)\n",
    "        in_poverty_b = baseline.calculate(\n",
    "            \"in_poverty\", map_to=\"person\", period=year\n",
    "        )\n",
    "        senior_poverty_b = in_poverty_b[baseline.calculate(\"is_SP_age\")].mean()\n",
    "        in_poverty_no_epg = sim.calculate(\n",
    "            \"in_poverty\", map_to=\"person\", period=year\n",
    "        )\n",
    "        senior_poverty_no_epg = in_poverty_no_epg[\n",
    "            sim.calculate(\"is_SP_age\")\n",
    "        ].mean()\n",
    "        pov_df = pd.concat(\n",
    "            [\n",
    "                pov_df,\n",
    "                pd.DataFrame(\n",
    "                    {\n",
    "                        \"Year\": [year],\n",
    "                        \"Baseline\": [senior_poverty_b],\n",
    "                        \"No EPG subsidy\": [senior_poverty_no_epg],\n",
    "                    }\n",
    "                ),\n",
    "            ]\n",
    "        )\n",
    "\n",
    "    return pov_df\n",
    "\n",
    "\n",
    "pov_df = poverty_rate_chart_df()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "hovertemplate": "variable=Baseline<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "Baseline",
         "line": {
          "color": "#72B7B2",
          "dash": "solid"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "Baseline",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.12418169874974387,
          0.07091406830812352,
          0.1138586834299001,
          0.12944351080881158,
          0.1584197776217525,
          0.17507432232385708
         ],
         "yaxis": "y"
        },
        {
         "hovertemplate": "variable=No EPG subsidy<br>Year=%{x}<br>value=%{y}<extra></extra>",
         "legendgroup": "No EPG subsidy",
         "line": {
          "color": "#72B7B2",
          "dash": "dash"
         },
         "marker": {
          "symbol": "circle"
         },
         "mode": "markers+lines",
         "name": "No EPG subsidy",
         "orientation": "v",
         "showlegend": true,
         "type": "scatter",
         "x": [
          2022,
          2023,
          2024,
          2025,
          2026,
          2027
         ],
         "xaxis": "x",
         "y": [
          0.12876935776938392,
          0.09515916239260568,
          0.1138586834299001,
          0.12944351080881158,
          0.1584197776217525,
          0.17507432232385708
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.15,
          "sizey": 0.15,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1.1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Policy"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Figure 3: senior absolute poverty forecast under alternative policy scenarios"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Year"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "range": [
          0,
          0.4
         ],
         "tickformat": ".0%",
         "title": {
          "text": "Percentage"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig = px.line(\n",
    "    pov_df,\n",
    "    x=\"Year\",\n",
    "    y=[\"Baseline\", \"No EPG subsidy\"],\n",
    "    color_discrete_sequence=[px.colors.qualitative.T10[3]] * 2,\n",
    ")\n",
    "\n",
    "fig = format_fig(fig).update_layout(\n",
    "    yaxis_range=[0, 0.4],\n",
    "    yaxis_tickformat=\".0%\",\n",
    "    title=\"Figure 3: senior absolute poverty forecast under alternative policy scenarios\",\n",
    "    legend_title=\"Policy\",\n",
    "    yaxis_title=\"Percentage\",\n",
    ")\n",
    "# Add squares to each point\n",
    "\n",
    "fig.update_traces(mode=\"markers+lines\")\n",
    "\n",
    "# Make the second line dashed\n",
    "\n",
    "fig.data[1].line.dash = \"dash\"\n",
    "\n",
    "fig"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Appendix B: modelling assumptions\n",
    "\n",
    "Both PolicyEngine and UKMOD face choices in how much to calibrate their models to administrative aggregates. These choices can involve inheriting calibration from the Department for Work and Pensions' (DWP) microdata calibration, applying uprating factors, and determining benefit take-up rates.\n",
    "\n",
    "PolicyEngine has opted for a broader-scale calibration approach. We use optimisation techniques similar to those employed by the DWP when generating the initial Family Resources Survey (FRS) household weights. However, while the DWP primarily focuses on calibrating to demographic totals, PolicyEngine also includes statistics on tax revenues and benefit expenditures in the calibration process. Furthermore, we incorporate imputations from other surveys on income and expenditure to refine the microdata.\n",
    "\n",
    "In contrast, UKMOD relies on the original FRS weights calibrated by the DWP to demographic totals, and limits adjustments to applying uprating factors and policy-related mechanical changes, such as transitioning households from legacy benefits to Universal Credit, adjusting unemployment status, and modelling benefit take-up rates.\n",
    "\n",
    "While both approaches have their merits, we believe that microsimulation models should, at a minimum, strive to replicate the reported administrative totals for years where this information is known. PolicyEngine's more extensive calibration process aims to achieve this goal and improve the model's accuracy in estimating the impacts of policy reforms on UK households.\n",
    "\n",
    "It is important to acknowledge that the level of confidence in projections may decrease for future years due to inherent uncertainties. However, calibrating the model to match known administrative data ensures a solid foundation for estimating policy reform impacts. Furthermore, we believe OBR projections are the best sources available for calibrating microdata in future years.\n",
    "\n",
    "We recognise that the choice of calibration approach can influence comparisons between different microsimulation models. By providing transparency about our modelling assumptions and calibration methods, we hope to facilitate a better understanding of the similarities and differences between PolicyEngine and other models, such as UKMOD.\n",
    "\n",
    "As we continue to develop and refine our model, we remain committed to striking a balance between model accuracy and transparency, while acknowledging the uncertainties associated with future projections."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# The Triple Lock Plus
Slug: uk-triple-lock-plus
Date: 2024-05-28 09:00:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: PolicyEngine estimates the impact of the UK government's proposed pension uprating policy reform.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "[*See the full impact score here*](/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&baseline=1&timePeriod=2027&region=uk)\n",
    "\n",
    "Yesterday the Conservative Party proposed a new policy called the \"Triple Lock Plus\" which would prevent pensioners from paying income tax on their state pension. The policy would automatically raise the personal allowance (tax-free threshold) for pensioners each year starting from 2025, ensuring it stays ahead of the state pension amount by indexing with the ‘triple lock’ uprating index. This report analyses the potential costs, distributional impacts, and effects on poverty of the proposal.\n",
    "\n",
    "## Background\n",
    "\n",
    "Currently, the state pension in the UK is protected by the \"triple lock\". This policy dictates that the state pension increases each year by the highest of three measures: average earnings growth, price inflation (CPI), or 2.5%. Under current policy, pensioners may be liable to pay income tax on their state pension in future years if it exceeds the personal allowance, which is currently frozen until 2028.\n",
    "\n",
    "Under the proposed Triple Lock Plus, starting from the 2025/26 tax year, the personal allowance (PA) for pensioners would be automatically raised each year to ensure it remains higher than their state pension.\n",
    "\n",
    "| Year     | New pensioner PA | Current PA |\n",
    "|----------|----------------------|-------------------------|\n",
    "| 2025/26  | £13,040              | £12,570                 |\n",
    "| 2026/27  | £13,370              | £12,570                 |\n",
    "| 2027/28  | £13,710              | £12,570                 |\n",
    "| 2028/29  | £14,060              | £12,820                 |\n",
    "| 2029/30  | £14,450              | £13,080                 |\n",
    "\n",
    "As shown in the table, the pensioner personal allowance is projected to rise from £13,040 in 2025/26 to £14,450 by 2029/30, while the general personal allowance is expected to remain frozen until 2028/29.\n",
    "\n",
    "## Economic impacts\n",
    "\n",
    "PolicyEngine estimates the increasing cost of implementing the Triple Lock Plus through 2025-27:\n",
    "\n",
    "| Year | Cost estimate (£bn) |\n",
    "|------|----------------------|\n",
    "| 2025 | 0.6                  |\n",
    "| 2026 | 1.0                  |\n",
    "| 2027 | 1.3                  |\n",
    "\n",
    "The policy primarily benefits households in the lower and middle income deciles, but middle and higher wealth deciles.\n",
    "\n",
    "![Impact on income deciles](/images/posts/uk-triple-lock-plus/decile_impact.png)\n",
    "\n",
    "PolicyEngine estimates that 12% of the population would benefit (around 8m pensioners).\n",
    "\n",
    "![Percent gaining by income decile](/images/posts/uk-triple-lock-plus/intra_decile_impact.png)\n",
    "\n",
    "The Triple Lock Plus is estimated to reduce the overall poverty rate by 0.4% (0.1pp) in 2027, with pensioners experiencing the most significant decrease of 2.7 percentage points. The policy has little to no impact on poverty rates among working-age adults and children.\n",
    "\n",
    "![Poverty rate change by age group](/images/posts/uk-triple-lock-plus/poverty_impact.png)\n",
    "\n",
    "## Household impacts\n",
    "\n",
    "For a 70-year-old single pensioner receiving the New State Pension in 2027, the Triple Lock Plus would decrease their annual income tax bill by around £230 if they are a basic rate taxpayer, and around £450 if they pay the higher or additional rates.\n",
    "\n",
    "![Gain by income](/images/posts/uk-triple-lock-plus/earnings.png)\n",
    "\n",
    "## Conclusion\n",
    "\n",
    "The proposed Triple Lock Plus policy achieves the stated policy aim of preventing pensioners from paying Income Tax by virtue of their State Pension alone, with a rising per-year cost reaching £1.3 billion by 2027. Its impact on overall poverty rates and working-age households is limited, with a reduction of only 0.1 percentage points for all groups combined. In 2027, this policy essentially behaves as a transfer of £230 per year to basic rate pensioners, and £450 per year to higher and additional rate pensioners.\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "ename": "NameError",
     "evalue": "name 'Test' is not defined",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)",
      "\u001b[0;32m/var/folders/8f/pgfhysmd5ls3jnxb_5j7yy340000gn/T/ipykernel_84864/579046729.py\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mTest\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m: name 'Test' is not defined"
     ]
    }
   ],
   "source": [
    "Test"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# The Liberal Democrat Manifesto
Slug: lib-dem-2024-manifesto
Date: 2024-06-11 16:30:00
Authors: Nikhil Woodruff
Tags: uk, policy
Description: PolicyEngine's comprehensive impact score.

---

_Distributional impact of the Liberal Democrat 2024 Manifesto. See the full impact score [here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57826&region=uk&timePeriod=2028&baseline=1)._

## Key findings

1. The Liberal Democrats propose a budget-neutral plan with equal spending and revenue increases of £26.8bn.

2. Welfare reforms include increasing Carer's Allowance, removing the two-child limit and benefit cap on Universal Credit. PolicyEngine estimates these reforms would cost £5.5bn.

3. Tax reforms focus on Capital Gains Tax, taxes on corporations, and consumption taxes, raising an estimated £26.5bn.

4. PolicyEngine estimates that the manifesto would lower absolute poverty by 20%, raise net income for 70% of people, and be progressive along income lines.

5. The lowest income decile would see a 9% increase in disposable income, while the highest decile would see a 2% loss.

6. Child poverty would be reduced by a quarter, lifting 1.3m children out of poverty. Overall, 2.4m people would be lifted out of poverty, and income inequality would decrease by over 3% according to the Gini index.

Yesterday the Liberal Democrats [launched](https://www.bbc.co.uk/news/articles/crgg9l8z4lpo) their manifesto, detailing key reform pledges across taxes, welfare and public spending. The party committed to equal spending and revenue increases of £26.8bn (budget neutral overall), with prominence given to healthcare, international aid and welfare, as well as capital gains tax reform and anti-avoidance spending.

For the first time, PolicyEngine will produce a comprehensive score of this and future manifestos, capturing an estimate of the economic impact of all spending and revenue changes.

In this report, we will walk through the key policy proposals and present the manifesto costings produced by the Liberal Democrats alongside PolicyEngine replications of individual provisions. Costings in tables may not sum due to rounding. Where a proposal involves a tax-benefit policy modelled by PolicyEngine, we report how well we could replicate the Liberal Democrat claim.

Where a proposal is outside the scope of PolicyEngine’s model, we assume the Liberal Democrat spending or revenue estimate is fixed and apply an assumption about the incidence of the impact on UK households.[^1]

## Spending

The Liberal Democrats propose a net £26.8bn spending increase, and include several welfare reforms among other public services reforms. The welfare changes include:

- Increasing Carer’s Allowance by £20 per week, “raising the amount carers can earn and introducing an earnings taper to end the unfair cliff edge”.
- Removing the two-child limit to Universal Credit
- Removing the benefit cap

As it is currently specified, the Carer’s Allowance reform would not produce the cost estimated by the Liberal Democrats. Although we can replicate that their £20 per week increase would cost around £1bn (assuming their unspecified means test relaxation costs around 450m), most of this cost would be offset by reduced Universal Credit payments. If we assumed that the party would end the 1-1 reductions in Universal Credit for Carer’s Allowance payments, this would add an additional £3bn to the cost element. Because of this, we estimate the Carer’s Allowance as stated in the manifesto would only benefit households by 10% as much as the Liberal Democrats estimate.

We estimate that ending the two-child limit and the benefit cap would cost £3.4bn and £700m individually. When these welfare reforms are combined, their total cost rises from £4.4bn to £5.5bn because of interactions between the policies.

Combined with increases to education, healthcare and other public service budgets, we reach the same £26.8bn cost estimate as the party’s manifesto costings.

| **Provision**                         | **Liberal Democrats (£bn)** | **PolicyEngine (£bn)**                                                                                                                 |
| ------------------------------------- | --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| Carer's Allowance increase            | 1.4                         | [0.1](https://legacy.policyengine.org/uk/policy?reform=57787&focus=policyOutput.policyBreakdown&timePeriod=2028&region=uk&baseline=1)  |
| Removing the two-child limit          | -                           | [3.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=54700&region=uk&timePeriod=2028&baseline=1)  |
| Removing the benefit cap              | -                           | [0.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57793&region=uk&timePeriod=2028&baseline=1)  |
| Total welfare reforms                 | 5.5                         | [5.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57795&region=uk&timePeriod=2028&baseline=1)  |
| Increase education spending £6.6bn    | 6.6                         | [6.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57797&region=uk&timePeriod=2028&baseline=1)  |
| Increase NHS spending £8.4bn          | 8.4                         | [8.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57798&region=uk&timePeriod=2028&baseline=1)  |
| Increase other public spending £6.3bn | 6.3                         | [6.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57799&region=uk&timePeriod=2028&baseline=1)  |
| Total spending changes                | 26.8                        | [26.8](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57824&region=uk&timePeriod=2028&baseline=1) |

## Taxes

The manifesto proposes a £26.5 increase in tax revenues. We separate this into three distinct areas: taxes on capital gains, taxes incident largely on owners of capital, and taxes incident largely on consumers.

The Liberal Democrats propose reforms to Capital Gains Tax, including raising the Annual Exempt Amount (AEA) to £5,000 (from £3,000). We estimate this raises £300m on its own. The party also proposes several reforms to the tax which do not have enough detail to reproduce: “adjusting the rates”, “a new tax-free allowance for inflation”, and “introducing a relief for small businesses”. We estimate that a 5p rise in all Capital Gains Tax rates together with the AEA increase would match the Liberal Democrat-provided cost estimate of £5.2bn.

We estimate that of the remaining £21.3bn in tax rises, £17.7bn would be largely incident on owners of capital and £3.6bn would fall on consumers. When combined with the Capital Gains Tax reforms, we reach a very slightly (£400m) lower revenue estimate of £26.5bn to the party’s £26.9bn.

| Provision                            | Liberal Democrats | PolicyEngine                                                                                                                           |
| ------------------------------------ | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| Raise AEA to £5,000                  | -                 | [0.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57808&region=uk&timePeriod=2028&baseline=1)  |
| Effectively increase rates by 5p     | -                 | [5.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57817&region=uk&timePeriod=2028&baseline=1)  |
| Total Capital Gains Tax reforms      | 5.2               | [5.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57813&region=uk&timePeriod=2028&baseline=1)  |
| Increase taxes on capital £17.7bn    | 17.7              | [17.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57818&region=uk&timePeriod=2028&baseline=1) |
| Increase taxes on consumption £3.6bn | 3.6               | [3.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57820&region=uk&timePeriod=2028&baseline=1)  |
| Total tax reforms                    | 26.9              | [26.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57823&region=uk&timePeriod=2028&baseline=1) |

## Economic impact

PolicyEngine estimates that the combined Liberal Democrat manifesto would, in 2024:

- Cost £200m
- Lower absolute poverty by 20 percent (of the current poverty rate)
- Raise net income for 70% of people

We also estimate that this level of redistribution would be progressive along income lines, with the lowest income decile seeing a 9% increase in disposable income, and a loss of 2% for the highest income decile.

![Impact by income decile](/images/posts/lib-dem-2024-manifesto/decile_impact.jpeg 'image_tooltip')

We also estimate that people in lower income deciles are more likely to be better off under the plans than those in higher deciles, though the lowest decile still has 10% of people worse off under the manifesto policy.

![Impacts within income deciles](/images/posts/lib-dem-2024-manifesto/intra_decile_impact.jpeg 'image_tooltip')

On poverty rates, PolicyEngine estimates that the manifesto policy would reduce absolute child poverty by a quarter, lowering the number of children in poverty by 1.3m and the number of people in poverty by 2.4m. We also estimate that the Gini index of income inequality would fall by over 3%.

![Poverty rate impacts](/images/posts/lib-dem-2024-manifesto/poverty_impact.jpeg 'image_tooltip')

## Conclusion

The Liberal Democrat manifesto redistributes £27bn progressively, largely from owners of corporations to consumers of healthcare, welfare and other public services. We estimate this causes large reductions in poverty and inequality, and with 70% of the population benefiting at the expense of a largely higher-income 30%.

We welcome questions and comments on our findings or methodology- please feel free to [get in touch](mailto:contact@policyengine.org).

<!-- Footnotes themselves at the bottom. -->

## Notes

[^1]: Where a policy is clearly a tax on corporations or consumption, we distribute the burden according to imputed corporate wealth and consumption, respectively. For public service budget changes we apply the ONS’ estimates of public service consumption by income decile.



---

---
# The Conservative Manifesto
Slug: conservative-2024-manifesto
Date: 2024-06-12 16:30:00
Authors: Nikhil Woodruff, Pavel Makarchuk, Anthony Volk
Tags: uk, policy
Description: PolicyEngine's comprehensive impact score.

---

_Distributional impact of the Conservative 2024 Manifesto. See the full impact score [here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=58041&region=uk&timePeriod=2029&baseline=1)._

## Key findings

1. The Conservatives propose a plan which we estimate will increase spending by £5.8bn over the next five years.

2. The spending reform will include increases in education expenditures and NHS funding, while decreasing other public spending, raising a total of £43.9bn.

3. Tax reforms include lowering employee NICs while cutting self-employment NICs, additionally introducing the Triple Lock Plus and reforming the HICBC while abolishing stamp duty for first-time homebuyers. This will be partially offset by anti-tax avoidance spending which we assume falls largely on corporations, for an overall cost of £49.7bn.

4. PolicyEngine concludes that the manifesto would increase poverty by 5.8%, increasing the senior poverty rate by 19.0%.

5. The impacts of the manifesto would largely be regressive. The manifesto reduces disposable income for the bottom ten percent of people by 6.4%.

6. The majority of people in the five lowest income deciles would experience a negative impact on net income while the majority of people in the five highest income deciles would experience a positive net income change.

On June 11th, the Conservative and Unionist Party [released](https://manifesto.conservatives.com/) their manifesto, outlining pivotal reforms in taxation, welfare, and public expenditure for the next five years. The party committed to a net spending decrease of £2bn through 2030, with emphasis on healthcare, education, and defence, alongside tax policy changes such as lowering employee and self-employment NICs.

For the first time, PolicyEngine will produce a comprehensive score of this and future manifestos, capturing an estimate of the economic impact of all spending and revenue changes.

In this report, we will walk through the key policy proposals and present the manifesto costings produced by the Conservatives alongside PolicyEngine replications of individual provisions. Costings in tables may not sum due to rounding. Where a proposal involves a tax-benefit policy modelled by PolicyEngine, we report how well we could replicate the Conservative claim.

Where a proposal is outside the scope of PolicyEngine’s model, we assume the Conservative spending or revenue estimate is fixed and apply an assumption about the incidence of the impact on UK households.

See the appendix for a full breakdown of our replication of the Conservatives’ tax cut [revenue impact estimates](https://public.conservatives.com/static/documents/GE2024/Conservative-Costings-Document-GE2024.pdf).

## Spending

The Conservatives propose a net spending decrease of £44bn through 2029. This would be driven primarily by procedural changes to welfare spending aimed at diminishing fraud and limiting eligibility (though without detail over specific eligibility changes), thereby lowering cost. This would be coupled with more minor cost-saving measures, including:

- Downsizing the civil service
- Lowering research and development funding
- Increasing international student visa fees

The Conservatives also propose spending increases to national defence, the NHS, and on some programs we classify as education-related (National Service and apprenticeship subsidies). Because none of these changes impact benefits modelled by PolicyEngine, we assume the Conservatives' costings and use the ONS’ estimates of the distributional impact of public service spending categories.

| **Provision**                          | **Conservatives (£bn)** | **PolicyEngine (£bn)**                                                                                                                  |
| -------------------------------------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Increase education spending £2.4bn     | 2.4                     | [2.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58028&region=uk&timePeriod=2029&baseline=1)   |
| Increase NHS funding £2.3bn            | 2.3                     | [2.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58059&region=uk&timePeriod=2029&baseline=1)   |
| Decrease other public spending £48.6bn | -48.6                   | [-48.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58064&region=uk&timePeriod=2029&baseline=1) |
| Total spending changes                 | -43.9                   | [-43.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58038&region=uk&timePeriod=2029&baseline=1) |

## Taxes

The Conservative manifesto balances its decrease in spending with a series of tax policy changes that generate a net negative budgetary impact of £49.7bn over the manifesto’s five-year period. These changes include:

- Lowering the employee NIC base rate step-wise to 6%
- Gradually abolishing self-employed NICs
- Increasing the personal allowance for pensioners with the Triple Lock Plus
- Ending the HICBC single-earner penalty
- Abolishing the Stamp Duty Land Tax (SDLT) for first-time homebuyers

These changes are underpinned by increased enforcement of anti-tax avoidance and evasion policies, which the Conservatives project to generate £20bn over the manifesto period, and which PolicyEngine projects would predominantly function as taxes upon capital (we assume their revenue estimate is correct).

We estimate that the Conservatives’ tax policy changes would have a slightly larger negative budgetary impact (£8.8bn) than the party manifesto. While most of our estimates were close to those of the manifesto, we find that ending the HICBC single-earner penalty would cost £10.2bn, as opposed to the Conservatives’ £4.5bn estimate.

We also find roughly double the budgetary impact of abolishing the Stamp Duty Land Tax (SDLT) for first-time homebuyers, at a cost of £4.4bn, versus the Conservatives’ estimate of £2.3bn.

| **Provision**                                       | **Conservatives (£bn)** | **PolicyEngine (£bn)**                                                                                                                  |
| --------------------------------------------------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Lowering the employee NIC base rate step-wise to 6% | -39.4                   | [-41.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2029&baseline=1) |
| Abolishing self-employed NICs                       | -6.8                    | [-6.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2029&baseline=1)  |
| Triple Lock Plus                                    | -8.8                    | [-7.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2029&baseline=1)  |
| Reforming the HICBC single-earner policy            | -4.5                    | [-10.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2029&baseline=1&reform=57905) |
| Abolish stamp duty for first-time homebuyers        | -2.3                    | [-4.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2029&baseline=1)  |
| Taxes incident on capital                           | 20.0                    | [20.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58131&region=uk&timePeriod=2029&baseline=1)  |
| Total tax changes                                   | -41.9                   | [-49.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2029&baseline=1) |

## Overall

The Conservative manifesto, according to their costings, balances £41.9bn of tax cuts against £43.9bn generated by decreasing benefit spending, yielding a net budgetary surplus of £2bn. However, PolicyEngine’s estimate of the Conservatives’ total tax changes is £7.8bn higher than those in the manifesto, leading us to estimate an overall deficit of £5.8bn. As explained in the tax change section, this may be driven by modelling differences in the Conservatives’ HICBC policy costing, as well as assumptions on the housing market’s impact on the Conservatives’ stamp duty modifications.

In the chart below, negative numbers refer to increased government expenditures, while positive numbers refer to budgetary savings.

| **Provision**          | **Conservatives (£bn)** | **PolicyEngine (£bn)**                                                                                                                  |
| ---------------------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Total spending changes | -43.9                   | [-43.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58038&region=uk&timePeriod=2029&baseline=1) |
| Total tax changes      | 41.9                    | [49.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2029&baseline=1)  |
| Overall net change     | 2.0                     | [-5.8](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58041&region=uk&timePeriod=2029&baseline=1)  |

## Economic impact

PolicyEngine estimates that the complete Conservative manifesto would, in 2029:

- Cost £0.9bn
- Raise poverty by 6%
- Increase net income for 46% of the population, while decreasing it for 52%

We estimate the Conservatives’ manifesto to be [mostly regressive along income lines](https://legacy.policyengine.org/uk/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=58041&region=uk&timePeriod=2029&baseline=1), with the lowest decile experiencing a 6.4% decrease in disposable income, while those in the highest income bracket would see a 0.3% increase, and those in bracket 9 would experience the greatest relative increase of 1.6%.

![Impact by income decile](/images/posts/conservative-2024-manifesto/decile_impact.png 'image_tooltip')

We also conclude that people in the lowest income deciles are more likely to experience the negative impacts of the proposal, with over 95% of people in the first income decile experiencing a decrease in net income. The majority of people in income deciles above the fifth start to experience net income increases with [overall 46% of the population benefiting](https://legacy.policyengine.org/uk/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=58041&region=uk&timePeriod=2029&baseline=1), in net income terms, and 52% of people experience net income decreases.

![Impacts within income deciles](/images/posts/conservative-2024-manifesto/intra_decile_impact.png 'image_tooltip')

Regarding poverty rates, PolicyEngine estimates that the proposed policy changes would [increase the overall poverty rate 5.8%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=58041&region=uk&timePeriod=2029&baseline=1). The percentage of seniors in poverty would increase by 19% to a total of 13.4%, while child and working-age adult poverty rates would increase by 3.5% and 4.6% respectively.

![Poverty rate impacts](/images/posts/conservative-2024-manifesto/poverty_impact.png 'image_tooltip')

## Conclusion

The Conservative manifesto proposes a series of tax cuts, balanced with welfare spending cuts and anti-tax avoidance provisions, that the party projects to create a budgetary surplus of £2bn between 2025 and 2029. PolicyEngine estimates that these provisions would actually generate a budgetary deficit of £5.8bn, with key differences in modelled impacts of the Child Benefit High Income Tax Charge and the Stamp Duty tax cut for first-time buyers. We estimate that the Conservatives’ policies would redistribute income from those in the lowest brackets toward those in the uppermost, causing noticeable increases in inequality and poverty, particularly for seniors.

We welcome questions and comments on our findings or methodology- please feel free to [get in touch](mailto:contact@policyengine.org).

<!-- Footnotes themselves at the bottom. -->

## Appendix

We estimate the following per-year scores for each of the tax provisions of the manifesto below.

PolicyEngine estimates of Conservative manifesto tax cuts.
| **Provision**| **2025 (£bn)** | **2026 (£bn)**|**2027 (£bn)**|**2028 (£bn)**|**2029 (£bn)**|**Total**|
| ------------ | -------------- | -------------- | ----------- | ----------- | ----------- | ------- |
| Halve employee NICs | [5.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2025&baseline=1) | [5.1](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2026&baseline=1) |[10.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2027&baseline=1) |[10.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2028&baseline=1) | [10.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57887&region=uk&timePeriod=2029&baseline=1) | 41.3 |
| Abolish self-employed NICs | [0.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2025&baseline=1) |[0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2026&baseline=1) |[1.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2027&baseline=1) |[1.8](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2028&baseline=1) |[2.1](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57894&region=uk&timePeriod=2029&baseline=1) | 6.5 |
| Triple Lock Plus | [0.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2025&baseline=1) |[1.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2026&baseline=1) |[1.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2027&baseline=1) |[1.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2028&baseline=1) |[2.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=56385&region=uk&timePeriod=2029&baseline=1) | 7.3 |
| Reform HICBC single-earner provisions | [0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1&reform=57905) |[2.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2026&baseline=1&reform=57905) |[2.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2027&baseline=1&reform=57905) |[2.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2028&baseline=1&reform=57905) |[2.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2029&baseline=1&reform=57905) |10.2 |
| Abolish stamp duty for first-time buyers | [0.8](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2025&baseline=1) |[0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2026&baseline=1) |[0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2027&baseline=1) |[0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2028&baseline=1) |[0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=57915&region=uk&timePeriod=2029&baseline=1) |4.4 |
| Anti-tax avoidance investment | [-2.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58122&region=uk&timePeriod=2025&baseline=1) |[-3.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58122&region=uk&timePeriod=2026&baseline=1) |[-4.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58122&region=uk&timePeriod=2027&baseline=1) |[-5.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58122&region=uk&timePeriod=2028&baseline=1) |[-6.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58122&region=uk&timePeriod=2029&baseline=1) | -20.0 |
| Total | [4.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2025&baseline=1) |[7.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2026&baseline=1) |[12.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2027&baseline=1) |[12.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2028&baseline=1) |[12.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58015&region=uk&timePeriod=2029&baseline=1) |49.7|

These compare to the Conservatives’ estimates below.
| **Provision**| **2025 (£bn)** | **2026 (£bn)**|**2027 (£bn)**|**2028 (£bn)**|**2029 (£bn)**|**Total**|
| ------------ | -------------- | -------------- | ----------- | ----------- | ----------- | ------- |
| Halve employee NICs | 4.7 | 4.8 | 9.7 | 10.0 | 10.3 | 39.5 |
| Abolish self-employed NICs | 0.4 | 0.9 | 1.3 | 1.7 | 2.6 | 6.9 |
| Triple Lock Plus | 0.8 | 1.4 | 2.0 | 2.2 | 2.4 | 8.8 |
| Reform HICBC single-earner provisions | 0 | 1.0 | 1.0 | 1.2 | 1.3 | 4.5 |
| Abolish stamp duty for first-time buyers | 0.3 | 0.4 | 0.5 | 0.6 | 0.6 | 2.4 |
| Anti-tax avoidance investment | -2.0 | -3.0 | -4.0 | -5.0 | -6.0 | -20.0 |
| Total | 6.2 | 8.5 | 15.5 | 15.7 | 17.2 | 41.9 |

Overall, we estimate differences in per-year revenue impacts of between £600m and £2.1bn.

Revenue impact, billions of pounds
| **Budgetary impact (£bn)**| **2025** | **2026**|**2027**|**2028**|**2029**|**Total**|
| ------------ | -------------- | -------------- | ----------- | ----------- | ----------- | ------- |
| Conservatives | -1.0 | 2.0 | 0.0 | 0.8 | 0.3 | 2.1 |
| PolicyEngine | [-1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58040&region=uk&timePeriod=2025&baseline=1) | [0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58040&region=uk&timePeriod=2026&baseline=1) | [-2.1](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58040&region=uk&timePeriod=2027&baseline=1) | [-1.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58040&region=uk&timePeriod=2028&baseline=1) | [-0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=58040&region=uk&timePeriod=2029&baseline=1) | -5.8 |



---

---
# The Labour Party Manifesto
Slug: labour-2024-manifesto
Date: 2024-06-29 14:00:00
Authors: Nikhil Woodruff, Anthony Volk
Tags: uk, policy
Description: PolicyEngine's comprehensive impact score.

---

_Distributional impact of the Labour 2024 Manifesto. See the full impact score [here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60777&region=uk&timePeriod=2028&baseline=1)._

## Key findings

- Labour propose a budget-surplus plan which raises £7.5bn and spends £4.2bn, benefiting 73% of people.
- Spending reforms are largely focussed on public services, while tax reforms are likely to be incident mostly on high-earners.
- PolicyEngine estimates that the private school VAT application is progressive along income deciles.
- We project that the lowest income decile would see a 2.4% rise in net income, while the top decile would see a 1% fall in net income.
- We also project modest reductions in absolute poverty and inequality.

On June 13, Labour [released](https://labour.org.uk/updates/stories/labour-manifesto-2024-sign-up/) their 2024 election manifesto, laying out their revenue and spending priorities for the coming parliament. In their manifesto, Labour does not provide a total figure for expected expenditures or tax revenue for the entirety of the five-year parliament. However, they do provide [cost estimates](https://labour.org.uk/change/labours-fiscal-plan/) for the 2028-29 fiscal year, which PolicyEngine uses as the basis of its modelling.

In the manifesto, Labour set out a revenue-positive series of priorities. In fiscal year 2028-29, the party aims to raise £7.4bn through tax revisions and spend £4.8bn funding new expenditures, with the majority of this value allocated to increased NHS spending, NHS-adjacent healthcare programs, and education programs.

For the first time, PolicyEngine will produce a comprehensive score of this and future manifestos, capturing an estimate of the economic impact of all spending and revenue changes.

In this report, we will walk through Labour’s key policy proposals and present the manifesto costings produced by Labour alongside PolicyEngine replications of individual provisions. Costings in tables may not sum due to rounding. Where a proposal involves a tax-benefit policy modelled by PolicyEngine, we report our alignment to the Labour claim.

Where a proposal is outside the scope of PolicyEngine’s model, we assume the Labour spending or revenue estimate is fixed and apply an assumption about the incidence of the impact on UK households.[^1]

## Spending

Labour proposes a net spending increase of £4.8bn in 2028-29. The bulk of this spending would be allocated to new or expanded health and education programs, the most significant of which would include:

- Funding 40,000 more weekly NHS operations, scans, and appointments
- Increased funding to HMRC to reduce tax avoidance
- Hiring 6,500 new teachers
- Recruiting 8,500 new mental health employees
- Providing free breakfast clubs in every primary school

None of these involve changes to benefits modelled by PolicyEngine, so we assume their cost estimates and use the ONS’ estimates of the distributional impact of public service spending categories.

| Provision                             | Labour (£bn) | PolicyEngine (£bn)                                                                                                                    |
| ------------------------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| Increase education spending £1.3bn    | 1.3          | [1.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60023&region=uk&timePeriod=2028&baseline=1) |
| Increase NHS funding £2.0bn           | 2.0          | [2.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60024&region=uk&timePeriod=2028&baseline=1) |
| Increase other public spending £0.9bn | 0.9          | [0.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60025&region=uk&timePeriod=2028&baseline=1) |
| Total spending changes                | 4.2          | [4.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60027&region=uk&timePeriod=2028&baseline=1) |

## Revenue

Labour’s manifesto also proposes a £7.4 billion increase in tax revenues, funded through four tax policy revisions:

- Removal of the non-domiciled tax status and investments in reducing tax avoidance
- Application of VAT and business rates to private school tuition fees
- Application of standard income tax rates to carried interest
- An increase of 1% to the residential property stamp duty for non-UK residents

| Provision                                                                          | Labour (£bn) | PolicyEngine (£bn)                                                                                                                                               |
| ---------------------------------------------------------------------------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Remove non-dom tax incentive and reduce tax avoidance                              | 5.2          | [5.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=60770&region=uk&timePeriod=2028&baseline=1) |
| Apply VAT and business rates to private schools                                    | 1.5          | [1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&region=uk&timePeriod=2028&baseline=1&reform=60760)                            |
| Close carried interest tax provision                                               | 0.6          | [0.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60028&region=uk&timePeriod=2024&baseline=1)                            |
| Increase stamp duty on purchases of residential property by non-UK residents by 1% | 0.04         | 0.0                                                                                                                                                              |
| Total tax changes                                                                  | 7.3          | [7.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60773&region=uk&timePeriod=2028&baseline=1)                            |

PolicyEngine models the impact of levying VAT on private schools, largely following the evidence base contributed by [the IFS](https://ifs.org.uk/publications/tax-private-school-fees-and-state-school-spending) and [UCL](https://www.tandfonline.com/doi/full/10.1080/09645292.2021.1874878).[^2] Using patterns of income and private school attendance, our model estimates distributional and inequality impacts of the reform.

In order to capture the likely distributional impact of non-dom status removal, we represent this as a tax on income over £100,000 raising £3.2bn in revenue.[^3] We model the tax on carried interest as a tax incident on owners of capital.

## Economic impact

PolicyEngine estimates that in 2028 the Labour Party manifesto would:

- Raise £3.3bn
- Lower poverty by 2%
- Raise net income for 73% of people

We estimate that gains would be progressive along income lines, with the lowest decile seeing a 2.4% increase in net income and the highest decile seeing a 1% loss.

![Impact by income decile](/images/posts/labour-2024-manifesto/decile.png)

We also estimate that people in lower and middle income deciles are highly likely to benefit. Only the top decile sees a majority of people come out behind, and more than 80% in each of the bottom eight deciles come out ahead or the same.

![Winners and losers by income decile](/images/posts/labour-2024-manifesto/winners.png)

On poverty, we estimate modest reductions in absolute poverty across all age groups, particularly aimed at seniors. We also project that the Gini index of income inequality would by 0.6%.

![Poverty impact by age group](/images/posts/labour-2024-manifesto/poverty.png)

## Conclusion

The Labour manifesto redistributes £4.2bn and raises £3.3bn surplus revenue progressively, with small tax rises largely concentrated on the highest income decile funding public spending that benefits the lower and middle of the income distribution the most. We estimate this causes a small reduction in absolute poverty, and an increase in living standards for 73% of the population.

<!-- Footnotes themselves at the bottom. -->

## Notes

[^1]: Where a policy is clearly a tax on corporations or consumption, we distribute the burden according to imputed corporate wealth and consumption, respectively. For public service budget changes we apply the ONS’ estimates of public service consumption by income decile. Where a policy is clearly only incident on high incomes, we model it as a progressive tax after an appropriate income level.

[^2]: See our open-source model addition [here](https://github.com/PolicyEngine/policyengine-uk/pull/880/files). We do not model the business rate increase.

[^3]: [Advani et al](https://warwick.ac.uk/fac/soc/economics/research/centres/cage/manage/publications/bn36.2022.pdf) found that only 0.3% of people who have ever been non-doms earn less than £100,000, and non-dom status becomes more prevalent at higher incomes.



---

---
# PolicyEngine Powers Niskanen Center's Analysis
Slug: niskanen-center-analysis
Date: 2024-07-12 09:00:00
Authors: Max Ghenis, Ben Gross
Tags: us, policy, featured
Description: Three new reports from the Niskanen Center think tank demonstrate PolicyEngine's tax and benefit reform model.

---

PolicyEngine recently powered three Niskanen Center tax and benefit reforms. Our updated model offers new opportunities to explore both the budgetary and distributional impacts of these proposals on childhood poverty. Niskanen, the first major American think tank to use PolicyEngine, follows in the footsteps of institutions such as The [Centre for Policy Studies](https://cps.org.uk/research/national-insurance-a-plan-to-blunt-the-pain/_) and the [Green Party](https://martin-farley.medium.com/poverty-buster-the-impact-of-the-2019-green-party-manifesto-on-household-incomes-and-equality-9663c39b783b) in the United Kingdom. On issues from the Child Tax Credit (CTC), Earned Income Tax Credit (EITC), household filing status, and more, PolicyEngine has proven itself a reliable authority on tax and benefit modeling.

The report, "[Building A Stronger Foundation for American Families](https://www.niskanencenter.org/wp-content/uploads/2024/03/Building-a-stronger-foundation-for-American-families-.pdf)" leverages PolicyEngine's capacity to identify marriage penalties and benefit cliffs. PolicyEngine instantly provided the cost ($110 billion) and poverty impacts (a 31.2 percent child poverty reduction) for Niskanen's baseline case, restoring the American Rescue Plan's CTC expansion. The authors then adjusted key policy levers (we provide thousands) on the platform with the intent to lower cost, reduce marriage penalties, and target specific income deciles.

PolicyEngine's built-in instant interactive data visualizations powerfully illustrate the distributional effects of Niskanen's proposals across income deciles. For example, the chart below unpacks the distributional analysis of two simultaneous reforms–an expansion of the CTC combined with the elimination of the head of household (HoH) filing status, which reduces taxes for single parents compared to single individuals. Policy makers are often looking to find lower costs, and charts like these demonstrate how multivariate changes to the tax-code enable policymakers to balance budgetary concerns with impact. James Medlock, a favorite contributor to online policy discussion, applauded the chart: "Especially for more 'give and take' reforms like this, it's nice to show heterogeneity within deciles," [he wrote](https://x.com/jdcmedlock/status/1772638537059377660).

![](/images/posts/niskanen_center_analysis/ctc_graph.png "image_tooltip")

PolicyEngine also empowers consumers of policy reforms to test the analysis and dig deeper. PolicyEngine's free open source model makes our assumptions transparent and enables anyone to design policy reforms. For example, by clicking [here](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=47843&region=enhanced_) you can see all component reforms and impacts of Niskanen's preferred policy design.

Two other recent Niskanen analyses demonstrate PolicyEngine's versatility. The first, on [Virginia's family benefit policy](https://www.niskanencenter.org/options-for-virginia-to-reform-its-family-tax-benefits/), uses PolicyEngine to calculate the cost of state policy. Examining the recent [Commonwealth Kids Credit proposal](https://thecommonwealthinstitute.org/research/support-virginia-families-through-a-commonwealth-kids-credit/), PolicyEngine predicts a cost of [$873.8 million per year](https://legacy.policyengine.org/us/policy?focus=policyOutput.netIncome&reform=32868&region=va&timePeriod=2023&baseline=2). The second, an [analysis of the recently passed statewide Child Tax Credit in Illinois](https://www.niskanencenter.org/a-missed-opportunity-to-get-illinois-ctc-right/), also uses PolicyEngine's microsimulation model to predict both costs and impacts. Converting the state's dependent exemption into a fully refundable child tax credit for children under eighteen, [PolicyEngine models](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=57128&region=il&timePeriod=2024&baseline=2) a cost of approximately $50 million this year and deep child poverty reduction of 11%. PolicyEngine's sheer speed, when combined with its high level of specificity and customizability, makes it an attractive choice for policy analysts across the political spectrum.

As PolicyEngine grows and improves, institutions like the Niskanen Center can continue their thoughtful analysis in an ever more efficient, intuitive, and user-friendly way. Interested in using PolicyEngine for your own work? Reach out at [hello@policyengine.org](mailto:hello@policyengine.org).



---

---
# Kamala Harris's LIFT Act Middle Class Tax Credit
Slug: lift-act
Date: 2024-07-22 01:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, policy, featured, 2024-election
Description: A comprehensive analysis of the Vice President's 2018 proposal.

---

As a US Senator in 2018, Vice President Kamala Harris introduced the [LIFT (Livable Incomes for Families Today) Act](https://www.congress.gov/bill/116th-congress/senate-bill/4/text), a refundable tax credit similar to the Earned Income Tax Credit. Then-Senator Harris also featured this proposal in her 2020 presidential campaign. Using PolicyEngine US v1.25.2 and the 2022 Enhanced Current Population Survey, we analyze the potential impacts of this reform if implemented in 2024. This analysis focuses solely on the Middle Class Tax Credit (MCTC) component of the LIFT Act, not addressing other provisions such as those related to the Tax Cuts and Jobs Act or a financial transactions tax.

# What is the LIFT Act?

The LIFT Act's Middle Class Tax Credit phases in with 100% of earnings up to a maximum amount, then phases out with adjusted gross income over a window. Harris established it with inflation-indexed values in 2019, which creates the following structure in 2024:

**Table 1: LIFT Act Middle Class Tax Credit parameters (2024)**

| Filing status     | Maximum amount | Phase-out start | Phase-out end |
| ----------------- | -------------- | --------------- | ------------- |
| Single            | $3,600         | $35,800         | $59,650       |
| Head of household | $3,600         | $71,600         | $95,450       |
| Joint             | $7,200         | $71,600         | $119,350      |

This structure is depicted below. You can also calculate how the LIFT Act would affect your own household with **[this calculator](https://legacy.policyengine.org/us/household?reform=61627&focus=intro&region=enhanced_us&timePeriod=2024&baseline=2)**.

![Figure 1: LIFT Act Middle Class Tax Credit by filing status and earnings level (2024)](/images/posts/lift-act/trapezoids.png)

# Static US Impact

[PolicyEngine estimates](https://legacy.policyengine.org/us/policy?reform=61632&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2024&baseline=2) that the MCTC would, in 2024:

- Cost $411 billion
- Lower poverty by 25.4%, with larger reductions for children, Blacks, Hispanics, and men
- Reduce the Gini index of income inequality by 4.1%
- Benefit 68% of Americans

![Figure 2: Winners from the LIFT Act Middle Class Tax Credit by Decile (2024)](/images/posts/lift-act/winners.png)

While the earnings requirement reduces the share of individuals in the bottom decile who would benefit, those in the second through sixth deciles gain more than those in higher income households.

# US Impact Considering Behavioral Responses

PolicyEngine now supports behavioral responses: users can enter their own income and substitution elasticities, which govern how people work less when they have more income and are paid less on the margin, respectively. The MCTC would be expected to reduce work through the income effect, and both increase and reduce work through the substitution effect, as it reduces marginal tax rates by 100 percentage points in the phase-in and increases them by 15 percentage points in the phase-out.

Applying elasticities from the Congressional Budget Office, we project that the MCTC would [reduce hours worked by 1.1%](https://legacy.policyengine.org/us/policy?reform=61633&focus=policyOutput.laborSupplyImpact.hours&region=enhanced_us&timePeriod=2024&baseline=2) and [earnings by 0.9%](https://legacy.policyengine.org/us/policy?reform=61633&focus=policyOutput.laborSupplyImpact.earnings.overall.relative&region=enhanced_us&timePeriod=2024&baseline=2). Substitution effects (the phase-out) explain most of these reductions. As a result, the tax credit's cost would rise by 10% to [$450 billion](https://legacy.policyengine.org/us/policy?reform=61633&focus=policyOutput.budgetaryImpact.overall&region=enhanced_us&timePeriod=2024&baseline=2), though the poverty impact would remain essentially unchanged at 25%.

# Conclusion

The LIFT Act proposed by then-Senator Kamala Harris includes a Middle Class Tax Credit that would reduce poverty and inequality through over $400 billion in annual transfers if fully taken up. This exceeds contemporaneous cost estimates (see Table 2), likely due to faster than expected inflation since 2018, which mechanically expands the nominal cost of the program through higher maximums and phase-outs. We also assume full take-up, which increases the costs compared to, for example, the Tax Policy Center's assumption of partial take-up.

**Table 2: Comparison of LIFT Act Middle Class Tax Credit cost and poverty estimates**

| Organization                                 | Cost ($bn) | Poverty reduction (%) | Child Poverty reduction (%) | Estimate Year         | Notes                                                                                   |
| -------------------------------------------- | ---------- | --------------------- | --------------------------- | --------------------- | --------------------------------------------------------------------------------------- |
| CRFB                                         | 300        | -                     | -                           | Average over 10 years |                                                                                         |
| TPC                                          | 291        | -                     | -                           | 2024                  | Assumes partial take-up                                                                 |
| Tax Foundation                               | 276        | -                     | -                           | 2024                  | Static Revenue impact Estimate an average net income increase of 2.4% (PE assumes 3.2%) |
| Penn Wharton Budget Model                    | 317        | -                     | -                           | 2024                  |                                                                                         |
| ITEP                                         | 271        | -                     | -                           | 2020                  |                                                                                         |
| Columbia Center on Poverty and Social Policy | /          | 17.2                  | 25.7                        | 2019                  | Rounded values used for the calculation                                                 |
| PolicyEngine (static)                        | 411        | 25.4                  | 27.1                        | 2024                  |                                                                                         |
| PolicyEngine (dynamic)                       | 449        | 25.2                  | 27.0                        | 2024                  | CBO elasticities                                                                        |

Incorporating behavioral responses adds about 10% to the cost, due to about 1% less labor supply. This results from income effects and substitution effects for those in the phase-out range, though some low-income earners would be projected to work more due to substitution effects.

As Vice President Harris pursues her 2024 presidential campaign, she may balance her prior proposals like the LIFT Act with newer policies in [President Biden's budget](https://policyengine.org/us/research/biden-budget-2025). PolicyEngine stands ready to support evidence-based evaluation of potential reforms like these and those from across the political spectrum.



---

---
# Analysis of JD Vance’s Suggested $5,000 Child Tax Credit Expansion
Slug: vance-ctc
Date: 2024-08-11 01:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, policy, featured, 2024-election
Description: Impacts of the vice presidential nominee’s reform depend largely on its uncertain refundability.

---

Senator and vice presidential nominee JD Vance (R-OH) has suggested expanding the Child Tax Credit (CTC) to $5,000 per child. His statements suggest he’d also like to remove income limits, while leaving the question of refundability uncertain. Using PolicyEngine, we’ve analyzed two versions of this idea: one maintaining current refundability rules and another making the credit fully refundable.

The version maintaining current refundability would cost $106 billion in 2025 and reduce child poverty by 1%, assuming no behavioral responses. The fully refundable version would cost $241 billion and reduce child poverty by 41%. Applying labor supply [assumptions](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4) from the Congressional Budget Office lowers the cost of the partially refundable by 8%, while increasing the cost of the fully refundable version by 2%. Both versions would increase disposable income across all income deciles and reduce income inequality.

## Vance’s Statements

In a 2021 [interview](https://abcnews.go.com/US/vance-argued-higher-tax-rate-childless-americans-2021/story?id=112284318) with Charlie Kirk, Vance expressed support for a tax policy favoring families with children: "If you are making $100,000, $400,000 a year and you’ve got three kids, you should pay a different, lower tax rate than if you are making the same amount of money and you don’t have any kids."

Vance spoke about this with Margaret Brennan of Face the Nation in an [interview](https://youtu.be/pK1V2q05Zi8?si=tyJuJ37hV7jPuaZQ) that aired today, including the CTC as an instantiation of his 2021 idea. He then suggested expanding it: "I’d love to see a child tax credit that’s $5,000 per child."

When asked about income limits, Vance added: "I’d like to have a broad-based family policy and a broad-based child tax credit. […] I think you want it to apply to all families. I don’t think that you want this massive cutoff for lower income families, which you have today, you don’t want a different policy for higher income families, you just want to have a pro-family child tax credit."

While not a formal policy proposal, these statements provide insight into his thinking on family tax policy.

## Background on the Child Tax Credit

The current CTC provides up to $2,000 per child, with a partial refundability structure, as our [CTC explainer](https://policyengine.org/us/research/the-child-tax-credit-in-2023) details. Low-income parents who don’t benefit from the $2,000 non-refundable credit can receive the Additional Child Tax Credit, a refundable credit that phases in with earnings above $2,500. The credit then begins to phase out at incomes of $200,000 for single filers and $400,000 for joint filers. PolicyEngine projects that this phase-out structure will reduce the program’s cost by [$5 billion in 2025](https://legacy.policyengine.org/us/policy?reform=63060&focus=policyOutput.policyBreakdown&region=enhanced_us&timePeriod=2025&baseline=2), or [$4 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63085&baseline=2&timePeriod=2025&region=enhanced_us) accounting for behavioral responses.

![](https://cdn-images-1.medium.com/max/3200/0*pEOu1VXlahfSP2g8)

The most recent attempt to expand the CTC came in the Tax Relief for American Families and Workers Act (TRAFWA). The House [passed](https://www.congress.gov/bill/118th-congress/house-bill/7024/all-actions) this bill 357–70 in January. However, on August 1, the Senate fell short of the votes needed to pass it, with a 48–44 vote; Vance was absent for this vote. We [analyzed](https://policyengine.org/us/research/trafwa-ctc) the potential impacts of TRAFWA in March.

## Household Impacts

Vance’s suggested policy would provide up to $5,000 per child, though specific amounts vary with marital status, income, number of children, and the policy’s refundability.[^repo]

[^repo]: We generated these custom charts with the `policyengine-us` Python package in [this notebook](https://github.com/PolicyEngine/analysis-notebooks/blob/main/us/irs/income/credits/ctc/vance_ctc.ipynb). Other charts we generated with the PolicyEngine web app.

![](https://cdn-images-1.medium.com/max/3200/0*LozrS5KgfAaq8bVS)

Regardless of refundability, parents with income above certain levels would gain $5,000 per child; for example, a married family with . For low-income parents, the fully refundable version could provide up to $5,000 per child in additional benefits. Otherwise, both versions provide an additional $3,000 per child for most families currently receiving the full $2,000 credit, except those in the phase-in region of the partially-refundable version.

For personalized calculations, you can use our calculators for the version with [current refundability](https://legacy.policyengine.org/us/household?focus=intro&reform=63077&baseline=2&timePeriod=2025&region=enhanced_us) and [full refundability](https://legacy.policyengine.org/us/household?focus=intro&reform=63076&baseline=2&timePeriod=2025&region=enhanced_us).

## Societal Impacts

Applying the PolicyEngine US 1.45.2 microsimulation model and Enhanced CPS data, we project that the CTC expansion would cost $106 billion and $241 billion in 2025 if maintaining or expanding refundability, respectively, while reducing poverty and inequality (we display the Gini index below, though other measures also fall).[^crfb] You can view the full results in PolicyEngine for the [current](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=63077&baseline=2&timePeriod=2025&region=enhanced_us) and [full](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63076&baseline=2&timePeriod=2025&region=enhanced_us) refundability versions. The below table summarizes these impacts:

[^crfb]: Comparing our budgetary projections to the Committee for Responsible Federal Budget's ["Build Your Own Child Tax Credit"](https://www.crfb.org/build-your-own-child-tax-credit) tool, we find similar results with full refundability, but significantly lower results with current refundability. Specifically, their estimates for no full refundability were \$238 billion (CRFB) versus \$106 billion (PolicyEngine), and with full refundability, \$264 billion (CRFB) versus \$241 billion (PolicyEngine). They shared that their estimates do not rely on microsimulation modeling, and could as a result become inaccurate for larger reforms.

| Metric                          | Current refundability | Full refundability |
| ------------------------------- | --------------------- | ------------------ |
| **Cost**                        | $106.3 billion        | $241.5 billion     |
| **Population share benefiting** | 33.4%                 | 46.9%              |
| **Child poverty impact**        | -1.2%                 | -41.9%             |
| **Overall poverty impact**      | -0.4%                 | -12.6%             |
| **Gini impact**                 | -0.4%                 | -2.3%              |

Maintaining current refundability, one in three Americans would benefit from the reform, and one in five would gain at least 5% of their net income. Less than five percent of people in the bottom two deciles would benefit, however, as most do not have income tax for the non-refundable credit to offset.

![](https://cdn-images-1.medium.com/max/3200/0*r9Vpz-45q2jOvtCP)

Making the credit fully refundable increases the share of Americans who would benefit by 40%, from 33% to 47%. Two in five would also benefit by at least 5% of their net income. All who gain in the bottom seven income deciles would benefit by at least 5%, including 22% in the bottom two deciles (they are less likely to benefit because of lower-income households having fewer children).

![](https://cdn-images-1.medium.com/max/3200/0*mn0O2wftzVoEa7-W)

## Labor supply responses

The incorporation of labor supply responses based on CBO elasticities reveals differing impacts between the non-refundable and fully refundable versions of the expanded Child Tax Credit. These elasticities capture two mechanisms by which people might work less: they have more money and can purchase leisure (“income effect”) and they take home less for a marginal hour of work (“substitution effect”).

| Version                   | Change in hours worked | Change in earnings | Change in cost |
| ------------------------- | ---------------------- | ------------------ | -------------- |
| **Current refundability** | +0.45%                 | +0.27%             | -8.3%          |
| **Fully refundability**   | -0.25%                 | -0.11%             | +1.7%          |

Without changing refundability, income effects reduce labor supply, but substitution effects from removing the additional 5 percentage point marginal tax rate in the CTC phase-out region dominate, resulting in a net increase in labor supply. [See the full results in PolicyEngine.](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63079&baseline=2&timePeriod=2025&region=enhanced_us)

With full refundability, income effects lower labor supply, and substitution effects operate in both directions: lower marginal tax rates from removing the phase-out, but higher marginal tax rates from removing the phase-in. The net effect is lower labor supply from both income and substitution effects, with income effects having a larger impact. [See the full results in PolicyEngine.](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63081&baseline=2&timePeriod=2025&region=enhanced_us)

## Conclusion

JD Vance’s suggestion to expand the Child Tax Credit to $5,000 per child and remove income limits would significantly alter current family tax policy. The impacts vary substantially based on refundability: the fully refundable version would cost 2 to 2.5x as much as the partially refundable version, but would reduce child poverty by 41% compared to 1%.

Both versions would increase disposable income for most families with children and reduce income inequality, with the refundable version providing more substantial benefits to lower-income households.

Labor supply effects differ as well, with the partially refundable version slightly increasing work hours and the fully refundable version slightly decreasing them.

Key areas of uncertainty in this analysis include:

- Take-up rates, especially for the fully refundable version

- Extent of labor supply responses

- Macroeconomic feedback effects beyond labor supply responses, such as deficit impacts

As policymakers consider this and other proposals, tools like PolicyEngine can provide valuable insights into the potential impacts on different households and the overall economy. However, these projections should be considered alongside other evidence and potential long-term consequences to form a comprehensive understanding of the policy’s effects.



---

---
# PolicyEngine at the 117th Annual Conference on Taxation
Slug: nta-2024
Date: 2024-08-13 01:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, policy, conferences
Description: Exploring AI applications and enhanced data for tax policy analysis.

---

PolicyEngine is proud to announce our participation in the [117th Annual Conference on Taxation](https://ntanet.org/2024/07/117th-annual-conference-on-taxation-full/), hosted by the National Tax Association (NTA) in Detroit, Michigan, from November 14-16, 2024. Our co-founders, Max Ghenis (CEO) and Nikhil Woodruff (CTO), will be presenting two groundbreaking papers that showcase our innovative approaches to tax policy analysis and microsimulation. Additionally, we'll be showcasing the PolicyEngine platform at the conference's poster session.

# Presentations

## 1. What Can LLMs Tell Us about the ETI?

- **Presenters:** Max Ghenis, Co-founder and CEO of PolicyEngine, and Jason DeBacker, Associate Professor of Economics at University of South Carolina
- **Date and Time:** Friday, November 15, 2024, 9:10 AM - 9:30 AM
- **Location:** Richard A (Level 5, Detroit Marriott at the Renaissance Center)
- **Session:** [Responses to Income Taxes](https://nta.confex.com/nta/2024/meetingapp.cgi/Session/1234)

### Abstract

In this study, we employ large language models (LLMs) to investigate how these AI systems perceive and simulate behavioral responses to changes in tax policies. By leveraging the economic reasoning capabilities of state-of-the-art LLMs, such as Anthropic's Claude or OpenAI's GPT models, we simulate various tax filer scenarios and analyze the LLMs' responses to policy changes, such as modifications to statutory marginal tax rates or the Earned Income Tax Credit (EITC) phase-in range.

We begin by examining how LLMs perceive and simulate behavioral responses across different tax filer situations, including primary and secondary earners, capital gains income, and single filers with children. For each scenario, we vary household income levels to test for heterogeneity across the income distribution. By comparing the LLMs' simulated responses to empirical estimates from the literature, we assess the alignment between the AI-generated perceptions and real-world observations, highlighting similarities, differences, and potential insights beyond the available literature.

Furthermore, we delve into the "reasoning" behind the LLMs' simulated responses, exploring factors such as income and substitution effects, optimization frictions, and incomplete information. By analyzing the LLMs' explanations, we gain a deeper understanding of how these AI systems perceive and model complex economic decision-making processes.

This study contributes to the growing field of AI-assisted economic research by demonstrating the potential of LLMs to provide novel insights into behavioral responses to tax policy changes, complementing and extending the existing empirical literature. Our findings have implications for policymakers, researchers, and practitioners seeking to leverage AI technologies to inform economic policy decisions and advance our understanding of taxpayer behavior.

## 2. PolicyEngine's Enhanced Current Population Survey for Tax-Benefit Microsimulation

- **Presenters:** Max Ghenis, Co-founder and CEO of PolicyEngine, and Nikhil Woodruff, Co-founder and CTO of PolicyEngine
- **Date and Time:** Thursday, November 14, 2024, 9:30 AM - 9:50 AM
- **Location:** Marquette B (Level 5, Detroit Marriott at the Renaissance Center)
- **Session:** [Advances in Using Administrative Data to Measure Income Distributions and the Effects of Tax Policies](https://nta.confex.com/nta/2024/meetingapp.cgi/Session/5678)

### Abstract

Microsimulation models are powerful tools for analyzing the effects of tax and benefit reforms. However, constructing representative microdata that supports modeling a broad range of policies at the federal, state, and local levels presents unique challenges. Tax records lack detailed person-level characteristics and benefit information, while survey data may not capture the full distribution across income sources.

In this paper, we introduce PolicyEngine's new enhanced microdata, the Enhanced Current Population Survey (ECPS), which leverages modern data science techniques to address these challenges. We integrate information from the IRS Public Use File into the Current Population Survey March Supplement using quantile regression forests. We then reweight the data using gradient descent to match a comprehensive set of national totals. Our validation results demonstrate that the ECPS outperforms the aged CPS and PUF in matching most administrative aggregates, coming within one percent across hundreds of targets covering demographics, income, benefits, and taxes.

To showcase the ECPS's capabilities, we assess several Child Tax Credit (CTC) reform proposals, finding that it closely reflects budgetary estimates from the Joint Committee on Taxation, while additionally providing nuanced distributional impacts.

By making this dataset openly available and providing a user-friendly interface for using and evaluating it, we aim to democratize access to high-quality microsimulation for policymakers, researchers, and the public. We discuss our methodology in detail, including the use of our new open-source Python package, survey-enhance, for data integration and reweighting. We also outline our plans for further enhancements, such as incorporating additional data sources, providing finer geographic detail, and expanding our validation efforts through comparisons with other prominent models.

## PolicyEngine Platform Showcase

- **Event:** Poster Session
- **Date and Time:** Friday, November 15, 2024, 5:15 PM - 6:30 PM
- **Presenters:** PolicyEngine Team

In addition to our paper presentations, we're excited to showcase the PolicyEngine platform at the conference's poster session. This will be an excellent opportunity for attendees to get hands-on experience with our tool, see its capabilities in action, and discuss potential applications for their own research or policy analysis work.

# Conclusion

We are excited to share our latest research and innovations with the tax policy community at the NTA Annual Conference. These presentations and our poster session reflect PolicyEngine's commitment to advancing the field of tax-benefit microsimulation and leveraging cutting-edge technologies to inform policy decisions. We look forward to engaging discussions and feedback from our peers in the field.

For more information about the conference or to connect with us, please visit the [NTA conference website](https://ntanet.org/2024/07/117th-annual-conference-on-taxation-full/) or reach out to us directly.



---

---
# Validation against the Survey of Personal Incomes
Slug: uk-spi-validation
Date: 2024-08-14 01:00:00
Authors: Anthony Volk
Tags: uk, technical
Description: Evaluating PolicyEngine's model performance against the UK SPI.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Validation against the Survey of Personal Incomes\n",
    "\n",
    "To ensure accuracy and precision, PolicyEngine periodically validates its free and open-source simulation and microsimulation model against existing external datasets. This process involves taking external datasets meant to represent a particular slice of British society and loading their inputs, such as total individual employment income, into our data model. We then compare our calculated outputs with theirs in an effort to find discrepancies between the two. In this post, we'll describe our efforts to validate our model against the newly released [Survey of Personal Incomes (SPI) 2020/21](https://www.gov.uk/government/statistics/personal-incomes-statistics-for-the-tax-year-2020-to-2021/personal-income-statistics-2020-to-2021-supporting-documentation) dataset.\n",
    "\n",
    "## The UK Survey of Personal Incomes\n",
    "\n",
    "The Survey of Personal Incomes (SPI) is a comprehensive dataset produced by HM Revenue and Customs (HMRC). It provides detailed information on individuals' income, tax, and other financial data based on a sample of HMRC records. The SPI is among the most comprehensive UK individual-level financial datasets, and is used by HMRC, HM Treasury, and individual Members of Parliament, among others.[^1]\n",
    "\n",
    "## Validation results\n",
    "\n",
    "We chose to validate PolicyEngine against the SPI's total individual income, using the SPI's input variables to compare PolicyEngine UK's calculated total income tax against the SPI's reported amount. \n",
    "\n",
    "To do so, we first remove the SPI's \"composite records,\" which are used to represent smaller population groups as a collective. This group of records is only meant to be employed within society-wide modelling, and its outputs cannot be correctly computed using its inputs. This group of records contains 1,770 observations, representing around 0.2% of total records.\n",
    "\n",
    "We then treat relevant variables from the SPI 2020/21 dataset[^2] as input variables into the PolicyEngine UK model. Using this data, we run household-level simulations for each input and categorise the outputs logarithmically based on how close PolicyEngine's calculated 2020/21 total income tax is to that of the SPI. We treat a result within £10 as a match due to differences in rounding. Our final match statistics are displayed in the table below."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "vscode": {
     "languageId": "plaintext"
    }
   },
   "source": [
    "| Total error (£) | Percentage of all records |\n",
    "|-----------------|---------------------------|\n",
    "| <=10            | 92.7%                     |\n",
    "| <100            | 93.5%                     |\n",
    "| <1,000          | 98.3%                     |\n",
    "| >=1,000         | 1.7%                      |"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "For 92.7% of individuals included within the SPI, PolicyEngine UK's calculated total income tax is within £10 of the SPI's calculated amount. We view this as a robust demonstration of PolicyEngine's accuracy and precision.\n",
    "\n",
    "## Analysing model discrepancies\n",
    "\n",
    "For the remaining records where our calculations do not closely match the SPI, we believe the differences are attributable to two main factors:\n",
    "\n",
    "1. Differences in input information: The SPI sometimes uses additional input data that is not available to PolicyEngine, leading to differences in calculations.\n",
    "2. Structural differences: At times, the SPI model's structure differs from that of PolicyEngine in a way that complicates further model validation.\n",
    "\n",
    "Four relevant error clusters appeared among the records where the SPI and PolicyEngine calculate differing outputs:\n",
    "\n",
    "1. Cases where an individual appears to transfer a portion of their Personal Allowance to their spouse as part of the Marriage Allowance. This is because the SPI removes the transferred amount from the individual's Personal Allowance, but does not indicate that the subsequent lower amount is driven by the Marriage Allowance. This may represent as much as 37,998 records (4.8% of total).\n",
    "1. Cases where an individual receives less than £100,000 in annual income and is non-resident for taxation purposes. In this situation, the individual receives £0 Personal Allowance, even though our model would project a full £12,500 allowance. The SPI uses a variable that is not publicly available to calculate this status. This represents 2,054 records (0.3% of total).\n",
    "1. Cases where both the SPI and PolicyEngine calculate the same amount of taxable savings income for an individual receiving any form of savings income classified by the SPI as \"Other Investment Income\" (e.g., interest on securities), but the SPI finds that they owe around £1,000 more in income tax than we do. This represents 1,276 records (0.2% of total).\n",
    "1. Cases where an individual near the Personal Allowance taper value who claims Gift Aid receives a full Personal Allowance of £12,500 within the SPI model. The SPI model's Gift Aid variable signifies the amount an individual deducts due to Gift Aid donations, while PolicyEngine's represents an individual's total Gift Aid-eligible donations. We then calculate the indivdual's deduction amount from this value. This error represents 738 records (0.1% of total).\n",
    "\n",
    "## Conclusion\n",
    "PolicyEngine's UK model shows a high level of parity with the SPI's 2020/21 data, with almost 93% of records with the same inputs returning the same total income tax calculation. While some discrepancies exist, they are limited in scope and often attributable to either testability limitations within the SPI's structure or to inputs that the SPI has not made publicly available. This validation exercise builds upon our previous validations, such as our [Autumn 2023 model calibration](https://legacy.policyengine.org/uk/research/uk-calibration-2023-q4). We welcome questions and comments on our findings or methodology - please feel free to [get in touch](mailto:contact@policyengine.org)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "[^1]: https://data.europa.eu/data/datasets/hmrc-survey-of-personal-incomes-spi?locale=en\n",
    "[^2]: https://www.gov.uk/government/statistics/personal-incomes-statistics-for-the-tax-year-2020-to-2021"
   ]
  }
 ],
 "metadata": {
  "language_info": {
   "name": "python"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# Kamala Harris’s Child Tax Credit Proposal
Slug: harris-ctc
Date: 2024-08-17 01:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, 2024-election, policy, featured
Description: We analyze the Democratic nominee’s proposal to expand the 2021 expansion, giving $6,000 to parents of newborns.

---

The Kamala Harris campaign yesterday released an [economic policy agenda](https://mailchi.mp/press.kamalaharris.com/vice-president-harris-lays-out-agenda-to-lower-costs-for-american-families) spanning housing, healthcare, grocery costs, and taxes. Her tax plan led with a pledge to “restore the American Rescue Plan’s expanded Child Tax Credit” and provide “up to $6,000 in total tax relief for middle-income and low-income families for the first year of their child’s life.”

Using the PolicyEngine model, we estimate that this Child Tax Credit expansion would have these effects in 2025:

- Cost $117 billion

- Benefit 44% of the population

- Cut child poverty 31%

- Lower the Gini index of income inequality by 1.4%

While these effects assume no behavioral responses, the projected cost rises about five percent when applying elasticities from the Congressional Budget Office.

[_See how Kamala Harris’ Child Tax Credit proposal would affect you._](https://legacy.policyengine.org/us/household?focus=intro&reform=63712&baseline=2&timePeriod=2025&region=enhanced_us) _(Make sure to select **2025**.)_

## The Child Tax Credit

The Child Tax Credit (CTC) currently provides up to $2,000 per child, with a partially refundable structure; that is, filers without tax liability can claim only part of the credit — currently, $1,700. Low-income parents who don’t benefit from the full non-refundable credit can receive the Additional Child Tax Credit, which phases in with earnings above $2,500. The credit begins to phase out at incomes of $200,000 for single parents (head of household filers) and $400,000 for joint filers.

In 2021, the American Rescue Plan Act (ARPA) temporarily expanded the CTC, increasing the maximum credit to $3,600 for children under 6 and $3,000 for older children, making it fully refundable, and introducing an additional phase-out for higher-income households. We’ve previously analyzed the impacts of the [current CTC](https://policyengine.org/us/research/the-child-tax-credit-in-2023), [restoring the ARPA expansion](https://policyengine.org/us/research/restoration-of-the-american-rescue-plan-acts-expanded-child-tax-credit), and the [Biden-Harris 2025 budget proposal](https://policyengine.org/us/research/biden-budget-2025), which also included restoring this expanded CTC.

## The Harris Plan

Kamala Harris has now proposed not only restoring the ARPA expansion but also adding a “baby bonus” of $2,400 for children in their first year of life, bringing the total credit to $6,000 for newborns. While she has not yet detailed the baby bonus mechanism, we assume it follows the [American Family Act of 2023](https://www.congress.gov/bill/118th-congress/house-bill/3899), which had 211 cosponsors in the House (all Democrats) and phased out the baby bonus with the ARPA expansion.

## Household Impacts

Consider a parent, or parents, with no earnings who bear a newborn. Under current law, they would receive no Child Tax Credit, since they have no tax liability for the non-refundable $2,000 credit to count against, nor do they have the earnings for the Additional Child Tax Credit (refundable component) to phase in with. Under Harris’s proposal, they would receive the full $6,000 baby bonus, adding $6,000 to their net income.

As this household’s earnings rise, the net benefit falls: while they receive $6,000 under Harris’ plan, the difference is less as they would be entitled to more of a credit under current law. While Harris hasn’t specified the “middle-income and low-income families” who would be eligible, we assume the additional credit phases out with the rest of the ARPA CTC, as House Democrats designed the 2023 American Family Act to do.

Broadening the picture, we can view how this household and others with one child would benefit, depending on their marital status and the child’s age.

![](https://cdn-images-1.medium.com/max/3184/0*Hi7zttzYhstumibz)

The maximum benefit varies with the child’s age: $6,000 for newborns, $3,600 for children age one to five, and $3,000 for children ages 6 to 17. Since 17-year-olds are ineligible under current law, they see a larger benefit. Married parents benefit more in some earnings ranges for two reasons:

1. Their higher standard deduction reduces their tax liability under current law, which requires them to have higher earnings to benefit from the non-refundable CTC

1. The Harris CTC expansion phases out at a higher income level for married filers compared to single (head of household) filers

## Microsimulation Results

Using PolicyEngine’s US microsimulation model version 1.54.3 and Enhanced Current Population Survey data, we estimate that Harris’ Child Tax Credit expansion would cost [$117.4 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63712&baseline=2&timePeriod=2025&region=enhanced_us) in 2025, assuming no behavioral responses. We project that the baby bonus contributes [$6.4 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63710&baseline=2&timePeriod=2025&region=enhanced_us) to its cost.

The reform would [benefit 44% of Americans](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=63712&baseline=2&timePeriod=2025&region=enhanced_us), including 26% who would gain at least 5% of their net income. Those in the eighth income decile are most likely to benefit, while those in the fourth decile are most likely to gain at least 5%.

**Harris Child Tax Credit Impact by Income Decile**
![](https://cdn-images-1.medium.com/max/3200/0*MOotvlk1g6GWT9sF)

Assuming full take-up, the proposal would reduce the Supplemental Poverty Measure 9.1% overall, with disproportionate impact for children (30.5%), Black and Hispanic Americans (10.6% and 11.4%), and women (9.7%). It would also reduce deep poverty 9.9%, including 36.3% among children. Finally, Harris’ CTC would reduce [income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=63712&baseline=2&timePeriod=2025&region=enhanced_us) by between 0.6% (top 1% share) and 1.4% (Gini index), depending on the measure.

## Labor Supply Effects

Incorporating labor supply responses based on Congressional Budget Office elasticities modifies these projections:

- Hours worked would fall by [0.25%](https://legacy.policyengine.org/us/policy?reform=63523&focus=policyOutput.laborSupplyImpact.hours&region=enhanced_us&timePeriod=2025&baseline=2&household=46590)

- Earnings would fall by [0.14%](https://legacy.policyengine.org/us/policy?focus=policyOutput.laborSupplyImpact.earnings.overall.relative&reform=63719&baseline=2&timePeriod=2025&region=enhanced_us)

- The total federal cost would increase 4.8% to [$122.9 billion](https://legacy.policyengine.org/us/policy?reform=63523&focus=policyOutput.budgetaryImpact.overall&region=enhanced_us&timePeriod=2025&baseline=2&household=46590) (state and local income tax revenue would also fall $0.9 billion)

- The child poverty impact would fall 6% (1.7pp) to [28.8%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=63719&baseline=2&timePeriod=2025&region=enhanced_us)

About one-third of these changes reflect the “income effect” (people working less because they have more money), while two-thirds reflect “substitution effects” (changes in work incentives due to altered marginal tax rates).

## Conclusion

Based on the PolicyEngine model analysis, the proposed Child Tax Credit expansion by Kamala Harris is projected to cost $117.4 billion while reducing child poverty 31% without assuming behavioral responses, which would raise the cost 5% and lower the child poverty impact 6%. These projections are based on current economic conditions and assume full implementation and take-up of the proposed policy. Actual outcomes may vary based on economic fluctuations, implementation details, and other policy interactions.

We invite you to use our tools to explore the reform in more detail at the [US-wide level](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63712&baseline=2&timePeriod=2025&region=enhanced_us), to view how it affects your own state (for example, [here’s California](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=63712&baseline=2&timePeriod=2025&region=ca)), and to see how it would affect [your own household](https://legacy.policyengine.org/us/household?focus=intro&reform=63712&baseline=2&timePeriod=2025).



---

---
# Individual Income Tax Provisions in Minnesota Bill HF1938 (2023)
Slug: mn-hf1938-walz
Date: 2024-08-21 01:00:00
Authors: Pavel Makarchuk
Tags: us, 2024-election, policy, featured, minnesota
Description: The reform signed by Governor Tim Walz expanded credits for low-income families, reduced taxes for middle-income retirees, and raised taxes for high-income filers.

---

In March 2023, Minnesota Governor Tim Walz signed into law [HF1938](https://www.revisor.mn.gov/bills/text.php?number=HF1938&version=4&session=ls93&session_year=2023&session_number=0&format=pdf), a tax reform bill that modifies several aspects of the state’s tax code. The legislation introduces changes to family tax credits, retirement benefit subtractions, and deductions for high-income taxpayers.

PolicyEngine’s static microsimulation results for 2023 project that HF1938’s individual income tax provisions:

- Cost $444 million

- Reduced poverty by 2% and child poverty by 9%

- Increased net income for 22% and reduced net income for 4% of Minnesotans

- Lowered the Gini index of income inequality by 0.9%

This report describes provisions of HF1938, illustrates the impacts with hypothetical households, and summarizes projected Minnesota-wide impacts.

[_See the Minnesota impacts_](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.policyBreakdown&region=mn&timePeriod=2023&baseline=63889&household=46737)

[_See how HF1938 would affect your own household_](https://legacy.policyengine.org/us/household?reform=2&focus=intro&region=mn&timePeriod=2023&baseline=63889)

# Provisions of HF1938

HF1938 expanded low-income tax credits, adjusted retirement income subtractions, and reduced standard and itemized deductions for high-income filers. It also included several provisions PolicyEngine does not currently model, including property tax adjustments as well as education tax credit.

## Working Families Tax Credit

The new law introduces a combined Child and Working Family Tax Credit, replacing the previous Working Family Credit (which resembled the federal Earned Income Tax Credit) and adding a new child tax credit (CTC) component:

| Credit Impacts           | Working Family Credit (2022)                                                                                                                                              | Child and Working Family (2023)                                                                                                                                                                                                 |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Maximum Amount**       | No children: $295.23 <br> One child: $1,183 <br> Two children: $2,283 <br> Three or more children: $2,647                                                                 | $1,750 per child qualifying for the federal CTC <br> $350 per family <br> Additional credit for dependent children not eligible for the federal CTC: <br> 1 Child: $925 <br> 2 Children: $2,100 <br> 3 or more Children: $2,500 |
| **Earnings Requirement** | Full credit phases in with earnings                                                                                                                                       | Family component phases in with earnings                                                                                                                                                                                        |
| **Reduction Start**      | Single / Married <br> No children: $9,240 / $15,430 <br> One child: $24,110 / $30,290 <br> Two children: $28,590 / $34,770 <br> Three or more children: $28,900 / $35,090 | Single: $29,500 <br> Married: $35,000                                                                                                                                                                                           |
| **Reduction Rate**       | No children: 2% <br> One child: 6% <br> Two or more children: 10.5%                                                                                                       | Main rate: 12% <br> Additional rate for dependent children not eligible for the federal CTC: 9%                                                                                                                                 |

## Introduces Retirement Benefits Subtraction for Public Sector Pensions

- Subtracts up to $12,500 ($25,000 married) in public sector pension benefits from state adjusted gross income

- Phases out at 5% of income above $78,000 ($100,000 married)

## Expands Social Security Subtraction

- Increased the maximum amount of Social Security benefits subtracted from state adjusted gross income from $4,020 to $4,560 ($5,150 to $5,840 married)

- Increased reduction thresholds from $61,080 to $69,250 ($78,180 to $88,630 married)

- Maintains $40,000 phase-out window (10% per $4,000 income above the threshold)

## Expands Child and Dependent Care Credit (CDCC)

- Made married filing separately filers eligible for the state CDCC

## Further Reduces Standard and Itemized Deductions for High Income Filers

- Adds two new reductions to standard and itemized deductions for high-income filers, atop the existing reduction equal to 3% of income above $110,325 ($220,650 married): 10% of income over $304,970 and 80% of income over $1,000,000

# Household Impacts

## Child and Working Family Credit

The new Child and Working Family Tax Credit provides up to $3,385 to eligible Minnesota households. For instance, a single parent with two children (ages 10 and 5) earning $30,000 now receives an additional [$1,656](https://legacy.policyengine.org/us/household?reform=2&focus=householdOutput.netIncome&region=mn&timePeriod=2023&baseline=63889&household=46721) in refundable credits under the new structure.

The following graph shows how the reform affects a married couple with two children as well as for a single parent:[^1]

[^1]: I created this figure with [this code](https://github.com/PolicyEngine/analysis-notebooks/blob/main/us/states/mn/hf1938/mn_hf1938_wftc.ipynb). Other figures are from the PolicyEngine web app.

**Figure 1: Credit amount comparison of the Working Family Credit and the new Child and Working Family Credit on a couple and single parent of two (10 and 5) (2023)**

![](https://cdn-images-1.medium.com/max/2660/0*NTzfwwf6k2PVGxpq)

Looking at the [net impact](https://legacy.policyengine.org/us/household?reform=2&focus=householdOutput.earnings&region=mn&timePeriod=2024&baseline=63834&household=46680), this household could receive up to an additional $3,500 due to the removal of the general earnings requirements for the Child Tax Credit component. The impact gradually reduces as the previous Working Family Credit phases in and spikes once more due to the delayed reduction start.

**Figure 2: Net income impact of the Minnesota Bill HF1938 on a single parent of two (10 and 5) with earnings up to $100k (2023)**

![](https://cdn-images-1.medium.com/max/3200/0*GJSskNDoNTqey6n8)

The credit change also impacts [marginal tax rates](https://legacy.policyengine.org/us/household?reform=2&focus=householdOutput.mtr&region=mn&timePeriod=2024&baseline=63834&household=46680) for the given family. The marginal tax rates increase by as much as 12 percentage points for earnings between $50,000 and $62,000.

**Figure 3: Marginal Tax Rate changes under the Minnesota Bill HF1938 on a single parent of two (10 and 5) (2023)**

![](https://cdn-images-1.medium.com/max/3200/0*eSBqpQM51uN6veYk)

## Reduced Standard Deduction

Zooming out, we can see that the reform reduces [this household’s](https://legacy.policyengine.org/us/household?reform=2&focus=householdOutput.earnings&region=mn&timePeriod=2024&baseline=63834&household=46745) standard deduction for earnings between $310,000 and $775,000.

**Figure 4: How Minnesota Bill HF1938 (2023) affects a joint filer’s standard deduction**

![](https://cdn-images-1.medium.com/max/3200/0*2DLAosGOytyh8SuP)

Accordingly, the reform increases this household’s taxes by as much as $966, for earnings of $445,000.

**Figure 5: Net income impact of the Minnesota Bill HF1938 on a single parent of two (10 and 5) with earnings up to $800k (2023)**

![](https://cdn-images-1.medium.com/max/3200/0*6dlFo_YMTdbifJui)

## Social Security and public pension subtractions

To illustrate the changes to the subtractions for Social Security benefits public pensions, consider an individual receiving $25,000 in public pensions (for example, from teaching in public schools) and $20,000 in Social Security benefits. These are both roughly average values. This individual would pay up to $1,500 less in [income tax](https://legacy.policyengine.org/us/household?reform=2&focus=householdOutput.netIncome&region=mn&timePeriod=2023&baseline=63889&household=46737) due to the newly introduced public retirement income subtraction and the adjusted social security income subtraction.

**Figure 6: Impact of the new subtraction structure under the Minnesota Bill HF1938 on a senior with $25k of public retirement income and $20k of social security retirement income (2023)**

![](https://cdn-images-1.medium.com/max/3200/0*ExCR_GL_u6VfJ3oj)

# Microsimulation Results

PolicyEngine’s US microsimulation model (version 1.57.1), run over the indexed 2022 Current Population Survey March Supplement for 2023, reveals several key impacts of HF1938’s individual income tax provisions:

- Costs [$444 million](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.policyBreakdown&region=mn&timePeriod=2023&baseline=63889)

- Lowers Minnesota’s Supplemental Poverty Measure by 1.9%, including [9.4%](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.povertyImpact.regular.byAge&region=mn&timePeriod=2023&baseline=63889) for children and [45.6%](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.povertyImpact.deep.byAge&region=mn&timePeriod=2023&baseline=63889) for deep child poverty

- Reduces income inequality in Minnesota: the Gini index falls [0.8%](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.inequalityImpact&region=mn&timePeriod=2023&baseline=63889&household=46737), while the net income share held by the top 1% and 10% each fall 0.2%

[22%](https://legacy.policyengine.org/us/policy?reform=2&focus=policyOutput.winnersAndLosers.incomeDecile&region=mn&timePeriod=2023&baseline=63889) of residents will experience an increase in their after-tax income due to these changes, including 35% of those in the bottom income decile. Conversely, 4% of residents will see a reduction in their after-tax income, including 38% of those in the top income decile.

**Figure 7: Winners and Losers from the Minnesota Bill HF1938 by Decile (2023)**

![](https://cdn-images-1.medium.com/max/3200/0*nI9I5cjBOwe0Ijwl)

These results assume no behavioral responses.

# Conclusion

The Minnesota tax reform bill HF1938 introduces changes to the state’s tax structure, particularly in areas of family tax credits, retirement benefits, and deductions for high-income earners.

The microsimulation results suggest that these reforms will reduce inequality and poverty, especially among children. The changes in tax credits and deductions create a mixed effect across income levels, with a majority of residents seeing increased after-tax income, while a smaller percentage, primarily in higher income brackets, experience reductions.



---

---
# How the Rent Relief Act of 2019 Varies with Income and Location
Slug: rent-relief-act
Date: 2024-08-22 01:00:00
Authors: Max Ghenis
Tags: us, 2024-election, policy, featured
Description: We show the impact on different households of the tax credit bill introduced by then-Senator Kamala Harris.

---

Kamala Harris on Friday released her [economic plan](https://mailchi.mp/press.kamalaharris.com/vice-president-harris-lays-out-agenda-to-lower-costs-for-american-families), including an expanded Child Tax Credit we [analyzed](https://policyengine.org/us/research/harris-ctc) on Saturday. Absent from the housing portion of her plan was legislation she introduced in 2018 and 2019 as a Senator: the Rent Relief Act (RRA), a refundable tax credit based on income, rent paid, and local housing costs. In this post, we use the PolicyEngine model to explore its effects on different household types, and how it situates with other tax and benefit programs. We focus on a typical example, as well as two ends of the credit’s generosity spectrum, based on local housing costs, at which the bill caps countable rent.

# Legislative History

While Harris introduced the RRA in the Senate in 2018 and then 2019, the bill dates back to 2017 and continues to be active:

- 2017: Rep. Joseph Crowley (D-NY) [introduced](https://www.congress.gov/bill/115th-congress/house-bill/3670/) the initial version with eight cosponsors.

- 2018: Rep. Scott Peters (D-CA) [reintroduced](https://www.congress.gov/bill/115th-congress/house-bill/6671) it in the House; Sen. Kamala Harris introduced a [Senate companion bill](https://www.congress.gov/bill/115th-congress/senate-bill/3250).

- 2019: Sen. Harris and Rep. Danny Davis (D-IL) reintroduced it in the [Senate](https://www.congress.gov/bill/116th-congress/senate-bill/1106) and [House](https://www.congress.gov/bill/116th-congress/house-bill/2169), respectively, reducing the maximum rent from 150% to 100% of fair market rent.

- 2022: Rep. Davis and Sen. Raphael Warnock (D-GA) [reintroduced](https://www.congress.gov/bill/117th-congress/senate-bill/4728?q=%7B%22search%22%3A%22%5C%22rent+relief+act%5C%22%22%7D&s=4&r=3) the bill.

- 2023: Rep. Davis [reintroduced](https://www.congress.gov/bill/118th-congress/house-bill/6721) it without a Senate companion.

The bill has not changed since 2019, and all 25 cosponsors in the latest House bill are Democrats.

# Mechanics of the Proposed Credit

The RRA establishes a refundable tax credit based on household income, rent paid, and local housing costs. The bill defines local housing costs from Small Area Fair Market Rents (SAFMRs), which HUD [sets](https://www.huduser.gov/portal/datasets/fmr/fmrs/FY2024_code/2024summary_sa.odn) at the 40th percentile of rents in each ZIP code, broken down by the number of bedrooms. HUD publishes these SAFMRs annually, and [this spreadsheet](https://docs.google.com/spreadsheets/d/1tH3NQXmLisDgxjl0WUbnQvS05OskAKI27Lk1gIOsfA4/edit?usp=sharing) shows them for 2024.

Key features of the credit:

- Covers a percentage of rent exceeding 30% of the household’s gross income

- Percentage decreases as income increases, according to the following schedule: 100% for incomes up to $25,000, 75% for incomes over $25,000 but not over $50,000, 50% for incomes over $50,000 but not over $75,000, 25% for incomes over $75,000 but not over $100,000, 0% for incomes over $100,000

- Thresholds are $25,000 higher in [areas](https://www.hud.gov/program_offices/public_indian_housing/programs/hcv/safmr) that use SAFMRs instead of FMRs (which HUD defines at the metro level) for the Housing Choice Voucher program

- Uses SAFMRs to determine maximum allowable rent for credit calculation

- Alternate rules for residents of public housing (not modeled in this piece)

- Credit is refundable, meaning it can exceed the amount of taxes owed

This structure creates a varying impact on households depending on their income, rent, and location. The subsequent sections will explore these impacts through specific examples.

# Examples

We will examine three examples to illustrate the Rent Relief Act’s effects on different household types across various income levels. These examples will focus on a typical household, as well as two households at opposite ends of the credit’s generosity spectrum based on local housing costs.

## A Typical Example: Sherman-Denison, Texas

Consider a [single parent](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=46796&region=us&timePeriod=2024&baseline=2&reform=63509) with two children living in ZIP code 75459 in Sherman-Denison, Texas, an area with SAFMRs close to the median that does not use SAFMRs for the HCV program. Suppose this household pays $1,500 per month in rent for their three-bedroom home, less than the $1,590 per month SAFMR. Suppose further that they earn $40,000 per year. The credit would cover 75% of the difference between their rent ($18,000) exceeding 30% of their income ($12,000), or 75% of $6,000 which is $4,500.

We can see this visually by displaying the credit with earnings, showing the steps at $25,000 and $50,000, and their ineligibility at $60,000 income (30% of which is $1,500 per month).

**Figure 1: Rent Relief Act for a Sherman-Denison, Texas 3-bedroom**

![](https://cdn-images-1.medium.com/max/3036/0*_bG50g06m6fg3p2c)

The steps at $25,000 and $50,000 income create cliffs. Combined with other tax and benefit programs, the household would have a lower net income if earning between $25,000 and $48,000.

**Figure 2: Rent Relief Act Impact on a Single Parent of Two in a Sherman-Denison, Texas 3-bedroom**

![](https://cdn-images-1.medium.com/max/3200/0*EPuCVy97aGQvFyUk)

## The Low End: Missouri studios

HUD has designated the country’s lowest SAFMR as studios in a set of ZIPs in central Missouri, at $540 per month. Consider an [individual](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=46651&region=us&timePeriod=2024&baseline=2&reform=63509) living in a studio apartment in this area paying $600 per month:

- If their income is $0, they would receive the full $540 per month ($6,480 annually) as a credit.

- As their income increases, the credit phases out at a 30% rate.

- At $21,600 annual income (30% of which is $540 per month), they would no longer be eligible for the credit.

**Figure 3: Rent Relief Act for a Missouri Studio**

![](https://cdn-images-1.medium.com/max/3128/0*aWj1gSnt06wvXQAS)

As their baseline marginal tax rate ranges from 0% to 62% in this range, the RRA [increases it](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&household=46651&region=us&timePeriod=2024&baseline=2&reform=63509) to between 30% and 92%.

**Figure 4: Rent Relief Act Marginal Tax Rate Impact on a Single Person in a Missouri Studio**

![](https://cdn-images-1.medium.com/max/3044/0*TVnDJ119xe338vNK)

## The High End: San Diego four-bedroom homes

The country’s highest SAFMR is 4bd in several areas in San Diego: $6,960. This is also an area where SAFMR is used for HCV, raising RRA income thresholds by $25,000.

Consider a [married couple](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&household=46575&region=us&timePeriod=2024&baseline=2&reform=63509) with three children paying at least $6,960 per month in rent in a 4bd home in one of these areas. If they have no income, they will receive the full $6,960 per month, or $83,520 per year. That will phase out at a 30% rate, until they earn $50,000, at which point the credit covers 75%, rather than 100%, of the gap between rent and 30% of their income. It then steps down again at $75,000, $100,000, and finally $125,000 income at which point they become ineligible.

**Figure 5: Rent Relief Act for a San Diego 4-bedroom**

![](https://cdn-images-1.medium.com/max/3100/0*IUCRsmREyRmi5cj-)

While the credit phases out at a 30% rate for any segment, it creates a higher average marginal tax rate over the full earnings range due to the steps: by reducing the credit from $83,520 to $0 over the earnings range $0 to $125,000, it adds 67 percentage points to their marginal tax rate.

Stacking the credit atop other tax and benefit programs for this household reveals its effect on cliffs. Accounting for state and federal income taxes, and benefits like the Supplemental Nutrition Assistance Program, the household faces a baseline average marginal tax rate of 38% from $0 to $125,000: they receive $22,817 at zero earnings and $100,351 at $125,000. The RRA thus increases their MTR to 105% over this range; their net income is $106,337 at zero earnings and $100,351 at $125,000.

**Figure 6: Rent Relief Act Impact on a Couple with Three Children in a San Diego 4-bedroom**

![](https://cdn-images-1.medium.com/max/3136/0*laJ8B-XezYYRjNIA)

It’s worth noting that the bill does not set a maximum number of bedrooms based on household size, unlike the [Housing Choice Voucher](https://www.hud.gov/sites/dfiles/PIH/documents/HCV_Guidebook_Calculating_Rent_and_HAP_Payments.pdf#page=7) program. This means the San Diego example could theoretically apply to a single individual living in a four-bedroom home.

## Comparison Across Household Types

To illustrate how the Rent Relief Act affects different household types across various income levels, we can compare the credit amount for all three example households as a function of income:

**Figure 7: Rent Relief Act Credit for Selected Homes**

![](/images/posts/rent_relief/rent_relief_comparison.png "image_tooltip")

This chart demonstrates several key features of the Rent Relief Act:

- Initial Credit Amount: The San Diego household starts with the highest credit due to the high local SAFMR, followed by the Sherman-Denison household, and then the Missouri household.
- Phase-Out Rates: All households experience the same 30% phase-out rate between income thresholds, as evidenced by the parallel slopes in these regions.
  Income Thresholds: The San Diego household’s income thresholds are $25,000 higher than the other two due to the use of SAFMRs for the Housing Choice Voucher program in that area.
- Credit Duration: The San Diego household remains eligible for the credit at much higher income levels compared to the other two households, due to both the higher initial credit amount and the elevated income thresholds.
- Cliff Effects: All three households experience cliff effects at their respective income thresholds, where the credit amount drops sharply over a small increase in income.
- Zero Credit Point: The income level at which each household becomes ineligible for the credit varies significantly, from $21,600 for the Missouri household to $60,000 for the Sherman-Denison household, and $125,000 for the San Diego household.

This comparison illustrates how the Rent Relief Act’s impact varies based on local housing costs and whether an area uses SAFMRs for the Housing Choice Voucher program. It also highlights the uniform nature of the phase-out structure across different household types and locations, while showing how this structure interacts with varying rent levels to produce different outcomes for each household.

# Conclusion

The Rent Relief Act (RRA) of 2019 proposes a refundable tax credit that would have varying impacts on renter households across the United States. This analysis demonstrates several key aspects of the bill’s potential effects:

- Geographic Variation: The credit’s value differs based on location due to its reliance on Small Area Fair Market Rents (SAFMRs). As shown in the examples, the maximum credit ranges from $540 per month in low-cost areas of Missouri to $6,960 per month in high-cost areas of San Diego.

- Income-Based Phase-Out: The credit’s structure, with its stepped percentage reductions at specific income thresholds, creates a set of incentives that vary with household income. This design leads to cliff effects at $25,000 income increments, where increases in earnings can result in decreases in credit amount.

- Interaction with Existing Programs: When combined with other tax and benefit programs, the RRA can alter marginal tax rates. In some cases, as demonstrated in the San Diego example, this can lead to situations where households may face high marginal tax rates or see their net income decrease as their earnings increase.

- Rent-to-Income Ratio: The credit’s design targets households paying more than 30% of their income in rent, with the largest benefits going to those with the highest rent burdens relative to their incomes.

- Potential Locational Incentives: By tying the credit amount to local rent levels, the RRA could potentially influence household decisions about where to live.

- Flexibility in Unit Size: Unlike some housing assistance programs, the RRA does not limit unit size based on household composition.

These features of the Rent Relief Act illustrate the various factors involved in designing housing assistance policies that aim to address affordability issues across diverse housing markets and household types. The bill’s impacts would likely vary depending on local housing costs, household incomes, and interactions with existing social programs.

In modeling the program’s effects, it is important to consider these incentive effects. Given our recent work integrating labor supply responses in microsimulations, we plan to examine the literature around migration to incorporate this into future analysis. This approach will allow for a more comprehensive understanding of how the RRA might influence both employment decisions and geographical mobility.

Further research could explore the potential effects of the RRA on rental markets, including possible impacts on rent levels and housing supply. Additionally, analysis of the bill’s budgetary implications and its effects on poverty rates and housing stability across different demographic groups could provide insights for understanding the full scope of the proposed legislation.



---

---
# How the Oregon Rebate May Affect Poverty Rates
Slug: oregon-rebate
Date: 2024-09-29 01:00:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, 2024-election, policy, us-or
Description: Our model finds the ballot measure could reduce poverty by between 22% and 35%, without macroeconomic effects.

---

_Disclaimer: The Gerald Huff Fund for Humanity has provided financial support to both PolicyEngine and the Oregon Rebate campaign._

This November, Oregon voters will vote on [Measure 118](<https://ballotpedia.org/Oregon_Measure_118,_Corporate_Tax_Revenue_Rebate_for_Residents_Initiative_(2024)>), the Corporate Tax Revenue Rebate for Residents Initiative. According to Ballotpedia, the ballot measure, broadly known as the _Oregon Rebate_, would operate by "increasing the corporate minimum tax on sales exceeding $25 million by 3%, removing the minimum tax cap, and distributing increased revenue to Oregon residents who spend more than 200 days in the state."

If it passes, the measure would provide its first payments in early 2026, structured as either a refundable tax credit for the 2025 tax year, or as a payment for nonfilers. Oregon's Legislative Revenue Office projected that these first payments would amount to $1,160 for each person (regardless of age), followed by $1,605 in 2027 and $1,686 in 2028\.

Using the PolicyEngine microsimulation model, we have projected the impact of this bill on poverty in each year, under four scenarios spanning the federal taxability of the payments and the incidence of the tax. Overall we find that the policy would reduce poverty by between 20% and 36% overall depending on the scenario and year, with larger effects for children and in later years. We do not model behavioral or macroeconomic effects of the policy, either resulting from the payments or from the tax.

# Analysis

Should the Oregon Rebate pass, the first payments, estimated at $1,160, will arrive in early 2026\. Since tax filers will receive them as a refundable credit, the Census Bureau would count them toward 2025 net resources when determining the Supplemental Poverty Measure. If the payments had no other effects on income or the economy, and if the federal government did not tax them, PolicyEngine estimates that it would reduce Oregon's poverty rate 24%, from 10.0% to 7.6%. Child poverty would fall 33%, from 8.5% to 5.7%, while adult poverty would fall 22.4%.

Three other factors could affect these results:

1. The payments could affect households' taxes or benefits.
2. Households could bear some or all of the tax that funds the payments.
3. The taxes and/or payments could affect the broader economy.

We modeled the first two of these factors.

## Federal taxability

Regarding taxes or benefits, the Oregon Rebate's similarity to the Alaska Permanent Fund Dividend suggests parallels. In 1982, Alaska established a universal annual payment that has [ranged](https://pfd.alaska.gov/Division-Info/summary-of-dividend-applications-payments) from $331 to $3,284 per person. In neither case is state income tax an issue: Alaska has none, and the Oregon ballot measure exempts it. And in neither case are benefit programs directly affected: both states reserve a "hold harmless fund" for households whose benefits (e.g., the [Supplemental Nutrition Assistance Program](https://alaskalawhelp.org/resource/snapfood-stamps)) fall as a result of the payment counting as income for means tests.

However, the IRS has required Alaskans to enter the permanent fund dividends on their federal tax returns. In recent years, Alaska has bundled a non-taxable "one-time energy relief payment" with the taxable dividend payments; for example, the 2024 payment combines a $1,312 dividend with $390 in energy relief. Depending on the IRS's view of the Oregon Rebate structure, the payments may or may not be federally taxable.

Most households near the poverty line face low tax rates. As a result, PolicyEngine does not project that the taxability will affect the poverty impact in 2025, though it reduces the poverty impact by 5% in 2026 and 2027\.

## Tax burden

The Oregon Rebate is funded by a gross receipts tax on corporations with over $25 million in Oregon sales. Such a tax could affect Oregonians through various mechanisms including higher prices, lower wages, lower employment, and lower investment income.

While PolicyEngine does not currently model the burden of corporate taxes like these, we approximated it as a flat tax on adjusted gross income, calibrated to match the expenditure on the rebate. To fund the rebates, we projected Oregon would need to levy flat taxes of 1.98% in 2025, 2.53% in 2026, and 2.55% in 2027\.

Adding such a flat tax to the simulation reduces the Oregon Rebate's poverty impact by about 10% across years.

## Macroeconomic effects

Using its [Oregon Tax Incidence Model](https://www.oregonlegislature.gov/lro/Documents/rr2-01otim_finalreport.pdf), a computable general equilibrium model of the Oregon economy, the Oregon Legislative Revenue Office [estimated](https://www.oregonlegislature.gov/lro/Documents/IP%2017%20Report.pdf) that the Oregon Rebate would contract the economy and increase prices by 2030\. Compared to current law, they projected personal income to fall 0.71%, population to fall 0.05%, employment to fall 0.99%, wages to fall 0.05%, and prices to rise 1.3%.

PolicyEngine does not currently consider macroeconomic effects such as these in its modeling.

## Results

[The following dashboard](https://oregon-rebate.streamlit.app) summarizes the Oregon Rebate's poverty impact by age group and year, across a two-by-two of scenarios around federal taxability and whether the tax burden is allocated to households as a flat income tax. The results are "static" and do not account for potential macroeconomic effects.

<div style="display: flex; justify-content: center; margin: 20px 0;">
  [Interactive: oregon rebate.streamlit.app?embedded=true]
</div>

You can view these impacts in the PolicyEngine app, which also calculates outcomes like inequality, at the links in this table:

| Federally taxable | Flat tax funded | 2025                                                                                                                                               | 2026                                                                                                                                               | 2027                                                                                                                                               |
| ----------------- | --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| No                | No              | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64228&region=or&timePeriod=2025&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64228&region=or&timePeriod=2026&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64228&region=or&timePeriod=2027&baseline=2)             |
| No                | Yes             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=66621&region=or&timePeriod=2025&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=66621&region=or&timePeriod=2026&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=66621&region=or&timePeriod=2027&baseline=2)             |
| Yes               | No              | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64682&region=or&timePeriod=2025&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64682&region=or&timePeriod=2026&baseline=2)             | [Link](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=64682&region=or&timePeriod=2027&baseline=2)             |
| Yes               | Yes             | [Link](https://legacy.policyengine.org/us/policy?focus=gov.contrib.ubi_center.flat_tax.rate.agi&reform=66617&region=or&timePeriod=2025&baseline=2) | [Link](https://legacy.policyengine.org/us/policy?focus=gov.contrib.ubi_center.flat_tax.rate.agi&reform=66617&region=or&timePeriod=2026&baseline=2) | [Link](https://legacy.policyengine.org/us/policy?focus=gov.contrib.ubi_center.flat_tax.rate.agi&reform=66617&region=or&timePeriod=2027&baseline=2) |

# Methodology

We produced this analysis with the PolicyEngine US microsimulation model v1.103.0. PolicyEngine's state-level microsimulation model applies the most recent three years of the Current Population Survey March Supplement—2021 to 2023—the same data used by the Census Bureau to estimate the Supplemental Poverty Measure by state. Across the three years, this data included 2,619 households in Oregon.

PolicyEngine then "ages" various characteristics of the microdata based on projections from government agencies like the Congressional Budget Office. For example, we age wages and salaries according to projected earnings growth, and poverty thresholds by projected inflation.

Finally, we estimate taxes and benefits based on the PolicyEngine model of federal and state tax and benefit rules. This model includes federal and state income taxes, including future-dated changes such as the expiration of the Tax Cuts and Jobs Act in 2026, as well as benefit programs like the Supplemental Nutrition Assistance Program and Supplemental Security Income. Here we apply state-specific rules and index policy parameters based on projected index changes (generally inflation). We also model the take-up rate of benefits like SNAP and SSI.

While the Census Bureau relies on the CPS for poverty reporting, and various organizations use it for poverty analysis, the CPS has limitations that affect this analysis. For example, high incomes are "top-coded" (truncated), benefits and some income sources are under-reported, and the distribution of income diverges from administrative sources. PolicyEngine [addresses these shortcomings](https://policyengine.org/us/research/enhanced-cps-beta) in national analyses by integrating tax records and calibrating to hundreds of statistics, but has not yet done so for state-level estimates. Correcting the data may change the baseline poverty rates and other distributional measures that may affect the projected impact of the Oregon Rebate on poverty.

_The Oregon Rebate campaign previously cited earlier estimates from the PolicyEngine web app. We have since updated our model, incorporating new Census data released in September 2024, adding two more years of data, imputing rent and property tax data from the American Community Survey for the SNAP excess shelter deduction, and assigning SNAP take-up rates._



---

---
# Exempting Social Security Benefits from Income Taxation
Slug: social-security-tax-exemption
Date: 2024-10-07 01:00:00
Authors: David Trimmer
Tags: us, 2024-election, policy, featured
Description: PolicyEngine projects that former President Donald Trump’s proposal would cost $1.4 trillion over the budget window.

---

On July 31st, [former President Donald Trump announced](https://www.cnn.com/2024/08/01/politics/social-security-benefits-tax-trump/index.html) his intention to exempt Social Security benefits from income taxation if he were elected president. Currently, the US taxes a percentage of Social Security benefits above certain thresholds. Exempting these benefits from taxation would reduce the tax liability of some American households while decreasing federal revenues. Using PolicyEngine, we have analyzed former President Trump’s proposal and estimated its effects on specific family compositions as well as its greater impact on the federal budget and income distribution.

Key results (static):

- Costs $1.4 trillion from 2025 to 2034

- Benefits 17% of Americans in 2025

- Affects poverty, inequality and labor supply anywhere between 0.02% and 2.3% in 2025, depending on the specific measure.

[_Try our personalized calculator:_](https://legacy.policyengine.org/us/household?focus=intro&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2) See how exempting Social Security benefits would affect your household.

## How Social Security Benefits are Taxed Today

Calculating the taxation of Social Security benefits for a household involves a [few steps](https://www-origin.ssa.gov/benefits/retirement/planner/taxes.html). First, Social Security recipients must determine their “combined income”. Combined income is defined as the sum of an individual’s adjusted gross income (AGI), nontaxable interest and half of their Social Security benefits. If a recipient’s combined income exceeds certain thresholds, the US taxes a portion of their benefits and directs the revenues to Social Security Old-Age and Survivors Insurance and Disability Insurance (OASI and DI) and Medicare Hospital Insurance (HI) Trust Funds. Specifically:

1. If combined income is under $25,000 ($32,000 for joint filers), Social Security benefits are not taxed.

1. If combined income exceeds these thresholds, 50% of an individual’s Social Security benefits are taxable, with the revenue directed towards the OASI and DI Trust Funds.

1. If combined income exceeds $34,000 ($44,000 for joint filers), an additional 35% of benefits are subjected to taxation with the revenue allocated to the Medicare HI Trust Fund.

In 2023, these taxes comprised [4.3%](https://www.ssa.gov/OACT/TR/2024/tr2024.pdf) and [8.4%](https://www.cms.gov/oact/tr/2024) of the Social Security and Medicare HI Trust Funds, respectively, with payroll taxes comprising 90.3% and 88.4%.

Rather than have all Social Security payments be fully taxable, this structure only makes a portion of the benefits subject to federal income taxes. [The graph below](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=67048&region=enhanced_us&timePeriod=2025&baseline=2&household=46100) compares the current structure of Social Security benefit taxation (baseline) to a scenario where Social Security benefits are fully taxable (reform) for a single adult with $24,000 in annual payments.

![](https://cdn-images-1.medium.com/max/2000/0*ZDiST4Okq1xEuALf)

As displayed in the graph above, the current structure results in lower-income beneficiaries not being subject to any income tax on their Social Security benefits, with at least 15% of an individual’s benefits remaining non-taxable. In the example above, a single retired adult who receives $2,000 a month from Social Security ([around the average benefit](https://faq.ssa.gov/en-us/Topic/article/KA-01903#:~:text=Views:,most%20convenient%20way%20to%20apply.)) does not face any income taxation as their combined income of $12,000 falls below the $25,000 threshold. This person pays [$705](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=enhanced_us&timePeriod=2025&baseline=67048&household=46100) less in taxes compared to if Social Security benefits were fully taxable. A married couple where one spouse also receives $2,000 a month from Social Security but the other continues to work earning $70,000 [saves $432](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=enhanced_us&timePeriod=2025&baseline=67048&household=47870) due to the current structure. If they earned $150,000, the household would have a [$792](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=enhanced_us&timePeriod=2025&baseline=67048&household=47942) reduction in their income taxes.

## Household Impacts

Let’s examine the effect of exempting Social Security benefits from taxation on the previous households. Because the single retired adult does not face any taxation under the current structure, making all benefits non-taxable would [leave their net income unchanged](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=46100). However, the family with $70,000 in earnings would [reduce their tax liability by $2,448](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47869), while the household earning $150,000 in addition to their Social Security benefits would [gain $4,488](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47942). [The graph below](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47942) shows how net income changes for the two married households as their earnings increase assuming Social Security benefits become non-taxable.

![](https://cdn-images-1.medium.com/max/2000/0*ugkw_zWAcbafI0gZ)

Table 1 shows how the net income of the three households would change if Social Security benefits were made taxable or non-taxable.

**Table 1: Net Income Impact for Households Under Different Social Security Taxation Schemes**

| Household Type (All Have $24,000 in Social Security Benefits) | If Social Security Benefits Were Fully Taxable | If Social Security Benefits Were Non-Taxable |
| ------------------------------------------------------------- | ---------------------------------------------- | -------------------------------------------- |
| Single, No Earnings                                           | -$705                                          | $0                                           |
| Married, $70,000 in Earnings                                  | -$432                                          | $2,448                                       |
| Married, $150,000 in Earnings                                 | -$792                                          | $4,488                                       |

## Microsimulation Results

To estimate the effect across the country, we set both the [50% and 85% taxable rates to 0%](https://legacy.policyengine.org/us/policy?focus=gov.irs.social_security.taxability.rate.base&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47734) in the PolicyEngine web app, thereby eliminating any income taxation on Social Security benefits. The nationwide impact of this proposal using our microsimulation model is as follows:

## Budgetary Impact

We at PolicyEngine project making Social Security benefits non-taxable to [cost the federal government $98.9 billion in 2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47942), assuming no behavioral responses. Additionally, the reform will cost state and local governments $2.9 billion, due to how some states tie their AGI to the federal AGI. When [considering behavioral responses](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=67174&region=enhanced_us&timePeriod=2025&baseline=2&household=47942) (applying elasticities used by the Congressional Budget Office), the federal cost of the proposal in 2025 falls slightly to $97.8 billion due to a positive substitution effect (workers responding to a lower marginal tax rate), partially offset by a negative income effect; overall work hours and earnings are projected to rise by 0.02% and 0.04%, respectively.

Over the next ten years (tax years 2025 to 2034), exempting Social Security benefits from income taxation would cost the federal government a total of $1.4 trillion using static modeling. The Medicare HI Trust Fund would see its revenue decrease by $587.7 billion, while the Social Security Trust Funds would lose the remaining $834.9 billion.[^trust-fund-split] Eliminating income taxes on Social Security benefits would [increase Social Security’s shortfall and put Medicare HI into a deficit](https://www.ssa.gov/OACT/TRSUM/index.html), thus accelerating each of their trust funds’ insolvency dates; for instance, the $40.8 billion impact on the Medicaid HI Trust Fund in 2025 exceeds the $25 billion projected surplus for 2024.

[^trust-fund-split]: To calculate the revenue loss of each trust fund, we first set the additional taxable rate for Social Security benefits [from 85% to 50%](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=67180&region=enhanced_us&timePeriod=2025&baseline=2). This change simulates the revenue lost for the Medicare HI Trust Fund. We then subtracted this amount from the total federal revenue loss to calculate the impact on the Social Security Trust Funds. See the [Social Security](https://www.ssa.gov/OACT/TR/2024/tr2024.pdf) and [Medicare HI](https://www.cms.gov/oact/tr/2024) Trust Fund reports for benchmarks.

**Table 2: Annual Federal Budgetary Impact for Exempting Social Security Benefits from Income Tax**

| Year    | Total Federal Budget Impact (billions $) | Social Security Trust Funds Impact (billions $) | Medicare HI Trust Fund Impact (billions $) |
| ------- | ---------------------------------------- | ----------------------------------------------- | ------------------------------------------ |
| 2025    | -98.9                                    | -58.1                                           | -40.8                                      |
| 2026    | -122.6                                   | -72.3                                           | -50.3                                      |
| 2027    | -128.7                                   | -75.6                                           | -53.1                                      |
| 2028    | -134.0                                   | -78.7                                           | -55.3                                      |
| 2029    | -139.9                                   | -82.2                                           | -57.7                                      |
| 2030    | -146.3                                   | -85.9                                           | -60.4                                      |
| 2031    | -152.9                                   | -89.8                                           | -63.1                                      |
| 2032    | -159.5                                   | -93.7                                           | -65.8                                      |
| 2033    | -166.3                                   | -97.3                                           | -69.0                                      |
| 2034    | -173.5                                   | -101.3                                          | -72.2                                      |
| 2025-34 | -1,422.6                                 | -834.9                                          | -587.7                                     |

Our federal cost estimate falls between projections from the [Tax Foundation ](https://taxfoundation.org/research/all/federal/donald-trump-tax-plan-2024/)(lower) and the [Committee for a Responsible Federal Budget](https://www.crfb.org/blogs/donald-trumps-suggestion-end-taxation-social-security-benefits) (higher) over a ten-year period. The CRFB used data from the Congressional Budget Office and Social Security Trustees.

**Table 3: Comparison of Federal Budgetary Impact Estimates**

| Organization             | Estimate (in billions $) |
| ------------------------ | ------------------------ |
| PolicyEngine (Static)    | -1,422.6                 |
| Tax Foundation (Static)  | -1,196.9                 |
| Tax Foundation (Dynamic) | -1,180.6                 |
| CRFB (CBO)               | -1,600.0                 |
| CRFB (Trustees)          | -1,800.0                 |

## Income Distribution 2025

Under the proposal, 17% of Americans would see their net incomes increase, disproportionately in the top half of the income distribution.

![](https://cdn-images-1.medium.com/max/2000/0*2PqZGSYLcwAkYXWn)

The average benefit for all households is $670 for 2025. However, the ninth and tenth income deciles would receive an average benefit of $1,653 and $1,908, respectively, while the bottom two deciles would see their net incomes rise by less than $100.

![](https://cdn-images-1.medium.com/max/2000/0*cUWrmb9Nfu3HZmml)

Exempting Social Security benefits from income taxes would reduce the overall Supplemental Poverty Measure by [0.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47734) and lower senior poverty by 2.3%. Finally, the effect on income inequality would be mixed, as the proposal would [increase the Gini index by 0.1%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=67049&region=enhanced_us&timePeriod=2025&baseline=2&household=47734), raise the top decile’s net income share by 1.3% but reduce the top percentile’s share of net income by 0.2%.

## Conclusion

Exempting Social Security benefits from taxation would increase the net income of American households while reducing revenues by $1.4 trillion over the next ten years, accelerating the insolvency dates of the Social Security and Medicare Trust Funds. While the reform’s dollar impact rises with income, only 1.6% of the tax benefits would accrue to the bottom two deciles while 45.5% of the benefits would flow to the top 20% of households. The proposal would impact poverty, inequality and labor supply, overall affecting any of the relevant measures by 2.3% or less.

As policymakers consider this proposal and others, tools like PolicyEngine can provide valuable insights into the potential impacts on various household compositions and the greater economy. We invite you to read [additional analyses](https://legacy.policyengine.org/us/research) from our contributors and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your taxes/benefits and design your own policy reforms.



---

---
# Labour's reforms to VAT tax on private schools
Slug: school-vat
Date: 2024-10-17 01:00:00
Authors: Vahid Ahmadi
Tags: uk, tax, policy, vat
Description: PolicyEngine projects Labour's private school tax plan would raise £7.7 billion over five years, mainly affecting wealthier households.

---

## Key findings

- We estimate a [£1.5 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2025&baseline=1) revenue increase from Labour's proposal to raise the VAT rate on private schools to 20%.
- Our analysis projects that Labour's proposal to remove tax exemptions from private schools would raise a total of £7.7 billion in tax revenue over the five-year period from FY2025 to FY2029.
- We estimate that the Gini index of income inequality would decrease slightly by 0.01% in FY2025.
- We also estimate that Labour's plan would lower net income for 3.3% of people.

Labour has proposed a policy change aimed at reducing educational inequality and raising additional revenue for the public sector. Their plan involves removing tax exemptions from private schools, including VAT exemptions and business rates relief. In this report, we provide a comprehensive analysis of Labour's proposal using household data, offering a score of the policy's potential outcomes. This approach (compared to using administrative data) allows us to examine a broader range of potential effects, including changes in the income distribution. In this report, we analyse Labour's key policy proposals by implementing them in our household model. We present our estimated impacts based on the policy reform details and ISC census data, providing a comprehensive view of the potential effects on households.

## Economic impact

### Budgetary impact

PolicyEngine's static analysis[^1] of Labour's plan to remove tax exemptions from private schools estimates a budgetary impact of £1.5 billion. This aligns with the Institute for Fiscal Studies [(IFS)](https://ifs.org.uk/news/removing-tax-exemptions-private-schools-likely-have-little-effect-numbers-private-sector), which projects a £1.3-1.5 billion net gain to public finances per year.

The chart presents PolicyEngine's estimates of the effects of Labour's proposed VAT policy on private schools over the next five years. It shows projections for both the raised tax revenue and the percentage of people experiencing lower net income from FY2025 to FY2029.

| Year | Budgetary impact (£ billion)                                                                                                           | People affected (%) |
| :--- | :------------------------------------------------------------------------------------------------------------------------------------- | :------------------ |
| 2025 | [1.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2025&baseline=1) | 3.3                 |
| 2026 | [1.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2026&baseline=1) | 3.3                 |
| 2027 | [1.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2027&baseline=1) | 3.3                 |
| 2028 | [1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2028&baseline=1) | 3.4                 |
| 2029 | [1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2029&baseline=1) | 3.4                 |

### Distributional impact

Our analysis of Labour's proposal to remove tax exemptions from private schools reveals a mixed impact on household incomes. While the overall effect is modest, with an average decrease in net household income of 0.1% in FY2025, the impact is progressively distributed across income groups:

- Deciles 1-3: The lowest income groups experience negligible changes in their net income.
- Deciles 4-6: Middle-income households see minimal effects from the policy, with only slight changes to their net income.
- Deciles 7-8: Upper-middle income groups are slightly affected, experiencing small but noticeable reductions in their net income.
- Deciles 9-10: The highest income households bear the brunt of the policy's impact, with the most significant reductions in net income, as they are the primary users of private schools.

![](/images/posts/school_vat/income.png)

### Winners and losers

Our analysis of Labour's plan reveals a targeted impact on household incomes across different income groups in FY2025. The policy would decrease net income for 3% of the population, with effects predominantly concentrated in higher income deciles. The lowest income groups (deciles 1-3) see no change, while the impact begins to appear from the 4th decile upwards. The most significant effect is observed in the highest income group (decile 10), where 13% of households experience a loss of less than 5% in their net income. Overall, 97% of the population sees no change in their net income, indicating that the policy's financial impact is limited to a small segment of relatively higher-income households.

![](/images/posts/school_vat/winner-loser.png)

### Inequality impact

Labour's proposal to remove tax exemptions from private schools is projected to have a modest impact on income inequality from FY2025. The Gini index, a common measure of income inequality, is projected to decrease by 0.01%. This suggests a slight overall reduction in income disparity across the population. The policy also appears to have a targeted impact on high-income groups, with the income share of the top 10% decreasing by 0.01%. The income share of the top 1% is also expected to decrease slightly by the same amount.

![](/images/posts/school_vat/gini-plot.png)

## Conclusion

We estimate that Labour's plan would raise £1.5 billion in revenue in FY2025, primarily affecting higher-income households, with 3.3% of the population experiencing a decrease in net income. It also would cause a modest reduction in income inequality, decreasing the Gini index by 0.01%.

[^1]: Our analysis does not account for potential long-term changes in consumer preferences that may result from applying different VAT rates. The analysis assumes static behavioural responses and does not model potential shifts in educational choices or school operations that might occur over time.



---

---
# Levying VAT on private school fees in the Autumn Budget
Slug: vat-school-comparison
Date: 2024-10-31 15:00:00
Authors: Vahid Ahmadi
Tags: uk, tax, policy, vat, featured
Description: PolicyEngine projects the reforms to private school VAT would raise £1.5 billion in 2025.

---

[_See the full impact on PolicyEngine here._](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2025&baseline=1)

The Autumn Budget 2024 confirms the previously signalled intention to levy VAT on private school fees. Using PolicyEngine's open-source model, we analyse the fiscal and distributional implications of this reform.

## Budgetary impacts

We project the private school VAT reform will raise [£1.5 to £1.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2025&baseline=1) per year, totalling £7.7 billion from 2025 to 2029\.

Projections from [HM Treasury](https://assets.publishing.service.gov.uk/media/6721d2c54da1c0d41942a8d2/Policy_Costing_Document_-_Autumn_Budget_2024.pdf#page=34) and the [OBR](https://obr.uk/docs/dlm_uploads/OBR_Economic_and_fiscal_outlook_Oct_2024.pdf#page=66) each total £8.6 billion, 12% higher than ours, as shown below.

#### Revenue from private school VAT by scorekeeper (£ billions)

| Fiscal Year  | 2024-25 | 2025-26                                                                                                                                | 2026-27                                                                                                                                | 2027-28                                                                                                      | 2028-29                                                                                                                               | 2029-30                                                                                                                               | Total |
| :----------- | :------ | :------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------ | :---- |
| PolicyEngine | 0.0     | [1.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2025&baseline=1) | [1.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=60649&region=uk&timePeriod=2026&baseline=1) | [1.5](https://legacy.policyengine.org/uk/policy?focus=gov&reform=60649&region=uk&timePeriod=2027&baseline=1) | [1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60649&region=uk&timePeriod=2028&baseline=1) | [1.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=60649&region=uk&timePeriod=2029&baseline=1) | 7.7   |
| HM Treasury  | 0.5     | 1.5                                                                                                                                    | 1.6                                                                                                                                    | 1.6                                                                                                          | 1.7                                                                                                                                   | 1.7                                                                                                                                   | 8.6   |
| OBR          | 0.5     | 1.5                                                                                                                                    | 1.6                                                                                                                                    | 1.6                                                                                                          | 1.7                                                                                                                                   | 1.7                                                                                                                                   | 8.6   |

The variations between our estimates and official projections may stem from different assumptions about the total value of private school fees or varying projections of future enrollment patterns.

The OBR and HM Treasury both estimate the impact of introducing VAT on private school fees but differ in key assumptions. The OBR assumes an effective VAT rate of 15.4%, factoring in cost recoveries, with two-thirds of the cost passed to parents as higher fees, nearly a quarter absorbed by reduced services, and the rest through efficiencies. They use a demand elasticity of 0.5, predicting that around 35,000 fewer pupils will attend private schools, mostly due to fewer new joiners. In contrast, HM Treasury applies the full standard rate of 20%, calculating the tax base by multiplying pupil numbers by average fees and projecting this over time based on earnings growth. Our analysis assumes no behavioural responses and focuses only on the direct cost impact of VAT, using a static calculation without adjustments over time.

### Distributional Impact

This reform disproportionately affects households in the upper income deciles, reducing the net income of the top decile by 0.15% on average.

![](/images/posts/school_vat/income.png)

The policy would decrease net income for 3% of the population, with effects concentrated in higher income deciles.

![](/images/posts/school_vat/winner-loser.png)

When analysing impacts by wealth rather than income, this reform contributes to the pattern where all wealth deciles see lower net income, though with notably larger effects on wealthier households who are more likely to use private education[^1].

[^1]: [Recent studies](https://francisgreenspersonalwebpage.com/2021/02/11/income-housing-and-private-school-access-in-britain/) show that private school attendance is concentrated among wealthier households in the UK.



---

---
# How PolicyEngine UK models behavioural responses
Slug: behavioural-responses
Date: 2024-11-12 15:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, behavioral-responses, featured
Description: PolicyEngine has enhanced its modelling with behavioural responses, including income, substitution and capital gains elasticities.

---

Public policies change incentives and behaviours. When governments introduce or modify policies, individuals respond by adjusting their decisions. Workers may change their work hours,[^1] investors might shift when they realise gains,[^2] and businesses often adapt their practices in response.[^3] The static analysis fails to capture how individuals adjust their economic decisions when facing new incentives.  
This report presents how PolicyEngine currently models three key behavioural responses to policy changes :

1. Income effects on labour supply
2. Substitution effects on labour supply
3. Capital gains tax responses

To model these responses, we apply _elasticities,_ which quantify the magnitude of the response: larger elasticities indicate stronger behavioural responses, while smaller ones suggest more limited adjustments. PolicyEngine empowers users to set their own elasticities, while we apply our best guesses in our reports. This review describes these responses and our selected elasticities.

## Labour supply

PolicyEngine models how individuals adjust their earnings through income and substitution effects. For example, one might work less if they have more income (they purchase leisure with income effects), or if they take home less for an additional hour of work (they substitute leisure over consumption at the margin).

### The income elasticity

When people become richer, they might choose to work less. The income elasticity measures this behaviour \- how much work changes when net income changes after taxes and transfers.

By default, PolicyEngine applies the [Congressional Budget Office (CBO)](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4)’s central estimate of a **\-0.05** income elasticity, meaning a 10% rise in net income leads to a 0.5% drop in work. The [Office of Budget Responsibility](https://obr.uk/docs/dlm_uploads/NICS-Cut-Impact-on-Labour-Supply-Note.pdf#page=7) also applies a \-0.05 income elasticity for single mothers and men who are not single fathers, while applying elasticities between \-0.037 and \-0.185 for married or cohabitating women and lone parents, depending on the age of the youngest child.

### The substitution elasticity

People work partly based on how much they keep from each extra hour of work. The substitution elasticity measures how work changes when this reward changes. For example, higher tax rates or steeper benefit phase-outs mean keeping less from each additional hour, which might lead to less overtime or part-time work. By default, PolicyEngine applies the [Congressional Budget Office (CBO)](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4)’s central elasticity averaged over primary earners, which is **0.25**, meaning people work 2.5% less when they keep 10% less from each extra hour after taxes and transfers.  
Unlike the [OBR](https://obr.uk/docs/dlm_uploads/NICS-Cut-Impact-on-Labour-Supply-Note.pdf), which separately models extensive margins (participation) and intensive margins (hours worked), PolicyEngine follows CBO in using single elasticities that combine both responses. The OBR's intensive margin elasticities vary by demographic group, ranging from 0.094 to 0.439. PolicyEngine plans to add separate extensive margin responses in future versions, which will require estimating potential wages for individuals currently out of the labour force.

### An illustrative example

To understand how these elasticities work, consider a worker earning £30,000 per year. This worker currently faces a marginal tax rate of [28%](https://legacy.policyengine.org/uk/household?focus=householdOutput.netIncome&household=49381) (combining income tax and National Insurance) and takes home [£24,961](https://legacy.policyengine.org/uk/household?focus=householdOutput.netIncome&household=49381) after taxes and transfers. At the current tax rates, this worker's net-of-tax wage rate is 72% of her gross wage. Now imagine a new policy that increases basic income tax by 1p (from 20% to 21%). In this case, PolicyEngine calculates that this new policy decreases her net income by [£175](https://legacy.policyengine.org/uk/household?focus=householdOutput.netIncome&reform=53461&region=uk&timePeriod=2025&baseline=1&household=49381).

For this worker earning £14.42 per hour (£30,000/2,080 hours), the take-home pay per extra hour drops from £10.38 to £10.21 under the new policy – a 1.6% decrease. Using PolicyEngine's central estimates, we calculate two effects:

1. Substitution effect: Workers reduce hours by 0.25% for each 1% decrease in wages. A 1.6% wage decrease leads to a 0.4% reduction in hours (1.6% × 0.25).
2. Income effect: Workers increase hours by 0.05% for each 1% drop in income. The £175 decrease represents a 0.7% drop in take-home pay (£175/£24,961), leading to a 0.035% increase in hours (0.7% × \-0.05).

The net effect combines these responses: 0.4% decrease minus 0.035% increase equals a 0.365% decrease. Given the baseline of £30,000 earnings and 2,080 hours, this translates to a predicted 7 fewer work hours and £109 less earnings per year.

## Capital gains elasticity

When tax rates on investment gains change, people adjust when they sell their investments,[^4] how much they invest, and how they structure their investments. The capital gains elasticity measures this effect. While conceptually similar to the substitution effect for labour supply (measured with respect to the net-of-tax marginal wage), economists generally represent the capital gains elasticity as the percent change in capital gains with respect to a 1p change in the capital gains tax rate. It therefore has the opposite sign of substitution elasticity.

We have not identified any UK-specific studies on capital gains elasticities, so PolicyEngine relies on US research evidence. US studies distinguish between permanent elasticities (long-term responses to sustained tax changes) and transitory elasticities (temporary responses as people time their sales around tax changes). Dowd and McClelland (2019)[^5] found an overall elasticity of \-0.79 examining US federal and state tax returns from 1999-2008. Earlier work by Auten and Clotfelter (1982)[^6] found a permanent elasticity of \-0.37 and a higher transitory elasticity of \-1.05.  
PolicyEngine uses an elasticity of **\-0.7** as a default amount for the UK context, reflecting our belief that UK capital gains respond less to policy change than US capital gains do. Several factors drive this difference: the US has more tax-advantaged investment vehicles, more generous real estate tax treatment,[^7] a more active trading culture,[^8][^9] and the ability to relocate investments across state tax jurisdictions to minimise combined state and federal liabilities.[^10] The UK's unified tax system and fewer tax-advantaged accounts suggest a smaller response to tax changes. Users can adjust this default elasticity in their analysis.

## How PolicyEngine models behavioural responses

By default, the PolicyEngine web app assumes no behavioural responses. When users specify nonzero elasticities, it adds behavioural responses to its tax-benefit calculations. For each simulated reform, the model first computes the effects of policy changes on income and tax rates. Then, it estimates three behavioural changes: how total income changes affect work, how marginal tax changes affect work hours, and how tax rates influence investment timing. Because each person’s earnings can affect household net income differently, we calculate marginal tax rates with respect to each of the top three earners, and apply each of their labour supply responses, separately. Finally, we recalculate taxes and benefits following the earnings and capital gains change.

## Comparing static and dynamic analysis

Here we demonstrate how incorporating behavioural responses affects policy analysis by examining a tax reform proposed by the UK government in October 2024: change to Capital Gains Tax. For a detailed analysis of this and other reforms proposed in the Autumn Budget, see [PolicyEngine's reform impact analysis](https://policyengine.org/uk/research/autumn-budget-2024-policy-choices).

In estimating the impacts of this reform, we model how individuals with capital gains respond to changes in their marginal tax rate. The table below compares the five-year revenue impacts under both static and dynamic scenarios.

| Reform                                          | Static revenue impact | Dynamic revenue impact | Relative change |
| :---------------------------------------------- | :-------------------- | :--------------------- | :-------------- |
| Basic rate to 18% Higher/additional rate to 24% | 21.5                  | 10.1                   | \-53%           |

## Conclusion

In this report, we present how PolicyEngine models three behavioural responses:

1. **Income effect for labour supply: \-0.05 elasticity** (a 10% increase to net income reduces work hours by 0.5%)
2. **Substitution effect for labour supply: 0.25 elasticity** (a 10% increase to the net marginal wage increases work hours by 2.5%)
3. **Capital gains response: \-0.7 elasticity** (a 10% increase in the marginal tax rate with respect to capital gains reduces capital gains by 7%)

While this report focuses on these three core elasticities, PolicyEngine is expanding its behavioural modelling capabilities. For instance, we developed responses to [employer National Insurance contributions](https://policyengine.org/uk/research/autumn-budget-24-employer-ni), indicating the extent to which employers pass on the burden to lower wages. Using the CGT reform as an example demonstrates the importance of these behavioural responses. PolicyEngine's flexibility allows users to adjust behavioural response assumptions such as labour elasticities and capital gains elasticity to analyse the impact of public policies.

[^1]: Chetty, R., Guren, A., Manoli, D., & Weber, A. (2011). Are Micro and Macro Labor Supply Elasticities Consistent? A Review of Evidence on the Intensive and Extensive Margins. American Economic Review, 101(3), 471–475.

[^2]: Saez, E., Slemrod, J., & Giertz, S. H. (2012). The Elasticity of Taxable Income with Respect to Marginal Tax Rates: A Critical Review. Journal of Economic Literature, 50(1), 3-50.

[^3]: Feldstein, M., Behavioural Responses to Taxation: Lessons from the Tax Reform Act of 1986, American Economic Review, 1995\.

[^4]: Burman, Leonard E., and William C. Randolph. "Measuring permanent responses to capital-gains tax changes in panel data." The American Economic Review (1994): 794-809.

[^5]: Dowd, Tim, and Robert McClelland. 2019\. "The Bunching of Capital Gains Realizations." National Tax Journal 72(2): 323-358.

[^6]: Auten, Gerald, and Charles Clotfelter. 1982\. "Permanent versus Transitory Tax Effects and the Realization of Capital Gains." Quarterly Journal of Economics 97(4): 613-632.

[^7]: U.S. Congress, House Committee on Financial Services, _The Future of Housing in America: A Comparison of the United Kingdom and United States Models of Affordable Housing_, hearing, 114th Congress, 2nd session, May 12, 2016\.

[^8]: Odean, T. (1999). Do investors trade too much? _American Economic Review_, 89(5), 1279-1298.

[^9]: Financial Expert. (n.d.). [A summary of the differences between UK and US investors](https://www.financial-expert.co.uk/differences-between-uk-and-us-investors/).

[^10]: [Tax Policy Center (2023)](https://taxpolicycenter.org/briefing-book/how-do-us-taxes-compare-internationally)



---

---
# Benefits uprating 2025/26
Slug: Benefit-uprating-25
Date: 2024-10-31 15:00:00
Authors: Vahid Ahmadi
Tags: uk, benefit, inflation
Description: PolicyEngine projects Labour's 1.7% benefits uprating would cost £2.5 billion, mainly benefiting lower-income households.

---

## Key findings

PolicyEngine estimates that the 1.7% benefits uprating for 2025/26:

- increases government costs by [£2.5 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=69807&mode=lite)
- lowers poverty by 1.8%
- raises net income for 45.9% of people

Labour's announcement follows the established pattern of annual benefits uprating in the Social Security Administration Act 1992\. Benefits and tax credits rose by [6.7%](https://commonslibrary.parliament.uk/research-briefings/cbp-9872/#:~:text=DWP%20benefits%20that%20are%20linked,by%208.5%25%20from%20April%202024.) in April 2024 (matching September-to-September CPI changes). Labour have confirmed they will implement a [1.7%](https://www.theguardian.com/society/2024/oct/16/surprise-fall-inflation-badly-timed-uk-benefit-recipients) increase in April 2025, matching CPI growth from September 2023 to September 2024\. This uprating will apply to various benefits, including Universal Credit, Attendance Allowance, Carer's Allowance, Income Support and Tax Credits. The increase fulfils the statutory requirement established by Section 150 of the [Social Security Administration Act 1992](https://www.legislation.gov.uk/ukpga/1992/5/section/150/enacted), which mandates that certain benefits must rise at least in line with inflation.

In this report, we analyse Labour's key proposals by modelling their impact on households. We present our estimated impacts of the 1.7% benefits uprating plan for 2025/26, providing a comprehensive view of its effects on households across the UK.

## Economic impact

### Budgetary impact

PolicyEngine compares the actual uprating plan (increasing by 1.7%), which is the responsibility of the UK government, with a scenario where benefits are frozen at their current level for the next year. The 1.7% uprating increases government costs by £2.5 billion.

### Distributional impact

Our analysis shows that the uprating provides larger relative benefits for low-income households: it raises the lowest income decile's net income by 0.8%, and the top decile's by less than 0.1%.

![](/images/posts/benefit_uprating/dist-income-effect.png)

Uprating would benefit around 45% of the population, disproportionately those in the bottom half of the income distribution. 0.5% of the population – entirely in the lowest income decile – would gain at least 5% of their net income.

![](/images/posts/benefit_uprating/win-losser.png)

### Poverty impact

The 1.7% benefits uprating reduces the total poverty rate (absolute, before housing costs) by 1.8% and the child poverty rate by 4.0%.

![](/images/posts/benefit_uprating/poverty-effect.png)

### Inequality impact

Our analysis measures the impact of the 1.7% benefits uprating on inequality through multiple metrics. The reduction in inequality is shown by a 0.27% decrease in the Gini index, with smaller income shares for the highest earners – the top 10% share falls by 0.14% and the top 1% share by 0.17%.

![](/images/posts/benefit_uprating/inequality-effect.png)

## Conclusion

Compared to leaving them fixed, uprating benefit levels by 1.7% for the 2025/26 fiscal year would cost £2.5 billion. It would benefit 45.9% of the population, disproportionately those in lower-income households, while lowering poverty by 1.8% and the Gini index of income inequality by 0.27%.



---

---
# Capital Gains Tax reforms in the Autumn Budget 2024
Slug: cgt-autumn-budget
Date: 2024-11-06 15:00:00
Authors: Vahid Ahmadi
Tags: uk, tax, featured
Description: PolicyEngine estimates that the UK's 2024 Capital Gains Tax reforms will raise £6.4 billion between 2025-2029.

---

The Autumn Budget 2024 includes substantial reforms to Capital Gains Tax (CGT), with Chancellor Rachel Reeves announcing rate increases across all tax bands. The changes raise the rates from 10% and 20% to 18% and 24%, respectively.

When accounting for behavioural responses, we project that these changes will raise £6.4 billion from 2025 to 2029\. In 2025 without behavioural responses, they will affect 1.2% of the population and reduce the Gini index of income inequality by 0.4%.

## Budgetary impacts

We project the CGT reforms will raise £6.4 billion from 2025 to 2029\.

| Fiscal Year   | 2024-25 | 2025-26                                                                                                                               | 2026-27                                                                                                                               | 2027-28                                                                                                                               | 2028-29                                                                                                                               | 2029-30                                                                                                                               | Total |
| :------------ | :------ | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------ | :---- |
| Revenue (£bn) | 0.0     | [1.0](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69739&region=uk&timePeriod=2025&baseline=1) | [1.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69739&region=uk&timePeriod=2026&baseline=1) | [1.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69739&region=uk&timePeriod=2027&baseline=1) | [1.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69739&region=uk&timePeriod=2028&baseline=1) | [1.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69739&region=uk&timePeriod=2029&baseline=1) | 6.4   |

These estimates are 29% less than HMT and 26% less than the OBR. These variations may stem from different assumptions about behavioural responses. In our model, we assume individuals will adjust their capital gains realisations with an elasticity of \-0.7 with respect to the marginal tax rate; neither HMT nor OBR specify their assumptions on this front.

| Source       | 2024-25 | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | Total |
| ------------ | ------- | ------- | ------- | ------- | ------- | ------- | ----- |
| PolicyEngine | 0.0     | 1.0     | 1.2     | 1.4     | 1.4     | 1.4     | 6.4   |
| HM Treasury  | 0.1     | 1.4     | 1.4     | 1.4     | 2.2     | 2.5     | 9.0   |
| OBR          | 0.1     | 1.4     | 1.3     | 1.3     | 2.1     | 2.4     | 8.6   |

Assuming [no behavioural change](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69732&region=uk&timePeriod=2025&baseline=1), we project the change to generate £22.2 billion from 2025 to 2029\. While the OBR also provides estimates it describes as static, those account for changes in realisation behaviour, making them incomparable to our static results.

## Distributional impact

The CGT reforms affect 1.2% of the population, with impacts limited to the highest income decile. Within the top 10%, 5% see income losses above 5%, another 5% face losses under 5%, while 90% experience no change. The policy has no impact on income levels across the bottom nine deciles.

Our [distributional analysis](https://legacy.policyengine.org/uk/policy?focus=policyOutput.inequalityImpact&reform=69732&region=uk&timePeriod=2025&baseline=1) shows no change in poverty measures, while the Gini index falls by 0.4%. Across most of the income distribution (the bottom 90% of households), incomes remain unchanged.

![](/images/posts/cgt-autumn-budget-pic/cgt-win-loser.png)

Read more of PolicyEngine’s Autumn Budget 2024 coverage:

- [Employer National Insurance reforms](https://policyengine.org/uk/research/autumn-budget-24-employer-ni)
- [Private school VAT changes](https://policyengine.org/uk/research/vat-school-comparison)
- [Fuel Duty freeze](https://policyengine.org/uk/research/autumn-budget-24-fuel-duty)



---

---
# Kamala Harris’s Earned Income Tax Credit Expansion Proposal
Slug: harris-eitc
Date: 2024-10-24 01:00:00
Authors: Nikhil Woodruff
Tags: us, 2024-election, policy, featured
Description: PolicyEngine projects that restoring the American Rescue Plan policy would cost $144 billion (static) or $201 billion (dynamic) over a decade, while lowering poverty by 1.6% in 2025.

---

Vice President Harris proposes expanding the Earned Income Tax Credit (EITC) for filers without qualifying dependents. This analysis examines the proposal’s key aspects, potential impacts, and provides economic projections from PolicyEngine’s microsimulation model.

[**See the full impact in PolicyEngine**](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=67696&region=enhanced_us&timePeriod=2025&baseline=2&household=47732)

## The proposal

In her [economic plan](https://kamalaharris.com/wp-content/uploads/2024/09/Policy_Book_Economic-Opportunity.pdf#page=13), Harris proposes to restore the expanded Earned Income Tax Credit for workers without children to its level under the American Rescue Plan Act in 2021.

This would:

- Increase the phase-in and phase-out rates from 7.65% to 15.3%

- Lower the minimum age from 25 to 19 (or 24 for students)

- Remove the maximum age, currently 65

- Raise the maximum credit from $632 to $1,774 (adjusted from $1,502 in 2021 for inflation, and continuing to rise with inflation in future years)

These characterize the EITC policy as shown below.

| Year | Phase-in rate | Max credit | Phase-out start | Phase-out rate |
| ---- | ------------- | ---------- | --------------- | -------------- |
| 2025 | 15.3%         | $1,774     | $13,706         | 15.3%          |
| 2026 | 15.3%         | $1,815     | $14,022         | 15.3%          |
| 2027 | 15.3%         | $1,852     | $14,306         | 15.3%          |
| 2028 | 15.3%         | $1,888     | $14,582         | 15.3%          |
| 2029 | 15.3%         | $1,924     | $14,858         | 15.3%          |
| 2030 | 15.3%         | $1,962     | $15,150         | 15.3%          |
| 2031 | 15.3%         | $2,001     | $15,450         | 15.3%          |
| 2032 | 15.3%         | $2,041     | $15,758         | 15.3%          |
| 2033 | 15.3%         | $2,082     | $16,074         | 15.3%          |
| 2034 | 15.3%         | $2,124     | $16,398         | 15.3%          |

Single filers with earnings between $8,000 and $37,000 would see their net incomes increase due to this policy change.

![](https://cdn-images-1.medium.com/max/3044/0*rozC7JqH_bOzaUD_)

For more examples of the policy’s household impacts, see our [2023 article](https://policyengine.org/us/research/restoring-arpa-eitc) on the ARPA EITC expansion. That article’s estimates preceded our [Enhanced Current Population Survey](https://policyengine.org/us/research/enhanced-cps-beta) launch.

## Nationwide impacts

Based on [static microsimulation modeling](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=67696&region=enhanced_us&timePeriod=2025&baseline=2&household=47732) with PolicyEngine US (version 1.103.0), we project the following economic impacts for 2025.

### Cost

Here we estimate the ten-year costs, both with and without behavioral responses, and compare against other scorekeepers.

#### Static

Assuming no behavioral responses, we project that the EITC expansion will cost the federal government $14.3 billion in 2025. Due to state and local EITC matches, it will also cost state and local governments $1.6 billion.

Over the [ten-year budget window](https://colab.research.google.com/drive/1uf-gmlWPDCasV6KP68M2165wGLqjDf8m#scrollTo=fKBzuOkw9i8n), this amounts to $143.7 billion.

| Year    | Federal cost (billions $) |
| ------- | ------------------------- |
| 2025    | 14.3                      |
| 2026    | 14.4                      |
| 2027    | 14.7                      |
| 2028    | 14.6                      |
| 2029    | 14.5                      |
| 2030    | 14.4                      |
| 2031    | 14.3                      |
| 2032    | 14.2                      |
| 2033    | 14.2                      |
| 2034    | 14.1                      |
| 2025-34 | 143.7                     |

#### Dynamic

Incorporating elasticities of labor supply used by the Congressional Budget Office increases the reform's cost. [In 2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.laborSupplyImpact.hours&reform=67706&region=enhanced_us&timePeriod=2025&baseline=2):

- Hours worked falls by 0.27%, or 411,000 full-time equivalent jobs

- Total earnings fall by 0.09%, or $11.7 billion

- The federal budgetary cost rises 38% to $19.7 billion, including $2.1 billion in spending on benefit programs like the Supplemental Nutrition Assistance Program (SNAP)

Applying these elasticities over the full budget window increases our cost estimate by 40%, from $143.7 billion to $200.9 billion.

| Year    | Federal cost (billions $) |
| ------- | ------------------------- |
| 2025    | 19.7                      |
| 2026    | 20.2                      |
| 2027    | 20.2                      |
| 2028    | 20.4                      |
| 2029    | 20.4                      |
| 2030    | 20.1                      |
| 2031    | 19.8                      |
| 2032    | 20.2                      |
| 2033    | 20.0                      |
| 2034    | 19.9                      |
| 2025-34 | 200.9                     |

#### Comparison to other analysts

The Office of Management and Budget estimated the cost of restoring the ARPA EITC when President Biden released his 2025 budget, which included the provision. The Tax Foundation and Penn Wharton Budget Model have also estimated the proposal’s cost. PolicyEngine projects higher costs than these other organizations when considering behavioral responses, as they have.

| Organization                                                                                                                                               | Cost, 2025-2034 ($ billions) | Notes                      |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------- | -------------------------- |
| PolicyEngine (static)                                                                                                                                      | 144                          |                            |
| PolicyEngine (behavioral responses)                                                                                                                        | 201                          | CBO elasticities           |
| [Office of Management and Budget](https://www.whitehouse.gov/wp-content/uploads/2024/03/budget_fy2025.pdf#page=150)                                        | 163                          |                            |
| [Tax Foundation](https://taxfoundation.org/research/all/federal/kamala-harris-tax-plan-2024/)                                                              | 160                          | Does not include nonfilers |
| [Penn Wharton Budget Model](https://budgetmodel.wharton.upenn.edu/estimates/2024/8/20/harris-campaign-revenue-effects-of-ctc-eitc-and-aca-premium-subsidy) | 126                          |                            |

PolicyEngine’s Enhanced CPS data is calibrated to be consistent with EITC payment statistics. For this policy score, we added statistical calibration over EITC returns and dollar amounts by tax filer child counts, which account for [non-take-up](https://www.taxpayeradvocate.irs.gov/wp-content/uploads/2020/08/JRC20_Volume3.pdf#page=62).

Our higher cost may partly owe to our accounting of benefit programs like SNAP; for example, if a worker is in the EITC phase-out earnings range, the reform will increase their marginal tax rate. We would then simulate their earnings to fall, in accord with CBO assumptions. At a lower earnings level, the person may be eligible for additional SNAP benefits. Our rules engine accounts for that additional cost, while some other organizations only account for federal costs via taxes.

## Distributional impacts

The PolicyEngine microsimulation model supports distributional analysis by decile, as well as poverty and inequality. Unlike cost, other organizations have not provided distributional impacts for us to compare against.

### By decile

The average household [sees](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=67064&region=enhanced_us&timePeriod=2025&baseline=2&household=47732) an increase in net income of $109, between federal, state, and local EITCs, while households in the bottom two deciles gain the most on a relative basis.

![](https://cdn-images-1.medium.com/max/3152/0*r6VvrLKiMIAkn9jx)

12% of the population benefits, and 5% gain more than 5% of their prior net income. Under one percent of households lose income due to their state EITC match being more generous for demographically-ineligible EITC households than the expanded EITC is.

![](https://cdn-images-1.medium.com/max/3200/0*s42zWiiXqimZLITE)

### Poverty

We [estimate](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=67696&region=enhanced_us&timePeriod=2025&baseline=2) that the expanded EITC would reduce the poverty rate by 1.3% (0.4 percentage points), or about 1 million people. Child poverty falls less than 0.1% because some children live in households with workers who file separately to them.

### Inequality

The Gini index of income inequality also [falls](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=67696&region=enhanced_us&timePeriod=2025&baseline=2) by 0.2%, and the top-10 and top-1 percent shares of income fall by around 0.1%.

![](https://cdn-images-1.medium.com/max/3196/0*AeI48oVouiLsbEg-)

## Key findings

The PolicyEngine static microsimulation model projects the following:

1. Expanding the Earned Income Tax Credit to its level from 2021 would cost $144 billion over the 2025–2034 budget window on a static basis, or $201 billion with labor supply responses (per CBO).

2. The proposal disproportionately benefits lower-income households, both in terms of relative impacts on net income and population share gaining.

3. Overall poverty falls 0.4 percentage points, with the largest impact on people aged 18 to 64.

4. Income inequality, as measured by the Gini coefficient, falls 0.2% .



---

---
# Autumn Budget policy choices
Slug: autumn-budget-2024-policy-choices
Date: 2024-10-24 16:30:00
Authors: Nikhil Woodruff
Tags: uk, autumn-budget, featured, policy
Description: PolicyEngine estimates that four reported tax reforms would raise £23 billion per year

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Image credit: The Labour Party*\n",
    "\n",
    "*See the full impact estimate for 2025 [here](https://legacy.policyengine.org/uk/policy?reform=68829&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1).*\n",
    "\n",
    "\n",
    "## Key findings\n",
    "\n",
    "1. PolicyEngine estimates that four reported tax reforms to Income Tax, National Insurance, Capital Gains Tax and VAT would raise £23 billion in FY2025.\n",
    "2. Our model estimates that these reforms would reduce income inequality by 0.6%, and have no significant impact on the government’s absolute before-housing-costs poverty rate.\n",
    "\n",
    "\n",
    "## Background\n",
    "\n",
    "On 30th October, the Chancellor Rachel Reeves will announce proposals for the UK’s tax and spending decisions (and any changes to them) over the next five years in the first Autumn Budget of the new Labour government. [Media](https://www.bbc.co.uk/news/articles/cdxl1zd07l1o) [reports](https://www.theguardian.com/uk-news/2024/oct/17/budget-2024-uk-tax-raises-rachel-reeves) expect these decisions to include both existing manifesto commitments (VAT on private school fees and non-dom tax reform) as well as reforms not included in Labour’s last election manifesto (employer National Insurance and Capital Gains Tax reform).\n",
    "\n",
    "In this report, we outline PolicyEngine’s estimates of the household sector impacts of each of these four most reported-on policy reforms, and their combined impact if all are announced together.\n",
    "\n",
    "\n",
    "## Policy choices\n",
    "\n",
    "\n",
    "### Tax avoidance\n",
    "\n",
    "Labour says [in their manifesto](https://labour.org.uk/change/labours-fiscal-plan/) they would ‘close non-dom tax loopholes’ and ‘close the carried interest tax loophole’ as well as invest in reducing tax avoidance. They said this would raise on average £5.9 billion each year over the parliament in their manifesto. Due to limited information on the impact of this reform, we approximate it as a tax on earnings over £100,000.\n",
    "\n",
    "\n",
    "### Private school VAT\n",
    "\n",
    "In their manifesto, Labour also committed to levying VAT (as well as business rates) on private school fees from FY2025. We estimate this raises around £1.5 billion per year, assuming no behavioural responses, mostly from higher-income deciles. Read more detail about the policy in our recently-published report [here](https://legacy.policyengine.org/uk/research/school-vat).\n",
    "\n",
    "\n",
    "### Employer NICs\n",
    "\n",
    "The UK government is [reportedly](https://www.bbc.co.uk/news/articles/cly4leklk3qo) considering raising National Insurance Contributions (NICs) for employers, by levying NICs on employers' contributions to workers’ pensions. Currently employers pay 13.8% tax on earnings above around £9,500. We use a behavioural model that assumes 40% employee wage incidence, 30% consumer incidence and 30% capital incidence in the first year, rising to 70% employee wage incidence and 15% consumer-capital incidence by the fifth.\n",
    "\n",
    "\n",
    "### Capital Gains Tax\n",
    "\n",
    "Robert Peston of ITV [reports](https://x.com/Peston/status/1847000929913983451) that the Chancellor will raise the higher and additional rate of capital gains from 20% to 24%, raising ‘a few billion’. \n",
    "\n",
    "We impute capital gains to households in our microdata using administrative data published in CAGE Working Paper no. 465, Capital Gains and UK Inequality (Advani &Arun Advani, Andy Summers, 2020) ([here](https://warwick.ac.uk/fac/soc/economics/research/centres/cage/manage/publications/wp465.2020.pdf)). Due to absence of studies in the UK context, we borrow from [recent US literature](https://taxpolicycenter.org/sites/default/files/publication/165863/the_sensitivity_of_the_tax_elasticity_of_capital_gains_to_lagged_tax_rates_and_migration.pdf) to assume an elasticity of capital gains with respect to the marginal tax rate on capital gains income of -0.5.[^1]\n",
    "\n",
    "\n",
    "[^1]: We will publish an in-depth report detailing our capital gains methodology in the future.\n",
    "\n",
    "\n",
    "## Economic impacts\n",
    "\n",
    "PolicyEngine [estimates](https://legacy.policyengine.org/uk/policy?reform=68829&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1) that these reforms combined would raise £25 billion per year over five years, with over half of the revenue impact from the employer NICs reform. The table below summarises these reforms’ impacts over the budget window (with the behavioural responses as stated previously).\n",
    "\n",
    "\n",
    "| Year | 2025 | 2026 | 2027 | 2028 | 2029 | 2025-29 |\n",
    "|------|------|------|------|------|------|---------|\n",
    "| Levy employer pension NICs | 14.1 | 13.8 | 13.2 | 12.6 | 12.9 | 66.6 |\n",
    "| Levy private school VAT | 1.5 | 1.5 | 1.5 | 1.6 | 1.6 | 7.7 |\n",
    "| Raise CGT to 24% | 1.6 | 1.9 | 2.0 | 2.3 | 2.3 | 10.1 |\n",
    "| Reduce tax avoidance | 5.9 | 5.9 | 5.9 | 5.9 | 5.9 | 29.5 |\n",
    "| **Total** | **[23.1](https://legacy.policyengine.org/uk/policy?reform=69049&focus=policyOutput.distributionalImpact.incomeDecile.relative&region=uk&timePeriod=2025&baseline=1)** | **23.1** | **22.6** | **22.4** | **22.7** | **113.9** |"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.plotly.v1+json": {
       "config": {
        "plotlyServerURL": "https://plot.ly"
       },
       "data": [
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=Reduce tax avoidance<br>Decile=%{x}<br>Impact=%{y}<extra></extra>",
         "legendgroup": "Reduce tax avoidance",
         "marker": {
          "color": "#4C78A8",
          "pattern": {
           "shape": ""
          }
         },
         "name": "Reduce tax avoidance",
         "offsetgroup": "Reduce tax avoidance",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          13012253.120063782,
          822122.3548812866,
          6628.087516784668,
          5718719.044231415,
          11626170.525367737,
          1598769.6617965698,
          14278462.482940674,
          42283001.16581726,
          114404226.20637512,
          5696249498.772247
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=Levy private school VAT<br>Decile=%{x}<br>Impact=%{y}<extra></extra>",
         "legendgroup": "Levy private school VAT",
         "marker": {
          "color": "#F58518",
          "pattern": {
           "shape": ""
          }
         },
         "name": "Levy private school VAT",
         "offsetgroup": "Levy private school VAT",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          34622068.16183472,
          19866349.070915222,
          16637325.785709381,
          63643858.966973305,
          40506401.04219341,
          93347665.88846588,
          94060279.80747223,
          179738760.63454437,
          319683798.96165466,
          635810366.5480957
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=Levy employer pension NICs<br>Decile=%{x}<br>Impact=%{y}<extra></extra>",
         "legendgroup": "Levy employer pension NICs",
         "marker": {
          "color": "#E45756",
          "pattern": {
           "shape": ""
          }
         },
         "name": "Levy employer pension NICs",
         "offsetgroup": "Levy employer pension NICs",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          37566478.3089447,
          258559892.85049438,
          367331760.0690117,
          678500524.290266,
          887692716.7636237,
          1384953057.018219,
          2009641972.6995697,
          2052224977.0562515,
          2791688470.7457275,
          3675937549.9935913
         ],
         "yaxis": "y"
        },
        {
         "alignmentgroup": "True",
         "hovertemplate": "Reform=Raise CGT to 24%<br>Decile=%{x}<br>Impact=%{y}<extra></extra>",
         "legendgroup": "Raise CGT to 24%",
         "marker": {
          "color": "#72B7B2",
          "pattern": {
           "shape": ""
          }
         },
         "name": "Raise CGT to 24%",
         "offsetgroup": "Raise CGT to 24%",
         "orientation": "v",
         "showlegend": true,
         "textposition": "auto",
         "type": "bar",
         "x": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "xaxis": "x",
         "y": [
          447.51342010498047,
          -15.358901977539062,
          -2771.110050201416,
          879251.5545797348,
          -43548.71178197861,
          -81779.86475372314,
          -10952.139694213867,
          -8997.554916381836,
          197159.7639465332,
          1596946268.878601
         ],
         "yaxis": "y"
        }
       ],
       "layout": {
        "annotations": [
         {
          "showarrow": false,
          "text": "0.1",
          "x": 1,
          "y": 85201247.1042633,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "0.3",
          "x": 2,
          "y": 279248348.9173889,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "0.4",
          "x": 3,
          "y": 383972942.83218765,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "0.7",
          "x": 4,
          "y": 748742353.8560505,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "0.9",
          "x": 5,
          "y": 939781739.6194029,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "1.5",
          "x": 6,
          "y": 1479817712.7037277,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "2.1",
          "x": 7,
          "y": 2117969762.8502884,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "2.3",
          "x": 8,
          "y": 2274237741.301697,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "3.2",
          "x": 9,
          "y": 3225973655.677704,
          "yshift": 15
         },
         {
          "showarrow": false,
          "text": "11.6",
          "x": 10,
          "y": 11604943684.192535,
          "yshift": 15
         }
        ],
        "barmode": "relative",
        "font": {
         "color": "black",
         "family": "Roboto Serif"
        },
        "height": 600,
        "images": [
         {
          "sizex": 0.15,
          "sizey": 0.15,
          "source": "https://raw.githubusercontent.com/PolicyEngine/policyengine-app-v2/main/app/public/assets/logos/policyengine/teal.png",
          "x": 1.1,
          "xanchor": "right",
          "xref": "paper",
          "y": -0.15,
          "yanchor": "bottom",
          "yref": "paper"
         }
        ],
        "legend": {
         "title": {
          "text": "Reform"
         },
         "tracegroupgap": 0
        },
        "margin": {
         "t": 60
        },
        "modebar": {
         "bgcolor": "rgba(0,0,0,0)",
         "color": "rgba(0,0,0,0)"
        },
        "showlegend": true,
        "template": {
         "data": {
          "bar": [
           {
            "error_x": {
             "color": "#2a3f5f"
            },
            "error_y": {
             "color": "#2a3f5f"
            },
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "bar"
           }
          ],
          "barpolar": [
           {
            "marker": {
             "line": {
              "color": "white",
              "width": 0.5
             },
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "barpolar"
           }
          ],
          "carpet": [
           {
            "aaxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "baxis": {
             "endlinecolor": "#2a3f5f",
             "gridcolor": "#C8D4E3",
             "linecolor": "#C8D4E3",
             "minorgridcolor": "#C8D4E3",
             "startlinecolor": "#2a3f5f"
            },
            "type": "carpet"
           }
          ],
          "choropleth": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "choropleth"
           }
          ],
          "contour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "contour"
           }
          ],
          "contourcarpet": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "contourcarpet"
           }
          ],
          "heatmap": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmap"
           }
          ],
          "heatmapgl": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "heatmapgl"
           }
          ],
          "histogram": [
           {
            "marker": {
             "pattern": {
              "fillmode": "overlay",
              "size": 10,
              "solidity": 0.2
             }
            },
            "type": "histogram"
           }
          ],
          "histogram2d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2d"
           }
          ],
          "histogram2dcontour": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "histogram2dcontour"
           }
          ],
          "mesh3d": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "type": "mesh3d"
           }
          ],
          "parcoords": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "parcoords"
           }
          ],
          "pie": [
           {
            "automargin": true,
            "type": "pie"
           }
          ],
          "scatter": [
           {
            "fillpattern": {
             "fillmode": "overlay",
             "size": 10,
             "solidity": 0.2
            },
            "type": "scatter"
           }
          ],
          "scatter3d": [
           {
            "line": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatter3d"
           }
          ],
          "scattercarpet": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattercarpet"
           }
          ],
          "scattergeo": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergeo"
           }
          ],
          "scattergl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattergl"
           }
          ],
          "scattermapbox": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scattermapbox"
           }
          ],
          "scatterpolar": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolar"
           }
          ],
          "scatterpolargl": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterpolargl"
           }
          ],
          "scatterternary": [
           {
            "marker": {
             "colorbar": {
              "outlinewidth": 0,
              "ticks": ""
             }
            },
            "type": "scatterternary"
           }
          ],
          "surface": [
           {
            "colorbar": {
             "outlinewidth": 0,
             "ticks": ""
            },
            "colorscale": [
             [
              0,
              "#0d0887"
             ],
             [
              0.1111111111111111,
              "#46039f"
             ],
             [
              0.2222222222222222,
              "#7201a8"
             ],
             [
              0.3333333333333333,
              "#9c179e"
             ],
             [
              0.4444444444444444,
              "#bd3786"
             ],
             [
              0.5555555555555556,
              "#d8576b"
             ],
             [
              0.6666666666666666,
              "#ed7953"
             ],
             [
              0.7777777777777778,
              "#fb9f3a"
             ],
             [
              0.8888888888888888,
              "#fdca26"
             ],
             [
              1,
              "#f0f921"
             ]
            ],
            "type": "surface"
           }
          ],
          "table": [
           {
            "cells": {
             "fill": {
              "color": "#EBF0F8"
             },
             "line": {
              "color": "white"
             }
            },
            "header": {
             "fill": {
              "color": "#C8D4E3"
             },
             "line": {
              "color": "white"
             }
            },
            "type": "table"
           }
          ]
         },
         "layout": {
          "annotationdefaults": {
           "arrowcolor": "#2a3f5f",
           "arrowhead": 0,
           "arrowwidth": 1
          },
          "autotypenumbers": "strict",
          "coloraxis": {
           "colorbar": {
            "outlinewidth": 0,
            "ticks": ""
           }
          },
          "colorscale": {
           "diverging": [
            [
             0,
             "#8e0152"
            ],
            [
             0.1,
             "#c51b7d"
            ],
            [
             0.2,
             "#de77ae"
            ],
            [
             0.3,
             "#f1b6da"
            ],
            [
             0.4,
             "#fde0ef"
            ],
            [
             0.5,
             "#f7f7f7"
            ],
            [
             0.6,
             "#e6f5d0"
            ],
            [
             0.7,
             "#b8e186"
            ],
            [
             0.8,
             "#7fbc41"
            ],
            [
             0.9,
             "#4d9221"
            ],
            [
             1,
             "#276419"
            ]
           ],
           "sequential": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ],
           "sequentialminus": [
            [
             0,
             "#0d0887"
            ],
            [
             0.1111111111111111,
             "#46039f"
            ],
            [
             0.2222222222222222,
             "#7201a8"
            ],
            [
             0.3333333333333333,
             "#9c179e"
            ],
            [
             0.4444444444444444,
             "#bd3786"
            ],
            [
             0.5555555555555556,
             "#d8576b"
            ],
            [
             0.6666666666666666,
             "#ed7953"
            ],
            [
             0.7777777777777778,
             "#fb9f3a"
            ],
            [
             0.8888888888888888,
             "#fdca26"
            ],
            [
             1,
             "#f0f921"
            ]
           ]
          },
          "colorway": [
           "#636efa",
           "#EF553B",
           "#00cc96",
           "#ab63fa",
           "#FFA15A",
           "#19d3f3",
           "#FF6692",
           "#B6E880",
           "#FF97FF",
           "#FECB52"
          ],
          "font": {
           "color": "#2a3f5f"
          },
          "geo": {
           "bgcolor": "white",
           "lakecolor": "white",
           "landcolor": "white",
           "showlakes": true,
           "showland": true,
           "subunitcolor": "#C8D4E3"
          },
          "hoverlabel": {
           "align": "left"
          },
          "hovermode": "closest",
          "mapbox": {
           "style": "light"
          },
          "paper_bgcolor": "white",
          "plot_bgcolor": "white",
          "polar": {
           "angularaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           },
           "bgcolor": "white",
           "radialaxis": {
            "gridcolor": "#EBF0F8",
            "linecolor": "#EBF0F8",
            "ticks": ""
           }
          },
          "scene": {
           "xaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "yaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           },
           "zaxis": {
            "backgroundcolor": "white",
            "gridcolor": "#DFE8F3",
            "gridwidth": 2,
            "linecolor": "#EBF0F8",
            "showbackground": true,
            "ticks": "",
            "zerolinecolor": "#EBF0F8"
           }
          },
          "shapedefaults": {
           "line": {
            "color": "#2a3f5f"
           }
          },
          "ternary": {
           "aaxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "baxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           },
           "bgcolor": "white",
           "caxis": {
            "gridcolor": "#DFE8F3",
            "linecolor": "#A2B1C6",
            "ticks": ""
           }
          },
          "title": {
           "x": 0.05
          },
          "xaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          },
          "yaxis": {
           "automargin": true,
           "gridcolor": "#EBF0F8",
           "linecolor": "#EBF0F8",
           "ticks": "",
           "title": {
            "standoff": 15
           },
           "zerolinecolor": "#EBF0F8",
           "zerolinewidth": 2
          }
         }
        },
        "title": {
         "text": "Revenue impact of possible reforms by household income decile"
        },
        "width": 800,
        "xaxis": {
         "anchor": "y",
         "domain": [
          0,
          1
         ],
         "tickvals": [
          1,
          2,
          3,
          4,
          5,
          6,
          7,
          8,
          9,
          10
         ],
         "title": {
          "text": "Income decile"
         }
        },
        "yaxis": {
         "anchor": "x",
         "domain": [
          0,
          1
         ],
         "title": {
          "text": "Change in revenues (£ billion)"
         }
        }
       }
      }
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "from policyengine_uk import Microsimulation\n",
    "from policyengine_core.reforms import Reform\n",
    "\n",
    "REDUCE_TAX_AVOIDANCE = {\n",
    "    \"gov.contrib.policyengine.budget.high_income_incident_tax_change\": {\n",
    "        \"2025-01-01.2030-12-31\": 5.9,\n",
    "    },\n",
    "}\n",
    "\n",
    "PRIVATE_SCHOOL_VAT = {\n",
    "    \"gov.contrib.labour.private_school_vat\": {\n",
    "        \"2025-01-01.2030-12-31\": 0.2,\n",
    "    }\n",
    "}\n",
    "\n",
    "EMPLOYER_NICS = {\n",
    "    \"gov.contrib.policyengine.employer_ni.exempt_employer_pension_contributions\": {\n",
    "        \"2025-01-01.2030-12-31\": False,\n",
    "    },\n",
    "    \"gov.contrib.policyengine.employer_ni.employee_incidence\": {\n",
    "        \"2025-01-01.2025-12-31\": 0.4,\n",
    "        \"2026-01-01.2026-12-31\": 0.5,\n",
    "        \"2027-01-01.2027-12-31\": 0.6,\n",
    "        \"2028-01-01.2028-12-31\": 0.7,\n",
    "        \"2029-01-01.2030-12-31\": 0.7,\n",
    "    },\n",
    "    \"gov.contrib.policyengine.employer_ni.consumer_incidence\": {\n",
    "        \"2025-01-01.2030-12-31\": 0.5,\n",
    "    },\n",
    "    \"gov.contrib.policyengine.employer_ni.capital_incidence\": {\n",
    "        \"2025-01-01.2030-12-31\": 0.5,\n",
    "    },\n",
    "}\n",
    "\n",
    "CGT = {\n",
    "    \"gov.hmrc.cgt.higher_rate\": {\n",
    "        \"2025-01-01.2030-12-31\": 0.24,\n",
    "    },\n",
    "    \"gov.hmrc.cgt.additional_rate\": {\n",
    "        \"2025-01-01.2030-12-31\": 0.24,\n",
    "    },\n",
    "    \"gov.simulation.capital_gains_responses.elasticity\": {\n",
    "        \"2025-01-01.2030-12-31\": -0.5,\n",
    "    },\n",
    "}\n",
    "\n",
    "baseline = Microsimulation()\n",
    "\n",
    "import pandas as pd\n",
    "\n",
    "decile = baseline.calculate(\"household_income_decile\", 2025).clip(1, 10)\n",
    "\n",
    "reform_labels = [\n",
    "    \"Reduce tax avoidance\",\n",
    "    \"Levy private school VAT\",\n",
    "    \"Levy employer pension NICs\",\n",
    "    \"Raise CGT to 24%\",\n",
    "]\n",
    "\n",
    "reforms = [\n",
    "    REDUCE_TAX_AVOIDANCE,\n",
    "    PRIVATE_SCHOOL_VAT,\n",
    "    EMPLOYER_NICS,\n",
    "    CGT,\n",
    "]\n",
    "\n",
    "df_reform = []\n",
    "df_decile = []\n",
    "df_value = []\n",
    "\n",
    "from tqdm import tqdm\n",
    "\n",
    "baseline_deciles = (\n",
    "    baseline.calculate(\"gov_balance\", 2025).groupby(decile).sum()\n",
    ")\n",
    "last_deciles = None\n",
    "\n",
    "for i in range(len(reforms)):\n",
    "    combined_reform = {}\n",
    "    for j in range(i + 1):\n",
    "        combined_reform.update(reforms[j])\n",
    "\n",
    "    reform = Reform.from_dict(combined_reform)\n",
    "\n",
    "    reformed = Microsimulation(reform=reform)\n",
    "\n",
    "    deciles = reformed.calculate(\"gov_balance\", 2025).groupby(decile).sum()\n",
    "\n",
    "    if last_deciles is None:\n",
    "        last_deciles = baseline_deciles\n",
    "\n",
    "    decile_change = deciles - last_deciles\n",
    "\n",
    "    last_deciles = deciles\n",
    "\n",
    "    df_reform.extend([reform_labels[i]] * 10)\n",
    "    df_decile.extend(list(range(1, 11)))\n",
    "    df_value.extend(decile_change.values)\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Reform\": df_reform,\n",
    "        \"Decile\": df_decile,\n",
    "        \"Impact\": df_value,\n",
    "    }\n",
    ")\n",
    "\n",
    "import plotly.express as px\n",
    "from policyengine_core.charts import format_fig\n",
    "\n",
    "fig = px.bar(\n",
    "    df,\n",
    "    x=\"Decile\",\n",
    "    y=\"Impact\",\n",
    "    color=\"Reform\",\n",
    "    color_discrete_sequence=px.colors.qualitative.T10,\n",
    ").update_layout(\n",
    "    xaxis_title=\"Income decile\",\n",
    "    yaxis_title=\"Change in revenues (£ billion)\",\n",
    "    title=\"Revenue impact of possible reforms by household income decile\",\n",
    "    showlegend=True,\n",
    "    legend_title=\"Reform\",\n",
    "    xaxis_tickvals=list(range(1, 11)),\n",
    ")\n",
    "\n",
    "# Add a label to each bar combination with the total revenue\n",
    "\n",
    "for i in range(1, 11):\n",
    "    fig.add_annotation(\n",
    "        x=i,\n",
    "        y=df[df[\"Decile\"] == i][\"Impact\"].sum(),\n",
    "        text=f\"{df[df['Decile'] == i]['Impact'].sum()/1e9:,.1f}\",\n",
    "        showarrow=False,\n",
    "        # offset down a bit\n",
    "        yshift=15,\n",
    "    )\n",
    "\n",
    "format_fig(fig)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We estimate that these reforms would reduce the Gini coefficient of income inequality by 0.6%. 47% of the revenue impact comes from the richest income decile (mostly from the reforms other than employer NICs). \n",
    "\n",
    "The Employer NICs reform is mostly flat (as a percentage of income) across the income distribution in FY2025, because of the lower employee incidence. Assuming a higher consumption/capital incidence for this reform creates a more regressive (with respect to income) impact, while assuming a higher employee incidence moves the impact to be progressive along income deciles. The 40/30/30 split in the first year approximately balances these out. The Times [reports](https://www.thetimes.com/uk/politics/article/rachel-reeves-to-protect-public-sector-workers-from-tax-raid-0n25hxkgg) that the Treasury estimates the employer NICs reform would raise £15.4 billion in FY2025 (our estimate is 7% lower).\n",
    "\n",
    "Absolute, before-housing-costs poverty as measured by the government’s Households Below Average Income definition does not change, because none of the reforms except for the wage incidence of employer NICs affect the definition of income used for this metric.\n",
    "\n",
    "\n",
    "## Conclusion\n",
    "\n",
    "PolicyEngine estimates that these four reforms would raise £23 billion per year over the five-year budget window. We also estimate that these would be progressive in that they would reduce the Gini coefficient of income inequality, but that they would not change the government’s central poverty rates on their own.\n",
    "\n",
    "\n",
    "## Appendix: behavioural responses\n",
    "\n",
    "For our estimates of the impacts of reforms to Capital Gains Tax (CGT) and employer National Insurance, we assume that individuals with capital gains respond to changes in their marginal tax rate and employers respond to changes in their tax liability by adjusting employee wages. We do not account for behavioural responses to private school VAT or reduced tax avoidance measures.\n",
    "\n",
    "The table below shows the impact of these behavioural responses on the total five-year revenue impact of each provision, and in total. Overall, we estimate that behavioural responses to these tax reforms would lower the revenue impact by around 25%.\n",
    "\n",
    "\n",
    "| Reform | Static revenue impact | Dynamic revenue impact | Absolute change | Relative change |\n",
    "|--------|---------------------|----------------------|-----------------|-----------------|\n",
    "| Levy employer pension NICs | 90.3 | 66.6 | -23.7 | -26% |\n",
    "| Levy private school VAT | 7.7 | 7.7 | 0 | 0% |\n",
    "| Raise CGT to 24% | 21.5 | 10.1 | -11.4 | -53% |\n",
    "| Reduce tax avoidance | 5.9 | 5.9 | 0 | 0 |\n",
    "| **Total** | **149.0** | **113.9** | **-35.1** | **-24%** |"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "base",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.14"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# Levying employer National Insurance on pension contributions
Slug: autumn-budget-2024-employer-nic-pension-contributions
Date: 2024-10-26 09:00:00
Authors: Nikhil Woodruff
Tags: uk, autumn-budget, policy
Description: PolicyEngine estimates the now-scrapped Autumn Budget reform would have raised between £10 and £18 billion per year, depending on how employers pass it on to wages.

---

The Times [reports](https://www.thetimes.com/uk/politics/article/rachel-reeves-to-increase-national-insurance-employers-nhs-cfr73kh2g) that the UK government has scrapped [previously](https://www.bbc.co.uk/news/articles/cly4leklk3qo)\-[reported](https://www.reuters.com/world/uk/uk-employers-sound-alarm-over-possible-social-security-hike-2024-10-15/) plans to levy NICs on employers' contributions to workers’ pensions. This report examines the potential impacts using PolicyEngine's microsimulation model, considering the effect on income tax and benefits if employers respond by reducing wages. We find that it would have raised about £18 billion per year if employers pass on the full cost to prices, or £10 billion if they pass it on entirely to workers immediately.

# The proposal

According to the BBC and others, the Chancellor considered removing the current exemption for employer pension contributions from employer NICs. Currently, employers are liable for NICs on employee compensation, but not on employer contributions to pension schemes. HMRC estimates that this relief [cost](https://www.gov.uk/government/statistics/main-tax-expenditures-and-structural-reliefs) £15.4bn in FY 2022-23.

# Economic impact

We modelled two scenarios bookmarking the range of potential impacts:

1\. Static assumption: no changes occur in employment incomes. Employers pay the additional NICs they are liable for. We assume that the increased employer NIC costs are passed on to prices uniformly.  
2\. Fixed employer cost assumption: employers immediately keep total employment costs fixed by reducing wages such that the new wage plus employer NICs liability is equal to the prior total. There is no extra employer cost to distribute.

## Household example

To illustrate the second approach, the table below shows the calculated impacts of the reform on a worker with a £40,000 annual salary and £4,000 in employer pension contributions.

| Variable                             | Current law | No wage change | Fixed employer cost | No wage change \- current law | Fixed employer cost \- current law |
| :----------------------------------- | :---------- | :------------- | :------------------ | :---------------------------- | :--------------------------------- |
| Wages                                | £40,000     | £40,000        | £39,515             | £0                            | \-£485                             |
| Employer pension contribution        | £4,000      | £4,000         | £4,000              | £0                            | £0                                 |
| Employer NI on wages                 | £4,245      | £4,245         | £4,178              | £0                            | \-£67                              |
| Employer NI on pension contributions | £0          | £552           | £552                | £552                          | £552                               |
| Employer cost                        | £48,245     | £48,797        | £48,245             | £552                          | £0                                 |
| Employee tax                         | £7,839      | £7,839         | £7,703              | £0                            | \-£136                             |
| Total taxes                          | £12,084     | £12,636        | £12,433             | £552                          | £349                               |

Under the ‘no wage change’ assumption, the government receives an extra £552 from the employer. We allocate this tax burden to individuals according to consumption, under the assumption that firms pass on employer NICs in higher prices.

Under the ‘fixed employment cost’ assumption, the government receives £552 from the employer, who has paid for it by reducing the worker’s wages £485 and therefore reducing the rest of their employer NI liability by £67. And additionally, the employee now pays £136 less in Income Tax and employee National Insurance because of their lower salary. Overall, the government now nets out £349 from these changes, which is 37% lower than if the employer had passed on the costs by (successfully) raising prices.

## Economy

We apply this logic to all of the roughly 100,000 households in our representative microdata, aggregating the changes in tax liabilities and benefit entitlements. Under the static model, we estimate that revenues rise by around £18 billion per year, raising £90 billion over five years.

| Year        | Revenue impact (employer NICs) | Revenue impact (other) | Revenue impact                                                                                                                         | Wages |
| :---------- | :----------------------------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :---- |
| 2025        | 17.2                           | 0                      | [17.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69356&region=uk&timePeriod=2025&baseline=1) | 0     |
| 2026        | 17.7                           | 0                      | [17.7](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69356&region=uk&timePeriod=2026&baseline=1) | 0     |
| 2027        | 18.1                           | 0                      | [18.1](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69356&region=uk&timePeriod=2027&baseline=1) | 0     |
| 2028        | 18.4                           | 0                      | [18.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69356&region=uk&timePeriod=2028&baseline=1) | 0     |
| 2029        | 18.9                           | 0                      | [18.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69356&region=uk&timePeriod=2029&baseline=1) | 0     |
| **2025-29** | **90.3**                       | **0**                  | **90.3**                                                                                                                               | **0** |

If employers pass on NICs in the form of reduced wages, we estimate that employer NIC revenues rise by around £15 billion per year, but are offset by on average £5 billion per year in personal tax liabilities and benefit entitlements as a result of the (average) £15 billion in wage reductions.

Overall, this raises £9.6 billion in 2025, totalling £50 billion over five years.

| Year        | Revenue impact (Employer NICs) | Revenue impact (other) | Revenue impact                                                                                                                         | Wages      |
| :---------- | :----------------------------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------- | :--------- |
| 2025        | 15.1                           | \-5.5                  | [9.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69355&region=uk&timePeriod=2025&baseline=1)  | \-15.2     |
| 2026        | 15.6                           | \-5.8                  | [9.8](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69355&region=uk&timePeriod=2026&baseline=1)  | \-15.7     |
| 2027        | 15.9                           | \-6.0                  | [9.9](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69355&region=uk&timePeriod=2027&baseline=1)  | \-16.0     |
| 2028        | 16.2                           | \-6.1                  | [10.1](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69355&region=uk&timePeriod=2028&baseline=1) | \-16.3     |
| 2029        | 16.6                           | \-6.3                  | [10.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69355&region=uk&timePeriod=2029&baseline=1) | \-16.7     |
| **2025-29** | **79.4**                       | **\-29.7**             | **49.7**                                                                                                                               | **\-79.9** |

## Employee pass-through sensitivity

Our assumption that employers pass on some fraction of the increased payroll costs is based upon [economic](https://www.cbo.gov/system/files/2021-06/57089-Payroll-Taxes.pdf) [research](https://www.sciencedirect.com/science/article/pii/S0047272718300926) suggesting that employers often pass on the cost of increased payroll taxes to employees through lower wages or reduced hiring. Our model can vary this assumption: for example, we could assume that employers reduce wages by 50% of the distance to the fixed-cost wage, or any other fraction. The chart below shows the resultant budgetary impacts in FY 2025 under five simulated employee incidence shares: 0%, 25%, 50%, 75% and 100%. As expected, this effect is effectively linear. Revenue impacts decrease as employee incidence increases, because lower incomes push up costs by increasing benefit spending and decreasing tax liabilities.

![](/images/posts/autumn-budget-2024-employer-nic-pension-contributions/revenue-impact-of-increasing-employer-ni-by-employee-incidence.png)

# Conclusion

The potential change to levy employer NICs on pension contributions could increase government revenue, but the actual impact depends on how employers respond. If employers absorb the cost or pass it on to prices, the revenue gain could be as high as £18 billion per year. However, if employers respond by reducing wages, the net revenue gain could fall 45% to around £10 billion per year, due to offsetting effects on personal taxes and benefits.



---

---
# Extending the Tax Cuts and Jobs Act
Slug: tcja-extension
Date: 2024-10-28 00:00:01
Authors: David Trimmer
Tags: us, 2024-election, featured
Description: PolicyEngine projects extending the TCJA individual tax provisions would cost $3.9 trillion over a ten-year budget window.

---

[In December 2017](https://www.nbcnews.com/politics/politics-news/trump-signs-tax-cut-bill-first-big-legislative-win-n832141), former President Donald Trump signed into law the [Tax Cuts and Jobs Act of 2017](https://www.congress.gov/bill/115th-congress/house-bill/1/text) (TCJA). The bill modified several components of the tax code, reducing the tax liability for most households while increasing federal deficits. Most individual provisions are set to expire at the end of 2025. At PolicyEngine, we have simulated extending the TCJA's individual tax provisions against current law to analyze its effects on both households and the broader economy.

Key results:

- Costs $4.2 trillion from 2026 to 2035, assuming no behavioral responses, or $3.9 trillion applying CBO elasticities.

- Increases net income for 80.2% and reduces net income for 1.8% of Americans in 2026.

- Reduces poverty by 4.1% and child poverty by 7.0%.

- Increase hours worked and earnings by 0.71% and 0.78%, respectively when applying CBO elasticities.

[_Try our personalized calculator:_](https://legacy.policyengine.org/us/household?focus=intro&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2) See how extending the TCJA would affect your household.

## What did the TCJA change?

The TCJA implemented key changes to the individual tax code that will expire at the end of 2025. The major reforms include:

- Lowering five of seven tax rates, including the top rate from 39.6% to 37%

- Adjusting tax bracket thresholds three through six

- Doubling the standard deduction, child tax credit (CTC), and estate tax exemption[^1]

- Eliminating personal and dependent exemptions

- Expanding the alternative minimum tax (AMT) exemption and phase-out threshold, reducing the number of taxpayers subject to AMT

- Modifying itemized deductions, including a $10,000 cap on the state and local tax (SALT) deduction

- Introducing a qualified business income deduction (QBID) for pass-through entity owners

- Permanently indexing inflation-indexed parameters to the Chained Consumer Price Index (C-CPI-U) instead of the Consumer Price Index (CPI-U).

[^1]: The standard deduction and estate tax exemption are no longer doubled, due to the change in inflation indexing since 2017.

Beyond these individual provisions, the TCJA permanently reduced the top corporate tax rate from 35% to 21% and made other temporary adjustments to other business and corporate taxes. We've restricted our analysis to household provisions, enumerated in Table 1 below.

**Table 1: Temporary Individual Tax Provisions Current Law vs. TCJA Extension**

| Individual Provisions                                                | Current Law (2026)                                             | TCJA Extension (2026)                              |
| -------------------------------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------------- |
| Tax Rates                                                            | 10%, 15%, 25%, 28%, 33%, 35% and 39.6%                         | 10%, 12%, 22%, 24%, 32%, 35% and 37%               |
| Tax Brackets                                                         | Revert to 2017 Thresholds (indexed for inflation since 2017)\* | 2025 Thresholds (indexed for inflation for 2026)\* |
| Personal and Dependent Exemption                                     | $5,300\*                                                       | $0                                                 |
| CTC Base Amount                                                      | $1,000                                                         | $2,000                                             |
| CTC Maximum Refundable Amount                                        | $1,000                                                         | $1,800\*                                           |
| CTC Phase-in Start                                                   | $3,000                                                         | $2,500                                             |
| CTC Phase-out Start                                                  | $75,000/$110,000                                               | $200,000/$400,000                                  |
| Adult Dependent Credit                                               | $0                                                             | $500                                               |
| Standard Deduction Amount                                            | $8,300/$16,600\*                                               | $15,500/$30,600\*                                  |
| SALT Cap                                                             | Uncapped                                                       | $10,000                                            |
| Mortgage Interest Deduction Cap                                      | $1,000,000                                                     | $750,000                                           |
| Charitable Deduction AGI Limit                                       | 50%                                                            | 60%                                                |
| Casualty Expense Deduction                                           | Active                                                         | Inactive                                           |
| Itemized Deduction AGI Rate                                          | 3%                                                             | Infinite                                           |
| Itemized Deduction Limitation Rate                                   | 80%                                                            | Infinite                                           |
| Itemized Deduction Applicable Amount                                 | $339,500/$407,400\*                                            | Infinite                                           |
| Estate Tax Exemption                                                 | ~$7,000,000\*                                                  | ~$14,300,000\*                                     |
| AMT Exemption Amount                                                 | $70,500/$109,700\*                                             | $89,925/$139,850\*                                 |
| AMT Phase-out Start                                                  | $156,700/$209,000\*                                            | $639,300/$1,278,575\*                              |
| QBID Rate                                                            | Inactive                                                       | 20%                                                |
| Alternative QBID Rate on Business Property                           | Inactive                                                       | 2.5%                                               |
| QBID Rate on W2 Wages                                                | Inactive                                                       | 50%                                                |
| Alternative QBID Rate on W2 Wages                                    | Inactive                                                       | 25%                                                |
| QBID Difference Between Threshold Amounts and Phase-in Range Amounts | Inactive                                                       | $50,000/$100,000                                   |
| QBID Phase-out Start                                                 | Inactive                                                       | $204,900/$408,900\*                                |

_Starred parameters indexed to inflation._

[Our simulations](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48812) include every listed provision except the mortgage interest deduction and estate tax exemption.[^2]

[^2]: PolicyEngine's US model is currently unable to evaluate the impact of the mortgage interest deduction or estate tax. Based on external analysis, the revenue gained from limiting the mortgage interest deduction partially offsets the revenue lost from doubling the estate tax exemption, suggesting our budgetary projections remain fairly accurate. Nevertheless, including these provisions in a TCJA extension would affect the distributional analysis for households subject to either or both policies.

## Household Impacts

Extending the TCJA will affect households differently depending on their size, income, and other characteristics. To illustrate these effects, let's examine the impacts for a few example households—with income only from wages and no itemized deductions—for 2026.

**Table 2: Change in Net Income Based on Household Composition**

| Marital status | Children | Earnings   | Change in Net Income                                                                                                                                               |
| -------------- | -------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Single         | 0        | $15,000    | [$140](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48802)    |
| Single         | 1        | $30,000    | [$1,020](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=47295)  |
| Married        | 1        | $70,000    | [$1,170](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48807)  |
| Married        | 2        | $150,000   | [$5,055](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48809)  |
| Married        | 3        | $1,000,000 | [$33,053](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48812) |

While taxes do not always decrease monotonically with income (see Appendix A), each household with a higher income net benefits more than another family with a lower income in these examples. This can be mainly attributed to the TCJA's lower income tax rates. Families with children see additional benefits from the expanded CTC, provided their income falls below the phase-out threshold. High-earning families experience the largest gains, as demonstrated in the final example, where their change in net income substantially exceeds other households shown in the table. Figure 1 displays the change in net income based on household income for the family composition in the fourth example.

**Figure 1: Change in Net Income for a Married Couple with Two Children Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*IHaa_oaR4N7qaXK0)

## Federal Budgetary Impact

Extending the TCJA would reduce federal revenues by [$4.2 trillion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48812) over ten years using static modeling. [When considering behavioral effects](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=69005&region=enhanced_us&timePeriod=2026&baseline=2) (applying CBO elasticities), earnings rise 0.78%, in turn lowering the cost by 7.7% to $3.9 trillion; these effects primarily occur through the substitution effect (people working more as their marginal tax rate falls), partly offset by the income effect (people working less as they have a higher net income). The Congressional Budget Office (CBO) [currently projects](https://www.cbo.gov/publication/59710) federal deficits to total $20 trillion from 2025-2034; extending the TCJA's individual provisions, without any offsets, would thus raise deficits by roughly 20% over a decade.

**Table 3: TCJA Federal Budgetary Impact (in billions $)**

| Year     | TCJA Static | TCJA Dynamic[^3] |
| -------- | ----------- | ---------------- |
| 2026     | -342.3      | -315.8           |
| 2027     | -359.1      | -331.3           |
| 2028     | -375.7      | -346.6           |
| 2029     | -392.8      | -362.9           |
| 2030     | -410.8      | -379.0           |
| 2031     | -427.0      | -393.9           |
| 2032     | -447.8      | -413.1           |
| 2033     | -467.1      | -430.9           |
| 2034     | -485.1      | -447.5           |
| 2035[^4] | -503.8      | -464.8           |
| 2026-35  | -4,211.5    | -3,885.5         |

[^3]: We estimate the dynamic score for years beyond 2026 by applying the 7.7% cost reduction between static and dynamic for 2026 to the static costs for future years.

[^4]: Currently, the PolicyEngine US model can only simulate to 2034. In order to provide a full ten-year budget window estimate, the budgetary impacts for 2035 are calculated by taking the percent growth from 2033 to 2034 and applying this growth to the 2034 budgetary impact.

The CBO, using estimates from the Joint Committee on Taxation, projects costs 0.2% lower than our projection. Table 4 compares to other notable scorekeepers.

**Table 4: Federal Budgetary Comparison Across Organizations (in billions $) [^5] [^6]**

| Organization                                                                                                                                          | TCJA Baseline | % difference to PolicyEngine dynamic |
| ----------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ------------------------------------ |
| PolicyEngine (Static)                                                                                                                                 | -4,221.5      | -                                    |
| PolicyEngine (Dynamic)                                                                                                                                | -3,885.5      | -                                    |
| [CBO/JCT](https://www.cbo.gov/publication/60114)                                                                                                      | -3,877.6      | 0.2%                                 |
| [CRFB](https://www.crfb.org/blogs/tcja-extension-could-add-4-5-trillion-deficits)                                                                     | -3,830.0      | 1.4%                                 |
| [AEI](https://www.aei.org/research-products/report/making-the-tax-cuts-and-jobs-act-permanent-two-revenue-neutral-pro-growth-options-for-tax-reform/) | -3,012.1      | 22.5%                                |
| [Tax Foundation](https://taxfoundation.org/research/all/federal/donald-trump-tax-plan-2024/)                                                          | -3,841.1      | 1.1%                                 |
| [Yale Budget Lab](https://budgetlab.yale.edu/research/tcja-extension-simulator)                                                                       | -3,937.2      | -1.3%                                |

[^5]: Some of the organizations in the comparison included some miscellaneous provisions such as extending the pass-through loss deduction limitation and expanding opportunity zones in their estimates. As we did not include these provisions and others in our own estimates, we removed them, when possible, from each organization's projection to obtain a closer comparison.

[^6]: The CBO, Tax Foundation, and Yale Budget Lab only project the cost of extending the TCJA through 2034. In order to compare its estimate with ours, we utilized the same process to obtain our 2035 projection by taking the percent growth from each organization's 2033 to 2034 scores and multiplying this growth to each estimate in 2034.

## Income Distribution 2026

Extending the TCJA would [benefit 80% of the U.S. population](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48809) while reducing the net income for 2% of Americans. More households in the top half of the income distribution would benefit than in the bottom half.

![](https://cdn-images-1.medium.com/max/2000/0*wUuFzDjWkuLS3FRf)

In 2026, the [average household benefit](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2) when extending the TCJA is $2,338. However, the top two income deciles would receive a larger benefit as their net income would rise by $5,063 and $9,194, respectively. Conversely, on average, the bottom two deciles would see their taxes reduced by $311 or less.

![](https://cdn-images-1.medium.com/max/2000/0*vb67YpfvKS_YoCf7)

Extending the TCJA would also [reduce the Supplemental Poverty Measure](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=48809) by 4.1% and the Supplemental Child Poverty Measure by 7.0%.

![](https://cdn-images-1.medium.com/max/2000/0*ThsBUfxd5XSPzEqa)

## Conclusion

Extending the individual provisions of the TCJA would reduce federal revenues by $4.2 trillion (static) or $3.9 trillion (dynamic) over the next decade, absent offsetting measures. The reform would increase the net income of 80% of Americans while lowering it for 2%. The majority of benefits (54%) would flow to the top income quintile, while the bottom quintile would receive just 2%.

As policymakers evaluate options for addressing these expiring provisions, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Explanation for non-monotonic impacts for a joint filer with two children

For most filers and income ranges, the benefit of TCJA rises with income. However, for a married couple with two children (as an example), the benefit of extending the TCJA declines in at least two earnings ranges for 2026:

1. $34,600 to $37,800

2. $54,500 to $62,000

Both ranges occur for similar reasons, namely the interaction between standard deductions, personal exemptions, and the CTC.

### $34,600 to $37,800

To illustrate this nonmonotonicity, we calculate the effect at both ends of the range.

[At $34,600:](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=49119)

Under a TCJA extension, the household has $4,000 in taxable income ($34,600 of earnings - $30,600 of their standard deduction). This translates to a $400 tax liability as their taxable income falls into the 10% tax bracket. The household's tax liability is fully offset by CTC as they receive their household maximum of $4,000. $400 is used to offset their tax liability while the remaining $3,600 is refunded to the household.

Under current law, the household has no taxable income (household earnings of $34,600 is below the combined standard deduction and exemptions of $37,800). The household would receive a refund of $2,000 from the CTC.

Therefore the net benefit of extending the TCJA for this household would be $1,600 ($3,600-$2,000).

[At $37,800:](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=49120)

Under a TCJA extension, the household would have $7,200 in taxable income ($37,800 of earnings - $30,600 of their standard deduction). This results in a $720 tax liability as their taxable income is solely in the 10% tax bracket. The tax liability is fully offset by CTC as they receive the maximum of $4,000. $720 is used to offset their tax liability while the remaining $3,280 is refunded to the household.

Under current law, the household also has no taxable income (household earnings of $37,800 are completely offset by the combined standard deduction and exemptions of $37,800). The household would receive a refund of $2,000 from the CTC.

Therefore the net benefit of extending the TCJA for this household would be $1,280 ($3,280-$2,000).

The declining benefit ($1,600 -> $1,280) occurs because the TCJA's standard deduction ($30,600) is lower than the combination of standard deduction and exemptions ($37,800) under current law. This results in a household developing taxable income sooner, thus creating a higher tax liability and reducing the TCJA's advantage over this range.

### $54,850 to $62,050

At this income range, we see another decline in TCJA benefits due to the interaction between tax brackets and the CTC.

[At $54,850:](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=49121)

Under a TCJA extension, the household has $24,250 in taxable income ($54,850 of earnings - $30,600 standard deduction). This results in a $2,425 tax liability as their taxable income falls entirely in the 10% tax bracket. The household's tax liability is fully offset by CTC as they receive their household maximum of $4,000. $2,425 is used to offset their tax liability while the remaining $1,575 is refunded to the household.

Under current law, the household has $17,050 in taxable income ($54,850 of earnings - $37,800 combined standard deduction and exemptions). This results in a $1,705 tax liability as their taxable income is solely in the 10% tax bracket. $1,705 of their $2,000 CTC is used to offset the tax liability, with the remaining $295 refunded to the household.

Therefore the net benefit of extending the TCJA for this household would be $1,280 ($1,575-$295).

[At $62,050:](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69001&region=enhanced_us&timePeriod=2026&baseline=2&household=49127)

Under a TCJA extension, the household has $31,450 in taxable income ($62,050 of earnings - $30,600 standard deduction). This results in a $3,289 tax liability, with the first $24,250 taxed at 10% ($2,425) and the next $7,200 taxed at 12% ($864). The household's tax liability is fully offset by CTC as they receive their household maximum of $4,000. $3,289 is used to offset their tax liability while the remaining $711 is refunded to the household.

Under current law, the household has $24,250 in taxable income ($62,050 of earnings - $37,800 combined standard deduction and exemptions). This results in a $2,425 tax liability as their taxable income is solely in the 10% tax bracket. $2,000 of CTC partially offsets the household's tax liability, leaving $425 in taxes owed.

Therefore the net benefit of extending the TCJA for this household would be $1,136 ($711 - (-$425)).

The declining benefit ($1,280 -> $1,136) occurs because once the household earns more than $54,850, they are pushed into the 12% tax bracket under a TCJA extension. Under current law, they would remain in the 10% bracket until their earnings reach $62,050. This higher marginal rate reduces the TCJA's advantage versus current law.

In addition to these two ranges, the net benefit of a TCJA extension falls during other points as household income rises. These can also be attributed to the interactions of the standard deduction, exemptions, CTC, and adjustments to income tax bracket thresholds.



---

---
# Employer National Insurance reforms in the Autumn Budget 2024
Slug: autumn-budget-24-employer-ni
Date: 2024-10-30 16:30:00
Authors: Nikhil Woodruff
Tags: uk, autumn-budget, policy, featured
Description: PolicyEngine projects the reforms to employer NI would raise £23 billion in 2025 and affect two thirds of people.

---

_Credit: World Economic Forum/Walter Duerst_

[See the full impact on PolicyEngine here.](https://legacy.policyengine.org/uk/policy?reform=69728&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1)

The Chancellor Rachel Reeves has announced reforms to employer National Insurance (NI) contributions, marking the most substantial revenue-raising measure in the Autumn Budget 2024. The changes include raising the main rate from 13.8% to 15.0% while simultaneously lowering the Secondary Threshold at which employers begin contributing from £9,100 to £5,000 per year. Additionally, Reeves has raised the [Employment Allowance](https://www.gov.uk/claim-employment-allowance) from £5,000 to £10,000 and eliminated its cap. This analysis focuses on the rate rise and threshold reduction.

## The reforms

Employers currently pay NICs of 13.8% on employee earnings above £175 per week (£9,100 per year). Last week, The Times reported that the Chancellor was expected to raise the employer NI rate by “between one and two percentage points”, and “make a ­’significant’ cut to the earnings ­thresholds at which employers start making national insurance contributions.” Reeves did so, increasing the rate by 1.2p to 15.0%, and lowering the threshold to £5,000 per year.

The Employment Allowance is a tax relief for small businesses that reduces National Insurance liabilities, available to companies whose National Insurance payments were below £100,000 in the previous tax year.

## Methodology notes

As I wrote in the [Institute for Economic Affairs blog](https://iea.org.uk/publications/raising-employer-nic-in-the-autumn-budget/) last week, the extent to which employers pass on NIC rises to workers in lower wages can affect revenues by up to a factor of two, due to interactions with tax and benefit changes. In line with the [empirical literature](https://link.springer.com/article/10.1007/s13209-012-0091-x), we assume that employers pass on 40% of the NIC change in the first year, rising 10 percentage points per year up until stabilising at 70% by 2028.

## UK impacts

Using PolicyEngine's open-source model, we estimate both the budgetary and distributional impacts of these NI changes. Our analysis incorporates behavioural responses, though we also provide static estimates for comparison with official figures.

### Budgetary impact

We project that the employer NI reforms will raise £108.4 billion over five years when accounting for behavioural responses. This represents the largest revenue source among the Budget's major tax changes. The yearly breakdown shows:

| Fiscal year   | 2024-25 | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | Total |
| ------------- | ------- | ------- | ------- | ------- | ------- | ------- | ----- |
| Revenue (£bn) | 0.0     | 23.3    | 22.4    | 21.3    | 20.3    | 21.1    | 108.4 |

The declining revenue profile reflects our modelling of behavioural responses, particularly the increasing wage pass-through from employers to employees over time. Without these behavioural effects, we estimate the reform would raise £147.0 billion - nearly £40 billion more.

### Comparison with official estimates

HM Treasury and the Office for Budget Responsibility (OBR) do not publish budgetary impact estimates of the reforms to the rate and threshold on their own, but they do estimate the combined impact with two other reforms: increasing the [Employment Allowance](https://www.gov.uk/claim-employment-allowance) from £5,000 to £10,000 and removing the Employment Allowance cap. We include these estimates for reference. HM Treasury’s static estimate of the combined policies is £122.3 billion over five years (our static estimate of just the threshold and rate changes is £147.0 billion). The OBR’s dynamic estimate of the combined policies is £79.9 billion, while our estimate of the reduced subset is £108.4 billion.

Note that we also use different assumptions about the incidence of the tax reform on employee wages. We assume that 40% of the incidence is born by wages in 2025, rising 10 percentage points per year before stabilising at 70% in 2028, while the OBR assumes that it flows 100% to real wages in the medium term. HMT does not specify its behavioural assumptions.

#### Static analysis comparison

_All figures in £ billions_

| Source       | 2024-25 | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | Total |
| ------------ | ------- | ------- | ------- | ------- | ------- | ------- | ----- |
| PolicyEngine | 0.0     | 28.4    | 28.8    | 29.2    | 29.7    | 30.9    | 147.0 |
| HM Treasury  | 0.0     | 23.8    | 23.7    | 24.2    | 24.9    | 25.7    | 122.3 |
| OBR          | 0.0     | 23.9    | 24.3    | 24.7    | 25.6    | 26.4    | 124.9 |

#### Dynamic analysis comparison

_All figures in £ billions_

| Source       | 2024-25 | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | Total |
| ------------ | ------- | ------- | ------- | ------- | ------- | ------- | ----- |
| PolicyEngine | 0.0     | 23.3    | 22.4    | 21.3    | 20.3    | 21.1    | 108.4 |
| OBR          | 0.0     | 18.3    | 14.6    | 15.2    | 15.7    | 16.1    | 79.9  |

### Distributional impacts

PolicyEngine estimates that the reforms to employer NI will reduce net income by between 0.1 and 0.6 percent among household income deciles, with the impact strongest for the upper middle of the distribution.

![Decile impact](/images/posts/autumn-budget-24-employer-ni/decile.png)

The reforms are projected to affect two thirds of people, and over 90% of the top three income deciles. 94% of the lowest income decile is unaffected by the tax reforms.

![Winners and losers](/images/posts/autumn-budget-24-employer-ni/winners.png)

PolicyEngine estimates no significant (&lt;1%) change to before-housing-costs absolute poverty or income inequality.



---

---
# Fuel duty reforms in the Autumn Budget 2024
Slug: autumn-budget-24-fuel-duty
Date: 2024-10-30 17:30:00
Authors: Nikhil Woodruff
Tags: uk, autumn-budget, policy, featured
Description: PolicyEngine projects the reforms to fuel duty will cost £2.4 billion in 2025.

---

_[See the full impact on PolicyEngine here.](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=69734&region=uk&timePeriod=2025&baseline=1)_

Chancellor Rachel Reeves today confirmed that duty will remain frozen at £0.5295 per litre for FY 2025, before rising with retail price inflation in future years, continuing a policy approach that has been maintained for several years.

## UK impacts

Using PolicyEngine's open-source model, we analyse this freeze's fiscal and distributional implications.

### Budgetary impact

We project the fuel duty freeze will reduce revenue by £6.4 billion over five years, with the largest impact in the first year:

| Fiscal Year   | 2024-25 | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | Total |
| ------------- | ------- | ------- | ------- | ------- | ------- | ------- | ----- |
| Revenue (£bn) | 0.0     | -2.4    | -1.0    | -1.0    | -1.0    | -1.0    | -6.4  |

The larger initial impact reflects the difference between the freeze and previously planned increases, while subsequent years reflect the revenue impact of the lagged inflation increases. We assume no behavioural responses in this estimate.

### Comparison with official estimates

Our estimates deviate by 3% with official projections. HM Treasury forecasts a £6.6 billion revenue reduction, while the OBR similarly projects a £6.6 billion cost - both very close to our £6.4 billion estimate.

The small variations between estimates may stem from slightly different assumptions about fuel consumption patterns or behavioural responses (we assume none), but the overall alignment suggests broad agreement about the fiscal implications of the freeze.

### Distributional impact

We estimate this policy would raise net incomes by up to 0.5% across the income distribution. The lowest income decile sees a rise of 0.5%, and higher income deciles see a lower rise.

![Decile impacts](/images/posts/autumn-budget-24-fuel-duty/decile.png)

We estimate no impact on the absolute poverty rate, but a slight (0.2%) reduction in income inequality.

## Methodology notes

Our analysis employs PolicyEngine's open-source model, examining the direct impact of the duty freeze. We assume no behavioural responses for these estimates.



---

---
# Donald Trump's Economic Agenda
Slug: trump-2024
Date: 2024-10-31 17:30:00
Authors: David Trimmer
Tags: us, election, donald-trump, featured
Description: PolicyEngine projects three provisions of Donald Trump’s tax plan would cost $5.4 trillion over the next ten years.

---

Throughout the election cycle, we at PolicyEngine have covered a few of former President Trump’s policy proposals. This includes: [exempting Social Security benefits](https://policyengine.org/us/research/social-security-tax-exemption#user-content-fn-trust-fund-split) from income tax and [extending the Tax Cuts and Jobs Act](https://policyengine.org/us/research/tcja-extension) (TCJA) individual provisions. Additionally, Donald Trump has signaled that he would repeal the [SALT deduction cap](https://www.cnn.com/2024/09/17/politics/donald-trump-salt-tax/index.html), reversing the $10,000 limit he signed into law with the passage of the TCJA. We at PolicyEngine have combined these three policies into one reform to simulate the effects of at least part of Donald Trump’s economic agenda and analyze its impact on households and the U.S. economy.

Key results:

- Costs $5.8 trillion from 2025 to 2034, assuming no behavioral responses, or $5.4 trillion when applying the Congressional Budget Office’s labor supply responses.

- Increases net income for 81.6% of Americans and lowers poverty by 4.6% in 2026, assuming no behavioral responses.

- Increase hours worked and earnings by 0.82% and 0.79% in 2026, respectively when applying CBO elasticities.

[_Try our personalized calculator:_](https://legacy.policyengine.org/us/2024-election-calculator) See how Donald Trump’s economic agenda would affect your household, including other policies like tariffs and income tax exemptions for tips and overtime.

## Donald Trump’s Tax Plan

Donald Trump has released several more policy proposals during the cycle. These reforms include:

- Excluding [tipped income](https://www.youtube.com/watch?v=9J0fUTiJLVc&t=1920s) and [overtime pay](https://www.cnn.com/2024/09/12/politics/trump-overtime-pay-taxes/index.html) from taxation

- Deducting [interest on car loans](https://www.cnbc.com/2024/10/14/trump-wants-to-make-auto-loan-interest-tax-deductible-heres-who-benefits.html) from taxable income (presumably as an itemized deduction)

- Imposing [across-the-board tariffs](https://www.pbs.org/newshour/economy/trump-favors-huge-new-tariffs-how-do-they-work), with higher rates on imports from China

- Extending TCJA's corporate tax provisions

While this analysis does not include these proposals, we at PolicyEngine have released a [2024 election household calculator](https://legacy.policyengine.org/us/2024-election-calculator) containing the reforms examined in this analysis and the listed provisions above. Read our previous reports on how [exempting Social Security benefits](https://policyengine.org/us/research/social-security-tax-exemption) and [extending the TCJA's individual provisions](https://policyengine.org/us/research/tcja-extension) would independently affect American households and the U.S. economy.

## Household Impacts 2026

Implementing all three policies would have varying effects on American households. To understand their impact, we have analyzed several family compositions with various earnings, social security benefits, and state and local expenses.

**Table 1: Change in Net Income Based on Household Composition**

| Marital Status | Children | Earnings   | Social Security Benefits | State and Local Tax | Change in Net Income                                                                                                                                               |
| -------------- | -------- | ---------- | ------------------------ | ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Single         | 0        | $0         | $24,000                  | $0                  | [$0](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49220)      |
| Single         | 1        | $30,000    | $0                       | $0                  | [$1,020](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49231)  |
| Married        | 0        | $70,000    | $24,000                  | $0                  | [$3,911](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49225)  |
| Married        | 2        | $150,000   | $0                       | $0                  | [$5,055](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49234)  |
| Married        | 3        | $1,000,000 | $0                       | $100,000            | [$39,158](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49239) |

For a single retired adult receiving just above the [average Social Security retirement benefit](https://faq.ssa.gov/en-us/Topic/article/KA-01903#:~:text=Views:,most%20convenient%20way%20to%20apply.) (first example), their net income would see no change as their benefits face zero taxation under the current structure. While net income does not always rise with increased earnings, it does for most households which can be viewed in Table 1. This trend can be mainly attributed to the reduction in income tax rates from extending the TCJA. Additionally, families with children see an increase in net income due to the changes in the child tax credit (assuming their earnings are below the phase-out threshold). Households with high earnings, like in example five, see the largest gains. If they have real estate taxes that can be deducted using the SALT deduction, they benefit even more. Figure 1 shows how net income changes as household income rises for a married couple with two children (example four).

**Figure 1: Change in Net Income for a Married Couple with Two Children Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*-tv04W6Sakp0seYs)

## Federal Budgetary Impact

Donald Trump’s three policies would reduce federal revenues by $5.8 trillion over ten years when utilizing [static modeling](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=69665&region=enhanced_us&timePeriod=2025&baseline=2). [When considering behavioral effects](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=69666&region=enhanced_us&timePeriod=2025&baseline=2) (applying [CBO’s central elasticities](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4)), the cost drops to $5.4 trillion. In 2025, the [budgetary impact](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=69665&region=enhanced_us&timePeriod=2025&baseline=2&household=49239) of the proposals is much smaller as the extension of the TCJA’s individual provisions does not come into effect until tax year 2026. Additionally, the number of total hours worked and earnings would decrease in 2025 before increasing as compared to the current baseline in subsequent years. As mentioned in our TCJA analysis, the [CBO projects](https://www.cbo.gov/publication/59710) that federal deficits would total $20 trillion over the next decade. Implementing all three policies, without any offsets, would raise deficits by roughly 27% using our dynamic estimate.

**Table 2: Federal Budgetary Impact of Three of Donald Trump’s Tax Policies (in billions $)**

| Year    | Static   | CBO Labor Supply Responses |
| ------- | -------- | -------------------------- |
| 2025    | -171.2   | -177.2                     |
| 2026    | -522.4   | -497.4                     |
| 2027    | -548.3   | -522.0                     |
| 2028    | -572.8   | -541.6                     |
| 2029    | -598.8   | -568.8                     |
| 2030    | -627.0   | -597.0                     |
| 2031    | -653.4   | -623.2                     |
| 2032    | -685.1   | -652.8                     |
| 2033    | -715.6   | -684.1                     |
| 2034    | -745.2   | -713.7                     |
| 2025-34 | -5,839.8 | -5,400.6                   |

## Income Distribution 2026

Enacting these reform policies would [increase the net income of 81.6%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49239) of Americans in 2026. 0.6% of Americans see lower net income, likely due to state tax interactions. A larger share of households in the upper half of the income distribution would benefit compared to those in the lower half. Our distributional estimates assume no behavioral responses.

![](https://cdn-images-1.medium.com/max/2000/0*0PnM-e-gieyUTSW1)

In 2026, the average household benefit when enacting these reforms is [$3,570](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49239). However, the families in the top income decile would receive an average benefit of $16,608, while the lowest decile would receive just $345, assuming no behavioral responses.

![](https://cdn-images-1.medium.com/max/2000/0*9BPsZ7C5woD91CYq)

Donald Trump’s three policies would also [reduce the Supplemental Poverty Measure by 4.6%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=69665&region=enhanced_us&timePeriod=2026&baseline=2&household=49239) in 2026, assuming no behavioral effects. Additionally, senior and child poverty would drop by 7.0% and 8.2%, respectively.

![](https://cdn-images-1.medium.com/max/2000/0*DMAUDgM1BG7e3wv9)

## Conclusion

Implementing three of Donald Trump’s tax proposals would reduce federal revenues by $5.8 trillion (static) or $5.4 trillion (dynamic) over the next decade unless paired with offsetting measures. These reforms would increase the net income of 81.6% of Americans while lowering it for 0.6% in 2026. 59% of benefits would flow to the top income quintile, while the bottom quintile would receive 2%. Additionally in 2026, Donald Trump’s tax provisions would lower poverty by 4.6% (static) and increase earnings by 0.79% (applying CBO elasticities).

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.



---

---
# How Would Each Presidential Candidate’s Economic Plans Affect Your Household?
Slug: introducing-2024-election-calculator
Date: 2024-11-03 17:30:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, election, donald-trump, kamala-harris, featured, interactives
Description: PolicyEngine has created a personalized calculator for the 2024 presidential election’s tax proposals.

---

Try our [**2024 election calculator**](https://legacy.policyengine.org/us/2024-election-calculator) to see how Harris and Trump’s proposed policies would affect your household’s finances. Enter your family details, income sources, and spending patterns to get personalized estimates.

Read on for a few examples of our new tool in action.

## A young family in Minnesota

Consider a married couple, both 35, with two young children ages 4 and 7. Here are their details:

![](https://cdn-images-1.medium.com/max/3200/0*IU-QdfGEVxXkIft9)

Based on [U.S. Census Bureau trade statistics](https://www.census.gov/foreign-trade/balance/c5700.html), the average American consumed $1,275 in Chinese imports and $8,025 in other foreign goods in 2023. We’ve given this household half this nationwide average (which may fall in response to tariffs), or twice the per-capita values for a four-person household.

![](https://cdn-images-1.medium.com/max/3200/0*ZjAq6duUhQlODCwC)

Under Vice President Harris’s proposed policies, this family would see their net income increase by $2,600 to $57,777, driven by the expanded Child Tax Credit. Their federal refundable credits would increase from $5,039 to $9,639, as you can view in detail in the _Federal Credits_ tab of the right hand table.

Under President Trump’s proposed policies, their net income would decrease by $3,160 to $52,017, due to the impact of new tariffs on imported goods. While the plan includes provisions like making overtime and tip income tax-exempt, this family doesn’t have income in those categories to offset the tariff costs.

## A semi-retired couple in Florida

Our second example is a semi-retired couple, both 68, living in Florida. They receive $45,000 in Social Security benefits and earn additional income through part-time work ($20,000 in regular wages, $8,000 in tips, and $4,000 in overtime). They spend $1,000 annually on Chinese goods and $5,000 on other foreign products.

![](https://cdn-images-1.medium.com/max/3200/0*rT-o7KW1E--raLml)

Under Trump’s proposed policies, this couple would see their net income increase by $578 to $74,370. The tax exemptions on their tip and overtime income, along with changes to Social Security taxation, outweigh the impact of new tariffs. Their income tax before credits would decrease from $3,208 to $1,530.

Under Harris’s policies, their net income would remain unchanged at $73,792, as her reforms target different demographic groups and income levels.

## A professional family in New York City

Our third example examines a married couple, both 45, with one child age 12, living in New York City. Their financial profile:

![](https://cdn-images-1.medium.com/max/3200/0*ASgEmeXyw16z7qPa)

![](https://cdn-images-1.medium.com/max/3200/0*Qzx5nqo0BcLOKrWH)

Harris’s policies would increase their net income by $1,000 to $116,790, through expanded child tax benefits. Trump’s policies would decrease their net income by $1,132 to $114,658, with tariff costs outweighing the benefits from the state and local tax (SALT) deduction cap removal.

## A high-net-worth individual in California

Our final example is a single 55-year-old living in California with investment income. Their income includes:

- Wages: $100,000

- Capital gains: $800,000

- Qualified dividends: $20,000

- Non-qualified dividends: $5,000

- Rental income: $24,000

- Import spending: $2,000 Chinese goods, $10,000 other foreign goods

![](https://cdn-images-1.medium.com/max/3200/0*zl0R7x035uQi75HN)

Under Trump’s policies, their net income would increase by $28,114 to $571,473. This change comes from the removal of the SALT deduction cap, which reduces tax liability in high-tax states like California.

Under Harris’s policies, their net income would decrease by $7,479 to $571,473, due to changes to capital gains taxation for high-income households.

## Key takeaways

These examples show how each candidate’s proposals affect households differently based on:

- Family composition and age

- Sources and levels of income (wages, investments, tips, overtime, Social Security)

- State of residence and local tax burden

- Spending patterns on imported goods (the U.S. imported [$427 billion in goods from China](https://www.census.gov/foreign-trade/balance/c5700.html) and [$3.1 trillion in total goods](https://www.census.gov/foreign-trade/statistics/highlights/AnnualPressHighlights.pdf) in 2023)

- Eligibility for tax credits

The examples demonstrate impacts ranging from changes of a few hundred dollars to tens of thousands of dollars.

## Calculate your household’s results

Try our [2024 election calculator](https://legacy.policyengine.org/us/2024-election-calculator) to see how these proposals would affect your household finances. Enter your details to get a personalized breakdown of policy impacts.

_Note: All calculations use projected 2025 tax parameters and currently available policy proposals. The calculator uses the PolicyEngine US microsimulation model and updates as new policy details emerge. Actual impacts could vary based on final policy design, implementation timeline, and behavioral responses (such as changes in import spending patterns in response to tariffs)._



---

---
# Federal Tax Inflation Adjustments for Tax Year 2025
Slug: federal-tax-inflation-adjustments-2025
Date: 2024-11-19 09:30:00
Authors: David Trimmer
Tags: us, featured
Description: PolicyEngine has updated all relevant federal tax parameters based on the latest IRS announcements.

---

[On October 22nd](https://www.irs.gov/newsroom/irs-releases-tax-inflation-adjustments-for-tax-year-2025), the Internal Revenue Service (IRS) released its annual inflation adjustments for tax year 2025. Over sixty provisions of the federal tax code are indexed for inflation, including income tax thresholds, the standard deduction, and the earned income tax credit (EITC), which impacts the millions of American households who file their taxes each year. At PolicyEngine we have updated our US model to reflect these changes based on the [latest IRS report](https://www.irs.gov/pub/irs-drop/rp-24-40.pdf).

## How does the IRS update tax parameters?

Federal tax law requires inflation adjustments for certain tax parameters using the Consumer Price Index (CPI). The [U.S. Bureau of Labor Statistics](https://www.bls.gov/cpi/) defines CPI as “a measure of the average change over time in the prices paid by urban consumers for a market basket of consumer goods and services.” As prices grow over time, CPI increases accordingly. The Bureau maintains multiple versions of CPI including the Consumer Price Index for All Urban Workers (CPI-U), the Consumer Price Index for Urban Wage Earners (CPI-W), and the Chained Consumer Price Index (C-CPI). Before 2018, legislation required the use of CPI-U for indexed tax provisions; however, the [Tax Cuts and Jobs Act](https://policyengine.org/us/research/tcja-extension) mandated a switch to Chained CPI, which accounts for consumer substitution behavior and by construction results in smaller inflation adjustments.

## What was updated?

PolicyEngine has modeled most federal income tax provisions since 2022. Additionally, we use [inflation projections](https://www.cbo.gov/data/budget-economic-data#10) from the Congressional Budget Office (CBO) and statutory rounding rules to estimate the values of these provisions for future years. This allows accurate calculations of future tax benefits and proper analysis of policy proposals for tax year 2025 and beyond.

The IRS updates generally increased the inflation adjustment by about 10% beyond our CBO-based projections. For example, CBO projected that the standard deduction for single people would rise $350 from $14,600 in 2024 to $14,950 in 2025, while the IRS updated the value to $15,000. That $400 increase exceeded the $350 projection by 14%. Table 1 displays these [standard deduction](https://legacy.policyengine.org/us/policy?focus=gov.irs.deductions.standard.amount.HEAD_OF_HOUSEHOLD) values for all filing statuses.

**Table 1: IRS Updates for the Standard Deduction in Tax Year 2025**

![](https://cdn-images-1.medium.com/max/2000/1*TbTgAmxeWLYzM0UExeQ73Q.png)

In addition to updating the standard deduction values, we also modified the values for the following provisions.

- [Aged/blind standard deduction amount](https://legacy.policyengine.org/us/policy?focus=gov.irs.deductions.standard.aged_or_blind.amount.HEAD_OF_HOUSEHOLD)

- [Dependent standard deduction amount](https://legacy.policyengine.org/us/policy?focus=gov.irs.deductions.standard.dependent.amount)

- [Additional earned income amount for the dependent standard deduction](https://legacy.policyengine.org/us/policy?focus=gov.irs.deductions.standard.dependent.additional_earned_income)

- [Income tax bracket thresholds](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.bracket.thresholds.1.HEAD_OF_HOUSEHOLD)

- [Capital gains bracket thresholds](https://legacy.policyengine.org/us/policy?focus=gov.irs.capital_gains.brackets.thresholds.1.HEAD_OF_HOUSEHOLD)

- [EITC maximum values](https://legacy.policyengine.org/us/policy?focus=gov.irs.credits.eitc.max%5B0%5D.amount)

- [EITC joint bonus](https://legacy.policyengine.org/us/policy?focus=gov.irs.credits.eitc.phase_out.joint_bonus%5B0%5D.amount) (difference between phase-out for single and joint filers)

- [EITC maximum investment income amount](https://legacy.policyengine.org/us/policy?focus=gov.irs.credits.eitc.phase_out.max_investment_income)

- [EITC phase-out start](https://legacy.policyengine.org/us/policy?focus=gov.irs.credits.eitc.phase_out.start%5B0%5D.amount)

- [Estate tax exemption](https://legacy.policyengine.org/us/policy?focus=gov.irs.credits.estate.base)

- [Qualified business income deduction phase-out start](https://legacy.policyengine.org/us/policy?focus=gov.irs.deductions.qbi.phase_out.start.HEAD_OF_HOUSEHOLD)

- [Alternative minimum tax (AMT) threshold](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.amt.brackets%5B1%5D.threshold)

- [AMT exemption amount](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.amt.exemption.amount.HEAD_OF_HOUSEHOLD)

- [AMT child exemption amount](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.amt.exemption.child.amount)

- [AMT phase-out start](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.amt.exemption.phase_out.start.HEAD_OF_HOUSEHOLD)

- [AMT separate limit](https://legacy.policyengine.org/us/policy?focus=gov.irs.income.amt.exemption.separate_limit)

We invite you to view all of the listed provisions above in our model and [compute your own policy reforms](https://legacy.policyengine.org/us/policy?focus=gov) using the updated parameters.



---

---
# Introducing GiveCalc
Slug: givecalc
Date: 2024-12-03 09:30:00
Authors: Max Ghenis, Pavel Makarchuk
Tags: us, featured, giving
Description: Calculate the true cost of charitable giving.

---

This Giving Tuesday, we’re launching [**GiveCalc**](https://legacy.policyengine.org/us/givecalc), a free tool that calculates how charitable giving affects your US taxes and net income[^eagx] When you make a tax-deductible donation, you reduce your tax liability — but quantifying that reduction requires modeling complex interactions across federal and state tax systems.

[^eagx]: The concept originated at a hackathon at EAGxBerkeley in December 2022. Rather than rush to release, we prioritized accuracy and comprehensiveness, developing and validating our model of income taxes at the federal level and across all 50 states, DC, and NYC. We are grateful to the collaborators from that session, who regrettably remain unnamed as we lost track of them.

## What GiveCalc does

![](https://cdn-images-1.medium.com/max/2000/0*OdmKfI9wWmTydOwB)

GiveCalc starts by collecting your household information. Take a California family earning $200,000, with two children and $15,000 in mortgage interest and property taxes. Without donations, they take home $153,895 after paying $46,105 in federal and state taxes.

The tool then computes three key metrics about charitable giving:

A $20,000 donation reduces their taxes by $3,136, costing them $16,864 in net income. The tax savings come from itemizing deductions on both their federal and California returns — without the mortgage interest and property tax deductions, they would save less since they’d take the standard deduction.

![](https://cdn-images-1.medium.com/max/2000/0*spyC-yuaxbTT6SKA)

This net cost calculation reflects interactions between:

- Federal and state itemized deductions

- State-specific charitable credits and deductions

- Marginal tax rates that vary with income

- Phase-outs and other provisions that depend on adjusted gross income

## The marginal giving discount

![](https://cdn-images-1.medium.com/max/2000/0*8GUprxTadvMn1xt0)

GiveCalc introduces the “marginal giving discount” — the tax reduction from your next dollar of giving. Our example family saves 31 cents in taxes on their next donated dollar, reflecting their federal and California marginal tax rates.

This rate changes as donations affect tax bracket thresholds and deduction eligibility. GiveCalc visualizes these nonlinearities to help donors optimize their giving.

## Finding your target donation

![](https://cdn-images-1.medium.com/max/2000/0*kreBCnVz6vAPbnJq)

Beyond computing the tax impact of a specific donation, GiveCalc can work backward: enter your desired reduction in net income, and it calculates the donation required to achieve that target.

For example, if our family wants to reduce their net income by 10% (from $153,895 to $138,506), they need to donate $17,854.

## Technical Implementation

GiveCalc extends PolicyEngine’s US tax-benefit model with several key features:

1. **Integrated federal and state modeling:** Computes taxes at federal, state, and local (NYC) levels, showing how each affects the giving cost.

1. **Interactive visualization:** Using Plotly, GiveCalc creates dynamic charts showing how taxes change with donation amounts.

1. **Streamlit interface:** The web app runs on Streamlit’s Community Cloud platform, providing a responsive interface without requiring user accounts.

1. **Optimization algorithm:** To find target donation amounts, GiveCalc computes outcomes across many scenarios using PolicyEngine’s validated microsimulation model.

## Next steps

We’ve [open sourced GiveCalc on GitHub](https://github.com/PolicyEngine/givecalc) and welcome contributions. Key areas for expansion include:

- Adding more income sources (most of which we already model, and only need to expose in the interface)

- Expanding to other countries (PolicyEngine operates in the US and UK)

- Supporting additional tax scenarios

- Enhancing visualization options

## Try it yourself

Visit [policyengine.org/us/givecalc](https://legacy.policyengine.org/us/givecalc) to calculate your own giving impacts. You can also:

- [View the source code](https://github.com/PolicyEngine/givecalc)

- [Report issues or contribute](https://github.com/PolicyEngine/givecalc/issues)

- [Support PolicyEngine](https://legacy.policyengine.org/us/donate) with a tax-deductible donation — and use GiveCalc to estimate its impact

Share your feedback and feature requests in the comments below or [open an issue](https://github.com/PolicyEngine/givecalc/issues) on GitHub.



---

---
# Louisiana Transitions to a Flat Tax
Slug: louisiana-flat-tax
Date: 2024-12-10 09:30:00
Authors: David Trimmer
Tags: us, featured, louisiana
Description: Analysis of the individual tax changes signed into law by Governor Jeff Landry.

---

Last week, Governor Jeff Landry (R-LA) signed [HLS 243ES-13](https://legis.la.gov/legis/ViewDocument.aspx?d=1390576), which reforms several parts of the individual income tax code:

1. Converting the current three income bracket structure of 1.85%, 3.5%, and 4.25% into a flat tax at a rate of 3%.

2. Introducing a standard deduction of $12,500 for single and separate filers and $25,000 for all other filing statuses.

3. Repealing personal exemptions: $4,500 per filer, $1,000 per dependent, and $1,000 additional for aged and blind filers.

4. Increasing the exemptions for retirement and disability income from $6,000 to $12,000.

We at PolicyEngine have updated our model to reflect these changes and analyzed their effects on the state of Louisiana and its residents.[^bill]

[^bill]: HLS 243ES-13 also converted the graduated corporate tax rate to a flat 5.5% rate, increased the state sales tax from 4.45% to 5%, and eliminated the corporate franchise tax. PolicyEngine does not currently model these policies.

Key results for 2025:

- Costs $1.3 billion

- Reduces taxes for 82% of Louisiana residents and raises taxes for 0%

- Reduces the state’s Supplemental Poverty Measure by 0.8%

- Increases the Gini index of income inequality by 0.3%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=la&timePeriod=2025&baseline=71680&household=49786) or [calculate the effect on your household](https://legacy.policyengine.org/us/household?focus=input.household.taxYear&reform=2&region=la&timePeriod=2025&baseline=71680)._

## Household Impacts 2025

To see how families in Louisiana would be affected by the discussed tax changes, let’s examine a few relevant household compositions.

**Table 1: Change in Net Income Based on Household Composition**

| Household Composition                          | Change in Net Income                                                                                                                                     |
| ---------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Single, No Children, No Earnings               | [$0](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=la&timePeriod=2025&baseline=71680&household=49781)     |
| Single, One Child, LA Minimum Wage             | [$137](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=la&timePeriod=2025&baseline=71680&household=49783)   |
| Married, Two Children, Median Household Income | [$423](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=la&timePeriod=2025&baseline=71680&household=49786)   |
| Married, Three Children, $500,000 Income       | [$5,616](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=la&timePeriod=2025&baseline=71680&household=49788) |

The changes in the tax code benefit all the households above, except for a single adult with no earnings as they had no previous tax liability. A single parent with one child earning $15,080 (Louisiana’s full-time [minimum wage](https://www.ncsl.org/labor-and-employment/state-minimum-wages) equivalent) would see their tax bill drop by $137. A married couple with two kids with earnings at the state’s [median household income](https://www.census.gov/quickfacts/fact/table/LA/POP060210) would gain $423 from the individual income tax changes. However, a family making $500,000 would see the largest increase in their net income by far, paying $5,616 less in taxes in 2025. Below is a graph displaying the change in net income for the third example based on household income.

**Figure 1: Change in Net Income for a Married Couple with Two Children Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*bhTvRZmrkutW2pUL)

## Statewide Impact 2025

Using PolicyEngine static modeling, the individual income tax provisions enacted in Louisiana’s special legislative session will cost the state [$1.3 billion for tax year 2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=la&timePeriod=2025&baseline=71680&household=49786), aligning with [Gov. Landry’s cost projection](https://apnews.com/article/tax-bill-louisiana-landry-ec1a84124c751f32b9dcee6174dc9af2). [82% of Louisiana residents](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=la&timePeriod=2025&baseline=71680&household=49786) would see an increase in their net income: 99% of those in the upper half of the income distribution and 65% of those in the bottom half. While the bottom tax rate rises from 1.85% to 3%, the higher standard deduction prevents filers from having a higher income tax liability.

**Figure 2: Winners and Losers of Louisiana Individual Income Tax Changes**

![](https://cdn-images-1.medium.com/max/2000/0*FUDVEC4_M1YfLgDT)

The reform cuts taxes by an average of [$709 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=la&timePeriod=2025&baseline=71680&household=49786), with the average amount rising at each income decile.

**Figure 4: Average Benefit of Louisiana Individual Income Tax Changes by Decile**

![](https://cdn-images-1.medium.com/max/2000/0*X4r5pcECxr0fRuwl)

The tax changes would reduce Louisiana’s poverty rate by 0.8% and deep child poverty rate by 1.5%, applying the Supplemental Poverty Measure. Furthermore, the reforms would increase the state’s Gini index of income inequality by 0.3%.

## Conclusion

The individual income tax changes signed into law by Gov. Jeff Landry will reduce state revenues by $1.3 billion in 2025. 82% of Louisiana residents will see an increase in their net income from the analyzed provisions, disproportionately those in higher-income households. The top quintile will receive 57% of the tax savings while the bottom quintile will receive 1.4%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.



---

---
# NEO Philanthropy Awards $200,000 Grant to PolicyEngine
Slug: neo-philanthropy
Date: 2024-12-18 09:30:00
Authors: Max Ghenis
Tags: us, featured
Description: Economic Mobility & Opportunity Fund supports expanding access to policy analysis tools.

---

PolicyEngine is pleased to announce that we have received an 18-month, $200,000 general operating support grant from [NEO Philanthropy](https://neophilanthropy.org/)'s Economic Mobility & Opportunity Fund. This funding will help advance our mission of democratizing policy analysis through our free, open-source microsimulation tools.

Through this support, PolicyEngine will continue expanding our technological capabilities and enhancing our platform that enables policymakers, researchers, journalists, and citizens to analyze how public policies affect individuals and communities. Our tools provide interactive visualizations of policy impacts across demographics, helping inform evidence-based policy discussions at federal and state levels.

"We're grateful for NEO Philanthropy's support in helping us expand access to sophisticated policy analysis tools," said Max Ghenis, co-founder and CEO of PolicyEngine. "This funding will strengthen our ability to serve diverse stakeholders who are working to understand and shape effective public policy."

_About PolicyEngine:_

PolicyEngine's free, open-source platform empowers users to analyze how public policies affect their households and communities through advanced microsimulation modeling and interactive data visualizations. Learn more at [policyengine.org](https://legacy.policyengine.org).



---

---
# Nuffield Foundation awards £250k to enhance PolicyEngine UK
Slug: uk-nuffield-grant
Date: 2024-12-19 14:00:00
Authors: Max Ghenis
Tags: uk, featured
Description: Grant will support expanding and localising tax-benefit microsimulation capabilities.

---

PolicyEngine has received a [£251,296 grant](https://www.nuffieldfoundation.org/project/enhancing-localising-and-democratising-tax-benefit-policy-analysis) from the Nuffield Foundation to enhance our UK tax-benefit microsimulation model. The one-year project will improve the comprehensiveness, accuracy, and accessibility of PolicyEngine UK, expanding its capabilities while growing its user community.

The funding will support several major expansions to PolicyEngine UK's modelling capabilities, including:

- Creation of representative micro-datasets for each local authority and constituency
- Integration of all childcare subsidies and major public service spending, including education, NHS, adult social care, and travel subsidies at the household level
- Development of an open dashboard validating PolicyEngine's outputs against other microsimulation models
- Implementation of user-centric, AI-capable design improvements

"Tax-benefit microsimulation is essential for understanding the impacts of fiscal policy, yet most models are proprietary or expensive," said Max Ghenis, CEO of PolicyEngine. "With the Nuffield Foundation's support, we'll make these tools more comprehensive and accessible to inform critical policy discussions across the UK."

The project includes extensive community engagement through training workshops and a user symposium, helping policy professionals and other stakeholders leverage PolicyEngine's capabilities. This builds on PolicyEngine's existing adoption by think tanks, academics, and parliamentarians.

PolicyEngine's enhanced UK model will remain free and open-source, advancing our mission to democratise policy analysis tools. Organisations interested in using or contributing to PolicyEngine can learn more at [policyengine.org/uk](policyengine.org/uk).



---

---
# New AI Feature Helps People Understand Their Taxes and Benefits
Slug: us-household-ai
Date: 2024-12-26 09:00:00
Authors: Anthony Volk
Tags: us, featured, ai
Description: We’re applying large language models to clarify complex policy rules.

---

PolicyEngine has developed a new artificial intelligence feature that transforms complex tax and benefit calculations into clear, accessible explanations. This innovation emerged from our participation in the Georgetown Beeck Center’s [Policy2Code Challenge](https://digitalgovernmenthub.org/get-involved/policy2code/) with a central question: How can we help users better understand their tax and benefit eligibility?

<center>[Interactive: fnuDyLKpt90]</center>

Users frequently encounter intricate calculations spanning multiple programs, each with distinct thresholds, phase-outs, and dependencies. Our solution combines PolicyEngine’s open-source rules engine with artificial intelligence to explain these calculations in plain language, building on our [previous work applying AI to policy analysis](https://policyengine.org/us/research/gpt-analysis).

# Technical architecture

The system integrates PolicyEngine’s tax-benefit rules with Anthropic’s Claude 3.5 Sonnet API. When calculating program amounts like the Child Tax Credit or Supplemental Security Income, PolicyEngine processes thousands of intermediate calculations involving household income, deductions, and other eligibility factors. Our new explanation system passes these complex intermediate calculations to the AI system, which generates natural language explanations.

For example, consider [a family of four in Connecticut](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=50156) with a three-year-old child and $47,000 income. PolicyEngine calculates that they qualify for $475 in annual benefits from WIC, the Special Supplemental Nutrition Program for Women, Infants, and Children. Users can now click a tooltip followed by an “**Explain with AI ✨**” button to receive a comprehensive explanation of their eligibility and potential changes that could affect their benefit amount.

![](https://cdn-images-1.medium.com/max/2000/0*x0qcBrqb0Zapj8Ob)

The AI system analyzes both final outcomes and the intermediate calculations contributing to them. Many variables in PolicyEngine’s system involve dozens of intermediate steps, calculated at both monthly and annual levels. This new feature makes these calculation chains transparent and comprehensible.

# Applications and impact

This explanation tool serves diverse needs across the policy ecosystem. Whether you’re a household trying to understand your benefits, a professional analyzing complex policy interactions, or a researcher exploring program mechanics, the system breaks down intricate calculations into clear explanations.

Following PolicyEngine’s existing policy analysis framework, the explanations adapt to different audiences, ranging from simplified overviews to detailed technical analyses. This flexibility makes complex policy calculations accessible while preserving the depth needed for technical users.

# Development roadmap

Having launched this feature in the PolicyEngine web app, we will extend it to [API](https://legacy.policyengine.org/us/api) customers in Q1 2025. PolicyEngine welcomes feedback on improving accessibility across user groups as we continue development.

---

_Max Ghenis, Pavel Makarchuk, Rachel Lawrie, and Li-Heng Pan also contributed to this feature._



---

---
# New AI feature helps people understand their taxes and benefits
Slug: uk-household-ai
Date: 2024-12-26 09:00:00
Authors: Anthony Volk
Tags: uk, featured, ai
Description: We’re applying large language models to clarify complex policy rules.

---

PolicyEngine has developed a new artificial intelligence feature that transforms complex tax and benefit calculations into clear, accessible explanations. This innovation emerged from our participation in the Georgetown Beeck Center’s [Policy2Code Challenge](https://digitalgovernmenthub.org/get-involved/policy2code/) with a central question: How can we help users better understand their tax and benefit eligibility?

<center>[Interactive: fnuDyLKpt90]</center>

Users frequently encounter intricate calculations spanning multiple programmes, each with distinct thresholds, phase-outs, and dependencies. Our solution combines PolicyEngine’s open-source rules engine with artificial intelligence to explain these calculations in plain language, building on our [previous work applying AI to policy analysis](https://policyengine.org/uk/research/gpt-analysis).

# Technical architecture

The system integrates PolicyEngine’s tax-benefit rules with Anthropic’s Claude 3.5 Sonnet API. When calculating programme amounts like Universal Credit or Income Tax, PolicyEngine processes thousands of intermediate calculations involving household income, deductions, and other eligibility factors. Our new explanation system passes these complex intermediate calculations to the AI system, which generates natural language explanations.

For example, consider [an individual earning £15,000](https://legacy.policyengine.org/uk/household?focus=householdOutput.netIncome&household=50185). PolicyEngine calculates that they pay £486 in Income Tax. Users can now click a tooltip followed by an “**Explain with AI ✨**” button to receive a comprehensive explanation of this amount, including the Personal Allowance and potential changes that could affect their tax.

The AI system analyses both final outcomes and the intermediate calculations contributing to them. Many variables in PolicyEngine’s system involve dozens of intermediate steps, calculated at both monthly and annual levels. This new feature makes these calculation chains transparent and comprehensible.

# Applications and impact

This explanation tool serves diverse needs across the policy ecosystem. Whether you’re a household trying to understand your taxes and benefits, a professional analysing complex policy interactions, or a researcher exploring programme mechanics, the system breaks down intricate calculations into clear explanations.

Following PolicyEngine’s existing policy analysis framework, the explanations adapt to different audiences, ranging from simplified overviews to detailed technical analyses. This flexibility makes complex policy calculations accessible while preserving the depth needed for technical users.

# Development roadmap

Having launched this feature in the PolicyEngine web app, we will extend it to [API](https://legacy.policyengine.org/uk/api) customers in Q1 2025. PolicyEngine welcomes feedback on improving accessibility across user groups as we continue development.

---

_Max Ghenis, Pavel Makarchuk, Rachel Lawrie, and Li-Heng Pan also contributed to this feature._



---

---
# PolicyEngine US Launches Behavioral Responses
Slug: us-behavioral-responses
Date: 2024-12-27 09:00:00
Authors: Max Ghenis, Nikhil Woodruff, Jason DeBacker, Vahid Ahmadi
Tags: us, policy, behavioral-responses, featured
Description: We've expanded our modeling framework to capture how policy changes affect labor supply.

---

_We’re grateful to [Arnold Ventures](https://www.arnoldventures.org/) for supporting this model enhancement and research._

When faced with new public policies, Americans adjust their economic behaviors. These policy changes — whether at the federal or state level — set off chain reactions across society. Workers [modify their working hours](https://www.aeaweb.org/articles?id=10.1257/aer.101.3.471), investors change [when to realize their gains](https://www.aeaweb.org/articles?id=10.1257/jel.50.1.3), and businesses [reshape their practices](https://www.jstor.org/stable/2117913). Looking at policies through a static lens misses these dynamic human responses to changing incentives. PolicyEngine incorporates two fundamental behavioral responses to policy changes, which we explain in this report:

1. Income effects on labor supply

1. Substitution effects on labor supply

How do we measure behavioral responses to policy changes? The key lies in _elasticities_, which measure how people respond to policy changes. A larger elasticity signals a stronger behavioral shift, while a smaller one indicates more modest adjustments. PolicyEngine lets users quickly apply elasticities from the Congressional Budget Office or set their own. This report describes these responses and how they affect results in our microsimulation model.

# How income and substitution effects affect labor supply

In PolicyEngine, we model how Americans adjust their work hours through two key mechanisms: income and substitution effects. Income effects show how people might choose more leisure time when their income increases. Substitution effects capture how workers respond when their take-home pay for extra hours changes.

# Income elasticity

How do people adjust their work hours when they become better off? The income elasticity measures this behavior, quantifying how Americans modify their work patterns when their take-home pay changes through taxes and transfers. Following the [Congressional Budget Office (CBO)](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4)’s central estimate, PolicyEngine sets the default income elasticity at **-0.05**. In practical terms, a 10% increase in after-tax income results in an average of 0.5% decrease in work.

# Substitution elasticity

How much people work often depends on their take-home pay per extra hour. The substitution elasticity measures this relationship — how work habits change when the reward for additional hours shifts. For instance, when higher tax rates or steeper benefit phase-outs reduce the pay from extra hours, workers might cut back on overtime or reduce part-time hours. PolicyEngine implements the [Congressional Budget Office](https://www.cbo.gov/sites/default/files/112th-congress-2011-2012/reports/43674-laborsupplyfiscalpolicy.pdf#page=4)’s heterogeneous substitution elasticities, which vary by income level. The elasticities range from 0.31 for the lowest income decile to 0.22 for the highest deciles among primary earners, with secondary earners at 0.32. This means when workers in the lowest income decile keep 10% less of their earnings from each additional hour, they typically reduce their work by 3.1%, while higher-income workers reduce their work by 2.2%. The full range of elasticities by income group is shown in the table below.

![](https://cdn-images-1.medium.com/max/3200/0*fG4dxMjngZk8_UA-)

# A practical example

To see how these elasticities work in practice, let’s examine how a Massachusetts worker earning $50,000 annually would respond to a potential increase in the state income tax rate from 5% to 6%:

| Measure                  | Baseline                                                                                                | Reform                                                                                                                                                              | Difference      |
| :----------------------- | :------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------------- |
| Hourly wage              | $25.00                                                                                                  | $25.00                                                                                                                                                              | \-              |
| Annual hours             | 2,000                                                                                                   | 2,000                                                                                                                                                               | \-              |
| Annual Earnings          | $50,000                                                                                                 | $50,000                                                                                                                                                             | \-              |
| State Income Tax Rate    | 5%                                                                                                      | 6%                                                                                                                                                                  | \+1pp           |
| Net income               | [$40,034](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=49486) | [$39,598](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&region=ma&timePeriod=2025&baseline=2&reform=70814&mode=full&household=49486) | \-$436 (1.09%)  |
| Marginal Tax Rate        | 24.7%                                                                                                   | 25.7%                                                                                                                                                               | \+1pp           |
| Net Marginal Hourly Wage | $18.83                                                                                                  | $18.58                                                                                                                                                              | \-$0.25 (-1.3%) |

Our Massachusetts worker earns $25.00 per hour, working 2,000 hours annually for $50,000 total earnings. Their net income changes from $40,034 to $39,598 due to an increase in state income tax from 5% to 6%. This $436 reduction represents a 1.09% drop in their current net income ($436 / $40,034 = 0.0109 = 1.09%). The percentage differs from the 1pp tax rate increase because the tax applies to gross income while the percentage change is relative to net income, which is lower due to taxes and deductions.

Under the policy change, their net marginal hourly wage would fall from $18.83 to $18.58; this $0.25 drop is 1% of their $25 nominal wage and represents a 1.3% fall in their net marginal wage. It’s important to note that the change in net income (-1.09%) is smaller than the 1% increase in the state tax rate due to several factors:

- The standard deduction reduces taxable income before the tax rate is applied

- The tax increase only affects state taxes, not federal taxes or other deductions

- The percentage change is calculated against total take-home pay, which includes all adjustments and deductions

To understand these calculations in detail, let's examine how this worker responds to the policy change. Applying the CBO's elasticities, this reform triggers two behavioral responses:

## Substitution effect

| Component                 | Value     | Calculation                           |
| ------------------------- | --------- | ------------------------------------- |
| Initial net marginal wage | $18.83/hr | $25 \* (1-MTR_baseline)               |
| New net marginal wage     | $18.58/hr | $25 \* (1-MTR_reform)                 |
| Relative change           | -1.3%     | ($18.58 - $18.83) / $18.83            |
| Substitution elasticity   | 0.25      | Based on income percentile (40th)[^1] |
| Hours worked change       | -0.325%   | -1.3% × 0.25                          |
| Annual hours change       | -6.5 hrs  | -0.325% × 2,000 hrs                   |
| Earnings impact           | -$162.50  | -6.5 hrs × $25/hr                     |

## Income effect

| Component           | Value     | Calculation                   |
| ------------------- | --------- | ----------------------------- |
| Initial net income  | $40,034   |                               |
| New net income      | $39,598   |                               |
| Relative change     | -1.09%    | ($39,598 - $40,034) / $40,034 |
| Income elasticity   | -0.05     | Standard CBO value            |
| Hours worked change | +0.054%   | -1.09% × -0.05                |
| Annual hours change | +1.08 hrs | +0.054% × 2,000 hrs           |
| Earnings impact     | +$27.00   | +1.08 hrs × $25/hr            |

Combining these opposing effects yields a net reduction of 0.271% in work hours. For our Massachusetts worker, this translates to approximately 5.4 fewer work hours (0.271% of 2,000) and $135.5 less in earnings per year (5.4 hours × $25/hour).

| Component               | Value     | Source                |
| ----------------------- | --------- | --------------------- |
| Total hours change      | -5.42 hrs | -6.5 hrs + 1.08 hrs   |
| Percent change in hours | -0.271%   | -5.42 hrs / 2,000 hrs |
| Total earnings impact   | -$135.50  | (-$162.50) + $27.00   |

[^1]: The substitution elasticity varies across the income distribution. $50,000 in earnings places the worker at the [40th earnings percentile](https://github.com/PolicyEngine/policyengine-us/blob/31d7b3359dc3de2aa1523408be0f2b87d360e4a5/policyengine_us/variables/gov/simulation/labor_supply_response/labor_supply_response.py#L114), (barely) mapping to the fifth decile. Based on CBO's labor supply elasticity table, this corresponds to an elasticity of 0.25 for primary earners, meaning people in these deciles work 2.5% less when they keep 10% less from each additional hour after taxes and transfers.

While this example shows how behavioral responses affect an individual worker, we can use PolicyEngine’s microsimulation to examine how these responses impact government revenues and distributional effects.

# Applying behavioral responses in PolicyEngine

By default, PolicyEngine operates with no behavioral responses. To activate behavioral responses, users can either:

1. Apply CBO’s behavioral responses with one click

1. Set their own elasticities using the same structure as the CBO’s (single income elasticity and substitution elasticities varying by income and primary/secondary)

The fastest way to apply behavioral responses is to toggle “Apply CBO behavioral responses” in the baseline policy section, as shown below.

![](https://cdn-images-1.medium.com/max/2000/0*4Nzt1Zq_2_A9zHiR)

This sets each of the elasticities per CBO’s table. Alternatively, you can navigate to the Parameters tab and find the elasticity settings under _Simulation > Labor supply responses_ as shown below.

![](https://cdn-images-1.medium.com/max/3200/0*El8byrS7rBWfNism)

When users input any non-zero elasticities, the model incorporates behavioral responses into its tax-benefit calculations. For each policy reform simulation, the model first calculates how policy changes affect both income and tax rates. Then, it estimates two behavioral changes:

- How changes in total income influence work decisions

- How marginal tax changes affect work hours

Since each person’s earnings can impact household net income differently, the model calculates marginal tax rates for each of the top three earners and applies their labor supply responses separately.

![](https://cdn-images-1.medium.com/max/3200/0*s7N9nkrEjq1kO6OV)

After adjusting how much each worker earns, we apply the microsimulation model again to calculate their new taxes and benefits. For example, if elasticities imply that a reform will increase an earner’s labor supply (and they face a positive marginal tax rate), they will also pay more in tax after the final step.

# Macro effects of behavioral responses

To demonstrate how behavioral responses affect the broader fiscal impact, let’s examine the revenue implications of raising the Massachusetts state income tax rate from 5% to 6%. [Applying CBO’s elasticities](https://legacy.policyengine.org/us/policy?focus=policyOutput.laborSupplyImpact.hours&reform=72611&region=ma&timePeriod=2025&baseline=2), we find that the reform would reduce hours worked by 0.24%. While the income effect raises employment by 1,700 full-time equivalents (since the tax lowers the net income of affected workers), the substitution effect lowers employment by 9,900 full-time equivalents (since affected workers see their net-of-tax wage rate fall), for a net effect of 8,200 FTEs.

![](https://cdn-images-1.medium.com/max/3200/0*bJLkz2SVHiZfy04i)

In turn, [earnings fall 0.27%](https://legacy.policyengine.org/us/policy?focus=policyOutput.laborSupplyImpact.earnings.overall.relative&reform=72611&region=ma&timePeriod=2025&baseline=2); this exceeds the hours worked effect because low-income workers, who pay no state tax under current law due to various deductions, exemptions, and non-refundable credits, are unaffected by the reform. Extended visualizations show how these effects vary with income decile.

![](https://cdn-images-1.medium.com/max/3200/0*-MxdT_8m74KZCM5C)

Finally, the reduced earnings in turn reduce the revenue projection from [$3.6 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72337&region=ma&timePeriod=2025&baseline=2) without behavioral responses to [$3.2 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72338&region=ma&timePeriod=2025&baseline=2) with them (an 11% reduction). PolicyEngine estimates the effect of behavioral responses on other outcomes too; for example, without behavioral responses, the tax reform lowers the net income share held by the top 10% by [0.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=72337&region=ma&timePeriod=2025&baseline=2) without behavioral responses, but [0.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=72338&region=ma&timePeriod=2025&baseline=2) with them.

# Conclusion

In this report, we explain how PolicyEngine models two key behavioral responses:

1. Income effect for labor supply
   _Constant elasticity of -0.05_

1. Substitution effect for labor supply
   _Elasticity varying between 0.22 and 0.32 depending on income and whether the worker is primary or secondary within the household_

While we have focused on these two core elasticities, PolicyEngine continues to expand its behavioral modeling capabilities; for example, we are now working on adding capital gains responses. The platform’s flexibility allows users to customize behavioral response assumptions, including labor supply elasticities, enabling a more nuanced analysis of public policy impacts.



---

---
# PolicyEngine UK in 2024: A year in review
Slug: uk-year-in-review-2024
Date: 2024-12-28 09:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: uk, year-in-review, featured
Description: From AI-powered analysis to election impact, we transformed policy research through technology.

---

In 2024, PolicyEngine UK made significant strides in democratising policy analysis through technological innovation and comprehensive coverage of major policy developments. Together with our [achievements in the US](https://policyengine.org/us/research/us-year-in-review-2024), we've expanded the frontier of evidence-based policymaking on both sides of the Atlantic. Here’s a detailed look at our achievements and impact this year.

<center>[Interactive: 1JAjg_sBZSs]</center>

## Platform evolution

Our platform underwent major technological advances to enhance both capability and accessibility:

### Behavioural response modelling

We introduced sophisticated [behavioural response modelling](https://policyengine.org/uk/research/behavioural-responses) for both labour supply and capital gains, enabling more nuanced analysis of how policy changes influence individual economic decisions. This advancement allows users to better understand the dynamic effects of tax and benefit reforms.

### AI-powered explanations

Our new [AI-powered tax and benefit explanations](https://policyengine.org/uk/research/uk-household-ai) break down complex calculations into clear, understandable language. This feature makes policy analysis more accessible to users regardless of their technical background.

![](https://cdn-images-1.medium.com/max/2000/0*JlUblY7SyFZ-6W-2)

### Enhanced user experience

The introduction of user accounts now allows researchers and policy analysts to save and track their policy simulations over time, facilitating more comprehensive longitudinal analysis.

## Policy analysis impact

### Election year coverage

In preparation for the election, we provided detailed analysis of major party manifestos:

- [Labour](https://policyengine.org/uk/research/labour-2024-manifesto)

- [Conservatives](https://policyengine.org/uk/research/conservative-2024-manifesto)

- [Liberal Democrats](https://policyengine.org/uk/research/lib-dem-2024-manifesto)

Our innovative [manifesto comparison calculator](https://policyengine.org/uk/2024-manifestos) enabled citizens to understand both personal and societal impacts of each party’s platform.

![](https://cdn-images-1.medium.com/max/2198/0*dsVB47oKiySshCUP)

### Budget analysis

We delivered comprehensive analysis of both major fiscal events:

Our [Spring Budget 2024](https://policyengine.org/uk/research/uk-2024-spring-budget) assessment covered:

- National Insurance reforms

- High Income Child Benefit Charge adjustments

- Fuel duty impact analysis

For the Autumn Budget, we examined:

- [Changes to employer National Insurance](https://policyengine.org/uk/research/autumn-budget-24-employer-ni)

- [Capital Gains Tax reforms](https://policyengine.org/uk/research/cgt-autumn-budget)

- [Private school VAT implementation](https://policyengine.org/uk/research/vat-school-comparison)

- [Fuel duty freeze continuation](https://policyengine.org/uk/research/autumn-budget-24-fuel-duty)

![](https://cdn-images-1.medium.com/max/2000/0*uWZp_57V9_wILFjm)

## Future developments

![](https://cdn-images-1.medium.com/max/2000/0*9jZJm9_IHxclHfdA)

With [support from the Nuffield Foundation](https://policyengine.org/uk/research/uk-nuffield-grant), we’re embarking on several initiatives to further enhance PolicyEngine UK in 2025:

- Creating representative micro-datasets for each local authority and constituency

- Integrating childcare subsidies and public service spending analysis

- Developing an open dashboard for model validation

- Continuing [monthly training sessions](https://us06web.zoom.us/meeting/register/uAPu44gCRZuXJv7lZvM0GQ) we started in the fall

![](https://cdn-images-1.medium.com/max/2592/0*Zssa4z97z_5Ye5Ws)

## Learn more

Watch our [end-of-year webinar ](https://www.youtube.com/watch?v=1JAjg_sBZSs)for a comprehensive review of our achievements and platform capabilities. Visit [policyengine.org](https://legacy.policyengine.org) to explore our tools and contribute to evidence-based policy discussions.



---

---
# PolicyEngine US in 2024: A year in review
Slug: us-year-in-review-2024
Date: 2024-12-29 09:00:00
Authors: Max Ghenis, Nikhil Woodruff
Tags: us, year-in-review, featured
Description: From state-level modeling to AI-powered analysis, we expanded the frontier of policy research through technology.

---

In 2024, PolicyEngine US achieved significant milestones in democratizing policy analysis through technological innovation and comprehensive coverage of major policy developments. Together with our [achievements in the UK](https://policyengine.org/uk/research/uk-year-in-review-2024), we've expanded the frontier of evidence-based policymaking on both sides of the Atlantic.Here’s a detailed look at our achievements and impact this year.

## Evolving the platform

Our platform underwent major technological advances to enhance both capability and accessibility. We launched the [Enhanced Current Population Survey dataset](https://policyengine.org/us/research/enhanced-cps-beta), which leverages machine learning to provide more accurate microsimulation modeling. This advancement allows for more precise analysis of policy impacts across different demographic groups.

We introduced comprehensive [state income tax models](https://policyengine.org/us/research/state-tax-model-beta) for all 50 states and DC, enabling analysis of state-specific reforms and their interaction with federal policy.

![](https://cdn-images-1.medium.com/max/2000/0*uDx8olHGnjSz4CbK)

Our new [behavioral response capabilities](https://policyengine.org/us/research/us-behavioral-response) capture how policy reforms affect labor supply based on customizable elasticities, enabling more nuanced analysis of how tax and benefit changes influence individual economic decisions.

This fall, we launched our [AI-powered tax and benefit explanations system](https://policyengine.org/us/research/us-household-ai), which translates complex calculations into clear, understandable language. This feature makes policy analysis more accessible to users regardless of their technical background.

![](https://cdn-images-1.medium.com/max/2000/0*i6vTPu1E2W-ujch_)

## Informing the electorate

During this election year, we developed comprehensive analyses of major policy proposals, including a [calculator](https://legacy.policyengine.org/us/2024-election-calculator) showing the personal impacts of presidential candidates’ tax plans. We analyzed Harris’ [Child Tax Credit](https://policyengine.org/us/research/harris-ctc) and [Earned Income Tax Credit](https://policyengine.org/us/research/harris-eitc) expansions, as well as Trump’s [Social Security tax exemption](https://policyengine.org/us/research/social-security-tax-exemption) and [Tax Cuts and Jobs Act extension](https://policyengine.org/us/research/tcja-extension). Our analysis extended to state-level policies, including the [Oregon Rebate ballot measure](https://policyengine.org/us/research/oregon-rebate).

![](https://cdn-images-1.medium.com/max/3200/0*kPmEReMyo2sa9vZ-)

## Expanding benefit access and personal tax insights

We broadened our suite of specialized calculators and tools in 2024, launching the country’s first standalone [Child Tax Credit calculator](https://legacy.policyengine.org/us/child-tax-credit-calculator) and introducing [GiveCalc](https://policyengine.org/us/research/givecalc) to help donors understand the tax implications of their charitable contributions. Our API now powers innovative services like [MyFriendBen](https://www.myfriendben.org/), which received a [$2.4 million grant](http://awarded) from the Bill and Melinda Gates Foundation, and [Benefit Navigator](https://www.imaginela.org/benefit-navigator), which serves over 500 case managers across Los Angeles County.

## Growing our impact

Our research and tools gained recognition across sectors throughout 2024. We presented our work at major academic conferences including the National Tax Association Spring Symposium and Annual Conference, APPAM, BenCon, and the Open Sustainability Summit. Universities including UC Berkeley, Northwestern University, and George Mason University invited us to share our research.

Our analysis informed policy discussions at various levels, from Congress — where Rep. Morgan McGarvey [referenced our work](https://mcgarvey.house.gov/media/press-releases/congressman-morgan-mcgarvey-introduces-young-adult-tax-credit-act) in the Young Adult Tax Credit Act — to think tanks, with organizations like the Niskanen Center utilizing our tools for [policy analysis](https://policyengine.org/us/research/niskanen-center-analysis).

## Planning for a transformative 2025

![](https://cdn-images-1.medium.com/max/2000/0*M-rBYeowks-1OEkn)

Looking ahead to 2025, we’re expanding our capabilities with API access to our AI-powered explanation system launching in Q1. We’ll continue enhancing our state-level analysis capabilities, expanding behavioral response modeling, and developing additional policy reform calculators to further democratize sophisticated policy analysis, especially in a critical year full of tax and benefit policy debates at all levels of government.

## Acknowledging our support

This work wouldn’t be possible without support from [NEO Philanthropy](https://policyengine.org/us/research/neo-philanthropy), [Arnold Ventures](https://www.arnoldventures.org/), the [Gerald Huff Fund for Humanity](https://fundforhumanity.org/), the [PSL Foundation](http://psl-foundation.org), and the Corvus Oaks Foundation. We’re also grateful to our API customers [MyFriendBen](https://www.myfriendben.org/) and [Benefit Navigator](https://www.imaginela.org/benefit-navigator) for their continued collaboration.

Visit [policyengine.org](https://legacy.policyengine.org) to explore our tools and contribute to evidence-based policy discussions.



---

---
# Analysis of the Family First Act
Slug: family-first-act
Date: 2025-01-17 09:00:00
Authors: Pavel Makarchuk
Tags: us, policy, featured
Description: We project that Representative Blake Moore's Child Tax Credit bill would raise revenue and reduce poverty.

---

On January 13th, Congressman Blake Moore (R-UT) [introduced](https://blakemoore.house.gov/media/press-releases/congressman-blake-moore-introduces-legislation-to-enhance-the-child-tax-credit-and-provide-tax-relief-for-parents) the [Family First Act (FFA)](https://blakemoore.house.gov/imo/media/doc/ctc_bill_text.pdf), which would reform several tax provisions starting in 2026 after the Tax Cuts and Jobs Act expires. The reform primarily expands the Child Tax Credit and extends the cap on state and local tax deductions, while also repealing dependent exemptions and head of household filing status, and reforming the Earned Income Tax Credit and Child and Dependent Care Credit. This analysis uses PolicyEngine's microsimulation model to estimate its impacts on household incomes, poverty, inequality, and federal revenue.

## Defining the Reform

Here we describe each provision of the Family First Act. See **Table A.1** in the Appendix for a detailed comparison of FFA, current policy (under TCJA), and current law (post-TCJA).

### Child Tax Credit (CTC)

The FFA expands the CTC from $1,000 to $4,200 for children up to age five and $3,000 for children ages six to 17, up to six children per filer. It phases in from $0 to $20,000 of earnings and phases out at 5% above $200,000 ($400,000 joint), retaining the TCJA thresholds of 2018–2025. Under current law in 2026, the threshold would revert to $75,000 ($110,000 joint).

### Pregnant Mother’s Credit

The FFA adds a pregnant mother’s credit of up to $2,800 for each newborn. It phases in until $10,000 of earnings.

### Reform of the Earned Income Tax Credit (EITC)

The FFA consolidates eight existing EITC household types (single/married and 0/1/2/3+ children) into four (single/married and 0/1+ children). The phase-in rate remains 7.65% for households without children and 34% for those with children. The phase-out rate becomes 10% for households without children and 25% for households with children, compared to 7.65% and up to 21.06% today.

### Repeal of Head of Household Filing Status

The FFA repeals head of household filing status, which increases tax thresholds for single parents under current policy.

### Repeal of Dependent Exemptions

The TCJA repealed dependent exemptions from 2018 to 2025. Starting in 2026, these exemptions would return at $5,300. The FFA continues their repeal, maintaining the TCJA approach.

### Repeal Child Portion of the Child and Dependent Care Credit (CDCC)

The FFA limits the CDCC to dependent care expenses for individuals who are 18 or older and unable to self-care due to disability. Currently, the CDCC is available for children under 13.

### Cap the State and Local Tax (SALT) Deduction

The $10,000 SALT deduction cap from the TCJA is scheduled to expire in 2026. The FFA would keep the $10,000 cap in place.

## Household Impacts of the Family First Act

Consider a single parent with two children, ages five and ten, earning $30,000 in Utah. Under the FFA, [household net income increases by $1,835](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2&household=48565). The increase comes from a $5,395 expansion in the Child Tax Credit, partially offset by reductions in tax credits and increased tax liability. The federal EITC falls by $1,688, and the Utah EITC, which matches the federal credit, decreases by $338. The household pays $1,854 more in tax before credits due to the elimination of both dependent exemptions and head of household filing status.

Figure 1 shows how this household's experience [varies with income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2&household=48565). Net income rises until earnings reach $188,000, after which the gains diminish and eventually become losses. At $350,000 of earnings, the household faces its largest reduction in net income of $5,900.

![Figure 1: FFA effect on net income for a single parent in Utah with two children ages 5 and 10](https://cdn-images-1.medium.com/max/3200/0*x8MiEDhoh0QJu5gI)

Figure 2 shows how the reform [alters the household's marginal tax rates](https://legacy.policyengine.org/us/household?focus=householdOutput.mtr&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2&household=48565), particularly if they earn under $50,000, where more programs change such as the Earned Income Tax Credit and dependent exemptions.

![Figure 2: FFA effect on marginal tax rates for a single parent in Utah with two children ages 5 and 10](https://cdn-images-1.medium.com/max/3200/0*karwlvhwpukVHknG)

The reform's effects vary with marital status, number of children, income, and childcare expenses. Figure 3 shows how these factors affect the impact to net income, holding child ages at ages 6 to 12. These impacts differ from those in Figure 1 as they assume (a) all children are age 6 and 12 (rather than 5 and 10), and (b) the household is in Texas, which has no income tax or credits (rather than Utah).

![Figure 3: FFA effect on net income by marital status, children, income, and childcare expenses](https://cdn-images-1.medium.com/max/2656/0*lKs_ij6_V1sEyJdU)

Single-parent households can see net income decrease by up to $10,000, or more with childcare expenses, with the largest reductions occurring at incomes between $300,000 and $400,000. The magnitude of change increases with the number of children in the household. Married households, in contrast, experience net income increases of up to $4,000-$5,000 until their earnings exceed $400,000. As with single-parent households, those with more children see larger changes in net income due to the expanded Child Tax Credit.

When households have childcare expenses, the impacts shift. A household with $10,000 in childcare expenses sees up to $3,000 less in net income due to changes in the Child and Dependent Care Credit. Married households maintain net gains until reaching about $420,000 in earnings, after which the gains gradually decline. Single households experience a steeper decline in net income as earnings grow, reflecting the reformed EITC structure.

## National Impacts of the Family First Act

We estimate national impacts using the PolicyEngine US microsimulation model. See Appendix B for methodological details.

### Federal Revenue Effects

The FFA raises [$20 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2) in net federal revenue in 2026.
While the Child Tax Credit expansion (including the pregnant mother's credit) costs $170 billion, other provisions raise $190 billion-—primarily the SALT deduction cap which raises $111 billion. Figure 4 shows the revenue impact of each provision.

![Figure 4: Federal budgetary impacts of Family First Act provisions in 2026](/images/posts/family-first-act/FFA-waterfall.png)

Over the 2025-2034 budget window, the reform raises $505 billion, with federal revenue gains growing each year as shown in Figure 5.

![Figure 5: Federal budgetary impacts of Family First Act from 2025 to 2034](/images/posts/family-first-act/FFA-10-year-impact.png)

### State Revenue Effects

State revenues rise by [$3.9 billion in 2026](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2), largely from state-level credits that match federal amounts. States such as Colorado (25%), Connecticut (40%), Louisiana (5%), and others provide income tax credits that matching the federal EITC amount by varying percentages. Additionally, states such as Arkansas (20%), Colorado (up to 50%), Delaware (50%), and others match the federal CDCC amount under state-specific Child and Dependent Care Income Tax Credits. We consider these state impacts in the following distributional analysis.

### Changes in Income Distribution

The reform affects household incomes across the income distribution, as shown in Figure 6. [Net income rises for 36% of people and falls for 16%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2). The ninth income decile sees the highest share of households with income gains (47%), while the top decile has the highest share with income losses (49%).

![Figure 6: Distribution of gains and losses](https://cdn-images-1.medium.com/max/3200/0*f-gK9uscrzd-5170)

### Poverty Reduction

The reform [reduces poverty by 5.9%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2) overall (a 1.5 percentage point reduction in the Supplemental Poverty Measure). As shown in Figure 7, child poverty falls by 10.7%, while deep poverty—households below half the poverty line—declines by 2.1%.

![Figure 7: Poverty reduction by age group](https://cdn-images-1.medium.com/max/3200/0*Xp698QhswZMUp5u6)

The reform also reduces income inequality, [lowering the Gini index by 1.4%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2). The share of total income held by the top 1% of households falls by 3.1%.

Finally, the reform increases the [prevalence of cliffs](https://legacy.policyengine.org/us/policy?focus=policyOutput.cliffImpact&reform=73854&region=enhanced_us&timePeriod=2026&baseline=2) by 0.07% and reduces the severity of cliffs by 0.2%.

## Conclusion

Congressman Blake Moore’s Family First Act modifies multiple tax policies. The bill changes the Earned Income Tax Credit, Child Tax Credit, Child and Dependent Care Credit, and SALT deduction, and it repeals head of household filing status and dependent exemptions. We project that these reforms would raise $505 billion in federal revenues from 2026 to 2034, with the amount increasing annually. According to our simulation, the reform raises net income for 36% of the population and reduces poverty by 5.9% (and child poverty by 10.7%).

## Appendix A: Detailed Policy Comparison

### Table A.1: FFA Compared to Current Policy and Current Law (2026)

| Program                         | Feature               | Current Policy (2023–25)                                                                                  | Current Law (2026)                                                                                        | FFA                                                                                                           |
| ------------------------------- | --------------------- | --------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| Child Tax Credit                | Maximum Credit Amount | $2,000 per child                                                                                          | $1,000 per child                                                                                          | $4,200 per child under 6; $3,000 per child under 18                                                           |
| Child Tax Credit                | Phase-out Start       | $200,000 ($400,000 joint)                                                                                 | $75,000 ($110,000 joint)                                                                                  | $200,000 ($400,000 joint)                                                                                     |
| Child Tax Credit                | Phase-out Rate        | 5%                                                                                                        | 5%                                                                                                        | 5%                                                                                                            |
| Child Tax Credit                | Phase-in Details      | Up to $1,400 refundable, phases in at 15% of earnings above $2,500                                        | Up to $1,000 refundable, phases in at 15% of earnings above $3,000                                        | Phases in for earnings up to $20,000 at earnings/20,000 rate                                                  |
| Child Tax Credit                | Child Cap             | None                                                                                                      | None                                                                                                      | Maximum 6 children                                                                                            |
| Pregnant Mother's Credit        | Maximum Credit Amount | None                                                                                                      | None                                                                                                      | $2,800 per newborn child                                                                                      |
| Pregnant Mother's Credit        | Phase-in Requirements | None                                                                                                      | None                                                                                                      | Phases in for earnings up to $10,000 at earnings/10,000 rate                                                  |
| EITC                            | Phase-in Rate         | 7.65% (0 children); 34% (1 child); 40% (2 children); 45% (3+ children)                                    | 7.65% (0 children); 34% (1 child); 40% (2 children); 45% (3+ children)                                    | 7.65% (0 children); 34% (with children)                                                                       |
| EITC                            | Maximum Credit Amount | $649 (0 children); $4,328 (1 child); $7,152 (2 children); $8,046 (3+ children)                            | $662 (0 children); $4,413 (1 child); $7,292 (2 children); $8,204 (3+ children)                            | Single: $700 (0 children), $4,300 (with children); Married: $1,400 (0 children), $5,000 (with children)       |
| EITC                            | Phase-out Start       | Single: $10,620 (0 children), $23,350 (1+ children); Married: $17,730 (0 children), $30,470 (1+ children) | Single: $10,830 (0 children), $23,810 (1+ children); Married: $18,080 (0 children), $31,060 (1+ children) | Single: $10,000 (0 children), $33,000 (with children); Married: $20,000 (0 children), $43,000 (with children) |
| EITC                            | Phase-out Rate        | 7.65% (0 children); 15.98% (1 child); 21.06% (2+ children)                                                | 7.65% (0 children); 15.98% (1 child); 21.06% (2+ children)                                                | 10% (0 children); 25% (with children)                                                                         |
| Child and Dependent Care Credit | Eligibility           | Children under 13 and dependents/spouse physically/mentally incapable of self-care                        | Children under 13 and dependents/spouse physically/mentally incapable of self-care                        | Only dependents/spouse physically/mentally incapable of self-care who are 18+                                 |
| Dependent Exemptions            | Amount                | $0                                                                                                        | $5,300                                                                                                    | $0                                                                                                            |
| Head of Household Status        | Status                | Active                                                                                                    | Active                                                                                                    | Repealed                                                                                                      |
| SALT Deduction                  | Cap                   | $10,000 per filer                                                                                         | Uncapped                                                                                                  | $10,000 per filer                                                                                             |

## Appendix B: Simulation Methodology

### Data and Software

This analysis uses:

- PolicyEngine US version 1.172.0 microsimulation model
- Enhanced Current Population Survey microdata
- 2026 tax parameters from current law
- [This specialized code](https://github.com/PolicyEngine/analysis-notebooks/tree/main/us/family_first_act)

### Key Assumptions

The simulation:

- Compares FFA to current law baseline after TCJA expiration
- Assumes no behavioral responses to policy changes
- Models full CTC takeup
- Models partial EITC takeup based on [IRS Taxpayer Advocate Service estimates](https://www.taxpayeradvocate.irs.gov/wp-content/uploads/2020/08/JRC20_Volume3.pdf#page=62)
- Includes state tax interactions where credits match federal amounts; distributional impacts consider state impacts, while budgetary impacts break out federal from state
- Projects parameters forward using statutory inflation adjustments and CBO inflation forecasts

### Margin of Error

Results are point estimates from survey microdata. Sampling error and modeling uncertainty affect precision. Key sources of uncertainty include:

- CPS sampling variation
- Income and demographic reporting error
- Tax filing unit construction from households
- Benefit takeup assumptions
- Economic projection uncertainty
- Behavioral responses



---

---
# The New York Working Families Tax Credit
Slug: ny-wftc
Date: 2025-01-21 09:00:00
Authors: David Trimmer
Tags: us, policy, featured, us-ny
Description: A comprehensive analysis of the proposal from New York State Senator Andrew Gounardes.

---

In 2023, New York State Senator Andrew Gounardes introduced a proposal to combine several of the state’s family tax policies into the New York Working Families Tax Credit (NY WFTC). The expanded and fully refundable NY WFTC would provide up to $1,822 per child once fully implemented. Using PolicyEngine, we analyzed the potential impacts of the latest version of the proposal, [Senate Bill S277C](https://www.nysenate.gov/legislation/bills/2023/S277/amendment/C), for tax years 2025 through 2029. We measured the bill’s effects on the New York state budget, household income, poverty, and more.

_See how the Working Family Tax Credit would affect your household with our [personalized calculator](https://legacy.policyengine.org/us/household?focus=intro&reform=72622&region=ny&timePeriod=2025&baseline=2)._

## What is the NY WFTC?

New York currently offers multiple family tax benefits to its residents. These include:

- [The Empire State Child Credit](https://www.tax.ny.gov/pit/credits/empire_state_child_credit.htm) (ESCC), which matches 33% of the federal Child Tax Credit (CTC) amount as it existed prior to the 2017 Tax Cuts and Jobs Act expansion ($1,000, therefore a maximum NY benefit of $330), also includes a minimum benefit of $100 for lower-income families.

- [New York’s Earned Income Tax Credit](https://www.tax.ny.gov/pit/credits/earned_income_credit.htm) (EITC), which matches the federal EITC by 30%.

- [New York’s Dependent Exemption](<https://govt.westlaw.com/nycrr/Document/I50e79907cd1711dda432a117e6e0f345?viewType=FullText&originationContext=documenttoc&transitionType=StatuteNavigator&contextData=(sc.Default)&bhcp=1>), which allows households to exempt $1,000 per dependent from their taxable income.

Senate Bill S277C would introduce the WFTC, immediately replace the ESCC, and shrink the NY EITC and dependent exemption over the course of five years.

The fully refundable WFTC would initiate at a level of $550 per child under 17, rising yearly until reaching $1,600 in year five (adjusted for inflation). The new credit would also begin phasing out above a threshold at a 2% rate. For example, if a filer’s adjusted gross income exceeds the threshold by $1,000, their credit would be reduced by $20. The threshold in year one would be $75,000, or $110,000 for joint filers. However, the thresholds would be lowered throughout the first five years, finally settling at $28,462/$56,924 in year five. The benefit would phase out until reaching $0 in the first year, but beginning in year two, a minimum benefit of $100 would be established. Additionally, in year four the NY WFTC would become available to 17-year-olds.

As the NY WFTC phases in, the New York EITC would phase out over five years, to the extent that it overlaps with the WFTC. Households with no children can continue to claim a 30% match for the childless EITC assuming they are within the income range. Moreover, families with older dependents who are eligible for the EITC but not the WFTC also continue to receive a 30% match.[^1]

Similarly, in year two, the bill would limit the dependent exemption to dependents not qualifying for the NY WFTC. In year four when the NY WFTC is expanded to 17-year-olds, they will no longer be eligible for the dependent exemption.

Table 1 displays how each policy changes by year, with 2025 as the first year of the bill’s implementation.

**Table 1: New York’s Family Tax Policies by Year After Passage of S277C**

|        Tax Year        |      Empire State Child Credit      | EITC match for filers with WFTC-qualifying dependents | $1,000 Dependent Exemption Eligibility | WFTC Age Limit | WFTC Maximum Benefit | WFTC Minimum Benefit | WFTC Phase-out Threshold |
| :--------------------: | :---------------------------------: | :---------------------------------------------------: | :------------------------------------: | :------------: | :------------------: | :------------------: | :----------------------: |
| **2024 (Current Law)** | Greater of $100 and 33% of 2017 CTC |                          30%                          |             All dependents             |      N/A       |         N/A          |         N/A          |           N/A            |
|        **2025**        |             Eliminated              |                          25%                          |             All dependents             |       16       |         $550         |          $0          |    $75,000/ $110,000     |
|        **2026**        |             Eliminated              |                          20%                          |     Dependents ineligible for WFTC     |       16       |        $854\*        |         $100         |    $65,000/ $110,000     |
|        **2027**        |             Eliminated              |                          15%                          |     Dependents ineligible for WFTC     |       16       |       $1,091\*       |         $100         |    $55,000/ $110,000     |
|        **2028**        |             Eliminated              |                          10%                          |     Dependents ineligible for WFTC     |       17       |       $1,338\*       |         $100         |     $45,000/ $90,000     |
|        **2029**        |             Eliminated              |                          0%                           |     Dependents ineligible for WFTC     |       17       |       $1,822\*       |         $100         |    $28,462/ $56,924\*    |

_\* Indexed for inflation from 2023_

## Household Impacts

The NY WFTC will affect households across the income spectrum in various ways. To understand the implications, let’s examine how each provision of Senate Bill S277C will impact specific family units during the proposal’s implementation period.

Let’s begin with married college students with no earnings and a young child. This couple does not receive the NY EITC or the dependent exemption, as they generate no earnings. However, the couple currently qualifies for the $100 minimum of the ESCC. Therefore, in year one, when the NY WFTC is set at $550 and the ESCC is eliminated, their net income grows by $450. By 2029, their net income will rise by $1,722 as the WFTC reaches $1,822.

Another household to consider is a single parent with one child earning near the full-time minimum wage in New York City ($33,000 per year). This family currently receives assistance from all three provisions. In year one, they will lose their full ESCC of $330 and their EITC will shrink by $139. As they receive the $550 WFTC, their net income rises by $81. In 2029, they lose their $1,000 dependent exemption, and since this household falls within the 5.5% income tax bracket, their state income taxes climb by $55. Additionally, the family becomes subject to the WFTC phaseout as the household’s income exceeds the $28,462 threshold in 2029. Overall, the single parent’s net income grows by $313 as the reduction of various policies is offset by the WFTC reaching its full value. However, this net income change is without accounting for New York City income tax. Once considering NYC taxes, the household’s change in net income falls to a gain of $299 ($14 difference) due to the changes in the dependent exemption.[^2]

Finally, let’s look at a married couple with two kids earning near the median household income in New York ($80,000). Under current law, they receive the ESCC and the dependent exemptions for both children but do not qualify for the NY EITC as their income is too high. In 2025, the couple’s net income will increase by $440 as they lose $660 from the ESCC but gain $1,100 from the WFTC. In 2029, the family loses $110 from the bill’s dependent exemption change, while their WFTC allotment increases even as they become subject to the benefit phaseout, resulting in net income growth of $2,412.

Below is a table displaying the change in net income of the examined households for tax years 2025 and 2029:

**Table 2: Impact of Senate S277C on Various Households**

|        Household Composition         |                                                          Change in Net Income for Tax Year 2025                                                          |                                                           Change in Net Income for Tax Year 2029                                                           |
| :----------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      **Married, One Child, $0**      | [\+$450](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=49667) | [\+$1,722](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=49707) |
|    **Single, One Child, $33,000**    | [\+$81](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=47172)  |  [\+$313](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=49717)  |
| **Single, One Child, $33,000 (NYC)** | [\+$81](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=50368)  |  [\+$299](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=50302)  |
|  **Married Two Children, $80,000**   | [\+$440](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=49735) | [\+$2,412](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=72622&region=ny&timePeriod=2025&baseline=2&household=49734) |

Due to the reduction of the NY EITC over time in Senate Bill S277C, households receiving the EITC’s maximum benefit see the smallest change in net income compared to families with very low incomes and households above the EITC range. To visualize this trend, Figures 3 and 4 below demonstrate how net income changes for a single parent with one child based on household income for 2025 and 2029, respectively.

**Figure 3: Change in Net Income for a Single Parent with One Child Based on Household Income (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*akFoHkFToD4jLwih)

**Figure 4: Change in Net Income for a Single Parent with One Child Based on Household Income (2029)**

![](https://cdn-images-1.medium.com/max/2000/0*_Dg7chnu3CO0Q79Y)

In addition to their change in net income, each household’s marginal tax rates would change. Below are the changes in these rates in 2025 and 2029 for the same household example above.

**Figure 5: Change in Marginal Tax Rates for a Single Parent with One Child Based on Household Income (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*Z9l-Ni6MGISH_Tu1)

**Figure 6: Change in Marginal Tax Rates for a Single Parent with One Child Based on Household Income (2029)**

![](https://cdn-images-1.medium.com/max/2000/0*bL2a37ZlTWQyQ8a8)

For both years, the household’s marginal tax rates will increase as income is below $14,000 due to the NY EITC’s phase-in reduction. However, marginal tax rates decrease as the household’s earnings fall into the NY EITC’s phase-out range. Furthermore, small increases in marginal tax rates occur as households enter new state income tax brackets due to dependent exemption changes.

Using PolicyEngine’s microsimulation capabilities through 3 years of pooled data (2021–2023) from the Current Population Survey (CPS), we can estimate the impact of Senate Bill S277C on the state of New York.[^3]

## Statewide Impact in 2025

[PolicyEngine estimates](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2025&baseline=2) that the NY WFTC would in 2025:

- Cost $660 million

- Lower poverty by 1.6% and child poverty by 4.0%

- Increase net income for 31% of New Yorkers

**Figure 1: Winners and Losers from the NY WFTC by Income Decile (2025)**

![](https://cdn-images-1.medium.com/max/1000/1*SICGa9ii5d7HiCNy9xiocw.png)

In 2025, the NY WFTC would benefit 30.7% of New York residents as the initial maximum benefit of the NY WFTC ($550) exceeds the existing Empire State Child Credit ($330). This translates to an increase in average net income [across all income deciles](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=72622&region=ny&timePeriod=2025&baseline=2) and a reduction in [poverty and child poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=72622&region=ny&timePeriod=2025&baseline=2) of 1.6% and 4.0%, respectively, applying the Supplemental Poverty Measure. Furthermore, higher-income households are unaffected in 2025 as the WFTC’s minimum benefit and Senate Bill S277C’s changes to the dependent exemption do not come into effect until 2026.

## Statewide Impact in 2029

[PolicyEngine estimates](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2029&baseline=2) that the NY WFTC would in 2029:

- Cost $3.1 billion

- Lower poverty by 6.1% and child poverty by 16.8%

- Increase net income for 34.4% of New York residents

**Figure 2: Winners and Losers from the NY WFTC by Income Decile (2029)**

![](https://cdn-images-1.medium.com/max/1000/1*qp0po4EGMoqHejBO9Y-HTw.png)

Once the NY WFTC phases in completely for tax year 2029, a greater percentage of New York residents will see their net income [increase by more than 5%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=72622&region=ny&timePeriod=2029&baseline=2). Additionally, the reduction in [poverty and child poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=72622&region=ny&timePeriod=2029&baseline=2) grows significantly as the maximum benefit of the NY WFTC rises. Deep child poverty would [drop by 22.0%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=72622&region=ny&timePeriod=2029&baseline=2) in 2029 as well. To see the impact of Senate Bill S277C for all years of implementation, see Appendix A (statewide) and Appendix B (New York City).

## Conclusion

Senate Bill S277C and the creation of the NY WFTC would partially consolidate New York’s family tax policies while disproportionately benefiting lower-income families. In the first year of implementation, the NY WFTC would cost $660 million while benefiting 30.7% of households and lowering child poverty by 4.0%. Once fully phased in, New York’s tax revenue would decrease by $3.1 billion, without any offsets. The poverty impact would rise as the state’s Supplemental Poverty Measure would drop by 6.1% and child poverty would fall by 16.8%.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Impact of Senate Bill S277C for Tax Years 2025–2029

From 2025 to 2029, the NY WFTC would cost $9.1 billion, with costs, share of individuals benefiting, and poverty impacts rising each year.

|                                                                  Tax Year                                                                  | Budget Impact ($ million) | People with Increased Net Income | People with Reduced Net Income | Poverty | Deep Poverty | Child Poverty | Deep Child Poverty |
| :----------------------------------------------------------------------------------------------------------------------------------------: | :-----------------------: | :------------------------------: | :----------------------------: | :-----: | :----------: | :-----------: | :----------------: |
| **[2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2025&baseline=2)** |            660            |              30.7%               |              0.0%              | \-1.6%  |    \-1.1%    |    \-4.0%     |       \-4.0%       |
| **[2026](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2026&baseline=2)** |           1,231           |              32.7%               |              0.1%              | \-1.6%  |    \-3.8%    |    \-4.6%     |      \-12.0%       |
| **[2027](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2027&baseline=2)** |           1,769           |              33.3%               |              0.1%              | \-3.0%  |    \-4.2%    |    \-8.2%     |      \-15.2%       |
| **[2028](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2028&baseline=2)** |           2,329           |              34.4%               |              0.0%              | \-4.5%  |    \-5.0%    |    \-11.9%    |      \-18.4%       |
| **[2029](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=ny&timePeriod=2029&baseline=2)** |           3,068           |              34.4%               |              0.0%              | \-6.1%  |    \-5.6%    |    \-16.8%    |      \-22.0%       |

## Appendix B: Impact of Senate Bill S277C for Tax Years 2025–2029 in NYC

From 2025 to 2029, the WFTC would provide $3.9 billion in tax benefits to New York City residents, or 43% of the total state costs. New York City residents are disproportionately likely to gain from the reform. While the WFTC reduces poverty relatively less in NYC than outside NYC, it reduces deep poverty relatively more.

| Tax Year                                                                                                                                    | Net Tax Benefits ($ million) | People with Increased Net Income | People with Reduced Net Income | Poverty | Deep Poverty | Child Poverty | Deep Child Poverty |
| ------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------- | -------------------------------- | ------------------------------ | ------- | ------------ | ------------- | ------------------ |
| **[2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=nyc&timePeriod=2025&baseline=2)** | 302                          | 31.9%                            | 0.0%                           | -0.6%   | -1.3%        | -1.3%         | -4.6%              |
| **[2026](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=nyc&timePeriod=2026&baseline=2)** | 520                          | 32.5%                            | 0.1%                           | -0.4%   | -5.4%        | -1.0%         | -14.7%             |
| **[2027](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=nyc&timePeriod=2027&baseline=2)** | 753                          | 33.8%                            | 0.1%                           | -2.4%   | -6.2%        | -5.6%         | -19.5%             |
| **[2028](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=nyc&timePeriod=2028&baseline=2)** | 1,005                        | 35.2%                            | 0.0%                           | -4.1%   | -7.8%        | -9.5%         | -24.3%             |
| **[2029](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=72622&region=nyc&timePeriod=2029&baseline=2)** | 1,341                        | 35.7%                            | 0.0%                           | -5.7%   | -8.5%        | -13.9%        | -28.6%             |

[^1]: In addition to the discussed exceptions for the NY EITC under Senate Bill S277C, [households with both WFTC qualifying dependents and older dependents](https://www.nysenate.gov/legislation/bills/2023/S277/amendment/C) would continue to receive their full EITC until year five (2029), at which point they would receive the more generous WFTC for dependents who qualify and the EITC only for older dependents who are outside of the WFTC qualifying ages.

[^2]: Since the household loses its dependent exemption, its taxable income in NYC rises, thus creating a higher tax liability of $16. Additionally, the NYC school credit is tied to AGI, and for the examined household the credit’s value increases by $2, contributing to an overall net income difference of $14 compared to if the household was outside of NYC.

[^3]: Statewide impacts assume full take up and no behavioral responses.



---

---
# How We're Improving our API in 2025
Slug: api-v2
Date: 2025-02-05
Authors: Michael Smit
Tags: technical, global
Description: PolicyEngine's API target architecture for 2025.

---

PolicyEngine provides comprehensive microsimulation tools through multiple platforms: our web interface, Python packages, and API infrastructure. The API enables both our website and external applications such as [MyFriendBen](https://www.myfriendben.org/) and [Benefit Navigator](https://www.imaginela.org/benefit-navigator) to access PolicyEngine’s computational engine for precise benefit calculations and policy analysis.

To support our expanding user base and maintain robust performance, we have documented our architectural evolution and future development priorities. This technical specification will serve as a resource for current API users and potential contributors, detailing our infrastructure design decisions and planned enhancements.

## Overview

The purpose of this document is to give a brief overview of the current architecture and propose a new target architecture and high-level incremental steps to transition from one to the other for review

- Are we aligned on the problem statement?
  - Do we agree the target architecture addresses the problem statement
  - Does our incremental transition align with our priorities?

We expect the final architecture to

- Reduce the Google Cloud monthly costs by 90% (-$6,500 USD) reducing the amount and type of compute kept continuously “hot” and allocating more expensive hardware on an as-needed basis.
- Substantially reduce the code footprint and generally improve the maintainability of the API services we own.
- Substantially improve the observability of the services we run, providing detailed data for debugging and operations.

We do this by adjusting our API hosting environment and implementation frameworks.

For our hosting environment, we propose continuing to primarily use Google Cloud Platform for hosting our services, but leveraging Cloud Run, workflows, and metrics/logs/trace services to provide better cost, scalability, reliability and observability.

For our API stack we plan to combine our APIs (household and general) into a single, consistent API. For implementing our API we propose switching from Flask with SQLAlchemy to FastAPI and SQLModel with opentelemetry for trace/metric/log generation. We expect these changes to substantially reduce the code footprint and maintenance burden of our API code base.

As migrating from our current architecture to this improved version is non-trivial, we lay out an broad, incremental plan for transitioning from the current to target infrastructure below. This plan focuses on:

1. Reducing the standing cost of our existing application API
1. Improving the reliability and performance of our Household API
1. Generalizing the Household API to just the PolicyEngine API capable of supporting both the app and external client use cases.

Following review of this document, we plan to create a more detailed roadmap and implementation plan focusing the most detail on the near future and continuing to develop our plan as we implement.

## Scope

**In scope**

- Target architecture
  - Household and application API implementation
  - Associated services such as Auth0, AppEngine, etc.
  - Implementation stack (i.e. Flask/APIFlask/FastAPI/etc.)
- Observability
  - High-level path to incrementally replacing our current API
  - Are we making the right trade-offs/priority decisions?
  - What additional discussions/designs/investigations are required to actually implement our next steps?

**Out of scope**

- SPA application — this is currently being redesigned separately and should not block our API work.
- Testability/Deployment — Requires its own design
- Security — we need to do this, but as a separate document.
- The actual simulation code (policyengine.py, population data, etc) and associated stability/replicability/deployment/etc. issues — this is being covered separately in the linked reference below.
- Comparison of alternative stacks/hosting platforms — already done and included in references.
- Detailed tasking/scheduling — This document will be an input to that process.

## References

- [API Stack/hosting evaluation 2025](https://docs.google.com/document/d/1HdH59-8JWihJI7Apsx_tXYkL6yVZu6T8lY4OIWIIkdA/edit?tab=t.0#heading=h.vk2hnxs7lmu5) — details of what other hosting platforms/stack configurations we considered before landing on this target architecture.
- [policyengine.py package](https://docs.google.com/document/d/1YnevUaEarAl5-25veFlJP5amZHlraSSTbmAfoUTX3_o/edit?pli=1&tab=t.0) — moving all the “business logic” of running a simulation into a single package outside of the API.
- [FastAPI Demo](https://github.com/mikesmit/fastapi-demo) — repository demonstrating FAST API + integration with input/output and database model validation + observability + modularity.

## Current Architecture

### Flow Diagram (Simplified)

![](https://cdn-images-1.medium.com/max/2000/0*qJfIPrHyVyOszV7U)

- **PolicyEngine App** — React Single Page Application (SPA) providing a UIX for running simulations
- **External Clients**— MyFriendBen, Benefit Navigator, etc. external, paying customers of our API who build user experiences on top
- **API** — Flask-based API used to support the PolicyEngine app.
  - Runs on a single host because the service instance is stateful
  - Uses a local redis service to queue simulations
  - Uses a local worker process to run simulations
  - Uses a local sqlite database for storage of some data
- **Household API**— a completely separate API also implemented in flask and also running in app engine that only does household simulations
  - Used by external clients exclusively
- **Database** — Cloud SQL managed database for storing policies, households, user data, simulation results, etc.
- **Auth0**— external OAuth 2.0 provider used to authenticate external users

### Limitations

- **Scaling** — The current API scales by running more worker processes on a single, beefier container.
  - It is not currently possible to scale by adding more hosts because the API retains local state (SQLite database & redis task queue) which is not replicated across hosts.
- **Stability** — Because they all run on one host
  - Simulation workers can interfere with each other and bring down the API as a whole.
  - Bringing down one host brings down the whole service and loses state.
- **Cost** — The one container has to be scaled to support multiple workflows and stay up 100% of the time even though most of the time it is not running any workflows. This costs OOM 10K a month.
- **Observability** — The various components running in App Engine to not generate trace or metric information and provide limited logging.
- **Billing** — There is currently no automated mechanism to capture and bill for usage of the commercial API.
- **Maintenance**— Generally the system is hard to maintain.
  - Two completely separate services with separate code bases to do variations of the same thing
  - Use of Flask without any schema-based validation of inputs/outputs, Object Relational Mapper (ORM), standard traceability/logging, standard auth integration, etc. — more errors by default, more expensive to fix, harder to debug.

## Target Architecture

### Flow Diagram

![](https://cdn-images-1.medium.com/max/2000/0*W6Z9B7uHUKI-LlpV)

NOTE: Components only called out where new relative to current architecture

- **PolicyEngine API** — Instead of two completely separate APIs, one common API code base used to run multiple instances.
  - Auto-scaled using Cloud Run service across multiple containers
  - Using only the dedicated hardware required to run fast-api (minimal)
  - Integrated with GCP logging/metrics/trace for observability.
  - Uses GCP Cloud Workflow to delegate simulation tasks
- **GCP Workflow** — GCP-based orchestrator able to run a sequence of tasks, handle retries/errors, etc.
  - Supports running multiple parallel tasks to speed up economic simulations.
- **Simulation API** — FastAPI based Cloud Run TBD (job, service, function) used to actually execute simulation tasks on appropriate hardware.
  - Set up to auto-scale and use appropriate hardware for appropriate tasks.
- **Stripe** — Automated billing for API usage of paying customers.
- **logging/metrics/trace** — GCP observability integrations, automatically generated by all FastAPI-based services for all operations, SQL statements, and logs.

### Benefits

- **Scaling** - API is stateless and containers can be added/removed to support traffic
  - Compute-heavy tasks run in separate containers and can be separately scaled to support traffic
- **Stability** - Failure of a single container does not cause loss of state
  - Failure of a single container does not bring down the whole service
  - Retries and error state for simulation runs is managed by the GCP Cloud Workflow orchestrator
  - State is entirely maintained outside of any one container so loss of a container has limited impact on data loss.
- **Cost**
  - Compute tasks can be assigned to an appropriate container and be scaled appropriate to demand, reducing the need for and cost of “always on” hosts.
- **Observability** - All FastAPI-based services will be integrated with OpenTelemetry for metrics/logging/trace information providing good default observability for all services (latency, error rate, and log details for all operations and SQL queries by default)
- **Billing** — Addressed via Stripe integration.
- **Maintenance**
  - Unified code base — “Household API” vs. “API” is just a difference of configuration using a standard code base of standard API operations and options. All APIs support the same integrated features like database storage and observability.
  - FastAPI is used in combination with SQLModel, Auth0 security integration, opentelemetry integration, as well as pydantic validation of all input/output models to
  - Dramatically reduce errors
  - Dramatically reduce code

## Transition Plan

### Phase 1 — Reduce Cost of the main API

We initially tackle main API by removing the REDIS queue/worker setup and replacing it with a GCP workflow executed against a new Simulation API based on FastAPI and policyengine.py.

We then scale down the App Engine instance to just support running a Flask API, reducing the cost of the always-on host and configure the Simulation API to scale when used only, reducing that cost to the time to run actual simulation requests.

The main API otherwise remains the same and has many of the same limitations (local state, lack of easy observability, etc.)

Household API is unchanged.

### Flow Diagram

![](https://cdn-images-1.medium.com/max/2000/0*ckFoc6RAUJsqOQ7h)

### Benefits

- Cost reduction
- Demonstrate/vet technologies we propose for the main api
- Demonstrate integration with the Workflow service and GCP logging/metrics/trace
- Demonstrate FastAPI on Cloud Run with scaling

## Phase 2 — Implement Billing and Operations Improvements for Paying Customers

Household API is completely replaced by a new FastAPI-based implementation. This implementation is based on the full target architecture, but only implements the household simulation part of it.

Household simulations are executed using the same simulation API which is based on the new policyengine.py package.

### Flow Diagram

![](https://cdn-images-1.medium.com/max/2000/0*NirH7dEArZmw9CSZ)

### Benefits

- **Automated billing** — using Stripe, we can now automate metering and billing our API customers by usage.
- **Additional Flexibility** — the addition of the workflow and database mean the household API can be extended to operate like the main API (and this is the next step) will all the same features.
- **Improved observability/operability **— household API now generates traces/logging/metrics which will support robust alarming and debuggability.
- **Demonstrate/vet technologies**
  - Allows us to implement a small portion of the full API surface area (just household) using the full target architecture

## Phase 3+

We fully replace the web application with the new design currently being identified and implement it on top of the “Household API” by adding functionality until it is just the “PolicyEngine API”.

This will involve multiple phases and additional design work to flesh out.

- What data that customers re-use do we need to persist from the existing application/API?
- What links that customers may have saved/referenced do we need to persist from the existing application?
- What schema will we be using in our database to model users/policies/households/etc.?

## Cost Analysis

We estimate we could reduce our current monthly GCP compute bill from ~$7,000 a month to no more than $500 a month, net (based on very conservative assumptions). This should reduce our overall GCP cost by about 90%.

The primary driver of cost now is running AppEngine. The primary cost in the new system is running simulations as Cloud Run Functions.

In the target architecture the main river of cost is running our simulation (policyengine.py) in Cloud Run functions:

1. If running the simulation requires memory beyond 16G (doubles the cost from 16 to next increment of 32)
1. The number of simulations we run increases substantially
1. The average length of simulations increases substantially.

This analysis was done assuming substantially more traffic than what we currently receive all day, every day, all month.

### Current Major Drivers of Cost

AppEngine is by far the major driver of infrastructure costs on PolicyEngine comprising 90% of the GCP infrastructure cost.

![](https://cdn-images-1.medium.com/max/2000/1*yCLAHlhJYMKXkVIeYVYc0A.png)

### Estimated Compute Cost (Target Architecture)

Assuming we have transitioned both APIs to just do API and delegating all simulation to a workflow.

Cost was estimated using these usage estimates:

- Simulation API

  - Cloud Run function using 16GB and 2 CPUs — based on existing app engine configuration.
  - One minimum instance is hot at all times — reduce cold start time
  - 100 simulations a day every day all month averaging 15 minutes to run — WAG
  - Only one concurrent request per function at a time — currently safe limitation.

- API compute

  - 2 always active servers running the front end API and servicing 1M requests a month (roughly 1,000 requests and hour all month which is a very conservative WAG)
  - 2 CPU/1G RAM
  - 80 requests concurrent
  - 500 ms response

- Workflow (not in calculator despite documentation assertions. Pricing is here: [https://cloud.google.com/workflows/pricing)](https://cloud.google.com/workflows/pricing))
  - Assuming 2 internal steps per simulation workflow
  - Assuming 100 simulations a day every day for a month (100\*30 = 3000)

Total Cost: $538 a month ([calculator here](https://cloud.google.com/products/calculator?hl=en&dl=CjhDaVF4TmpnNFpEWmtNaTAwWTJSaUxUUTRPRGd0T0dSbFlTMHlNR0l6Tm1ZeE1HWTFPV1VRQVE9PRAcGiQ4RTAyNUQwMy02RENFLTQ5RjQtQTUxNi0xNEQ4NDFCNERDNEE))



---

---
# The Proposed New York City Child Tax Credit
Slug: nyc-ctc-s2238
Date: 2025-02-18 00:00:01
Authors: David Trimmer
Tags: us, us-ny-nyc, featured, child-tax-credit, policy
Description: Analysis of Senate Bill S2238, introduced by Senator Andrew Gounardes.

---

As New York’s legislative session progresses, lawmakers are proposing various changes to the state’s income tax code. [Senate Bill S2238](https://www.nysenate.gov/legislation/bills/2025/S2238), sponsored by State Senator Andrew Gounardes, would establish a New York City Child Tax Credit (NYC CTC) while restructuring the existing School Tax Credit (STC) to raise revenue to offset the cost of the NYC CTC. Using PolicyEngine’s household calculator and microsimulation capabilities, this analysis examines the specific effects of Senate Bill S2238 on individual families as well as its impact on the budget, income distribution, and poverty.

[PolicyEngine projects](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) that in 2025, Senate Bill S2238 would:

- Generate $93.3 million in state revenue

- Affect 57% of NYC residents, with 32% seeing increased net income and 25% seeing decreased net income

- Lower poverty by 0.8% and child poverty by 2.0%

- Reduce the Gini index of income inequality by 0.3%

## Background

The School Tax Credit, like other tax credits available to New York City residents, is administered through the New York State tax system. While these credits specifically benefit residents of NYC, they are funded at the state level as part of New York State’s broader tax and revenue structure. New York City income tax revenue flows to the state’s tax administration before funds are allocated back to the city through various programs and credits. The current STC structure consists of two components that vary based on filing status and income level:

1. The **fixed amount** provides $63 ($125 for joint and surviving spouse filers) to filers with state AGI at $250,000 or less.

2. The **rate reduction amount** increases with taxable income and is limited to filers with taxable income below $500,000. For filers with taxable income below $12,000 ($21,600 for joint filers and $14,400 for heads of households), the rate reduction amount equals 0.171% of taxable income; above that threshold, it equals 0.228% of taxable income.

Figure 1 shows the total amount of the School Tax Credit for a single filer based on household income.

**Figure 1: NYC School Tax Credit for a Single Filer Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*Xh88A79DGv1NqukH)

Senate Bill S2238 would reduce the School Tax Credit at $5 per $100 of earnings exceeding $75,000 ($150,000 for joint and surviving spouse filers). The proposed structure of the STC can be seen in Figure 2 below.

**Figure 2: Reformed vs. Current School Tax Credit for a Single Filer Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*IS60D-Kjp_pKd_hq)

At the same time, the legislation would introduce a $300 fully refundable Child Tax Credit for NYC residents with children under the age of 18. This credit would also phase out at 5%, starting at $75,000 and $150,000.

## Household Impacts

The impact of Senate Bill S2238 varies based on household composition and income level. To understand this, let’s examine different family examples and how the proposal changes their net income.

_See how a New York City Child Tax Credit would affect your household with our [personalized calculator](https://legacy.policyengine.org/us/household?focus=intro&reform=74381&region=nyc&timePeriod=2025&baseline=2)._

**Table 1: Impact of Senate Bill S2238 on Various Household Compositions**

| Household Composition             | Baseline School Tax Credit | New School Tax Credit | NYC CTC | Change in Net Income                                                                                                                                      |
| :-------------------------------- | -------------------------- | --------------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Single, No Children, \$50,000** | \$152                      | \$152                 | \$0     | [\$0](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50900)    |
| **Single, No Children, \$85,000** | \$232                      | \$0                   | \$0     | [-\$232](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50993) |
| **Single, One Child, \$50,000**   | \$152                      | \$152                 | \$300   | [+\$300](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) |
| **Single, One Child, \$85,000**   | \$221                      | \$0                   | \$0     | [-\$221](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50997) |

A single adult with $50,000 in earnings and zero children would continue to receive their current School Tax Credit at $152[^1] as their income is below the phaseout threshold of $75,000. Additionally, because they have no children, they are ineligible for the NYC CTC, leaving their net income unchanged. However, if their earnings increase to $85,000, their STC would phase out completely, reducing their net income by $232 (what they would otherwise receive from the STC if Senate Bill S2238 were not implemented).

For a single parent of one making $50,000 a year, their net income would increase by $300 as their STC would also remain unchanged at $152, but they would now receive the $300 NYC CTC. The STC phases out from $75,000 to $78,040 of earnings, and the CTC phases out from $75,000 to $81,000, so at $85,000 of earnings, their net income falls by $221.[^2] Figure 3 displays the change in net income for a single parent with one child under Senate Bill S2238, while Figure 4 shows how marginal tax rates are affected.

**Figure 3: Change in Net Income for a Single Parent of One Child Under Senate Bill S2238 Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*a5wlyJ71iPgo0isj)

**Figure 4: Change in Marginal Tax Rates for a Single Parent with One Child Based on Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*zr1iDLDWQX0olKas)

In summation, households with no children are unaffected if their earnings are less than $75,000 (or $150,000 if filing jointly). Households with children below these thresholds would receive an additional $300 for each child under 18. Above these thresholds, the credits gradually phase out, but families with children would remain better off until reaching their “breakeven point” — where the change in net income becomes zero before turning negative. Beyond the breakeven point, a family’s net income decreases until their taxable income reaches $500,000, at which point their change in net income returns to zero since they do not qualify for the current School Tax Credit or any proposed changes. Table 2 displays the breakeven points for single and married households with zero to four children.

**Table 2: Breakeven Points by Household Composition**

| Number of Children |                                                                           Single                                                                           |                                                                           Married                                                                           |
| :----------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------: |
|       **0**        | [\$75,000](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50956) | [\$150,000](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51087) |
|       **1**        | [\$78,000](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51088) | [\$153,000](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51089) |
|       **2**        | [\$82,700](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51090) | [\$156,000](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51091) |
|       **3**        | [\$88,500](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51094) | [\$159,300](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51095) |
|       **4**        | [\$94,300](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51096) | [\$165,100](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51097) |

_Rounded to the nearest $100._

Using PolicyEngine’s microsimulation capabilities through 3 years of pooled data (2021–2023) from the Current Population Survey (CPS), we can also estimate the impact of Senate Bill S2238 on New York City at large.

## Citywide Impacts

Phasing out the School Tax Credit would raise [$427.1 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=74345&region=nyc&timePeriod=2025&baseline=2) in 2025, while implementing the CTC component of Senate Bill S2238 would cost [$333.8 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=75446&region=nyc&timePeriod=2025&baseline=2), generating a [surplus of $93.3 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) in state funds.

As displayed in Figure 5, the proposed legislation provides net benefits to the [bottom six income deciles](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) on average, while the seventh decile is essentially unchanged. Conversely, households in the top income decile would see an average reduction of $551.

Furthermore, while the average dollar amount gained in each decile in the bottom half of the distribution would vary, households in these deciles would see their net income increase [between 0.2% and 0.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50900) on average.

**Figure 5: Average Benefit of Senate Bill S2238 by Income Decile[^3]**

![](https://cdn-images-1.medium.com/max/2000/1*H404oqvkm7Am75Cjq_ugAQ.png)

Fourteen percent of residents in the [first income decile](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) would gain more than 5% of their net income with the proposed legislation. This is a larger portion of residents receiving over a 5% net gain in any other decile (see the dark blue portion of the bars in Figure 6). Seventy-two percent of NYC residents in the top decile would see a loss that is less than 5% of their net income.

**Figure 6: Winners and Losers of Senate Bill S2238**

![](https://cdn-images-1.medium.com/max/2000/1*USRzlHzR5BOrM0310ZIgyg.png)

Senate Bill S2238 would lower the city’s Supplemental Poverty Measure [by 0.8%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=50953) and child poverty by 2.0%. PolicyEngine projects the legislation would have no impact on deep poverty.

**Figure 7: Poverty Impact of Senate Bill S2238**

![](https://cdn-images-1.medium.com/max/2000/1*KHmC00tZhNNzIwEqWckwmw.png)

Finally, the city’s Gini index of income inequality would [drop by 0.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=74381&region=nyc&timePeriod=2025&baseline=2&household=51083).[^4]

## Conclusion

Senate Bill S2238 would limit the School Tax Credit by phasing out benefits at 5% beginning at $75,000 ($150,000 for joint and surviving spouse filers). The legislation would also establish a $300 NYC Child Tax Credit for children 17 and under, phasing out at the same parameters as the reformed STC. Childless households under the phaseout thresholds would be unaffected, while families with children below $75,000 ($150,000 for joint and surviving spouse filers) would gain $300 per eligible child. Senate Bill S2238 would raise $93.3 million in state revenues in 2025. 32% of NYC residents would see their net incomes increase, including 40% of those in the bottom half of the household income distribution. A quarter of the NYC population would see their tax liability increase. Finally, the city’s poverty level, as measured by the SPM, would decrease, including a 2.0% reduction in child poverty.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

[^1]: The childless adult would receive the STC’s fixed amount of $63, plus the rate reduction portion. With $50,000 in annual earnings, their taxable income is $42,000 as they receive New York’s $8,000 standard deduction. 0.171% of the first $12,000 is $20.52. 0.228% of the remaining $30,000 is $68.40. Combined the rate reduction amount is around $89. $63 plus $89 is $152, the adult’s total STC.

[^2]: The School Tax Credit amounts for a childless adult and a single parent who earn $85,000 are not the same due to the differences of the phase in rate thresholds of the “rate reduction” portion of the STC. The childless adult is a single filer while the single parent can use the head of household filing status.

[^3]: Note that these income deciles are based on the national income distribution, rather than NYC income distribution.

[^4]: PolicyEngine’s analysis shows that Senate Bill S2238 would increase the share of total net income held by the top 1% of households by less than 0.1%. This may be a relative effect rather than an absolute benefit to the top 1%. Since households in the top 1% typically have taxable incomes above $500,000, they would be largely unaffected by the bill’s provisions. However, the bill would reduce total net income held by all New Yorkers (by raising $93.3 million net tax revenue), leaving the top 1%’s constant dollar value a larger share of the total.



---

---
# Kentucky Cuts Income Tax Rate
Slug: kentucky-cuts-income-tax-rate
Date: 2025-02-26
Authors: David Trimmer
Tags: us, us-ky, policy, featured
Description: Analysis of lowering Kentucky's 4% income tax rate to 3.5%.

---

[On February 6](https://apnews.com/article/kentucky-tax-cut), Governor Andy Beshear signed [House Bill 1](https://apps.legislature.ky.gov/record/25rs/hb1.html), which reduces Kentucky's flat income tax from a rate of 4% to 3.5% starting in 2026. The bill previously passed the Kentucky House of Representatives with a [vote of 90–7](https://apnews.com/article/kentucky-legislature-tax) and the Senate with a [34–3 vote](https://apnews.com/article/kentucky-income-tax).

We at PolicyEngine have updated our model to reflect these changes and analyzed their effects on the state of Kentucky and its residents.

Key results for 2026:

- Reduces state revenues by $684 million

- Benefits 73% of Kentucky residents

- Lowers the state's Supplemental Poverty Measure by 1.3%

- Increases the Gini index of income inequality by 0.14%

_Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=ky&timePeriod=2026&baseline=76143) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=2&region=ky&timePeriod=2026&baseline=76143)._

## Household Impacts

To understand the extent of this reform, it is important to note that higher-income households receive larger tax savings because they have more taxable income and therefore higher initial tax liability. For example, a childless adult earning $20,000 in Kentucky gains $58 from the 0.5pp rate reduction, while they would gain $483 if they earned $100,000, or $1,664 if they earned $500,000.

**Table 1: Change in Net Income by Household Income for a Single Adult**

| Household Earnings |                                                                    Change in Net Income                                                                    |
| :----------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------: |
|      $20,000       |  [\+$58](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ky&timePeriod=2026&baseline=76143&household=51467)   |
|      $100,000      |  [\+$483](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ky&timePeriod=2026&baseline=76143&household=51470)  |
|      $500,000      | [\+$1,664](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ky&timePeriod=2026&baseline=76143&household=51468) |

Below, Figure 1 displays the reduction in Kentucky income tax for a childless adult between $0 and $500,000 of household earnings. Since Kentucky's Family Size Credit fully offsets state tax liability for those below the federal poverty line, childless adults with income below $16,040 in 2026 will not benefit from the tax cut.[^1]

**Figure 1: Change in Kentucky Income Tax for a Single Adult by Household Income**

![](https://cdn-images-1.medium.com/max/2000/0*5p5Z-BS8sXYHB_iH)

## Statewide Impacts

Using PolicyEngine static modeling, the individual income tax rate reduction enacted in Kentucky will [cost the state $684 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=ky&timePeriod=2026&baseline=76143) for tax year 2026. The measure would also increase federal revenues by $48 million, as residents would have less state income tax to take as an itemized deduction. On net, the tax cut would increase residents' net income by $636 million, without considering behavioral responses.

**Figure 2: Budgetary Impact of Kentucky's Income Tax Cut**

![](https://cdn-images-1.medium.com/max/2000/0*K9gfVVMZgO36y7L_)

73% of Kentuckians will see an [increase in their net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=ky&timePeriod=2026&baseline=76143), including 99% of those in the top income decile and 6% of those in the bottom decile.

**Figure 3: Winners of Kentucky's Income Tax Cut by Decile**

![](https://cdn-images-1.medium.com/max/2000/0*c3r5UopZtVsyE3CZ)

The tax cut will provide an [average benefit of $335](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=ky&timePeriod=2026&baseline=76143) per household, ranging from $5 in the bottom income decile to $1,470 in the top decile.

**Figure 4: Income Distribution of Kentucky's Income Tax Cut by Decile**

![](https://cdn-images-1.medium.com/max/2000/0*thDpBTm7YsAjCpGU)

The tax changes are projected to [reduce Kentucky's poverty rate by 1.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=2&region=ky&timePeriod=2026&baseline=76143), applying the Supplemental Poverty Measure, while leaving deep poverty unchanged. The income tax reduction will also increase the state's Gini index of income inequality [by 0.14%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=ky&timePeriod=2026&baseline=76143).

## Conclusion

The 0.5pp rate reduction of Kentucky's income tax will lower state revenues by $684 million in 2026, while reducing poverty by 1.3% and increasing income inequality by 0.14%. The reform reduces tax liability for households across all income deciles, with higher-income households receiving larger benefits on both an [absolute](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=ky&timePeriod=2026&baseline=76143) and [relative](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=2&region=ky&timePeriod=2026&baseline=76143) basis.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

[^1]: Estimate of the one-person federal poverty line for 2026.



---

---
# The Family Income Supplemental Credit (FISC) Act
Slug: fisc-act
Date: 2025-03-05
Authors: Pavel Makarchuk
Tags: us, policy, featured
Description: Representative Jared Golden’s Child Tax Credit reform would cost $193 billion in 2026 while reducing poverty and inequality.

---

The [Family Income Supplemental Credit (FISC) Act](https://golden.house.gov/sites/evo-subsites/golden.house.gov/files/evo-media-document/GoldenFISC.pdf), introduced by Representative Jared Golden (D-ME), would establish a new refundable tax credit for families with children of various ages. Using PolicyEngine’s household calculator and microsimulation capabilities, this analysis examines the specific effects of the FISC Act on individual families as well as its impact on the federal budget, income distribution, and poverty.

PolicyEngine projects that in 2026, the FISC Act would:

- Reduce federal tax revenue by $193 billion

- Increase net income for 37% of US residents

- Lower the Supplemental Poverty Measure by 9.2% and child poverty by 17.7%

## Background

The FISC Act would create a new refundable family income supplement credit with the following structure:

1. A monthly base credit amount of $400 per child under six or $250 per child over six or under eighteen years of age

1. An additional monthly $400 for pregnant mothers after the first five pregnancy months

1. A 20% marriage bonus, which is applied to the total monthly credit amount

The credit phases in linearly with earnings and phases out monthly by $16.67 for each $1,000 increment of adjusted gross income over $125,000 ($250,000 for joint filers).

This new credit’s cost is partially offset by the repeal of the existing Child Tax Credit.

## Household Impacts

Considering a married couple in Virginia with $40,000 of earnings and two children aged 3 and 10. Under the FISC Act, [household net income increases](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=76612&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51530) by $7,360. This household will receive a family income supplement credit of $9,360, receiving a base credit of $7,800 with a 20% marriage bonus. Simultaneously this household would lose their Child Tax Credit of $2,000, where $1,780 is refundable and $220 is non-refundable (the maximum per-child CTC falls from $2,000 in 2025 to $1,000 in 2026 under current law).

Figure 1 shows how this household’s experience [varies with net income](https://legacy.policyengine.org/us/household?focus=householdOutput.earnings&reform=76612&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51530). The family income supplement credit phases in at a steeper rate than the current CTC, reaching the maximum amount at earnings of $9,400 while the CTC is fully phased-in at earnings levels of $17,000. Furthermore, the CTC fully phases out at earnings of $110,000 while the family income supplement credit does not start to phase out until $250,000 for joint filers.

**Figure 1: Household Net Income Impact of the FISC Act by Household Earnings**
![](https://cdn-images-1.medium.com/max/3200/0*9REG5tMXk4KVwCO9)

Figure 2. shows how the FISC Act alters the household’s marginal tax rates, with the steeper phase-in structure being reflected in the earnings up to $17,000.

**Figure 2: Change in Marginal Tax Rates based on Household Earnings**
![](https://cdn-images-1.medium.com/max/3200/0*0NTnOnqtdGX0tMlK)

The new credit amount varies with children’s ages while adding an additional pregnancy credit amount. Figure 3 shows the impacts of this credit on net income of a single parent with one child of varying ages. We currently lump four months of the $400 pregnancy credit in with 12 months of the $400 base credit for parents of newborns, applying the full $6,400 in the same year, though we [will improve this](https://github.com/PolicyEngine/policyengine-us/issues/5659).

**Figure 3: Change in Household Net Income Under the FISC Act based on Child Ages**
![](https://cdn-images-1.medium.com/max/2652/0*Ig7Df1rVH4pwHC5u)

## National Impacts

Using PolicyEngine’s microsimulation capabilities, and assuming no behavioral responses, we estimate the national impacts of the FISC Act in the 2026 fiscal year.

The FISC Act would reduce federal revenues by [$193.1 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=76612&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51531) in 2026, or $1,293 per household. On average, households in the ninth income decile gain the most ($2,489), while those in the bottom decile gain the least ($390).

**Figure 4: Average Change in Net Income by Income Decile in 2026**
![](https://cdn-images-1.medium.com/max/3200/0*C1SnOSqPhLBgE1BZ)

**Table 1: 10-Year Budgetary Impact of the FISC Act**
| Tax Year | Static Impact ($bn) | Dynamic Impact ($bn) |
| -------- | ------------------- | -------------------- |
| 2026 | -193.1 | -217.4 |
| 2027 | -194.5 | -218.4 |
| 2028 | -195.5 | -219.7 |
| 2029 | -196.3 | -216.6 |
| 2030 | -197.0 | -219.2 |
| 2031 | -197.1 | -224.8 |
| 2032 | -196.3 | -227.4 |
| 2033 | -194.7 | -225.6 |
| 2034 | -193.1 | -227.6 |
| 2035 | -190.0 | -230.4 |
| Total | -1,947.6 | -2,227.1 |

37% of US residents would gain: 50% of those in the sixth decile and 14% of those in the upper decile representing the extrema.

**Figure 5: Winners and Losers of the FISC Act in 2026**
![](https://cdn-images-1.medium.com/max/3200/0*Vh2YnnLEIx8Tfhi9)

## Poverty Impact

The FISC Act would lower the nation’s Supplemental Poverty Measure by [9.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=76612&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51531) and child poverty by 17.7%. PolicyEngine projects the legislation would reduce deep poverty by [11.7%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&reform=76672&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51531).

**Figure 6: Poverty Impact of the FISC Act in 2026**
![](https://cdn-images-1.medium.com/max/3200/0*iLhr0pdmo70LGE1t)

## Conclusion

Representative Golden’s FISC Act would replace the Child Tax Credit with a larger credit that varies with child age and marital status, and introduce a pregnancy credit. It would cost $193 billion in 2026, providing larger benefits to households in the middle of the income distribution than those in the top or bottom deciles. Without considering behavioral responses, it would reduce poverty and [income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=76612&baseline=2&timePeriod=2026&region=us&dataset=enhanced_cps&household=51531).

To explore how this policy would affect your household or to design your own reform, visit [PolicyEngine’s interactive tools](https://legacy.policyengine.org/us) and discover our broader collection of [policy analyses](https://legacy.policyengine.org/us/research).



---

---
# Exempting young children from the two-child limit
Slug: young-child-exemption-two-child-limit
Date: 2025-03-06 00:00:00
Authors: Vahid Ahmadi, Pavel Makarchuk
Tags: uk, policy, featured
Description: Analysis of the potential impact of limiting the two-child limit to families with children under 5 years old.

---

The Guardian [reports](https://www.theguardian.com/society/2025/feb/26/parents-under-fives-could-be-exempted-two-child-benefit-cap-uk) that UK ministers are considering exempting young children from the two-child limit. In this report, we simulate the effect of this policy, which affects both Universal Credit (UC) and the Child Tax Credit (CTC).

# Current policy implementation

The two-child limit currently applies to:

- Universal Credit child elements
- Child Tax Credit child elements

By default, families can only claim these benefits for their first two children, with some exceptions:

1. Children born before April 6, 2017 are exempt from the limit
2. Multiple births (e.g., twins or triplets) where only one child would take the family over the two-child limit
3. Children adopted from local authority care
4. Children living with family or friends (kinship care)
5. Children born as a result of non-consensual conception

PolicyEngine currently models the date-based exemption (children born before April 2017) and does not model the other exemption conditions.

# Reforms reportedly under consideration

The Guardian states:

> _Ministers are trying to find ways to alleviate the impact of the two-child limit for universal credit or child tax credit, which was imposed by the Conservatives in 2017, without spending £3.6bn to remove it entirely, according to those briefed on the discussions._

> _Among the options is applying the limit only to those with children who are five and over, exempting parents of disabled children, exempting parents in work and increasing child benefit payments for parents of young children. A separate proposal to move to a three-child limit has also been discussed, but is understood not to be under serious consideration._

We model the first of these options: exempting parents of children under 5 years old from the two-child limit. We assume this age exemption applies to the family as a whole: if any child is under the threshold, all children are exempt. The exemption adds to existing exemptions (e.g., children born before April 2017 are unaffected).

# Economic impact of the reform

Using PolicyEngine’s microsimulation model, we estimate that exempting parents of children under 5 years old from the two-child limit would cost [£504 million](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=77114&region=uk&timePeriod=2025&baseline=1) in 2025: [£480 million](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=77113&region=uk&timePeriod=2025&baseline=1) from UC and [£25 million](https://legacy.policyengine.org/uk/policy?reform=77112&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=1) from the CTC.

The exemption would [reduce overall poverty by 0.3%](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=77113&region=uk&timePeriod=2025&baseline=1) and child poverty by 0.6%. It would also reduce the Gini index of income inequality by 0.09%. 5% of Britons would benefit from the reform, with those in the fifth income decile most likely to gain.

We invite users to experiment with other age thresholds for this exemption in the [PolicyEngine interface](https://legacy.policyengine.org/uk/policy?focus=gov.contrib.two_child_limit.age_exemption.universal_credit&reform=77113&region=uk&timePeriod=2025&baseline=1).



---

---
# New York Governor Hochul's Tax Proposals
Slug: ny-hochul-budget
Date: 2025-03-07
Authors: David Trimmer
Tags: us, us-ny, featured, policy
Description: PolicyEngine analyzed several individual income tax policies included in Governor Kathy Hochul's FY2026 budget.

---

On January 21, 2025, New York Governor Kathy Hochul [unveiled her budget](https://www.budget.ny.gov/pubs/press/2025/fy26-executive-budget.html) for Fiscal Year 2026, including three provisions PolicyEngine can simulate:

- Introducing “inflation rebates” that would provide $300 to single filers with earnings of $150,000 or less and $500 for joint filers at $300,000 or below.

- Increasing the Empire State Child Credit (ESCC) to $1,000 for children under the age of 4 and to $500 for children 4 to 16.

- Cutting the first five tax brackets’ rates [by 0.2](https://www.governor.ny.gov/sites/default/files/2025-01/FY2026-Executive-Budget-Briefing-Book.pdf#page=37) percentage points over two years.

Using PolicyEngine’s household calculator and microsimulation capabilities, we can project the effects of these proposals on individual families as well as the impacts on New York’s budget, statewide income distribution, and poverty rates.

## Background

### Inflation Rebates

The proposed inflation rebates would function as fully refundable tax credits as they would provide direct payments to households that have filed their taxes. The rebates’ value and income limit depend on filing status, as displayed in Table 1. Households above the limits would not receive the rebates, creating an income cliff. These payments would only be active for 2025.

**Table 1: Inflation Rebate Value and Income Limit by Filing Status**

| Filing Status                               | Rebate Amount | Income Limit |
| ------------------------------------------- | ------------- | ------------ |
| Single and Head of Household                | $300          | $150,000     |
| Married Filing Jointly and Surviving Spouse | $500          | $300,000     |
| Married Filing Separately                   | $250          | $150,000     |

### Empire State Child Credit

In addition to the increase in the value of the ESCC, the maximum credit amount would also be extended to families with low incomes. Currently, a single parent with annual earnings of $5,000 or less receives only $100. Between $5,000 and $10,000, the ESCC phases into its current maximum of $330. Hochul’s proposal would eliminate the earnings requirement, allowing this single parent to receive the full credit. For tax year 2025, children under the age of 4 would see their credit increase from $330 to $1,000. Children between 4 and 16 would still receive $330, until 2026 when their credit is increased to $500. The current phase-out structure of the ESCC would remain, though the credit would no longer be coupled to the pre-TCJA federal CTC.

**Figure 1: ESCC Expansion for a Single Parent of 3 or 6 in 2025 and 2026 vs Baseline**

![](https://cdn-images-1.medium.com/max/2652/0*OHmEv_nybbouJJ0L)

### Income Tax Cuts

Finally, Governor Hochul would decrease the tax rate for New York state’s first five income tax brackets by 0.1% in 2025 and 2026. The rates under current law and the proposed cuts can be seen in Table 2 below.

**Table 2: Current Tax Rates and Proposed Cuts in 2025 and 2026**

| Tax Year | Tax Rate 1 | Tax Rate 2 | Tax Rate 3 | Tax Rate 4 | Tax Rate 5 |
| -------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| 2024     | 4.0%       | 4.5%       | 5.25%      | 5.5%       | 6.0%       |
| 2025     | 3.9%       | 4.4%       | 5.15%      | 5.4%       | 5.9%       |
| 2026     | 3.8%       | 4.3%       | 5.05%      | 5.3%       | 5.8%       |

In addition to several other proposals, Governor Hochul also included an extension of the Temporary PIT High Income Surcharge from 2028 to 2032. We have limited this analysis to three provisions that have been discussed.

## Household Impacts

These three policies affect various family compositions across New York state. Let’s examine several examples to understand their impact on each household’s net income.

A non-earning single parent of a 6-year-old child is eligible for a $300 inflation rebate in 2025. Additionally, their ESCC increases by $230 as the minimum earning requirement is eliminated, making their allotment climb from $100 to $330. As they have no taxable income, they are unaffected by the income tax cuts, resulting in a change in net income of $530. In 2026, they no longer receive the inflation rebate, but their ESCC goes from $100 to $500, increasing their net income by $400.

For the same household composition but with an annual income of $50,000, they also receive the full $300 inflation rebate in 2025, as their income falls well below the $150,000 threshold. While they are already eligible for the maximum ESCC amount under current law, they benefit from the income tax cuts, which provide an additional $38 in tax relief. This results in a total increase in net income of $338 for 2025. In 2026, they see their ESCC increase by $170 as the credit for children aged 4–16 rises to $500, and they receive $76 in tax cuts, bringing their total benefit to $246.

A single parent with two children earning $160,000 exceeds the income threshold for the inflation rebate in 2025, making them ineligible for that benefit. Their income level also places them above the ESCC phase-out, so they receive no additional benefit from its expansion. However, they would see a $147 reduction in their tax liability for 2025. In 2026, their tax savings and net income will double to $294.

A married couple with three children earning $250,000 qualifies for the full $500 inflation rebate in 2025, as their income falls below the $300,000 joint filer threshold. While their income level excludes them from additional ESCC benefits, they receive $231 from the tax rate reductions, totaling $731 in increased net income for 2025. In 2026, without the inflation rebate, their benefit comes exclusively from the income tax cuts, providing $462 in tax relief.

If this married couple’s income grows to $310,000, they would exceed the joint filer threshold for the inflation rebate in 2025, receiving no benefit from this program. However, their benefit from the tax rate reductions would increase to $291 in 2025. In 2026, their tax liability would drop by $461, resulting in a gain in net income.[^1]

Tables 3 and 4 summarize the changes in each program and net income for each examined household for 2025 and 2026.

**Table 3: Change in Net Income Based on Household Composition (2025)**

| Martial Status | Number of Children | Annual Income | Inflation Rebate | ESCC Change | Income Tax Cut | Total Change in Net Income                                                                                                                              |
| -------------- | ------------------ | ------------- | ---------------- | ----------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Single         | 1                  | $0            | $300             | $230        | $0             | [+$530](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=49692&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Single         | 1                  | $50,000       | $300             | $0          | $38            | [+$338](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51379&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Single         | 2                  | $160,000      | $0               | $0          | $147           | [+$147](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51399&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Married        | 3                  | $250,000      | $500             | $0          | $231           | [+$731](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51446&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Married        | 3                  | $310,000      | $0               | $0          | $291           | [+$291](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51448&region=ny&timePeriod=2025&baseline=2&reform=75827) |

**Table 4: Change in Net Income Based on Household Composition (2026)**

| Martial Status | Number of Children | Annual Income | ESCC Change | Income Tax Cut | Total Change in Net Income                                                                                                                              |
| -------------- | ------------------ | ------------- | ----------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Single         | 1                  | $0            | $400        | $0             | [+$400](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51394&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Single         | 1                  | $50,000       | $170        | $76            | [+$246](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51451&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Single         | 2                  | $160,000      | $0          | $294           | [+$294](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51453&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Married        | 3                  | $250,000      | $0          | $462           | [+$462](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51456&region=ny&timePeriod=2025&baseline=2&reform=75827) |
| Married        | 3                  | $310,000      | $0          | $461           | [+$461](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&household=51457&region=ny&timePeriod=2025&baseline=2&reform=75827) |

Figures 2 through 5 display the changes in net income and marginal tax rates for a single parent of two children, ages 3 and 6, (household example 3) based on their annual income (ranging from $0 to $500,000) in 2025 and 2026.

**Figure 2: Change in Net Income for a Single Parent of Two Children, Ages 3 and 6, Based on Household Earnings (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*h1H9hpX5PfEzHzSb)

**Figure 3: Change in Marginal Tax Rate for a Single Parent of Two Children, Ages 3 and 6, Based on Household Earnings (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*fzBpoO3oPSeJoSZC)

**Figure 4: Change in Net Income for a Single Parent of Two Children, Ages 3 and 6, Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*OXwTC8-pGO99qcaA)

**Figure 5: Change in Marginal Tax Rate for a Single Parent of Two Children, Ages 3 and 6, Based on Household Earnings (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*2gN3Eji94v58il0F)

## Statewide Impacts 2025

For tax year 2025, PolicyEngine projects that these reforms would:

- [Cost $4.8 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580), with the following breakdown:

  - Inflation Rebates: [$3.7 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=76266&region=ny&timePeriod=2025&baseline=2)[^2]

  - ESCC expansion: [$481 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=76581&region=ny&timePeriod=2025&baseline=2)

  - Income tax cuts: [$623 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76590)

- Lower the state’s Supplemental Poverty Measure by 5.2%

- Reduce the Gini index of income inequality by 0.67%

- [Increase net income for 99.4%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580) of New York residents (all but 6% of those in the top decile), including an increase of 5% of net income for 51% of those in the bottom decile

These use PolicyEngine’s microsimulation capabilities through 3 years of pooled data (2021–2023) from the Current Population Survey (CPS), aged to the current year.

**Figure 6: Winners of Hochul’s Tax Proposals (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*3OEHXel8uNfoA62E)

The reform provides an average of [$611 per household in 2025](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580), varying based on income decile.[^3] Households in the ninth income bracket would receive $781, the highest average benefit of any decile. Though the first decile’s average benefit is the lowest at $404, it represents a [2.5% gain in net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580) for households, the largest percentage of any decile.

**Figure 7: Average Benefit Based on Household Income Decile (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*fvsjuJ247XGUaeju)

In 2025, these proposals would [reduce poverty by 5.2%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580) when applying the Supplemental Poverty Measure. The poverty reduction would disproportionally affect children as the child poverty rate would also decrease by 6.4%. Deep poverty and deep child poverty would [drop by 5.0% and 7.3%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580), respectively.

**Figure 8: Poverty Impact (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*MYtaUAsZ0X6QzbO2)

Finally, the tax reforms would [decrease income inequality](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&household=51448&region=ny&timePeriod=2025&baseline=2&reform=76580), lowering the state’s Gini index by 0.67% while also reducing the share of income held by the top 10% and 1% of households.

## Statewide Impacts 2026

For tax year 2026, PolicyEngine projects that these reforms would:

- Cost [$2.1 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580), with the following breakdown:

  - ESCC expansion: [$821 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=76581&region=ny&timePeriod=2026&baseline=2)

  - Income tax cuts: [$1.3 billion](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76590)[^4]

- Increase net income for 83.5% of New York residents

- Lower the state’s Supplemental Poverty Measure by 2.5%

- Reduce the Gini index of income inequality by 0.24%

While both the ESCC expansion and income tax cuts provide more tax benefits to the New York population than they did in 2025, the expiration of the inflation rebates results in a lower impact in every major measurement for 2026. The reform [benefits 83.5%](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580) of residents in 2025, down from 99.4% in 2025. While 92% or more residents in the top half of the income distribution are net beneficiaries in 2026, 31% in the bottom income decile would see their net incomes increase; the remaining 69% would be unaffected.

**Figure 9: Winners of Hochul’s Tax Proposals (2026)**

![](https://cdn-images-1.medium.com/max/2000/0*rEnFxmyVpTrT0N9l)

The reform provides [$252 on average](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580) per household. While the range of average benefit by decile in 2025 was $404 to $781 (first to ninth decile), the 2026 range is $65 to $557 (first and tenth decile). As the inflation rebates expire and income tax cuts double, higher-income households would gain a larger share of the overall tax benefits as they have higher tax liabilities than lower-income families.

**Figure 10: Average Benefit Based on Household Income Decile**

![](https://cdn-images-1.medium.com/max/2000/0*RREj76K4gSO-yu2y)

In 2026, the reform would [reduce poverty by 2.5%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580), down from 5.5% in 2025. However, it would lower child poverty more, from 6.4% in 2025 to 7.4% in 2026, likely due to the expansion of the ESCC. Deep poverty and deep child poverty impacts fall from 2025, [settling at 1.6% and 5.5%](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.deep.byAge&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580), respectively.

**Figure 11: Poverty Impact (2025)**

![](https://cdn-images-1.medium.com/max/2000/0*5yY5SWB9W7PPe5s0)

Income inequality [would decrease](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&household=51448&region=ny&timePeriod=2026&baseline=2&reform=76580) as it did in 2025. However, each inequality impact would be lower, including the Gini index (0.67% to 0.24%).

## Conclusion

Governor Hochul’s major tax proposals would send one-time inflation rebates to New York residents, expand the Empire State Child Credit to $1,000 for children under 4 and to $500 for all other eligible children, and reduce the first five state income tax brackets by 0.2 percentage points over two years. In 2025, these reforms would reduce state revenue by $4.8 billion. The combined impact of the tax provisions would affect 99.4% of New Yorkers, providing an average household benefit of $611. These changes would also lower poverty by 5.2% and child poverty by 6.4%.

The impact of these proposals would shrink in 2026. The total cost would amount to $2.1 billion, as ESCC increases to $500 for children aged 4–16 and income tax rates decrease by an additional 0.1 percentage point, while the inflation rebates expire. These changes would reduce poverty by 2.5% and child poverty by 7.4% while increasing net income for 83.5% of New Yorkers.

As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.

We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.

## Appendix A: Impact Summary of Major Tax Proposals for 2025 and 2026

| Year     | Reform            | Cost ($ millions) | Percentage of Net Beneficiaries | Poverty Impact | Deep Poverty Impact | Inequality Impact |
| -------- | ----------------- | ----------------- | ------------------------------- | -------------- | ------------------- | ----------------- |
| 2025     | Inflation Rebates | 3,716             | 94.0%                           | -4.0%          | -2.8%               | -0.53%            |
| 2025     | ESCC Expansion    | 481               | 15.1%                           | -1.3%          | -1.5%               | -0.16%            |
| 2025     | Income Tax Cuts   | 623               | 68.3%                           | -0.2%          | 0%                  | +0.02%            |
| **2025** | **Total Impact**  | **4,820**         | **99.4%**                       | **-5.2%**      | **-5.0%**           | **-0.67%**        |
| 2026     | ESCC Expansion    | 821               | 31.1%                           | -2.3%          | -1.6%               | -0.27%            |
| 2026     | Income Tax Cuts   | 1,311             | 77.7%                           | 0%             | 0%                  | +0.03%            |
| **2026** | **Total Impact**  | **2,132**         | **83.5%**                       | **-2.0%**      | **-1.6%**           | **-0.24%**        |

[^1]: Once New York households reach a specific annual income, their state tax liability exceeds the value of the federal standard deduction, making itemizing their deductions (specifically claiming the State and Local Tax Deduction) more valuable. However, the alternative minimum tax effectively caps the SALT deduction’s value once the household reaches a certain income.

[^2]: We assume full take up for the inflation rebates (i.e., every filer under the income limits filed taxes in 2023 and is therefore eligible for the refund). This explains why PolicyEngine’s estimate of the inflation rebates is higher than one found in the Executive Budget ($3.0 million).

[^3]: PolicyEngine sorts households into deciles by baseline net income, with boundaries set nationally rather than within states.

[^4]: While the reduction of New York’s income taxes in 2026 would lower state revenues by $1.3 billion, it would also raise federal revenue. Currently, New Yorkers can report their state income tax liability to reduce their federal taxes when claiming the State and Local Tax Deduction. Since New Yorkers will have a lower state income tax liability under the reform, their federal tax owed will increase, thus increasing federal revenue by $128.9 million in 2026.



---

---
# The impact of Personal Independence Payment, and freezing its level in 2025
Slug: pip-and-freeze
Date: 2025-03-11
Authors: Nikhil Woodruff
Tags: uk, policy, featured
Description: How the disability benefit, and one reform the government is reportedly considering, affect the UK household sector.

---

The UK provides [Personal Independence Payment](https://www.gov.uk/pip) (PIP) is a government benefit paying support to individuals who have long-term physical or mental health conditions or disabilities. News outlets have [reported](https://www.itv.com/news/2025-03-07/government-to-make-6bn-welfare-savings-with-benefits-shake-up) that the UK government plans to reform the requirements to claim PIP, including potential changes to eligibility criteria, assessment processes, or payment rates.

# How PIP works

To be eligible for PIP, claimants must be between the ages of 16 and state pension age, have a long-term physical or mental health condition or disability expected to last at least 12 months, and face difficulties performing everyday tasks or moving around. The Department for Work and Pensions, which administers the benefit, assesses eligibility through a points-based system evaluating the claimant’s ability to manage daily activities and mobility. The program does not vary payments by income.

# How PIP affects the UK

In 2025 and assuming our [standard behavioural responses](https://policyengine.org/uk/research/behavioural-responses), we [estimate](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&baseline=78633&timePeriod=2025&region=uk) that the government will spend £30 billion on PIP payments, affecting the household incomes of 10.3% of people. These payments increase the incomes of the bottom half of the income distribution by more than 1%, and increase the income of the lowest income decile by 17%.

![Impact by decile](/images/posts/pip-and-freeze/image_1.png)

We estimate that PIP [lowers](https://legacy.policyengine.org/uk/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=1&baseline=78633&timePeriod=2025&region=uk) the absolute, before housing costs (BHC) poverty rate by 1.3pp (884,000 people), and the deep absolute BHC poverty rate by 0.5pp (340,000 people).

![Poverty impact](/images/posts/pip-and-freeze/image_2.png)

We estimate that PIP increases (by over 5%) the net income for 10% of the population, and around 23% of the lowest income decile.

![Outcomes by decile](/images/posts/pip-and-freeze/image_3.png)

By applying [our standard behavioural assumptions](https://policyengine.org/uk/research/behavioural-responses), we estimate that PIP reduces earnings by £288 million in 2025, 0.02% of total UK earnings, equivalent to around 7,800 full time jobs at the UK average wage.[^1] By comparing this to [no behavioural assumptions](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&baseline=78632&timePeriod=2025&region=uk), we find that this translates to a £102 million reduction in tax revenues and a £25 million increase in other benefit spending; that is, behaviour increases the cost by 0.4%.

We also find that PIP reduces income inequality (as measured by the Gini coefficient of net household income) by 2.8%.

# Freezing PIP rates in 2025

By keeping PIP levels the same in FY 2025/26, PolicyEngine [estimates](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=78417&baseline=1&timePeriod=2025&region=uk) that the government would raise £464 million over that time period. These impacts would affect the household incomes of 9.7% of people and reduce the incomes of the bottom half of the income distribution by between 0.05% and 0.1%.

![Impact by decile](/images/posts/pip-and-freeze/image_4.png)

The freeze of PIP rates would affect around 17% of the third and fourth deciles, and between 5% and 10% of the remaining deciles.

![Outcome by decile](/images/posts/pip-and-freeze/image_5.png)

The reform would not affect poverty rates by more than 0.1pp, and would raise income inequality slightly (by 0.04%).

## Notes

[^1]: This effect is due to the income elasticity of substitution - individuals reducing their labour supply at the margin due to higher net income.



---

---
# Analysis of Michigan HB 4170
Slug: michigan-bill-hb4170
Date: 2025-03-26
Authors: Pavel Makarchuk
Tags: us, policy, featured
Description: We project the bill, which would reduce Michigan’s tax rate from 4.25% to 4.05%, would cost $644 million in 2025.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "On March 5th, Michigan State Representative Kathy Schmaltz introduced [House Bill 4170](https://www.legislature.mi.gov/documents/2025-2026/billintroduced/House/pdf/2025-HIB-4170.pdf), which reduces the state's income tax rate from 4.25% to 4.05% beginning in tax year 2025. The bill also reduces the rate further in future years, conditional on state revenue growth exceeding inflation rates.\n",
    "\n",
    "We have analyzed the impacts of this reform using the PolicyEngine microsimulation model, showing the effect on the state of Michigan and its residents.\n",
    "\n",
    "Key results for 2025:\n",
    "\n",
    "* Reduces state revenues by $644 million\n",
    "* Benefits 75% of Michigan residents\n",
    "* Lowers the state's Supplemental Poverty Measure by 0.02%\n",
    "* Increases the Gini index of income inequality by 0.07%\n",
    "\n",
    "*Use PolicyEngine to view the [full results](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.policyBreakdown&region=mi&timePeriod=2025&baseline=2) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?reform=77567&focus=intro&region=mi&timePeriod=2025&baseline=2).*"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 245,
   "metadata": {},
   "outputs": [],
   "source": [
    "from IPython.display import Markdown\n",
    "import pandas as pd\n",
    "import plotly.express as px\n",
    "import plotly.graph_objects as go\n",
    "\n",
    "\n",
    "# Define PolicyEngine's color palette\n",
    "BLACK = \"#000000\"\n",
    "BLUE_LIGHT = \"#D8E6F3\"\n",
    "BLUE_PRIMARY = \"#2C6496\"\n",
    "DARK_BLUE_HOVER = \"#1d3e5e\"\n",
    "DARK_GRAY = \"#616161\"\n",
    "DARKEST_BLUE = \"#0C1A27\"\n",
    "GRAY = \"#808080\"\n",
    "LIGHT_GRAY = \"#F2F2F2\"\n",
    "MEDIUM_DARK_GRAY = \"#D2D2D2\"\n",
    "MEDIUM_LIGHT_GRAY = \"#BDBDBD\"\n",
    "WHITE = \"#FFFFFF\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Household Impacts\n",
    "\n",
    "Higher-income households receive larger tax savings due to their higher taxable income and initial tax liability. A childless couple in Michigan earning $30,000 receives [$67](https://legacy.policyengine.org/us/household?reform=77567&focus=householdOutput.earnings&region=mi&timePeriod=2025&baseline=2&household=52179) from the rate reduction, while the same household type gains [$277](https://legacy.policyengine.org/us/household?reform=77567&focus=householdOutput.netIncome&region=mi&timePeriod=2025&baseline=2&household=51836) at $150,000 of earnings or [$1,177](https://legacy.policyengine.org/us/household?reform=77567&focus=householdOutput.netIncome&region=mi&timePeriod=2025&baseline=2&household=51837) at $600,000."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 246,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 1: Change in Net Income by Household Income for a Childless Married Couple**\n",
       "\n",
       "| Household Earnings ($)   | Change in Net Income ($)   |\n",
       "|:-------------------------|:---------------------------|\n",
       "| 30,000                   | 61                         |\n",
       "| 150,000                  | 277                        |\n",
       "| 300,000                  | 1,177                      |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 246,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the household impacts\n",
    "earnings_levels = [30000, 150000, 300000]\n",
    "change_in_net_income = [61, 277, 1177]\n",
    "\n",
    "\n",
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Household Earnings ($)\": earnings_levels,\n",
    "        \"Change in Net Income ($)\": change_in_net_income,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Household Earnings ($)\"] = df[\"Household Earnings ($)\"].apply(\n",
    "    add_thousands_separator\n",
    ")\n",
    "df[\"Change in Net Income ($)\"] = df[\"Change in Net Income ($)\"].apply(\n",
    "    add_thousands_separator\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Table 1: Change in Net Income by Household Income for a Childless Married Couple**\\n\\n\"\n",
    "    + df.to_markdown(index=False)\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Figure 1 shows the [change in household net income](https://legacy.policyengine.org/us/household?reform=77567&focus=householdOutput.earnings&region=mi&timePeriod=2025&baseline=2&household=51836) for a childless couple in 2025. The couple does not have any tax liability for earnings up to $11,250 due to the state exemption amount. The household is not eligible to receive any standard deduction amounts as they are only applied to filers aged 67 and older."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 247,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income=%{x}\\u003cbr\\u003eChange in net income=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,1054,2108,3162,4216,5271,6325,7379,8433,9487,10541,11595,12649,13704,14758,15812,16866,17920,18974,20028,21082,22136,23191,24245,25299,26353,27407,28461,29515,30569,31623,32678,33732,34786,35840,36894,37948,39002,40056,41111,42165,43219,44273,45327,46381,47435,48489,49543,50598,51652,52706,53760,54814,55868,56922,57976,59031,60085,61139,62193,63247,64301,65355,66409,67463,68518,69572,70626,71680,72734,73788,74842,75896,76950,78005,79059,80113,81167,82221,83275,84329,85383,86438,87492,88546,89600,90654,91708,92762,93816,94870,95925,96979,98033,99087,100141,101195,102249,103303,104358],\"xaxis\":\"x\",\"y\":[0,0,0,0,0,0,0,0,0,0,0,0,2,7,11,15,19,24,28,32,36,40,45,49,53,57,62,66,70,74,78,83,87,91,95,99,104,108,112,116,121,125,129,133,137,142,146,150,154,159,163,167,171,175,180,184,188,192,196,201,205,209,213,218,222,226,230,234,239,243,247,251,255,260,264,268,272,277,281,285,289,293,298,302,306,310,315,319,323,327,331,336,340,344,348,352,356,360,364,368],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Household head employment income ($)\"},\"tickformat\":\",\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Change in Household Net Income by Employment Income\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 247,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create the data for the line graph with rounded numbers\n",
    "employment_income = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0.0,\n",
    "        1054.1162,\n",
    "        2108.2324,\n",
    "        3162.3489,\n",
    "        4216.465,\n",
    "        5270.581,\n",
    "        6324.6978,\n",
    "        7378.8135,\n",
    "        8432.93,\n",
    "        9487.047,\n",
    "        10541.162,\n",
    "        11595.278,\n",
    "        12649.3955,\n",
    "        13703.511,\n",
    "        14757.627,\n",
    "        15811.743,\n",
    "        16865.86,\n",
    "        17919.977,\n",
    "        18974.094,\n",
    "        20028.207,\n",
    "        21082.324,\n",
    "        22136.441,\n",
    "        23190.557,\n",
    "        24244.674,\n",
    "        25298.791,\n",
    "        26352.906,\n",
    "        27407.021,\n",
    "        28461.137,\n",
    "        29515.254,\n",
    "        30569.371,\n",
    "        31623.486,\n",
    "        32677.604,\n",
    "        33731.72,\n",
    "        34785.836,\n",
    "        35839.953,\n",
    "        36894.066,\n",
    "        37948.188,\n",
    "        39002.3,\n",
    "        40056.414,\n",
    "        41110.535,\n",
    "        42164.65,\n",
    "        43218.766,\n",
    "        44272.883,\n",
    "        45327.0,\n",
    "        46381.113,\n",
    "        47435.227,\n",
    "        48489.348,\n",
    "        49543.46,\n",
    "        50597.582,\n",
    "        51651.695,\n",
    "        52705.812,\n",
    "        53759.926,\n",
    "        54814.043,\n",
    "        55868.16,\n",
    "        56922.273,\n",
    "        57976.395,\n",
    "        59030.508,\n",
    "        60084.625,\n",
    "        61138.742,\n",
    "        62192.855,\n",
    "        63246.973,\n",
    "        64301.09,\n",
    "        65355.207,\n",
    "        66409.32,\n",
    "        67463.44,\n",
    "        68517.555,\n",
    "        69571.67,\n",
    "        70625.78,\n",
    "        71679.91,\n",
    "        72734.02,\n",
    "        73788.13,\n",
    "        74842.25,\n",
    "        75896.375,\n",
    "        76950.484,\n",
    "        78004.6,\n",
    "        79058.72,\n",
    "        80112.83,\n",
    "        81166.95,\n",
    "        82221.07,\n",
    "        83275.18,\n",
    "        84329.3,\n",
    "        85383.42,\n",
    "        86437.53,\n",
    "        87491.65,\n",
    "        88545.766,\n",
    "        89599.875,\n",
    "        90654.0,\n",
    "        91708.12,\n",
    "        92762.23,\n",
    "        93816.34,\n",
    "        94870.45,\n",
    "        95924.58,\n",
    "        96978.695,\n",
    "        98032.81,\n",
    "        99086.92,\n",
    "        100141.05,\n",
    "        101195.164,\n",
    "        102249.27,\n",
    "        103303.39,\n",
    "        104357.5,\n",
    "    ]\n",
    "]\n",
    "\n",
    "net_income_change = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0,\n",
    "        0,\n",
    "        0,\n",
    "        0,\n",
    "        0,\n",
    "        0,\n",
    "        2.4980469,\n",
    "        6.716797,\n",
    "        10.931641,\n",
    "        15.1484375,\n",
    "        19.365234,\n",
    "        23.580078,\n",
    "        27.798828,\n",
    "        32.01367,\n",
    "        36.23047,\n",
    "        40.447266,\n",
    "        44.664062,\n",
    "        48.878906,\n",
    "        53.09375,\n",
    "        57.3125,\n",
    "        61.53125,\n",
    "        65.74609,\n",
    "        69.96484,\n",
    "        74.17969,\n",
    "        78.39453,\n",
    "        82.61328,\n",
    "        86.828125,\n",
    "        91.04297,\n",
    "        95.25781,\n",
    "        99.48047,\n",
    "        103.69531,\n",
    "        107.91016,\n",
    "        112.12891,\n",
    "        116.34375,\n",
    "        120.5625,\n",
    "        124.77734,\n",
    "        128.99219,\n",
    "        133.21094,\n",
    "        137.42578,\n",
    "        141.64062,\n",
    "        145.85938,\n",
    "        150.07812,\n",
    "        154.28906,\n",
    "        158.50781,\n",
    "        162.72656,\n",
    "        166.94531,\n",
    "        171.15625,\n",
    "        175.375,\n",
    "        179.59375,\n",
    "        183.80469,\n",
    "        188.01562,\n",
    "        192.23438,\n",
    "        196.46094,\n",
    "        200.67188,\n",
    "        204.89062,\n",
    "        209.10938,\n",
    "        213.32031,\n",
    "        217.53906,\n",
    "        221.75781,\n",
    "        225.96875,\n",
    "        230.1875,\n",
    "        234.40625,\n",
    "        238.61719,\n",
    "        242.83594,\n",
    "        247.05469,\n",
    "        251.27344,\n",
    "        255.48438,\n",
    "        259.70312,\n",
    "        263.92188,\n",
    "        268.14062,\n",
    "        272.35156,\n",
    "        276.5703,\n",
    "        280.78906,\n",
    "        285.0078,\n",
    "        289.21875,\n",
    "        293.4375,\n",
    "        297.65625,\n",
    "        301.8672,\n",
    "        306.09375,\n",
    "        310.3047,\n",
    "        314.51562,\n",
    "        318.73438,\n",
    "        322.96875,\n",
    "        327.15625,\n",
    "        331.39062,\n",
    "        335.59375,\n",
    "        339.8125,\n",
    "        344.03125,\n",
    "        348.25,\n",
    "        352.46875,\n",
    "        356.3,\n",
    "        360.1,\n",
    "        364.5,\n",
    "        368.226,\n",
    "    ]\n",
    "]\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in net income\": net_income_change,\n",
    "    }\n",
    ")\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in net income\",\n",
    "    color_discrete_sequence=[BLUE_PRIMARY],\n",
    "    title=\"Change in Household Net Income by Employment Income\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Household head employment income ($)\",\n",
    "    yaxis_title=\"Change in net income ($)\",\n",
    "    xaxis_tickformat=\",\",\n",
    "    yaxis_tickformat=\",\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Statewide Impacts\n",
    "\n",
    "PolicyEngine's static model indicates the income tax cut would [reduce state revenues](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.budgetaryImpact.overall&region=mi&timePeriod=2025&baseline=2) by $644.8 million in tax year 2025. Federal revenues rise by $455,000 due to the state and local tax deduction."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The measure [increases net income](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.winnersAndLosers.incomeDecile&region=mi&timePeriod=2025&baseline=2) for 75% of Michigan residents. By income level, 14% of the population in the first income decile and 100% in the top decile would receive a net gain from the 2025 tax cuts."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 248,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"75%\"],\"textposition\":\"inside\",\"x\":[75],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"25%\"],\"textposition\":\"inside\",\"x\":[25],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"14%\",\"44%\",\"64%\",\"68%\",\"81%\",\"89%\",\"96%\",\"98%\",\"99%\",\"100%\"],\"textposition\":\"inside\",\"x\":[14,44,64,68,81,89,96,98,99,100],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"86%\",\"56%\",\"36%\",\"32%\",\"19%\",\"10%\",\"5%\",\"2%\",\"1%\",\"\"],\"textposition\":\"inside\",\"x\":[86,56,36,32,19,10,5,2,1,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"matches\":\"x2\",\"showticklabels\":false,\"title\":{\"text\":\"\"},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.902,1.0]},\"xaxis2\":{\"anchor\":\"y2\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Population share\",\"standoff\":20},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis2\":{\"anchor\":\"x2\",\"domain\":[0.0,0.882],\"title\":{\"text\":\"Income Decile\",\"standoff\":15},\"automargin\":true},\"title\":{\"text\":\"Winners of Michigan's Income Tax Cut by Decile\",\"x\":0.8},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"legend\":{\"orientation\":\"v\",\"yanchor\":\"top\",\"y\":1.0,\"xanchor\":\"right\",\"x\":1.5,\"traceorder\":\"normal\",\"itemsizing\":\"constant\"},\"margin\":{\"l\":50,\"r\":160,\"b\":100,\"t\":100,\"pad\":4},\"barmode\":\"stack\",\"height\":600,\"width\":900,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 248,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Income deciles\n",
    "deciles = list(range(1, 11))\n",
    "\n",
    "# Data for tax cut effects\n",
    "gain_more_than_5pct = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]  # Dark blue\n",
    "gain_less_than_5pct = [14, 44, 64, 68, 81, 89, 96, 98, 99, 100]  # Light blue\n",
    "no_change = [86, 56, 36, 32, 19, 10, 5, 2, 1, 0]  # Neutral grey\n",
    "loss_less_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Light red (empty in this case)\n",
    "loss_more_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Dark red (empty in this case)\n",
    "\n",
    "# Direct input values for the \"All\" category\n",
    "all_gain_more = 0\n",
    "all_gain_less = 75\n",
    "all_no_change = 25\n",
    "all_loss_less = 0\n",
    "all_loss_more = 0\n",
    "\n",
    "# Create labels for deciles\n",
    "labels_deciles = [f\"{i}\" for i in deciles]\n",
    "\n",
    "# Create DataFrame for deciles\n",
    "df_deciles = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": labels_deciles,\n",
    "        \"Gain more than 5%\": gain_more_than_5pct,\n",
    "        \"Gain less than 5%\": gain_less_than_5pct,\n",
    "        \"No change\": no_change,\n",
    "        \"Loss less than 5%\": loss_less_than_5pct,\n",
    "        \"Loss more than 5%\": loss_more_than_5pct,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create DataFrame for All\n",
    "df_all = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": [\"All\"],\n",
    "        \"Gain more than 5%\": [all_gain_more],\n",
    "        \"Gain less than 5%\": [all_gain_less],\n",
    "        \"No change\": [all_no_change],\n",
    "        \"Loss less than 5%\": [all_loss_less],\n",
    "        \"Loss more than 5%\": [all_loss_more],\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the final combined figure with a subplot\n",
    "fig = make_subplots(\n",
    "    rows=2,\n",
    "    cols=1,\n",
    "    shared_xaxes=True,\n",
    "    vertical_spacing=0.02,\n",
    "    row_heights=[0.1, 0.9],\n",
    ")\n",
    "\n",
    "# Add traces for \"All\" category - first row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Add traces for deciles - second row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Update layout\n",
    "fig.update_layout(\n",
    "    barmode=\"stack\",\n",
    "    title=\"Winners of Michigan's Income Tax Cut by Decile\",\n",
    "    title_x=0.8,\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis=dict(title=\"\", ticksuffix=\"%\", range=[0, 100]),\n",
    "    xaxis2=dict(\n",
    "        title=dict(\n",
    "            text=\"Population share\",\n",
    "            standoff=20,  # Increase standoff to move title down\n",
    "        ),\n",
    "        ticksuffix=\"%\",\n",
    "        range=[0, 100],\n",
    "    ),\n",
    "    yaxis2=dict(\n",
    "        automargin=True,\n",
    "        title=dict(\n",
    "            text=\"Income Decile\",\n",
    "            standoff=15,  # Increase standoff to move title left\n",
    "        ),\n",
    "    ),\n",
    "    legend=dict(\n",
    "        orientation=\"v\",\n",
    "        yanchor=\"top\",\n",
    "        y=1.0,\n",
    "        xanchor=\"right\",\n",
    "        x=1.5,\n",
    "        traceorder=\"normal\",\n",
    "        itemsizing=\"constant\",\n",
    "    ),\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 160, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    height=600,\n",
    "    width=900,  # Explicitly set width to accommodate legend\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Households would receive an [average benefit of $153](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.distributionalImpact.incomeDecile.average&region=mi&timePeriod=2025&baseline=2), ranging from $5 in the bottom income decile to $747 in the top decile."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 249,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile: %{x}\\u003cbr\\u003eAverage impact: $%{y:,.0f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"$5\",\"$28\",\"$56\",\"$68\",\"$98\",\"$136\",\"$185\",\"$238\",\"$337\",\"$747\"],\"textposition\":\"auto\",\"x\":[1,2,3,4,5,6,7,8,9,10],\"xaxis\":\"x\",\"y\":[5,28,56,68,98,136,185,238,337,747],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Average impact ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Income Distribution of Michigan's Income Tax Cut by Decile\"},\"barmode\":\"relative\",\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 249,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Average impact by decile data\n",
    "deciles = list(range(1, 11))\n",
    "avg_impact = [5, 28, 56, 68, 98, 136, 185, 238, 337, 747]\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": deciles,\n",
    "        \"Average impact\": avg_impact,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Format dollar values for display\n",
    "dollar_text = [f\"${x}\" for x in avg_impact]\n",
    "\n",
    "fig = (\n",
    "    px.bar(\n",
    "        df,\n",
    "        x=\"Income decile\",\n",
    "        y=\"Average impact\",\n",
    "        text=dollar_text,  # Dollar values with $ sign\n",
    "        color_discrete_sequence=[BLUE_PRIMARY],\n",
    "        title=\"Income Distribution of Michigan's Income Tax Cut by Decile\",\n",
    "    )\n",
    "    .update_layout(\n",
    "        font=dict(family=\"Roboto Serif\"),\n",
    "        xaxis_title=\"Income decile\",\n",
    "        yaxis_title=\"Average impact ($)\",\n",
    "        xaxis_tickvals=list(range(1, 11)),\n",
    "        yaxis_tickformat=\",\",\n",
    "        showlegend=False,\n",
    "        font_color=BLACK,\n",
    "        margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "        annotations=[\n",
    "            {\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.25,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"text\": \"Source: PolicyEngine US\",\n",
    "                \"showarrow\": False,\n",
    "                \"font\": {\n",
    "                    \"family\": \"Roboto Serif\",\n",
    "                    \"size\": 10,\n",
    "                    \"color\": DARK_GRAY,\n",
    "                },\n",
    "            }\n",
    "        ],\n",
    "        images=[\n",
    "            {\n",
    "                \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.2,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"sizex\": 0.1,\n",
    "                \"sizey\": 0.1,\n",
    "                \"xanchor\": \"right\",\n",
    "                \"yanchor\": \"bottom\",\n",
    "            }\n",
    "        ],\n",
    "    )\n",
    "    .update_traces(\n",
    "        hovertemplate=\"Income decile: %{x}<br>Average impact: $%{y:,.0f}<extra></extra>\"\n",
    "    )\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Inequality and Poverty Impact\n",
    "\n",
    "The tax reduction would increase Michigan's Gini index of income inequality by [0.07%](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.inequalityImpact&region=mi&timePeriod=2025&baseline=2). We project it to [reduce the state's poverty rate](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.povertyImpact.regular.byAge&region=mi&timePeriod=2025&baseline=2) by 0.02% according to the Supplemental Poverty Measure, while [deep poverty levels remain unchanged](https://legacy.policyengine.org/us/policy?reform=77567&focus=policyOutput.povertyImpact.deep.byAge&region=mi&timePeriod=2025&baseline=2)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Conclusion\n",
    "\n",
    "Michigan's proposed income tax rate reduction would decrease state revenues by $644.8 million in 2025, reducing poverty by 0.02% and increasing income inequality by 0.07%. While the reform reduces tax liability across all income deciles, higher-income households receive proportionally greater benefits.\n",
    "\n",
    "Tools like PolicyEngine provide data for policymakers evaluating such reforms, offering insights into impacts on various household types and the broader economy.\n",
    "\n",
    "We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "pe",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.14"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}



---

---
# Restricting eligibility for the Personal Independence Payment Daily Living part
Slug: uk-pip-reforms
Date: 2025-03-18
Authors: Nikhil Woodruff, Max Ghenis
Tags: uk, policy, featured
Description: We simulate potential realisations of the Government's new £5 billion reform.

---

Work and Pensions Secretary Liz Kendall has [announced](https://www.gov.uk/government/consultations/pathways-to-work-reforming-benefits-and-support-to-get-britain-working-green-paper/pathways-to-work-reforming-benefits-and-support-to-get-britain-working-green-paper#section-1--what-the-reformed-system-will-look-like) reforms to the Personal Independence Payment (PIP) that would reduce benefits by £5 billion by 2029-30. The reform restricts eligibility for the daily living (DL) part based on severity.

Using the open-source PolicyEngine microsimulation model, we simulated the impact of two potential realisations of this policy:

1. Assign each PIP DL participant an equal chance of losing eligibility
2. Assign only non-enhanced PIP DL participants an equal chance of losing eligibility

We then calibrated each potential realisation to reduce benefits by £5 billion by 2029-30.

## How PIP works

DWP qualifies people for PIP based on a [points system](https://www.legislation.gov.uk/uksi/2013/377). Daily living and mobility parts each require at least 8 points for the lower (standard) amount and 12 points for the higher (enhanced) parts. Daily living has 10 activities; mobility has two. PIP does not have an income or asset limit.

**Table 1: PIP amounts (2025)**

| **Component**     | **Lower weekly rate** | **Higher weekly rate** |
| ----------------- | --------------------- | ---------------------- |
| Daily living part | £72.65                | £108.55                |
| Mobility part     | £28.70                | £75.75                 |

We uprate these elements with inflation, projecting that by 2029, the daily living part will be [£80.31 (lower)](https://legacy.policyengine.org/uk/policy?reform=1&focus=gov.dwp.pip.daily_living.standard) and [£119.99 (higher)](https://legacy.policyengine.org/uk/policy?reform=1&focus=gov.dwp.pip.daily_living.enhanced) per week.

## The reform

The [green paper](https://www.gov.uk/government/consultations/pathways-to-work-reforming-benefits-and-support-to-get-britain-working-green-paper/pathways-to-work-reforming-benefits-and-support-to-get-britain-working-green-paper#section-1--what-the-reformed-system-will-look-like) states:

_"We will introduce a new, additional eligibility requirement so that a minimum of 4 points must be scored on one PIP daily living activity to receive the daily living element of the benefit. This means that people who only score the lowest points on each of the PIP daily living activities will lose their entitlement in future."_

## The simulation results

The reform may affect both non-enhanced and enhanced PIP DL enrollees, so we simulated realisations that remove both non-enhanced only and all PIP DL enrollees. For each realisation, we adjusted the removal share of the affected population to result in £5 billion in reduced benefit payments.

**Table 2: Total impacts of PIP DL reforms in 2029**

| **Realisation**       | **Cut to PIP DL non-enhanced** | **Cut to total PIP DL** | **Poverty** | **Deep poverty** |
| --------------------- | ------------------------------ | ----------------------- | ----------- | ---------------- |
| Only cut non-enhanced | 62%                            | 35%                     | 134,000     | 28,000           |
| Cut all               | 25%                            | 25%                     | 119,000     | 63,000           |

In the realisation that cuts both enhanced and non-enhanced, the reform increases female poverty in greater absolute numbers than male, but the reverse is true for deep poverty.

**Table 3: Poverty impacts by gender of PIP DL reforms in 2029**
| **Realisation** | **Male poverty** | **Female poverty** | **Male deep poverty** | **Female deep poverty** |
|-----------------|------------------|--------------------|-----------------------|-------------------------|
| Only cut non-enhanced | 29,000 | 28,000 | 8,000 | 3,000 |
| Cut all | 55,000 | 64,000 | 34,000 | 28,000 |

Our model and analysis [code](https://gist.github.com/nikhilwoodruff/1d1b89276162a09aa81061d6abd6e21a) is open-source. All poverty statistics represent absolute poverty before housing costs. We invite users to explore other PIP reforms at policyengine.org/uk.



---

---
# The Tax Cuts for Workers Act
Slug: tax-cuts-for-workers-act
Date: 2025-06-16
Authors: Pavel Makarchuk, Max Ghenis
Tags: us, policy, featured
Description: We simulate the new bill to restore the American Rescue Plan Act’s Earned Income Tax Credit expansion.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "On April 9th, Senators Catherine Cortez Masto (NV-D) and Michael Bennet (CO-D) [introduced](https://www.cortezmasto.senate.gov/news/press-releases/cortez-masto-colleagues-introduce-bill-to-cut-taxes-for-working-americans/) the [Tax Cuts for Workers Act](https://www.cortezmasto.senate.gov/wp-content/uploads/2025/04/OTT25089.pdf), a bill that expands the Earned Income Tax Credit (EITC) for filers without qualifying children. This report describes the reform, illustrates the impact for a hypothetical household, and summarizes the nationwide impact using the PolicyEngine microsimulation model.\n",
    "\n",
    "[See how the TCWA affects your household here.](https://legacy.policyengine.org/us/household?reform=81471&focus=intro&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 153,
   "metadata": {},
   "outputs": [],
   "source": [
    "from IPython.display import Markdown\n",
    "import pandas as pd\n",
    "import plotly.express as px\n",
    "import plotly.graph_objects as go\n",
    "from plotly.subplots import make_subplots\n",
    "\n",
    "\n",
    "# Define PolicyEngine's color palette\n",
    "BLACK = \"#000000\"\n",
    "BLUE_LIGHT = \"#D8E6F3\"\n",
    "BLUE_PRIMARY = \"#2C6496\"\n",
    "DARK_BLUE_HOVER = \"#1d3e5e\"\n",
    "DARK_GRAY = \"#616161\"\n",
    "DARKEST_BLUE = \"#0C1A27\"\n",
    "GRAY = \"#808080\"\n",
    "LIGHT_GRAY = \"#F2F2F2\"\n",
    "MEDIUM_DARK_GRAY = \"#D2D2D2\"\n",
    "MEDIUM_LIGHT_GRAY = \"#BDBDBD\"\n",
    "WHITE = \"#FFFFFF\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## How the EITC and TCWA work\n",
    "\n",
    "While the US provides the EITC to filers with and without qualifying children, it limits eligibility and reduces the amount for those without children. Such filers must be between ages 25 and 65, and the credit phases in at 7.65% of earnings until earnings reach $4,220 (in 2026). At $10,840 of adjusted gross income ($18,100 for joint filers), the credit is reduced with 7.65% of AGI.\n",
    "\n",
    "In 2021, the US passed the American Rescue Plan Act (ARPA), which included an expansion to the EITC for filers without qualifying children. ARPA lowered the minimum age to 19 (24 for eligible students) and removed the maximum age. It also doubled the phase-in and phase-out rates to 15.3%, while increasing the earnings and AGI levels that governed the credit, thereby increasing the maximum credit value. It did not adjust the “married filing joint bonus”, an additional AGI level for joint filers before the credit starts phasing out. Read our report on the ARPA EITC [here](https://legacy.policyengine.org/us/research/restoring-arpa-eitc).\n",
    "\n",
    "The TCWA restores ARPA’s EITC changes, while setting the dollar figures to their 2021 values starting in 2026 (rather than the values they would have been if ARPA were made permanent, due to inflation adjustments). Table 1 displays these parameter values under current law and TCWA as of 2026.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 154,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 1: EITC Parameters for Filers Without Qualifying Children (2026)**\n",
       "\n",
       "| Provision                                      | Current Law   | TCWA    |\n",
       "|:-----------------------------------------------|:--------------|:--------|\n",
       "| Minimum age                                    | 25            | 19      |\n",
       "| Maximum age                                    | 65            | N/A     |\n",
       "| Phase-in rate                                  | 7.65%         | 15.3%   |\n",
       "| Earnings at which the credit fully phases in   | $8,677        | $9,820  |\n",
       "| Phase-out start                                | $10,840       | $11,610 |\n",
       "| Married filing joint bonus for phase-out start | $7,260        | $7,260  |\n",
       "| Phase-out rate                                 | 7.65%         | 15.3%   |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 154,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the household impacts\n",
    "provisions = [\n",
    "    \"Minimum age\",\n",
    "    \"Maximum age\",\n",
    "    \"Phase-in rate\",\n",
    "    \"Earnings at which the credit fully phases in\",\n",
    "    \"Phase-out start\",\n",
    "    \"Married filing joint bonus for phase-out start\",\n",
    "    \"Phase-out rate\",\n",
    "]\n",
    "current_law = [25, 65, \"7.65%\", \"$8,677\", \"$10,840\", \"$7,260\", \"7.65%\"]\n",
    "tcwa = [19, \"N/A\", \"15.3%\", \"$9,820\", \"$11,610\", \"$7,260\", \"15.3%\"]\n",
    "\n",
    "\n",
    "# Create DataFrame\n",
    "df = pd.DataFrame(\n",
    "    {\"Provision\": provisions, \"Current Law\": current_law, \"TCWA\": tcwa}\n",
    ")\n",
    "\n",
    "\n",
    "# Display as markdown table\n",
    "Markdown(\n",
    "    \"**Table 1: EITC Parameters for Filers Without Qualifying Children (2026)**\\n\\n\"\n",
    "    + df.to_markdown(index=False)\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "These changes result in the maximum credit value rising from $662 ($8,677 * 7.65%) to $1,502 ($9,820 * 15.3%).\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 155,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"\\u003cb\\u003e%{data.name}\\u003c\\u002fb\\u003e\\u003cbr\\u003eEmployment income: $%{x:,.0f}\\u003cbr\\u003eEITC amount: $%{y:,.2f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Current Law\",\"line\":{\"color\":\"#808080\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Current Law\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,9300,9400,9500,9600,9700,9800,9900,10000,10100,10200,10300,10400,10500,10600,10700,10800,10900,11000,11100,11200,11300,11400,11500,11600,11700,11800,11900,12000,12100,12200,12300,12400,12500,12600,12700,12800,12900,13000,13100,13200,13300,13400,13500,13600,13700,13800,13900,14000,14100,14200,14300,14400,14500,14600,14700,14800,14900,15000,15100,15200,15300,15400,15500,15600,15700,15800,15900,16000,16100,16200,16300,16400,16500,16600,16700,16800,16900,17000,17100,17200,17300,17400,17500,17600,17700,17800,17900,18000,18100,18200,18300,18400,18500,18600,18700,18800,18900,19000,19100,19200,19300,19400,19500,19600,19700,19800,19900,20100,20200,20300,20400,20500,20600,20700,20800,20900,21000,21100,21200,21300,21400,21500,21600,21700,21800,21900,22000,22100,22200,22300,22400,22500,22600,22700,22800,22900,23000,23100,23200,23300,23400,23500,23600,23700,23800,23900,24000,24100,24200,24300,24400,24500,24600,24700,24800,24900,25000,25100,25200,25300,25400,25500,25600,25700,25800,25900,26000,26100,26200,26300,26400,26500,26600,26700,26800,26900,27000,27100,27200,27300,27400,27500,27600,27700,27800,27900,28000,28100,28200,28300,28400,28500,28600,28700,28800,28900,29000,29100,29200,29300,29400,29500,29600,29700,29800,29900,30000,30100,30200,30300,30400,30500,30600,30700,30800,30900,31000,31100,31200,31300,31400,31500,31600,31700,31800,31900,32000,32100,32200,32300,32400,32500,32600,32700,32800,32900,33000,33100,33200,33300,33400,33500,33600,33700,33800,33900,34000,34100,34200,34300,34400,34500,34600,34700,34800,34900,35000,35100,35200,35300,35400,35500,35600,35700,35800,35900,36000,36100,36200,36300,36400,36500,36600,36700,36800,36900,37000,37100,37200,37300,37400,37500,37600,37700,37800,37900,38000,38100,38200,38300,38400,38500,38600,38700,38800,38900,39000,39100,39200,39300,39400,39500,39600,39700,39800,39900,40000],\"xaxis\":\"x\",\"y\":[0.0,8.41224,16.82448,25.236721,33.64896,42.061195,50.473442,58.885677,67.29792,75.71015,84.12239,92.53463,100.946884,109.35912,117.771355,126.18359,134.59584,143.00807,151.4203,159.83255,168.24478,176.65704,185.06926,193.48152,201.89377,210.30598,218.71825,227.13046,235.54271,243.95494,252.36719,260.77945,269.19168,277.6039,286.01614,294.4284,302.8406,311.25287,319.6651,328.07733,336.48956,344.90186,353.3141,361.7263,370.13852,378.55078,386.96304,395.37527,403.78754,412.19974,420.61197,429.0242,437.4365,445.84872,454.26093,462.6732,471.08542,479.49765,487.90988,496.32217,504.73438,513.1466,521.5589,529.9711,538.38336,546.79553,555.2078,563.62006,572.0323,580.4446,588.8568,597.269,605.6812,614.0935,622.50574,630.91797,639.3302,647.74243,656.15466,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,658.63043,650.21826,641.80597,633.3936,624.98145,616.56915,608.157,599.7448,591.3325,582.9202,574.50806,566.0959,557.6836,549.2713,540.85913,532.4468,524.03467,515.6225,507.21002,498.79785,490.38568,481.9734,473.56122,465.14893,456.7366,448.32446,439.9123,431.49982,423.08765,414.6755,406.26318,397.85104,389.43872,381.0264,372.61426,364.2021,355.78992,347.37747,338.9653,330.55316,322.14084,313.72867,305.31638,296.90405,288.49188,280.07974,271.66742,263.25513,254.84296,246.43063,238.0185,229.60632,221.19385,212.78171,204.36954,195.95721,187.54507,179.13275,170.72046,162.30829,153.89612,145.48364,137.07153,128.65936,120.24719,111.8349,103.42255,95.010376,86.59808,78.18591,69.77374,61.36133,52.949158,44.536987,36.124695,27.712524,19.300232,10.887878,2.475708,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{data.name}\\u003c\\u002fb\\u003e\\u003cbr\\u003eEmployment income: $%{x:,.0f}\\u003cbr\\u003eEITC amount: $%{y:,.2f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Tax Cuts for Workers Act\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Tax Cuts for Workers Act\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,9300,9400,9500,9600,9700,9800,9900,10000,10100,10200,10300,10400,10500,10600,10700,10800,10900,11000,11100,11200,11300,11400,11500,11600,11700,11800,11900,12000,12100,12200,12300,12400,12500,12600,12700,12800,12900,13000,13100,13200,13300,13400,13500,13600,13700,13800,13900,14000,14100,14200,14300,14400,14500,14600,14700,14800,14900,15000,15100,15200,15300,15400,15500,15600,15700,15800,15900,16000,16100,16200,16300,16400,16500,16600,16700,16800,16900,17000,17100,17200,17300,17400,17500,17600,17700,17800,17900,18000,18100,18200,18300,18400,18500,18600,18700,18800,18900,19000,19100,19200,19300,19400,19500,19600,19700,19800,19900,20100,20200,20300,20400,20500,20600,20700,20800,20900,21000,21100,21200,21300,21400,21500,21600,21700,21800,21900,22000,22100,22200,22300,22400,22500,22600,22700,22800,22900,23000,23100,23200,23300,23400,23500,23600,23700,23800,23900,24000,24100,24200,24300,24400,24500,24600,24700,24800,24900,25000,25100,25200,25300,25400,25500,25600,25700,25800,25900,26000,26100,26200,26300,26400,26500,26600,26700,26800,26900,27000,27100,27200,27300,27400,27500,27600,27700,27800,27900,28000,28100,28200,28300,28400,28500,28600,28700,28800,28900,29000,29100,29200,29300,29400,29500,29600,29700,29800,29900,30000,30100,30200,30300,30400,30500,30600,30700,30800,30900,31000,31100,31200,31300,31400,31500,31600,31700,31800,31900,32000,32100,32200,32300,32400,32500,32600,32700,32800,32900,33000,33100,33200,33300,33400,33500,33600,33700,33800,33900,34000,34100,34200,34300,34400,34500,34600,34700,34800,34900,35000,35100,35200,35300,35400,35500,35600,35700,35800,35900,36000,36100,36200,36300,36400,36500,36600,36700,36800,36900,37000,37100,37200,37300,37400,37500,37600,37700,37800,37900,38000,38100,38200,38300,38400,38500,38600,38700,38800,38900,39000,39100,39200,39300,39400,39500,39600,39700,39800,39900,40000],\"xaxis\":\"x\",\"y\":[0.0,16.82448,33.64896,50.473442,67.29792,84.12239,100.946884,117.771355,134.59584,151.4203,168.24478,185.06926,201.89377,218.71825,235.54271,252.36719,269.19168,286.01614,302.8406,319.6651,336.48956,353.3141,370.13852,386.96304,403.78754,420.61197,437.4365,454.26093,471.08542,487.90988,504.73438,521.5589,538.38336,555.2078,572.0323,588.8568,605.6812,622.50574,639.3302,656.15466,672.9791,689.8037,706.6282,723.4526,740.27704,757.10156,773.9261,790.75055,807.5751,824.3995,841.22394,858.0484,874.873,891.69745,908.52185,925.3464,942.17084,958.9953,975.81976,992.64435,1009.46875,1026.2932,1043.1178,1059.9423,1076.7667,1093.5911,1110.4156,1127.2401,1144.0646,1160.8892,1177.7136,1194.538,1211.3624,1228.187,1245.0115,1261.8359,1278.6604,1295.4849,1312.3093,1329.1338,1345.9583,1362.7828,1379.6074,1396.4318,1413.2563,1430.0808,1446.9052,1463.7297,1480.5541,1497.3787,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1495.2997,1478.4751,1461.6504,1444.8262,1428.0018,1411.1771,1394.3525,1377.5282,1360.7036,1343.8793,1327.0549,1310.23,1293.4058,1276.5814,1259.7568,1242.9325,1226.1079,1209.2832,1192.4589,1175.6345,1158.8097,1141.9854,1125.161,1108.3364,1091.5121,1074.6875,1057.8628,1041.0386,1024.2141,1007.3899,990.56494,973.7406,956.9163,940.0917,923.26733,906.44275,889.6181,872.79376,855.9695,839.14484,822.32025,805.4959,788.67126,771.847,755.02264,738.1977,721.3734,704.5491,687.7244,670.90015,654.0755,637.2509,620.4266,603.60223,586.77734,569.953,553.12866,536.3044,519.47974,502.6551,485.8308,469.00623,452.1819,435.35754,418.5326,401.70825,384.8839,368.05933,351.235,334.4104,317.58582,300.76147,283.93713,267.11255,250.28784,233.46362,216.63892,199.81458,182.99036,166.1654,149.34106,132.51672,115.69238,98.8678,82.04321,65.21887,48.394287,31.569946,14.745605,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Employment income\"},\"tickformat\":\"$,.0f\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"EITC amount\"},\"tickformat\":\"$,.0f\"},\"legend\":{\"title\":{\"text\":\"Scenario\"},\"tracegroupgap\":0,\"yanchor\":\"top\",\"y\":0.99,\"xanchor\":\"right\",\"x\":0.99,\"bgcolor\":\"rgba(255, 255, 255, 0.8)\"},\"margin\":{\"t\":50,\"l\":50,\"r\":50,\"b\":100,\"pad\":4},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"title\":{\"text\":\"Figure 2: Credit value for married joint filers under current law and the TCWA\"},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 155,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create income values from 0 to 40,000 in equal steps\n",
    "income_steps = 400  # Number of data points\n",
    "# Generate the original income values\n",
    "employment_income_original = [\n",
    "    i * (40000 / (income_steps - 1)) for i in range(income_steps)\n",
    "]\n",
    "# Round the income values to the nearest 100\n",
    "employment_income = [\n",
    "    round(income / 100) * 100 for income in employment_income_original\n",
    "]\n",
    "\n",
    "# Use the exact values provided\n",
    "blue_values = [\n",
    "    0.0,\n",
    "    16.82448,\n",
    "    33.64896,\n",
    "    50.473442,\n",
    "    67.29792,\n",
    "    84.12239,\n",
    "    100.946884,\n",
    "    117.771355,\n",
    "    134.59584,\n",
    "    151.4203,\n",
    "    168.24478,\n",
    "    185.06926,\n",
    "    201.89377,\n",
    "    218.71825,\n",
    "    235.54271,\n",
    "    252.36719,\n",
    "    269.19168,\n",
    "    286.01614,\n",
    "    302.8406,\n",
    "    319.6651,\n",
    "    336.48956,\n",
    "    353.3141,\n",
    "    370.13852,\n",
    "    386.96304,\n",
    "    403.78754,\n",
    "    420.61197,\n",
    "    437.4365,\n",
    "    454.26093,\n",
    "    471.08542,\n",
    "    487.90988,\n",
    "    504.73438,\n",
    "    521.5589,\n",
    "    538.38336,\n",
    "    555.2078,\n",
    "    572.0323,\n",
    "    588.8568,\n",
    "    605.6812,\n",
    "    622.50574,\n",
    "    639.3302,\n",
    "    656.15466,\n",
    "    672.9791,\n",
    "    689.8037,\n",
    "    706.6282,\n",
    "    723.4526,\n",
    "    740.27704,\n",
    "    757.10156,\n",
    "    773.9261,\n",
    "    790.75055,\n",
    "    807.5751,\n",
    "    824.3995,\n",
    "    841.22394,\n",
    "    858.0484,\n",
    "    874.873,\n",
    "    891.69745,\n",
    "    908.52185,\n",
    "    925.3464,\n",
    "    942.17084,\n",
    "    958.9953,\n",
    "    975.81976,\n",
    "    992.64435,\n",
    "    1009.46875,\n",
    "    1026.2932,\n",
    "    1043.1178,\n",
    "    1059.9423,\n",
    "    1076.7667,\n",
    "    1093.5911,\n",
    "    1110.4156,\n",
    "    1127.2401,\n",
    "    1144.0646,\n",
    "    1160.8892,\n",
    "    1177.7136,\n",
    "    1194.538,\n",
    "    1211.3624,\n",
    "    1228.187,\n",
    "    1245.0115,\n",
    "    1261.8359,\n",
    "    1278.6604,\n",
    "    1295.4849,\n",
    "    1312.3093,\n",
    "    1329.1338,\n",
    "    1345.9583,\n",
    "    1362.7828,\n",
    "    1379.6074,\n",
    "    1396.4318,\n",
    "    1413.2563,\n",
    "    1430.0808,\n",
    "    1446.9052,\n",
    "    1463.7297,\n",
    "    1480.5541,\n",
    "    1497.3787,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1495.2997,\n",
    "    1478.4751,\n",
    "    1461.6504,\n",
    "    1444.8262,\n",
    "    1428.0018,\n",
    "    1411.1771,\n",
    "    1394.3525,\n",
    "    1377.5282,\n",
    "    1360.7036,\n",
    "    1343.8793,\n",
    "    1327.0549,\n",
    "    1310.23,\n",
    "    1293.4058,\n",
    "    1276.5814,\n",
    "    1259.7568,\n",
    "    1242.9325,\n",
    "    1226.1079,\n",
    "    1209.2832,\n",
    "    1192.4589,\n",
    "    1175.6345,\n",
    "    1158.8097,\n",
    "    1141.9854,\n",
    "    1125.161,\n",
    "    1108.3364,\n",
    "    1091.5121,\n",
    "    1074.6875,\n",
    "    1057.8628,\n",
    "    1041.0386,\n",
    "    1024.2141,\n",
    "    1007.3899,\n",
    "    990.56494,\n",
    "    973.7406,\n",
    "    956.9163,\n",
    "    940.0917,\n",
    "    923.26733,\n",
    "    906.44275,\n",
    "    889.6181,\n",
    "    872.79376,\n",
    "    855.9695,\n",
    "    839.14484,\n",
    "    822.32025,\n",
    "    805.4959,\n",
    "    788.67126,\n",
    "    771.847,\n",
    "    755.02264,\n",
    "    738.1977,\n",
    "    721.3734,\n",
    "    704.5491,\n",
    "    687.7244,\n",
    "    670.90015,\n",
    "    654.0755,\n",
    "    637.2509,\n",
    "    620.4266,\n",
    "    603.60223,\n",
    "    586.77734,\n",
    "    569.953,\n",
    "    553.12866,\n",
    "    536.3044,\n",
    "    519.47974,\n",
    "    502.6551,\n",
    "    485.8308,\n",
    "    469.00623,\n",
    "    452.1819,\n",
    "    435.35754,\n",
    "    418.5326,\n",
    "    401.70825,\n",
    "    384.8839,\n",
    "    368.05933,\n",
    "    351.235,\n",
    "    334.4104,\n",
    "    317.58582,\n",
    "    300.76147,\n",
    "    283.93713,\n",
    "    267.11255,\n",
    "    250.28784,\n",
    "    233.46362,\n",
    "    216.63892,\n",
    "    199.81458,\n",
    "    182.99036,\n",
    "    166.1654,\n",
    "    149.34106,\n",
    "    132.51672,\n",
    "    115.69238,\n",
    "    98.8678,\n",
    "    82.04321,\n",
    "    65.21887,\n",
    "    48.394287,\n",
    "    31.569946,\n",
    "    14.745605,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "]\n",
    "\n",
    "\n",
    "grey_values = [\n",
    "    0.0,\n",
    "    8.41224,\n",
    "    16.82448,\n",
    "    25.236721,\n",
    "    33.64896,\n",
    "    42.061195,\n",
    "    50.473442,\n",
    "    58.885677,\n",
    "    67.29792,\n",
    "    75.71015,\n",
    "    84.12239,\n",
    "    92.53463,\n",
    "    100.946884,\n",
    "    109.35912,\n",
    "    117.771355,\n",
    "    126.18359,\n",
    "    134.59584,\n",
    "    143.00807,\n",
    "    151.4203,\n",
    "    159.83255,\n",
    "    168.24478,\n",
    "    176.65704,\n",
    "    185.06926,\n",
    "    193.48152,\n",
    "    201.89377,\n",
    "    210.30598,\n",
    "    218.71825,\n",
    "    227.13046,\n",
    "    235.54271,\n",
    "    243.95494,\n",
    "    252.36719,\n",
    "    260.77945,\n",
    "    269.19168,\n",
    "    277.6039,\n",
    "    286.01614,\n",
    "    294.4284,\n",
    "    302.8406,\n",
    "    311.25287,\n",
    "    319.6651,\n",
    "    328.07733,\n",
    "    336.48956,\n",
    "    344.90186,\n",
    "    353.3141,\n",
    "    361.7263,\n",
    "    370.13852,\n",
    "    378.55078,\n",
    "    386.96304,\n",
    "    395.37527,\n",
    "    403.78754,\n",
    "    412.19974,\n",
    "    420.61197,\n",
    "    429.0242,\n",
    "    437.4365,\n",
    "    445.84872,\n",
    "    454.26093,\n",
    "    462.6732,\n",
    "    471.08542,\n",
    "    479.49765,\n",
    "    487.90988,\n",
    "    496.32217,\n",
    "    504.73438,\n",
    "    513.1466,\n",
    "    521.5589,\n",
    "    529.9711,\n",
    "    538.38336,\n",
    "    546.79553,\n",
    "    555.2078,\n",
    "    563.62006,\n",
    "    572.0323,\n",
    "    580.4446,\n",
    "    588.8568,\n",
    "    597.269,\n",
    "    605.6812,\n",
    "    614.0935,\n",
    "    622.50574,\n",
    "    630.91797,\n",
    "    639.3302,\n",
    "    647.74243,\n",
    "    656.15466,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    658.63043,\n",
    "    650.21826,\n",
    "    641.80597,\n",
    "    633.3936,\n",
    "    624.98145,\n",
    "    616.56915,\n",
    "    608.157,\n",
    "    599.7448,\n",
    "    591.3325,\n",
    "    582.9202,\n",
    "    574.50806,\n",
    "    566.0959,\n",
    "    557.6836,\n",
    "    549.2713,\n",
    "    540.85913,\n",
    "    532.4468,\n",
    "    524.03467,\n",
    "    515.6225,\n",
    "    507.21002,\n",
    "    498.79785,\n",
    "    490.38568,\n",
    "    481.9734,\n",
    "    473.56122,\n",
    "    465.14893,\n",
    "    456.7366,\n",
    "    448.32446,\n",
    "    439.9123,\n",
    "    431.49982,\n",
    "    423.08765,\n",
    "    414.6755,\n",
    "    406.26318,\n",
    "    397.85104,\n",
    "    389.43872,\n",
    "    381.0264,\n",
    "    372.61426,\n",
    "    364.2021,\n",
    "    355.78992,\n",
    "    347.37747,\n",
    "    338.9653,\n",
    "    330.55316,\n",
    "    322.14084,\n",
    "    313.72867,\n",
    "    305.31638,\n",
    "    296.90405,\n",
    "    288.49188,\n",
    "    280.07974,\n",
    "    271.66742,\n",
    "    263.25513,\n",
    "    254.84296,\n",
    "    246.43063,\n",
    "    238.0185,\n",
    "    229.60632,\n",
    "    221.19385,\n",
    "    212.78171,\n",
    "    204.36954,\n",
    "    195.95721,\n",
    "    187.54507,\n",
    "    179.13275,\n",
    "    170.72046,\n",
    "    162.30829,\n",
    "    153.89612,\n",
    "    145.48364,\n",
    "    137.07153,\n",
    "    128.65936,\n",
    "    120.24719,\n",
    "    111.8349,\n",
    "    103.42255,\n",
    "    95.010376,\n",
    "    86.59808,\n",
    "    78.18591,\n",
    "    69.77374,\n",
    "    61.36133,\n",
    "    52.949158,\n",
    "    44.536987,\n",
    "    36.124695,\n",
    "    27.712524,\n",
    "    19.300232,\n",
    "    10.887878,\n",
    "    2.475708,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "]\n",
    "\n",
    "\n",
    "# Create DataFrame for plotting\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Current Law\": grey_values,\n",
    "        \"Tax Cuts for Workers Act\": blue_values,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Reshape data for plotting with multiple lines\n",
    "df_melted = df.melt(\n",
    "    id_vars=\"Employment Income\",\n",
    "    value_vars=[\"Current Law\", \"Tax Cuts for Workers Act\"],\n",
    "    var_name=\"Scenario\",\n",
    "    value_name=\"EITC Amount\",\n",
    ")\n",
    "\n",
    "# Create the figure\n",
    "fig = px.line(\n",
    "    df_melted,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"EITC Amount\",\n",
    "    color=\"Scenario\",\n",
    "    color_discrete_map={\n",
    "        \"Current Law\": GRAY,\n",
    "        \"Tax Cuts for Workers Act\": BLUE_PRIMARY,\n",
    "    },\n",
    "    hover_data={\n",
    "        \"Employment Income\": \":$,.0f\",\n",
    "        \"EITC Amount\": \":$,.0f\",\n",
    "    },\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"EITC amount\",\n",
    "    xaxis_tickformat=\"$,.0f\",\n",
    "    yaxis_tickformat=\"$,.0f\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "    title=\"Figure 2: Credit value for married joint filers under current law and the TCWA\",\n",
    "    legend=dict(\n",
    "        yanchor=\"top\",\n",
    "        y=0.99,\n",
    "        xanchor=\"right\",\n",
    "        x=0.99,\n",
    "        bgcolor=\"rgba(255, 255, 255, 0.8)\",\n",
    "    ),\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Update hover template\n",
    "fig.update_traces(\n",
    "    hovertemplate=\"<b>%{data.name}</b><br>\"\n",
    "    + \"Employment income: $%{x:,.0f}<br>\"\n",
    "    + \"EITC amount: $%{y:,.2f}<extra></extra>\"\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 156,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"\\u003cb\\u003e%{data.name}\\u003c\\u002fb\\u003e\\u003cbr\\u003eEmployment income: $%{x:,.0f}\\u003cbr\\u003eEITC amount: $%{y:,.2f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Current Law\",\"line\":{\"color\":\"#808080\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Current Law\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,9300,9400,9500,9600,9700,9800,9900,10000,10100,10200,10300,10400,10500,10600,10700,10800,10900,11000,11100,11200,11300,11400,11500,11600,11700,11800,11900,12000,12100,12200,12300,12400,12500,12600,12700,12800,12900,13000,13100,13200,13300,13400,13500,13600,13700,13800,13900,14000,14100,14200,14300,14400,14500,14600,14700,14800,14900,15000,15100,15200,15300,15400,15500,15600,15700,15800,15900,16000,16100,16200,16300,16400,16500,16600,16700,16800,16900,17000,17100,17200,17300,17400,17500,17600,17700,17800,17900,18000,18100,18200,18300,18400,18500,18600,18700,18800,18900,19000,19100,19200,19300,19400,19500,19600,19700,19800,19900,20100,20200,20300,20400,20500,20600,20700,20800,20900,21000,21100,21200,21300,21400,21500,21600,21700,21800,21900,22000,22100,22200,22300,22400,22500,22600,22700,22800,22900,23000,23100,23200,23300,23400,23500,23600,23700,23800,23900,24000,24100,24200,24300,24400,24500,24600,24700,24800,24900,25000,25100,25200,25300,25400,25500,25600,25700,25800,25900,26000,26100,26200,26300,26400,26500,26600,26700,26800,26900,27000,27100,27200,27300,27400,27500,27600,27700,27800,27900,28000,28100,28200,28300,28400,28500,28600,28700,28800,28900,29000,29100,29200,29300,29400,29500,29600,29700,29800,29900,30000,30100,30200,30300,30400,30500,30600,30700,30800,30900,31000,31100,31200,31300,31400,31500,31600,31700,31800,31900,32000,32100,32200,32300,32400,32500,32600,32700,32800,32900,33000,33100,33200,33300,33400,33500,33600,33700,33800,33900,34000,34100,34200,34300,34400,34500,34600,34700,34800,34900,35000,35100,35200,35300,35400,35500,35600,35700,35800,35900,36000,36100,36200,36300,36400,36500,36600,36700,36800,36900,37000,37100,37200,37300,37400,37500,37600,37700,37800,37900,38000,38100,38200,38300,38400,38500,38600,38700,38800,38900,39000,39100,39200,39300,39400,39500,39600,39700,39800,39900,40000],\"xaxis\":\"x\",\"y\":[0.0,8.41224,16.82448,25.236721,33.64896,42.061195,50.473442,58.885677,67.29792,75.71015,84.12239,92.53463,100.946884,109.35912,117.771355,126.18359,134.59584,143.00807,151.4203,159.83255,168.24478,176.65704,185.06926,193.48152,201.89377,210.30598,218.71825,227.13046,235.54271,243.95494,252.36719,260.77945,269.19168,277.6039,286.01614,294.4284,302.8406,311.25287,319.6651,328.07733,336.48956,344.90186,353.3141,361.7263,370.13852,378.55078,386.96304,395.37527,403.78754,412.19974,420.61197,429.0242,437.4365,445.84872,454.26093,462.6732,471.08542,479.49765,487.90988,496.32217,504.73438,513.1466,521.5589,529.9711,538.38336,546.79553,555.2078,563.62006,572.0323,580.4446,588.8568,597.269,605.6812,614.0935,622.50574,630.91797,639.3302,647.74243,656.15466,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,662.0,658.63043,650.21826,641.80597,633.3936,624.98145,616.56915,608.157,599.7448,591.3325,582.9202,574.50806,566.0959,557.6836,549.2713,540.85913,532.4468,524.03467,515.6225,507.21002,498.79785,490.38568,481.9734,473.56122,465.14893,456.7366,448.32446,439.9123,431.49982,423.08765,414.6755,406.26318,397.85104,389.43872,381.0264,372.61426,364.2021,355.78992,347.37747,338.9653,330.55316,322.14084,313.72867,305.31638,296.90405,288.49188,280.07974,271.66742,263.25513,254.84296,246.43063,238.0185,229.60632,221.19385,212.78171,204.36954,195.95721,187.54507,179.13275,170.72046,162.30829,153.89612,145.48364,137.07153,128.65936,120.24719,111.8349,103.42255,95.010376,86.59808,78.18591,69.77374,61.36133,52.949158,44.536987,36.124695,27.712524,19.300232,10.887878,2.475708,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{data.name}\\u003c\\u002fb\\u003e\\u003cbr\\u003eEmployment income: $%{x:,.0f}\\u003cbr\\u003eEITC amount: $%{y:,.2f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Tax Cuts for Workers Act\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Tax Cuts for Workers Act\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,9300,9400,9500,9600,9700,9800,9900,10000,10100,10200,10300,10400,10500,10600,10700,10800,10900,11000,11100,11200,11300,11400,11500,11600,11700,11800,11900,12000,12100,12200,12300,12400,12500,12600,12700,12800,12900,13000,13100,13200,13300,13400,13500,13600,13700,13800,13900,14000,14100,14200,14300,14400,14500,14600,14700,14800,14900,15000,15100,15200,15300,15400,15500,15600,15700,15800,15900,16000,16100,16200,16300,16400,16500,16600,16700,16800,16900,17000,17100,17200,17300,17400,17500,17600,17700,17800,17900,18000,18100,18200,18300,18400,18500,18600,18700,18800,18900,19000,19100,19200,19300,19400,19500,19600,19700,19800,19900,20100,20200,20300,20400,20500,20600,20700,20800,20900,21000,21100,21200,21300,21400,21500,21600,21700,21800,21900,22000,22100,22200,22300,22400,22500,22600,22700,22800,22900,23000,23100,23200,23300,23400,23500,23600,23700,23800,23900,24000,24100,24200,24300,24400,24500,24600,24700,24800,24900,25000,25100,25200,25300,25400,25500,25600,25700,25800,25900,26000,26100,26200,26300,26400,26500,26600,26700,26800,26900,27000,27100,27200,27300,27400,27500,27600,27700,27800,27900,28000,28100,28200,28300,28400,28500,28600,28700,28800,28900,29000,29100,29200,29300,29400,29500,29600,29700,29800,29900,30000,30100,30200,30300,30400,30500,30600,30700,30800,30900,31000,31100,31200,31300,31400,31500,31600,31700,31800,31900,32000,32100,32200,32300,32400,32500,32600,32700,32800,32900,33000,33100,33200,33300,33400,33500,33600,33700,33800,33900,34000,34100,34200,34300,34400,34500,34600,34700,34800,34900,35000,35100,35200,35300,35400,35500,35600,35700,35800,35900,36000,36100,36200,36300,36400,36500,36600,36700,36800,36900,37000,37100,37200,37300,37400,37500,37600,37700,37800,37900,38000,38100,38200,38300,38400,38500,38600,38700,38800,38900,39000,39100,39200,39300,39400,39500,39600,39700,39800,39900,40000],\"xaxis\":\"x\",\"y\":[0.0,16.82448,33.64896,50.473442,67.29792,84.12239,100.946884,117.771355,134.59584,151.4203,168.24478,185.06926,201.89377,218.71825,235.54271,252.36719,269.19168,286.01614,302.8406,319.6651,336.48956,353.3141,370.13852,386.96304,403.78754,420.61197,437.4365,454.26093,471.08542,487.90988,504.73438,521.5589,538.38336,555.2078,572.0323,588.8568,605.6812,622.50574,639.3302,656.15466,672.9791,689.8037,706.6282,723.4526,740.27704,757.10156,773.9261,790.75055,807.5751,824.3995,841.22394,858.0484,874.873,891.69745,908.52185,925.3464,942.17084,958.9953,975.81976,992.64435,1009.46875,1026.2932,1043.1178,1059.9423,1076.7667,1093.5911,1110.4156,1127.2401,1144.0646,1160.8892,1177.7136,1194.538,1211.3624,1228.187,1245.0115,1261.8359,1278.6604,1295.4849,1312.3093,1329.1338,1345.9583,1362.7828,1379.6074,1396.4318,1413.2563,1430.0808,1446.9052,1463.7297,1480.5541,1497.3787,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1502.0,1495.2997,1478.4751,1461.6504,1444.8262,1428.0018,1411.1771,1394.3525,1377.5282,1360.7036,1343.8793,1327.0549,1310.23,1293.4058,1276.5814,1259.7568,1242.9325,1226.1079,1209.2832,1192.4589,1175.6345,1158.8097,1141.9854,1125.161,1108.3364,1091.5121,1074.6875,1057.8628,1041.0386,1024.2141,1007.3899,990.56494,973.7406,956.9163,940.0917,923.26733,906.44275,889.6181,872.79376,855.9695,839.14484,822.32025,805.4959,788.67126,771.847,755.02264,738.1977,721.3734,704.5491,687.7244,670.90015,654.0755,637.2509,620.4266,603.60223,586.77734,569.953,553.12866,536.3044,519.47974,502.6551,485.8308,469.00623,452.1819,435.35754,418.5326,401.70825,384.8839,368.05933,351.235,334.4104,317.58582,300.76147,283.93713,267.11255,250.28784,233.46362,216.63892,199.81458,182.99036,166.1654,149.34106,132.51672,115.69238,98.8678,82.04321,65.21887,48.394287,31.569946,14.745605,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Employment income\"},\"tickformat\":\"$,.0f\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"EITC amount\"},\"tickformat\":\"$,.0f\"},\"legend\":{\"title\":{\"text\":\"Scenario\"},\"tracegroupgap\":0,\"yanchor\":\"top\",\"y\":0.99,\"xanchor\":\"right\",\"x\":0.99,\"bgcolor\":\"rgba(255, 255, 255, 0.8)\"},\"margin\":{\"t\":50,\"l\":50,\"r\":50,\"b\":100,\"pad\":4},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"title\":{\"text\":\"Figure 2: Credit value for married joint filers under current law and the TCWA\"},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 156,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create income values from 0 to 40,000 in equal steps\n",
    "income_steps = 400  # Number of data points\n",
    "# Generate the original income values\n",
    "employment_income_original = [\n",
    "    i * (40000 / (income_steps - 1)) for i in range(income_steps)\n",
    "]\n",
    "# Round the income values to the nearest 100\n",
    "employment_income = [\n",
    "    round(income / 100) * 100 for income in employment_income_original\n",
    "]\n",
    "\n",
    "\n",
    "# Blue Values\n",
    "blue_values = [\n",
    "    0.0,\n",
    "    16.82448,\n",
    "    33.64896,\n",
    "    50.473442,\n",
    "    67.29792,\n",
    "    84.12239,\n",
    "    100.946884,\n",
    "    117.771355,\n",
    "    134.59584,\n",
    "    151.4203,\n",
    "    168.24478,\n",
    "    185.06926,\n",
    "    201.89377,\n",
    "    218.71825,\n",
    "    235.54271,\n",
    "    252.36719,\n",
    "    269.19168,\n",
    "    286.01614,\n",
    "    302.8406,\n",
    "    319.6651,\n",
    "    336.48956,\n",
    "    353.3141,\n",
    "    370.13852,\n",
    "    386.96304,\n",
    "    403.78754,\n",
    "    420.61197,\n",
    "    437.4365,\n",
    "    454.26093,\n",
    "    471.08542,\n",
    "    487.90988,\n",
    "    504.73438,\n",
    "    521.5589,\n",
    "    538.38336,\n",
    "    555.2078,\n",
    "    572.0323,\n",
    "    588.8568,\n",
    "    605.6812,\n",
    "    622.50574,\n",
    "    639.3302,\n",
    "    656.15466,\n",
    "    672.9791,\n",
    "    689.8037,\n",
    "    706.6282,\n",
    "    723.4526,\n",
    "    740.27704,\n",
    "    757.10156,\n",
    "    773.9261,\n",
    "    790.75055,\n",
    "    807.5751,\n",
    "    824.3995,\n",
    "    841.22394,\n",
    "    858.0484,\n",
    "    874.873,\n",
    "    891.69745,\n",
    "    908.52185,\n",
    "    925.3464,\n",
    "    942.17084,\n",
    "    958.9953,\n",
    "    975.81976,\n",
    "    992.64435,\n",
    "    1009.46875,\n",
    "    1026.2932,\n",
    "    1043.1178,\n",
    "    1059.9423,\n",
    "    1076.7667,\n",
    "    1093.5911,\n",
    "    1110.4156,\n",
    "    1127.2401,\n",
    "    1144.0646,\n",
    "    1160.8892,\n",
    "    1177.7136,\n",
    "    1194.538,\n",
    "    1211.3624,\n",
    "    1228.187,\n",
    "    1245.0115,\n",
    "    1261.8359,\n",
    "    1278.6604,\n",
    "    1295.4849,\n",
    "    1312.3093,\n",
    "    1329.1338,\n",
    "    1345.9583,\n",
    "    1362.7828,\n",
    "    1379.6074,\n",
    "    1396.4318,\n",
    "    1413.2563,\n",
    "    1430.0808,\n",
    "    1446.9052,\n",
    "    1463.7297,\n",
    "    1480.5541,\n",
    "    1497.3787,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1502.0,\n",
    "    1495.2997,\n",
    "    1478.4751,\n",
    "    1461.6504,\n",
    "    1444.8262,\n",
    "    1428.0018,\n",
    "    1411.1771,\n",
    "    1394.3525,\n",
    "    1377.5282,\n",
    "    1360.7036,\n",
    "    1343.8793,\n",
    "    1327.0549,\n",
    "    1310.23,\n",
    "    1293.4058,\n",
    "    1276.5814,\n",
    "    1259.7568,\n",
    "    1242.9325,\n",
    "    1226.1079,\n",
    "    1209.2832,\n",
    "    1192.4589,\n",
    "    1175.6345,\n",
    "    1158.8097,\n",
    "    1141.9854,\n",
    "    1125.161,\n",
    "    1108.3364,\n",
    "    1091.5121,\n",
    "    1074.6875,\n",
    "    1057.8628,\n",
    "    1041.0386,\n",
    "    1024.2141,\n",
    "    1007.3899,\n",
    "    990.56494,\n",
    "    973.7406,\n",
    "    956.9163,\n",
    "    940.0917,\n",
    "    923.26733,\n",
    "    906.44275,\n",
    "    889.6181,\n",
    "    872.79376,\n",
    "    855.9695,\n",
    "    839.14484,\n",
    "    822.32025,\n",
    "    805.4959,\n",
    "    788.67126,\n",
    "    771.847,\n",
    "    755.02264,\n",
    "    738.1977,\n",
    "    721.3734,\n",
    "    704.5491,\n",
    "    687.7244,\n",
    "    670.90015,\n",
    "    654.0755,\n",
    "    637.2509,\n",
    "    620.4266,\n",
    "    603.60223,\n",
    "    586.77734,\n",
    "    569.953,\n",
    "    553.12866,\n",
    "    536.3044,\n",
    "    519.47974,\n",
    "    502.6551,\n",
    "    485.8308,\n",
    "    469.00623,\n",
    "    452.1819,\n",
    "    435.35754,\n",
    "    418.5326,\n",
    "    401.70825,\n",
    "    384.8839,\n",
    "    368.05933,\n",
    "    351.235,\n",
    "    334.4104,\n",
    "    317.58582,\n",
    "    300.76147,\n",
    "    283.93713,\n",
    "    267.11255,\n",
    "    250.28784,\n",
    "    233.46362,\n",
    "    216.63892,\n",
    "    199.81458,\n",
    "    182.99036,\n",
    "    166.1654,\n",
    "    149.34106,\n",
    "    132.51672,\n",
    "    115.69238,\n",
    "    98.8678,\n",
    "    82.04321,\n",
    "    65.21887,\n",
    "    48.394287,\n",
    "    31.569946,\n",
    "    14.745605,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "]\n",
    "\n",
    "# Grey Values\n",
    "grey_values = [\n",
    "    0.0,\n",
    "    8.41224,\n",
    "    16.82448,\n",
    "    25.236721,\n",
    "    33.64896,\n",
    "    42.061195,\n",
    "    50.473442,\n",
    "    58.885677,\n",
    "    67.29792,\n",
    "    75.71015,\n",
    "    84.12239,\n",
    "    92.53463,\n",
    "    100.946884,\n",
    "    109.35912,\n",
    "    117.771355,\n",
    "    126.18359,\n",
    "    134.59584,\n",
    "    143.00807,\n",
    "    151.4203,\n",
    "    159.83255,\n",
    "    168.24478,\n",
    "    176.65704,\n",
    "    185.06926,\n",
    "    193.48152,\n",
    "    201.89377,\n",
    "    210.30598,\n",
    "    218.71825,\n",
    "    227.13046,\n",
    "    235.54271,\n",
    "    243.95494,\n",
    "    252.36719,\n",
    "    260.77945,\n",
    "    269.19168,\n",
    "    277.6039,\n",
    "    286.01614,\n",
    "    294.4284,\n",
    "    302.8406,\n",
    "    311.25287,\n",
    "    319.6651,\n",
    "    328.07733,\n",
    "    336.48956,\n",
    "    344.90186,\n",
    "    353.3141,\n",
    "    361.7263,\n",
    "    370.13852,\n",
    "    378.55078,\n",
    "    386.96304,\n",
    "    395.37527,\n",
    "    403.78754,\n",
    "    412.19974,\n",
    "    420.61197,\n",
    "    429.0242,\n",
    "    437.4365,\n",
    "    445.84872,\n",
    "    454.26093,\n",
    "    462.6732,\n",
    "    471.08542,\n",
    "    479.49765,\n",
    "    487.90988,\n",
    "    496.32217,\n",
    "    504.73438,\n",
    "    513.1466,\n",
    "    521.5589,\n",
    "    529.9711,\n",
    "    538.38336,\n",
    "    546.79553,\n",
    "    555.2078,\n",
    "    563.62006,\n",
    "    572.0323,\n",
    "    580.4446,\n",
    "    588.8568,\n",
    "    597.269,\n",
    "    605.6812,\n",
    "    614.0935,\n",
    "    622.50574,\n",
    "    630.91797,\n",
    "    639.3302,\n",
    "    647.74243,\n",
    "    656.15466,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    662.0,\n",
    "    658.63043,\n",
    "    650.21826,\n",
    "    641.80597,\n",
    "    633.3936,\n",
    "    624.98145,\n",
    "    616.56915,\n",
    "    608.157,\n",
    "    599.7448,\n",
    "    591.3325,\n",
    "    582.9202,\n",
    "    574.50806,\n",
    "    566.0959,\n",
    "    557.6836,\n",
    "    549.2713,\n",
    "    540.85913,\n",
    "    532.4468,\n",
    "    524.03467,\n",
    "    515.6225,\n",
    "    507.21002,\n",
    "    498.79785,\n",
    "    490.38568,\n",
    "    481.9734,\n",
    "    473.56122,\n",
    "    465.14893,\n",
    "    456.7366,\n",
    "    448.32446,\n",
    "    439.9123,\n",
    "    431.49982,\n",
    "    423.08765,\n",
    "    414.6755,\n",
    "    406.26318,\n",
    "    397.85104,\n",
    "    389.43872,\n",
    "    381.0264,\n",
    "    372.61426,\n",
    "    364.2021,\n",
    "    355.78992,\n",
    "    347.37747,\n",
    "    338.9653,\n",
    "    330.55316,\n",
    "    322.14084,\n",
    "    313.72867,\n",
    "    305.31638,\n",
    "    296.90405,\n",
    "    288.49188,\n",
    "    280.07974,\n",
    "    271.66742,\n",
    "    263.25513,\n",
    "    254.84296,\n",
    "    246.43063,\n",
    "    238.0185,\n",
    "    229.60632,\n",
    "    221.19385,\n",
    "    212.78171,\n",
    "    204.36954,\n",
    "    195.95721,\n",
    "    187.54507,\n",
    "    179.13275,\n",
    "    170.72046,\n",
    "    162.30829,\n",
    "    153.89612,\n",
    "    145.48364,\n",
    "    137.07153,\n",
    "    128.65936,\n",
    "    120.24719,\n",
    "    111.8349,\n",
    "    103.42255,\n",
    "    95.010376,\n",
    "    86.59808,\n",
    "    78.18591,\n",
    "    69.77374,\n",
    "    61.36133,\n",
    "    52.949158,\n",
    "    44.536987,\n",
    "    36.124695,\n",
    "    27.712524,\n",
    "    19.300232,\n",
    "    10.887878,\n",
    "    2.475708,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "]\n",
    "\n",
    "# Create DataFrame for plotting\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Current Law\": grey_values,\n",
    "        \"Tax Cuts for Workers Act\": blue_values,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Reshape data for plotting with multiple lines\n",
    "df_melted = df.melt(\n",
    "    id_vars=\"Employment Income\",\n",
    "    value_vars=[\"Current Law\", \"Tax Cuts for Workers Act\"],\n",
    "    var_name=\"Scenario\",\n",
    "    value_name=\"EITC Amount\",\n",
    ")\n",
    "\n",
    "# Create the figure\n",
    "# Create the figure\n",
    "fig = px.line(\n",
    "    df_melted,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"EITC Amount\",\n",
    "    color=\"Scenario\",\n",
    "    color_discrete_map={\n",
    "        \"Current Law\": GRAY,\n",
    "        \"Tax Cuts for Workers Act\": BLUE_PRIMARY,\n",
    "    },\n",
    "    hover_data={\n",
    "        \"Employment Income\": \":$,.0f\",\n",
    "        \"EITC Amount\": \":$,.0f\",\n",
    "    },\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"EITC amount\",\n",
    "    xaxis_tickformat=\"$,.0f\",\n",
    "    yaxis_tickformat=\"$,.0f\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "    title=\"Figure 2: Credit value for married joint filers under current law and the TCWA\",\n",
    "    legend=dict(\n",
    "        yanchor=\"top\",\n",
    "        y=0.99,\n",
    "        xanchor=\"right\",\n",
    "        x=0.99,\n",
    "        bgcolor=\"rgba(255, 255, 255, 0.8)\",\n",
    "    ),\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Update hover template\n",
    "fig.update_traces(\n",
    "    hovertemplate=\"<b>%{data.name}</b><br>\"\n",
    "    + \"Employment income: $%{x:,.0f}<br>\"\n",
    "    + \"EITC amount: $%{y:,.2f}<extra></extra>\"\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Household impacts\n",
    "\n",
    "Consider a married couple without qualifying children, residing in Colorado and earning $6,000 in 2026. The TCWA increases their net income by [$574](https://legacy.policyengine.org/us/household?reform=81471&focus=householdOutput.netIncome&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=52574), due to increased federal and Colorado EITC amounts of $459 and $115 respectively. \n",
    "\n",
    "Looking at the [net income distribution](https://legacy.policyengine.org/us/household?reform=81471&focus=householdOutput.earnings&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=52574) for this household, we see that the couple will experience an increase in net income until earnings of $29,000, where the federal EITC is fully phased-out under the TCWA. The maximum net income increase occurs between earnings of $10,000 and $19,000 with a spike at $18,000, due to the higher phase-out start."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 157,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income: $%{x:,.0f}\\u003cbr\\u003eNet income change: $%{y:,.2f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\",\"shape\":\"linear\",\"width\":2.5},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,100,200,300,400,500,600,700,800,900,1000,1100,1200,1300,1400,1500,1600,1700,1800,1900,2000,2100,2200,2300,2400,2500,2600,2700,2800,2900,3000,3100,3200,3300,3400,3500,3600,3700,3800,3900,4000,4100,4200,4300,4400,4500,4600,4700,4800,4900,5000,5100,5200,5300,5400,5500,5600,5700,5800,5900,6000,6100,6200,6300,6400,6500,6600,6700,6800,6900,7000,7100,7200,7300,7400,7500,7600,7700,7800,7900,8000,8100,8200,8300,8400,8500,8600,8700,8800,8900,9000,9100,9200,9300,9400,9500,9600,9700,9800,9900,10000,10100,10200,10300,10400,10500,10600,10700,10800,10900,11000,11100,11200,11300,11400,11500,11600,11700,11800,11900,12000,12100,12200,12300,12400,12500,12600,12700,12800,12900,13000,13100,13200,13300,13400,13500,13600,13700,13800,13900,14000,14100,14200,14300,14400,14500,14600,14700,14800,14900,15000,15100,15200,15300,15400,15500,15600,15700,15800,15900,16000,16100,16200,16300,16400,16500,16600,16700,16800,16900,17000,17100,17200,17300,17400,17500,17600,17700,17800,17900,18000,18100,18200,18300,18400,18500,18600,18700,18800,18900,19000,19100,19200,19300,19400,19500,19600,19700,19800,19900,20100,20200,20300,20400,20500,20600,20700,20800,20900,21000,21100,21200,21300,21400,21500,21600,21700,21800,21900,22000,22100,22200,22300,22400,22500,22600,22700,22800,22900,23000,23100,23200,23300,23400,23500,23600,23700,23800,23900,24000,24100,24200,24300,24400,24500,24600,24700,24800,24900,25000,25100,25200,25300,25400,25500,25600,25700,25800,25900,26000,26100,26200,26300,26400,26500,26600,26700,26800,26900,27000,27100,27200,27300,27400,27500,27600,27700,27800,27900,28000,28100,28200,28300,28400,28500,28600,28700,28800,28900,29000,29100,29200,29300,29400,29500,29600,29700,29800,29900,30000,30100,30200,30300,30400,30500,30600,30700,30800,30900,31000,31100,31200,31300,31400,31500,31600,31700,31800,31900,32000,32100,32200,32300,32400,32500,32600,32700,32800,32900,33000,33100,33200,33300,33400,33500,33600,33700,33800,33900,34000,34100,34200,34300,34400,34500,34600,34700,34800,34900,35000,35100,35200,35300,35400,35500,35600,35700,35800,35900,36000,36100,36200,36300,36400,36500,36600,36700,36800,36900,37000,37100,37200,37300,37400,37500,37600,37700,37800,37900,38000,38100,38200,38300,38400,38500,38600,38700,38800,38900,39000,39100,39200,39300,39400,39500,39600,39700,39800,39900,40000],\"xaxis\":\"x\",\"y\":[0.0,10.515625,21.030273,31.545898,42.061523,52.57617,63.091797,73.60742,84.12207,94.637695,105.15381,115.66797,126.18359,136.69824,147.21484,157.72949,168.24414,178.76074,189.27539,199.79004,210.30664,220.82129,231.33594,241.85254,252.36719,262.88184,273.39844,283.9131,294.42773,304.94434,315.45898,325.97363,336.49023,347.00488,357.51953,368.03613,378.55078,389.06543,399.58203,410.09668,420.61133,431.1289,441.64258,452.15723,462.67383,473.18848,483.70312,494.21973,504.73438,515.249,525.7656,536.2803,546.7949,557.3115,567.8262,578.3408,588.8574,599.3721,609.8867,620.4033,630.91797,641.4326,651.9492,662.46387,672.9785,683.49414,694.00977,704.5244,715.041,725.55566,736.0713,746.5869,757.10156,767.6162,778.13184,788.6465,799.1631,809.6787,820.19336,833.917,854.94824,875.98145,897.00684,918.0381,939.06934,960.1006,981.1299,1002.1621,1023.19336,1044.2227,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1050.0,1054.2109,1064.7266,1075.2422,1085.7578,1096.2734,1106.7891,1117.3047,1119.4434,1108.9277,1098.4121,1087.8984,1077.3828,1066.8652,1056.3516,1045.8359,1035.3203,1024.8066,1014.291,1003.7754,993.25977,982.74414,972.2285,961.71484,951.1992,940.6836,930.16797,919.65234,909.1367,898.62305,888.1074,877.5918,867.0762,856.56055,846.0449,835.53125,825.0156,814.5,803.9844,793.46875,782.9531,772.43945,761.9238,751.40625,740.8926,730.37695,719.8613,709.34766,698.83203,688.3164,677.8008,667.28516,656.76953,646.2539,635.74023,625.22266,614.709,604.19336,593.67773,583.16406,572.64844,562.1328,551.61523,541.10156,530.58594,520.07227,509.55664,499.03906,488.5254,478.00977,467.49414,456.98047,446.46484,435.94922,425.4336,414.91797,404.40234,393.88867,383.37305,372.85742,354.92188,333.89062,312.85938,291.82812,270.79883,249.76562,228.73828,207.70703,186.67578,165.64453,144.61523,123.583984,102.55469,81.52344,60.492188,39.46289,18.43164,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Employment income\"},\"tickformat\":\"$,.0f\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Absolute change in net income\"},\"tickformat\":\"$,.0f\"},\"legend\":{\"tracegroupgap\":0},\"margin\":{\"t\":50,\"l\":50,\"r\":50,\"b\":100,\"pad\":4},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"title\":{\"text\":\"Figure 3: Absolute change in net income under the TCWA\"},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 157,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create income values from 0 to 40,000 in equal steps\n",
    "income_steps = 400  # Number of data points\n",
    "# Generate the original income values\n",
    "employment_income_original = [\n",
    "    i * (40000 / (income_steps - 1)) for i in range(income_steps)\n",
    "]\n",
    "# Round the income values to the nearest 100\n",
    "employment_income = [\n",
    "    round(income / 100) * 100 for income in employment_income_original\n",
    "]\n",
    "\n",
    "# Blue Values from paste.txt\n",
    "blue_values = [\n",
    "    0.0,\n",
    "    10.515625,\n",
    "    21.030273,\n",
    "    31.545898,\n",
    "    42.061523,\n",
    "    52.57617,\n",
    "    63.091797,\n",
    "    73.60742,\n",
    "    84.12207,\n",
    "    94.637695,\n",
    "    105.15381,\n",
    "    115.66797,\n",
    "    126.18359,\n",
    "    136.69824,\n",
    "    147.21484,\n",
    "    157.72949,\n",
    "    168.24414,\n",
    "    178.76074,\n",
    "    189.27539,\n",
    "    199.79004,\n",
    "    210.30664,\n",
    "    220.82129,\n",
    "    231.33594,\n",
    "    241.85254,\n",
    "    252.36719,\n",
    "    262.88184,\n",
    "    273.39844,\n",
    "    283.9131,\n",
    "    294.42773,\n",
    "    304.94434,\n",
    "    315.45898,\n",
    "    325.97363,\n",
    "    336.49023,\n",
    "    347.00488,\n",
    "    357.51953,\n",
    "    368.03613,\n",
    "    378.55078,\n",
    "    389.06543,\n",
    "    399.58203,\n",
    "    410.09668,\n",
    "    420.61133,\n",
    "    431.1289,\n",
    "    441.64258,\n",
    "    452.15723,\n",
    "    462.67383,\n",
    "    473.18848,\n",
    "    483.70312,\n",
    "    494.21973,\n",
    "    504.73438,\n",
    "    515.249,\n",
    "    525.7656,\n",
    "    536.2803,\n",
    "    546.7949,\n",
    "    557.3115,\n",
    "    567.8262,\n",
    "    578.3408,\n",
    "    588.8574,\n",
    "    599.3721,\n",
    "    609.8867,\n",
    "    620.4033,\n",
    "    630.91797,\n",
    "    641.4326,\n",
    "    651.9492,\n",
    "    662.46387,\n",
    "    672.9785,\n",
    "    683.49414,\n",
    "    694.00977,\n",
    "    704.5244,\n",
    "    715.041,\n",
    "    725.55566,\n",
    "    736.0713,\n",
    "    746.5869,\n",
    "    757.10156,\n",
    "    767.6162,\n",
    "    778.13184,\n",
    "    788.6465,\n",
    "    799.1631,\n",
    "    809.6787,\n",
    "    820.19336,\n",
    "    833.917,\n",
    "    854.94824,\n",
    "    875.98145,\n",
    "    897.00684,\n",
    "    918.0381,\n",
    "    939.06934,\n",
    "    960.1006,\n",
    "    981.1299,\n",
    "    1002.1621,\n",
    "    1023.19336,\n",
    "    1044.2227,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1050.0,\n",
    "    1054.2109,\n",
    "    1064.7266,\n",
    "    1075.2422,\n",
    "    1085.7578,\n",
    "    1096.2734,\n",
    "    1106.7891,\n",
    "    1117.3047,\n",
    "    1119.4434,\n",
    "    1108.9277,\n",
    "    1098.4121,\n",
    "    1087.8984,\n",
    "    1077.3828,\n",
    "    1066.8652,\n",
    "    1056.3516,\n",
    "    1045.8359,\n",
    "    1035.3203,\n",
    "    1024.8066,\n",
    "    1014.291,\n",
    "    1003.7754,\n",
    "    993.25977,\n",
    "    982.74414,\n",
    "    972.2285,\n",
    "    961.71484,\n",
    "    951.1992,\n",
    "    940.6836,\n",
    "    930.16797,\n",
    "    919.65234,\n",
    "    909.1367,\n",
    "    898.62305,\n",
    "    888.1074,\n",
    "    877.5918,\n",
    "    867.0762,\n",
    "    856.56055,\n",
    "    846.0449,\n",
    "    835.53125,\n",
    "    825.0156,\n",
    "    814.5,\n",
    "    803.9844,\n",
    "    793.46875,\n",
    "    782.9531,\n",
    "    772.43945,\n",
    "    761.9238,\n",
    "    751.40625,\n",
    "    740.8926,\n",
    "    730.37695,\n",
    "    719.8613,\n",
    "    709.34766,\n",
    "    698.83203,\n",
    "    688.3164,\n",
    "    677.8008,\n",
    "    667.28516,\n",
    "    656.76953,\n",
    "    646.2539,\n",
    "    635.74023,\n",
    "    625.22266,\n",
    "    614.709,\n",
    "    604.19336,\n",
    "    593.67773,\n",
    "    583.16406,\n",
    "    572.64844,\n",
    "    562.1328,\n",
    "    551.61523,\n",
    "    541.10156,\n",
    "    530.58594,\n",
    "    520.07227,\n",
    "    509.55664,\n",
    "    499.03906,\n",
    "    488.5254,\n",
    "    478.00977,\n",
    "    467.49414,\n",
    "    456.98047,\n",
    "    446.46484,\n",
    "    435.94922,\n",
    "    425.4336,\n",
    "    414.91797,\n",
    "    404.40234,\n",
    "    393.88867,\n",
    "    383.37305,\n",
    "    372.85742,\n",
    "    354.92188,\n",
    "    333.89062,\n",
    "    312.85938,\n",
    "    291.82812,\n",
    "    270.79883,\n",
    "    249.76562,\n",
    "    228.73828,\n",
    "    207.70703,\n",
    "    186.67578,\n",
    "    165.64453,\n",
    "    144.61523,\n",
    "    123.583984,\n",
    "    102.55469,\n",
    "    81.52344,\n",
    "    60.492188,\n",
    "    39.46289,\n",
    "    18.43164,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "    0.0,\n",
    "]\n",
    "\n",
    "# Create DataFrame for plotting\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Net income change\": blue_values,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the figure with Plotly\n",
    "fig = (\n",
    "    px.line(\n",
    "        df,\n",
    "        x=\"Employment Income\",\n",
    "        y=\"Net income change\",\n",
    "        line_shape=\"linear\",\n",
    "        hover_data={\n",
    "            \"Employment Income\": \":$,.0f\",\n",
    "            \"Net income change\": \":$,.2f\",\n",
    "        },\n",
    "    )\n",
    "    .update_traces(\n",
    "        line=dict(color=BLUE_PRIMARY, width=2.5),\n",
    "        hovertemplate=\"Employment Income: $%{x:,.0f}<br>Net income change: $%{y:,.2f}<extra></extra>\",\n",
    "    )\n",
    "    .update_layout(\n",
    "        font=dict(family=\"Roboto Serif\"),\n",
    "        xaxis_title=\"Employment income\",\n",
    "        yaxis_title=\"Absolute change in net income\",\n",
    "        xaxis_tickformat=\"$,.0f\",\n",
    "        yaxis_tickformat=\"$,.0f\",\n",
    "        font_color=BLACK,\n",
    "        title=\"Figure 3: Absolute change in net income under the TCWA\",\n",
    "        margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "        annotations=[\n",
    "            {\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.25,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"text\": \"Source: PolicyEngine US\",\n",
    "                \"showarrow\": False,\n",
    "                \"font\": {\n",
    "                    \"family\": \"Roboto Serif\",\n",
    "                    \"size\": 10,\n",
    "                    \"color\": DARK_GRAY,\n",
    "                },\n",
    "            }\n",
    "        ],\n",
    "        images=[\n",
    "            {\n",
    "                \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.2,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"sizex\": 0.1,\n",
    "                \"sizey\": 0.1,\n",
    "                \"xanchor\": \"right\",\n",
    "                \"yanchor\": \"bottom\",\n",
    "            }\n",
    "        ],\n",
    "    )\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "These changes in the Earned Income Tax Credit [alter marginal tax rates](https://legacy.policyengine.org/us/household?reform=81471&focus=householdOutput.mtr&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps&household=52574) from between -18 and +19 percentage points. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 158,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"\\u003cb\\u003eChange in marginal tax rate\\u003c\\u002fb\\u003e\\u003cbr\\u003eEmployment income: $%{x:,.0f}\\u003cbr\\u003eBlue values percentage: %{customdata:.1f}%\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\",\"shape\":\"linear\",\"width\":2.5},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000,19500,20000,20500,21000,21500,22000,22500,23000,23500,24000,24500,25000,25500,26000,26500,27000,27500,28000,28500,29000,29500,30000,30500,31000,31500,32000,32500,33000,33500,34000,34500,35000,35500,36000,36500,37000,37500,38000,38500,39000,39500,40000],\"xaxis\":\"x\",\"y\":[-0.09562504,-0.09562457,-0.09562552,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.09562504,-0.10727441,-0.16038382,-0.1780147,-0.07179689,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.01118946,-0.06429881,-0.00807422,0.09562492,0.09562695,0.09562498,0.09562504,0.09562504,0.09562504,0.09562504,0.09562504,0.09562504,0.09562504,0.09562504,0.09562504,0.12905663,0.18216598,0.19124997,0.1754961,0.06927735,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\",\"customdata\":[-9.562503999999999,-9.562457,-9.562552,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-9.562503999999999,-10.727441,-16.038382000000002,-17.80147,-7.179689,0,0,0,0,0,0,0,0,0,0,0,-1.118946,-6.429881,-0.807422,9.562492,9.562695,9.562498,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,9.562503999999999,12.905663,18.216598,19.124997,17.549609999999998,6.927735,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Employment income\"},\"tickformat\":\"$,.0f\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in marginal tax rate\"},\"tickformat\":\".0%\"},\"legend\":{\"tracegroupgap\":0,\"yanchor\":\"top\",\"y\":0.99,\"xanchor\":\"right\",\"x\":0.99,\"bgcolor\":\"rgba(255, 255, 255, 0.8)\"},\"title\":{\"text\":\"Figure 4: Change in marginal tax rate by employment income\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":50,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 158,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create income values from 0 to 40,000 in equal steps\n",
    "income_steps = 81  # Number of data points\n",
    "# Generate the original income values\n",
    "employment_income_original = [\n",
    "    i * (40000 / (income_steps - 1)) for i in range(income_steps)\n",
    "]\n",
    "# Round the income values to the nearest 100\n",
    "employment_income = [\n",
    "    round(income / 100) * 100 for income in employment_income_original\n",
    "]\n",
    "\n",
    "# Blue Values from paste.txt\n",
    "blue_values = [\n",
    "    -0.09562504,\n",
    "    -0.09562457,\n",
    "    -0.09562552,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.09562504,\n",
    "    -0.10727441,\n",
    "    -0.16038382,\n",
    "    -0.1780147,\n",
    "    -0.07179689,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    -0.01118946,\n",
    "    -0.06429881,\n",
    "    -0.00807422,\n",
    "    0.09562492,\n",
    "    0.09562695,\n",
    "    0.09562498,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.09562504,\n",
    "    0.12905663,\n",
    "    0.18216598,\n",
    "    0.19124997,\n",
    "    0.1754961,\n",
    "    0.06927735,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]\n",
    "\n",
    "# Convert blue values to percentages (multiply by 100)\n",
    "blue_values_percentage = [value * 100 for value in blue_values]\n",
    "\n",
    "# Create DataFrame for plotting\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in marginal tax rate\": blue_values,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the figure\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in marginal tax rate\",\n",
    "    line_shape=\"linear\",\n",
    "    hover_data={\n",
    "        \"Employment Income\": \":$,.0f\",\n",
    "        \"Change in marginal tax rate\": \":.0f%\",\n",
    "    },\n",
    "    title=\"Figure 4: Change in marginal tax rate by employment income\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"Change in marginal tax rate\",\n",
    "    xaxis_tickformat=\"$,.0f\",\n",
    "    yaxis_tickformat=\".0%\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "    legend=dict(\n",
    "        yanchor=\"top\",\n",
    "        y=0.99,\n",
    "        xanchor=\"right\",\n",
    "        x=0.99,\n",
    "        bgcolor=\"rgba(255, 255, 255, 0.8)\",\n",
    "    ),\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Update trace style\n",
    "fig.update_traces(\n",
    "    line=dict(color=BLUE_PRIMARY, width=2.5),\n",
    "    hovertemplate=\"<b>Change in marginal tax rate</b><br>\"\n",
    "    + \"Employment income: $%{x:,.0f}<br>\"\n",
    "    + \"Blue values percentage: %{customdata:.1f}%<extra></extra>\",\n",
    "    customdata=blue_values_percentage,\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "This change is reflected in the total marginal tax rate schedule, increasing the marginal rate above 60% for earnings between $19,000 and $20,000, and $27,000 and $27,500, and reducing it to -11% for earnings up to $7,000."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 159,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Scenario=Current Law\\u003cbr\\u003eEmployment Income=%{x:$,.0f}\\u003cbr\\u003eMarginal Tax Rate=%{y:.0%}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Current Law\",\"line\":{\"color\":\"#808080\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Current Law\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,500,1000,1500,2000,2500,3000,3500,4100,4600,5100,5600,6100,6600,7100,7600,8100,8600,9100,9600,10100,10600,11100,11600,12200,12700,13200,13700,14200,14700,15200,15700,16200,16700,17200,17700,18200,18700,19200,19700,20300,20800,21300,21800,22300,22800,23300,23800,24300,24800,25300,25800,26300,26800,27300,27800,28400,28900,29400,29900,30400,30900,31400,31900,32400,32900,33400,33900,34400,34900,35400,35900,36500,37000,37500,38000,38500,39000,39500,40000],\"xaxis\":\"x\",\"y\":[-0.01912498,-0.01912594,-0.01912451,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.01912498,-0.00747466,0.18693459,0.41939944,0.43650198,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.44768947,0.5007988,0.532125,0.5321231,0.5321231,0.47002345,0.41062498,0.41062498,0.41062498,0.41062498,0.41062498,0.41062498,0.41062498,0.41062498,0.3798926,0.39282227,0.46169925,0.46169925,0.46170115,0.371666,0.25728709,0.22398633,0.22049999,0.22049999,0.22050196,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22050196,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.43576562,0.43576562,0.2938633,0.2938633,0.22049999,0.2204999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999],\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hovertemplate\":\"Scenario=Tax Cuts for Workers Act\\u003cbr\\u003eEmployment Income=%{x:$,.0f}\\u003cbr\\u003eMarginal Tax Rate=%{y:.0%}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Tax Cuts for Workers Act\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Tax Cuts for Workers Act\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0,500,1000,1500,2000,2500,3000,3500,4100,4600,5100,5600,6100,6600,7100,7600,8100,8600,9100,9600,10100,10600,11100,11600,12200,12700,13200,13700,14200,14700,15200,15700,16200,16700,17200,17700,18200,18700,19200,19700,20300,20800,21300,21800,22300,22800,23300,23800,24300,24800,25300,25800,26300,26800,27300,27800,28400,28900,29400,29900,30400,30900,31400,31900,32400,32900,33400,33900,34400,34900,35400,35900,36500,37000,37500,38000,38500,39000,39500,40000],\"xaxis\":\"x\",\"y\":[-0.11475003,-0.1147505,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11475003,-0.11474907,0.02655077,0.24138474,0.3647051,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.4365,0.5240508,0.627748,0.62775004,0.56564844,0.50625,0.50625,0.50625,0.50625,0.50625,0.50625,0.50625,0.50625,0.50625,0.5089492,0.57498825,0.6529492,0.63719535,0.5309785,0.371666,0.25728709,0.22398633,0.22049999,0.22050196,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22050196,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.43576562,0.43576562,0.2938633,0.2938633,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999,0.22049999],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Employment income\"},\"tickformat\":\"$,.0f\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Marginal Tax Rate\"},\"tickformat\":\".0%\"},\"legend\":{\"title\":{\"text\":\"Scenario\"},\"tracegroupgap\":0,\"yanchor\":\"top\",\"y\":0.99,\"xanchor\":\"right\",\"x\":0.99,\"bgcolor\":\"rgba(255, 255, 255, 0.8)\"},\"title\":{\"text\":\"Figure 5: Marginal tax rates under current law and the TCWA\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":50,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 159,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create income values from 0 to 40,000 in equal steps\n",
    "income_steps = 80  # Number of data points\n",
    "# Generate the original income values\n",
    "employment_income_original = [\n",
    "    i * (40000 / (income_steps - 1)) for i in range(income_steps)\n",
    "]\n",
    "# Round the income values to the nearest 100\n",
    "employment_income = [\n",
    "    round(income / 100) * 100 for income in employment_income_original\n",
    "]\n",
    "\n",
    "\n",
    "# Blue Values\n",
    "blue_values = [\n",
    "    -0.11475003,\n",
    "    -0.1147505,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11475003,\n",
    "    -0.11474907,\n",
    "    0.02655077,\n",
    "    0.24138474,\n",
    "    0.3647051,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.5240508,\n",
    "    0.627748,\n",
    "    0.62775004,\n",
    "    0.56564844,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.50625,\n",
    "    0.5089492,\n",
    "    0.57498825,\n",
    "    0.6529492,\n",
    "    0.63719535,\n",
    "    0.5309785,\n",
    "    0.371666,\n",
    "    0.25728709,\n",
    "    0.22398633,\n",
    "    0.22049999,\n",
    "    0.22050196,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22050196,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.43576562,\n",
    "    0.43576562,\n",
    "    0.2938633,\n",
    "    0.2938633,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "]\n",
    "\n",
    "# Grey Values\n",
    "grey_values = [\n",
    "    -0.01912498,\n",
    "    -0.01912594,\n",
    "    -0.01912451,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.01912498,\n",
    "    -0.00747466,\n",
    "    0.18693459,\n",
    "    0.41939944,\n",
    "    0.43650198,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.4365,\n",
    "    0.44768947,\n",
    "    0.5007988,\n",
    "    0.532125,\n",
    "    0.5321231,\n",
    "    0.5321231,\n",
    "    0.47002345,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.41062498,\n",
    "    0.3798926,\n",
    "    0.39282227,\n",
    "    0.46169925,\n",
    "    0.46169925,\n",
    "    0.46170115,\n",
    "    0.371666,\n",
    "    0.25728709,\n",
    "    0.22398633,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22050196,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22050196,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.43576562,\n",
    "    0.43576562,\n",
    "    0.2938633,\n",
    "    0.2938633,\n",
    "    0.22049999,\n",
    "    0.2204999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "    0.22049999,\n",
    "]\n",
    "\n",
    "# Convert blue values to percentages (multiply by 100)\n",
    "blue_values_percentage = [value * 100 for value in blue_values]\n",
    "\n",
    "grey_values_percentage = [value * 100 for value in grey_values]\n",
    "\n",
    "# Create DataFrame for plotting\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Current Law\": grey_values,\n",
    "        \"Tax Cuts for Workers Act\": blue_values,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Reshape data for plotting with multiple lines\n",
    "df_melted = df.melt(\n",
    "    id_vars=\"Employment Income\",\n",
    "    value_vars=[\"Current Law\", \"Tax Cuts for Workers Act\"],\n",
    "    var_name=\"Scenario\",\n",
    "    value_name=\"Marginal Tax Rate\",\n",
    ")\n",
    "\n",
    "# Create the figure\n",
    "fig = px.line(\n",
    "    df_melted,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Marginal Tax Rate\",\n",
    "    color=\"Scenario\",\n",
    "    color_discrete_map={\n",
    "        \"Current Law\": GRAY,\n",
    "        \"Tax Cuts for Workers Act\": BLUE_PRIMARY,\n",
    "    },\n",
    "    title=\"Figure 5: Marginal tax rates under current law and the TCWA\",\n",
    "    hover_data={\n",
    "        \"Employment Income\": \":$,.0f\",\n",
    "        \"Marginal Tax Rate\": \":.0%\",\n",
    "    },\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Employment income\",\n",
    "    yaxis_title=\"Marginal Tax Rate\",\n",
    "    xaxis_tickformat=\"$,.0f\",\n",
    "    yaxis_tickformat=\".0%\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "    legend=dict(\n",
    "        yanchor=\"top\",\n",
    "        y=0.99,\n",
    "        xanchor=\"right\",\n",
    "        x=0.99,\n",
    "        bgcolor=\"rgba(255, 255, 255, 0.8)\",\n",
    "    ),\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## National impacts\n",
    "\n",
    "To estimate the economic effects, we apply the PolicyEngine US 1.247.0 microsimulation model and our [Enhanced Current Population Survey](https://legacy.policyengine.org/us/research/enhanced-cps-beta), comparing against current law (assuming TCJA expires). \n",
    "\n",
    "### Budgetary impacts\n",
    "\n",
    "Over the 2026-35 budget window, and assuming no behavioral responses, the reform would cost the federal government $65.4 billion, with costs decreasing from [$7.0 billion](https://legacy.policyengine.org/us/policy?reform=81471&focus=policyOutput.budgetaryImpact.overall&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps) in 2026 to $6.1 billion in 2035."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 160,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 2: Budget Window Impact of the Tax Cuts for Workers Act, with and without behavioral responses.**\n",
       "\n",
       "|   Year |   Static  |   With CBO behavioral responses |\n",
       "|-------:|----------:|--------------------------------:|\n",
       "|   2026 |       7.0 |                            19.2 |\n",
       "|   2027 |       6.8 |                            19.0 |\n",
       "|   2028 |       6.7 |                            18.4 |\n",
       "|   2029 |       6.7 |                            18.6 |\n",
       "|   2030 |       6.6 |                            18.2 |\n",
       "|   2031 |       6.5 |                            17.5 |\n",
       "|   2032 |       6.4 |                            16.8 |\n",
       "|   2033 |       6.3 |                            16.5 |\n",
       "|   2034 |       6.2 |                            16.1 |\n",
       "|   2035 |       6.1 |                            15.5 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 160,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Your original data\n",
    "years = [2026, 2027, 2028, 2029, 2030, 2031, 2032, 2033, 2034, 2035]\n",
    "static_impact = [7.0, 6.8, 6.7, 6.7, 6.6, 6.5, 6.4, 6.3, 6.2, 6.1]\n",
    "dynamic_impact = [19.2, 19.0, 18.4, 18.6, 18.2, 17.5, 16.8, 16.5, 16.1, 15.5]\n",
    "\n",
    "# Create DataFrame from your data\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": years,\n",
    "        \"Static \": static_impact,\n",
    "        \"With CBO behavioral responses\": dynamic_impact,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Import tabulate directly\n",
    "from tabulate import tabulate\n",
    "\n",
    "# Convert DataFrame to a list of lists for tabulate\n",
    "headers = df.columns.tolist()\n",
    "data = df.values.tolist()\n",
    "\n",
    "# Create a list of format strings for each column\n",
    "# First column (Year) as integer, others with one decimal place\n",
    "colalign = [\"right\"] * len(headers)  # Right-align all columns\n",
    "floatfmt = [\".0f\", \".1f\", \".1f\"]  # Format for each column\n",
    "\n",
    "# Generate the markdown table\n",
    "markdown_table = tabulate(\n",
    "    data,\n",
    "    headers=headers,\n",
    "    tablefmt=\"pipe\",\n",
    "    colalign=colalign,\n",
    "    floatfmt=floatfmt,\n",
    ")\n",
    "\n",
    "# Display the markdown table\n",
    "Markdown(\n",
    "    \"**Table 2: Budget Window Impact of the Tax Cuts for Workers Act, with and without behavioral responses.**\\n\\n\"\n",
    "    + markdown_table\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Distributional impacts\n",
    "\n",
    "Here we report various distributional impacts for 2026, assuming no behavioral responses. These account for mechanical state and local tax impacts due to EITC matches, which we project at $1.5 billion for 2026 (in addition to the $7.0 billion federal cost).\n",
    "\n",
    "The TCWA would [increase the net income](https://legacy.policyengine.org/us/policy?reform=81471&focus=policyOutput.winnersAndLosers.incomeDecile&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps) of 10% of the population, with those in the eighth decile most likely to experience an increase in household income (26%). Nobody’s net income falls."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 161,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"2%\"],\"textposition\":\"inside\",\"x\":[2],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"7.8%\"],\"textposition\":\"inside\",\"x\":[7.8],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"91.2%\"],\"textposition\":\"inside\",\"x\":[91.2],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"9.0%\",\"5.0%\",\"4.0%\",\"1.1%\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[9.0,5.0,4.0,1.1,0.0,0.0,0.0,0.0,0.0,0.0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"6.0%\",\"11.0%\",\"9.0%\",\"11.0%\",\"5.0%\",\"11.0%\",\"7.0%\",\"10.0%\",\"1.4%\",\"8.0%\"],\"textposition\":\"inside\",\"x\":[6.0,11.0,9.0,11.0,5.0,11.0,7.0,10.0,1.4,8.0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"85.0%\",\"84.0%\",\"87.0%\",\"88.0%\",\"95.0%\",\"88.0%\",\"93.0%\",\"90.0%\",\"98.6%\",\"92.0%\"],\"textposition\":\"inside\",\"x\":[85.0,84.0,87.0,88.0,95.0,88.0,93.0,90.0,98.6,92.0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"matches\":\"x2\",\"showticklabels\":false,\"title\":{\"text\":\"\"},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.902,1.0]},\"xaxis2\":{\"anchor\":\"y2\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Population share\",\"standoff\":20},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis2\":{\"anchor\":\"x2\",\"domain\":[0.0,0.882],\"title\":{\"text\":\"Income Decile\",\"standoff\":15},\"automargin\":true},\"title\":{\"text\":\"Figure 6: Winners of the Tax Cuts for Workers Act by Income Decile\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"legend\":{\"orientation\":\"v\",\"yanchor\":\"top\",\"y\":1.0,\"xanchor\":\"right\",\"x\":1.5,\"traceorder\":\"normal\",\"itemsizing\":\"constant\"},\"margin\":{\"l\":50,\"r\":160,\"b\":100,\"t\":100,\"pad\":4},\"barmode\":\"stack\",\"height\":600,\"width\":900,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 161,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Income deciles\n",
    "deciles = list(range(1, 11))\n",
    "\n",
    "# Data for tax cut effects\n",
    "gain_more_than_5pct = [9, 5, 4, 1.1, 0, 0, 0, 0, 0, 0]  # Dark blue\n",
    "gain_less_than_5pct = [6, 11, 9, 11, 5, 11, 7, 10, 1.4, 8]  # Light blue\n",
    "no_change = [85, 84, 87, 88, 95, 88, 93, 90, 98.6, 92]  # Neutral grey\n",
    "loss_less_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Light red (empty in this case)\n",
    "loss_more_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Dark red (empty in this case)\n",
    "\n",
    "# Direct input values for the \"All\" category\n",
    "all_gain_more = 2\n",
    "all_gain_less = 7.8\n",
    "all_no_change = 91.2\n",
    "all_loss_less = 0\n",
    "all_loss_more = 0\n",
    "\n",
    "# Create labels for deciles\n",
    "labels_deciles = [f\"{i}\" for i in deciles]\n",
    "\n",
    "# Create DataFrame for deciles\n",
    "df_deciles = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": labels_deciles,\n",
    "        \"Gain more than 5%\": gain_more_than_5pct,\n",
    "        \"Gain less than 5%\": gain_less_than_5pct,\n",
    "        \"No change\": no_change,\n",
    "        \"Loss less than 5%\": loss_less_than_5pct,\n",
    "        \"Loss more than 5%\": loss_more_than_5pct,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create DataFrame for All\n",
    "df_all = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": [\"All\"],\n",
    "        \"Gain more than 5%\": [all_gain_more],\n",
    "        \"Gain less than 5%\": [all_gain_less],\n",
    "        \"No change\": [all_no_change],\n",
    "        \"Loss less than 5%\": [all_loss_less],\n",
    "        \"Loss more than 5%\": [all_loss_more],\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the final combined figure with a subplot\n",
    "fig = make_subplots(\n",
    "    rows=2,\n",
    "    cols=1,\n",
    "    shared_xaxes=True,\n",
    "    vertical_spacing=0.02,\n",
    "    row_heights=[0.1, 0.9],\n",
    ")\n",
    "\n",
    "# Add traces for \"All\" category - first row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Add traces for deciles - second row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Update layout\n",
    "fig.update_layout(\n",
    "    barmode=\"stack\",\n",
    "    title_x=0.8,\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    title=\"Figure 6: Winners of the Tax Cuts for Workers Act by Income Decile\",\n",
    "    xaxis=dict(title=\"\", ticksuffix=\"%\", range=[0, 100]),\n",
    "    xaxis2=dict(\n",
    "        title=dict(\n",
    "            text=\"Population share\",\n",
    "            standoff=20,  # Increase standoff to move title down\n",
    "        ),\n",
    "        ticksuffix=\"%\",\n",
    "        range=[0, 100],\n",
    "    ),\n",
    "    yaxis2=dict(\n",
    "        automargin=True,\n",
    "        title=dict(\n",
    "            text=\"Income Decile\",\n",
    "            standoff=15,  # Increase standoff to move title left\n",
    "        ),\n",
    "    ),\n",
    "    legend=dict(\n",
    "        orientation=\"v\",\n",
    "        yanchor=\"top\",\n",
    "        y=1.0,\n",
    "        xanchor=\"right\",\n",
    "        x=1.5,\n",
    "        traceorder=\"normal\",\n",
    "        itemsizing=\"constant\",\n",
    "    ),\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 160, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    height=600,\n",
    "    width=900,  # Explicitly set width to accommodate legend\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The TCWA would increase the [net income of households by $59](https://legacy.policyengine.org/us/policy?reform=81471&focus=policyOutput.distributionalImpact.incomeDecile.average&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps), with the largest increase in the first ($95) and second income deciles ($91). Households in upper income deciles still benefit as they can include multiple tax units.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 162,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile: %{x}\\u003cbr\\u003eAverage impact: $%{y:,.0f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"$95\",\"$91\",\"$79\",\"$59\",\"$27\",\"$54\",\"$41\",\"$50\",\"$8\",\"$55\"],\"textposition\":\"auto\",\"x\":[1,2,3,4,5,6,7,8,9,10],\"xaxis\":\"x\",\"y\":[95,91,79,59,27,54,41,50,8,55],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Average impact\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Figure 7: Average impact of the Tax Cuts for Workers Act by income decile\"},\"barmode\":\"relative\",\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":50,\"pad\":4},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":0.5,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 162,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Average impact by decile data\n",
    "deciles = list(range(1, 11))\n",
    "avg_impact = [95, 91, 79, 59, 27, 54, 41, 50, 8, 55]  # Values in dollars\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": deciles,\n",
    "        \"Average impact\": avg_impact,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Format dollar values for display\n",
    "dollar_text = [f\"${x}\" for x in avg_impact]\n",
    "\n",
    "fig = (\n",
    "    px.bar(\n",
    "        df,\n",
    "        x=\"Income decile\",\n",
    "        y=\"Average impact\",\n",
    "        text=dollar_text,  # Dollar values with $ sign\n",
    "        color_discrete_sequence=[BLUE_PRIMARY],\n",
    "        title=\"Average Impact of the Tax Cuts for Workers Act by Income Decile\",\n",
    "    )\n",
    "    .update_layout(\n",
    "        font=dict(family=\"Roboto Serif\"),\n",
    "        xaxis_title=\"Income decile\",\n",
    "        yaxis_title=\"Average impact\",\n",
    "        xaxis_tickvals=list(range(1, 11)),\n",
    "        yaxis_tickformat=\",\",\n",
    "        showlegend=False,\n",
    "        font_color=BLACK,\n",
    "        margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 50, \"pad\": 4},\n",
    "        title=\"Figure 7: Average impact of the Tax Cuts for Workers Act by income decile\",\n",
    "        annotations=[\n",
    "            {\n",
    "                \"x\": 0.5,\n",
    "                \"y\": -0.25,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"text\": \"Source: PolicyEngine US\",\n",
    "                \"showarrow\": False,\n",
    "                \"font\": {\n",
    "                    \"family\": \"Roboto Serif\",\n",
    "                    \"size\": 10,\n",
    "                    \"color\": DARK_GRAY,\n",
    "                },\n",
    "            }\n",
    "        ],\n",
    "        images=[\n",
    "            {\n",
    "                \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.2,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"sizex\": 0.1,\n",
    "                \"sizey\": 0.1,\n",
    "                \"xanchor\": \"right\",\n",
    "                \"yanchor\": \"bottom\",\n",
    "            }\n",
    "        ],\n",
    "    )\n",
    "    .update_traces(\n",
    "        hovertemplate=\"Income decile: %{x}<br>Average impact: $%{y:,.0f}<extra></extra>\"\n",
    "    )\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Poverty and inequality impacts\n",
    "\n",
    "Our analysis finds that the TCWA would [reduce the poverty rate](https://legacy.policyengine.org/us/policy?reform=81471&focus=policyOutput.povertyImpact.regular.byAge&region=us&timePeriod=2026&baseline=2&dataset=enhanced_cps) by 0.3% (0.1 percentage point reduction in the Supplemental Poverty Measure) in 2026, disproportionately among adults aged 18-64 (0.4%)."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Conclusion\n",
    "\n",
    "\n",
    "The Tax Cuts for Workers Act would cost the federal government $65.4 billion over the 2026-35 budget window, assuming no behavioral responses. Accounting for state and local tax impacts, which add 21% to the aggregate impact beyond the federal taxes, it increases net income for 10% of the population, with an average household increase of $59 ($590 per affected household). Households in the first and second income deciles would see the largest benefits ($95 and $91 respectively). The TCWA is projected to reduce poverty by 0.3% and the Gini index of income inequality by 0.05%.\n",
    "\n",
    "We invite readers to explore this reform and others in the [PolicyEngine app](http://legacy.policyengine.org).\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "pe",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.14"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}



---

---
# Benefits in PolicyEngine
Slug: uk-benefits-post
Date: 2025-05-28 00:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured, benefit
Description: PolicyEngine models different benefit components in the UK, including means-tested and non-means-tested benefits.

---

This article outlines how PolicyEngine models the UK benefit system. It details benefits in the UK welfare system and the implementation within the PolicyEngine microsimulation. This article serves as a technical reference for understanding how the PolicyEngine UK microsimulation model performs benefit calculations.

Table 1 summarises estimates for each benefit in the UK system, comparing PolicyEngine's 2025-26 fiscal year expenditure projections with those from the government (such as the Office for Budget Responsibility) and showing the percentage difference between them. While PolicyEngine accounts for interactions when tax and benefit programmes are introduced or removed, Table 1 shows only the direct expenditure for each benefit for consistency with government reports.

**Table 1: Summary of UK benefit expenditure estimates**

| Programme                     | PolicyEngine estimate 2025 (£bn)                                                                                                       | OBR estimate 2025-26 (£bn)                                                                                                                                             | PolicyEngine affected population estimate 2025 (%) |
| ----------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------- |
| Universal Credit              | 79.4                                                                                                                                   | [77.4](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024)                                                                        | 21.8                                               |
| Housing Benefit               | [7.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80663)  | [11.6](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024)                                                                        | 2.9                                                |
| Tax Credits                   | [<1.0](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80677) | [<1.0](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024)                                                                        | 0.1                                                |
| Pension Credit                | [7.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80685)  | [6.0](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-pensioner-benefits/)                                                                | 3.6                                                |
| Personal Independence Payment | [30.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80686) | [28.7](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/)                                                              | 10.3                                               |
| Disability Living Allowance   | [9.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80689)  | [7.5](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/)                                                               | 4.5                                                |
| Attendance Allowance          | [10.2](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80692) | [8.0](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/)                                                               | 3.9                                                |
| Child Benefit                 | [12.3](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80696) | [12.5](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-child-benefit/#:~:text=Child%20benefit%20is%20a%20cash,the%20UK%20in%202023%2D24.) | 31.3                                               |
| Winter Fuel Payment           | [<1.0](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80702) | [<1.0](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024)                                                                        | 2.7                                                |

As government estimates for childcare programmes are available for the 2024 fiscal year, we present them separately in the table below. Table 2 compares UK childcare programme costs, showing PolicyEngine's expenditure estimates for 2025 alongside both previous year estimates and official government projections.

**Table 2: Summary of UK childcare programmes expenditure estimates**

| Programme           | PolicyEngine estimate 2025 (£bn)                                                                                                                               | PolicyEngine estimate 2024 (£bn)                                                                                                                               | Government report 2024 (£bn)                                                                                  | PolicyEngine affected population estimate 2025 (%) |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | -------------------------------------------------- |
| Tax-free childcare  | [0.7](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82972)                          | [0.6](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83892)                          | [0.6](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024)                  | 2.8                                                |
| Extended childcare  | [4.4](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80613&uk_local_areas_beta=true) | [2.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83897&uk_local_areas_beta=true) | [2.5](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | 4.3                                                |
| Universal childcare | [1.8](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=82975)                          | [1.6](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83887)                          | [1.7](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | 2.6                                                |
| Targeted childcare  | [0.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=82974)                          | [0.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83888)                          | [0.6](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) | 0.5                                                |

This post has two main sections. The first covers means-tested benefits—such as Universal Credit, legacy programmes, and pension-age benefits—which vary with household income and savings. The second examines non-means-tested benefits, including disability, child, and retirement programmes, which are based on individual circumstances rather than income. For each benefit, the post details eligibility criteria, calculation methods, and how payments differ across the income distribution.

## Means-tested benefits

The government provides means-tested benefits based on household income, financial circumstances, and savings, with payments decreasing as income rises. The term 'means-testing' refers to the assessment of a claimant's financial resources to determine eligibility and payment amount. PolicyEngine models means-tested benefits by accounting for interactions between income sources, capital limits, and household composition. In the following sections, we examine each means-tested benefit in detail.

### Universal Credit

The Department for Work and Pensions (DWP) provides [Universal Credit](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/universal_credit.py), a means-tested benefit that replaces six legacy benefits for working-age people. Our calculation methodology first determines a household’s maximum entitlement by summing various elements based on household circumstances, then reduces this amount based on income (applying the taper rate), and finally applies a benefit cap if necessary.

- **[Standard allowance](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/standard_allowance/uc_standard_allowance.py)**: All eligible claimants receive the standard allowance as the core component of Universal Credit. The amount varies by age and by whether the claimant applies individually or as part of a couple. For 2025, a single person under 25 receives £311.68 per month, while a single person over 25 receives £393.45 per month. Couples where both members are under 25 receive £489.23 per month, while couples with at least one member over 25 receive £617.60 per month.

- **[Child element](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/child_element/uc_child_element.py)**: In 2025, HM Revenue and Customs (HMRC) pays £333.33 per month for a first child born before April 2017 and £287.92 for other children. The two-child limit, introduced in April 2017, restricts payments to the first two children in most cases, with exemptions for situations such as multiple births or non-consensual conception. PolicyEngine identifies each eligible child in the household, checks whether the higher rate applies, applies the two-child limit where relevant, and sums the monthly amounts.

- **[Housing costs element](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/housing_costs_element/uc_housing_costs_element.py)**: For social housing tenants, the DWP sets eligible housing costs equal to the full rent. For private rentals, DWP caps the amount using Local Housing Allowance (LHA) rates, which vary by location and required property size. DWP then reduces the award based on non-dependent deductions for other adults in the household. PolicyEngine applies these caps using household composition and geographical location to simulate how LHA rates and non-dependent deductions affect benefit calculations.

- **[Work allowances](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/work_allowance/uc_work_allowance.py) and [taper rate](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/universal_credit/income/uc_income_reduction.py)**: DWP reduces Universal Credit as earnings rise, applying a taper rate after accounting for any work allowance. In 2025, the work allowance is £404 per month for households receiving housing-related payments and £673 for those without. DWP deducts 55p from Universal Credit for every £1 earned above the allowance. PolicyEngine first checks if the household includes children or someone with limited capability for work. If so, it applies the work allowance and then reduces Universal Credit by the taper rate on earnings above that amount.

- **Benefit cap**: DWP enforces a maximum limit on total benefit income through the benefit cap, setting higher thresholds for London residents and exempting households with significant earnings or disability benefits. PolicyEngine checks whether a household qualifies for an exemption and, if not, applies the cap based on household composition and location.

#### Economic analysis

PolicyEngine projects that Universal Credit will cost £79.4 billion in 2025-26, 2.6% more than the UK government's estimate of [£77.4 billion](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024) for 2025-26. Figure 1 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

To show the impact of Universal Credit on household finances, we plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=84661&region=uk&timePeriod=2025&baseline=1&household=50678) with two 10-year-old children. Abolishing this benefit reduces the household's net income in the low-income range. Figure 2 shows this effect on household net income.

**. Household net income with and without Universal Credit**

[Chart: . Household net income with and without Universal Credit]

### Housing Benefit

DWP provides [Housing Benefit](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/housing_benefit/housing_benefit.py) to people who do not receive Universal Credit, covering part or all of their rental costs. DWP calculates the award based on eligible rent—capped by Local Housing Allowance (LHA) for private rentals—and reduces it by 65% of income above the applicable threshold. It applies further reductions for non-dependent adults living in the household. DWP uses different rules for working-age and pension-age claimants and plans to transfer all working-age recipients to Universal Credit by [March 2026](https://www.gov.uk/guidance/move-to-universal-credit-if-you-get-a-migration-notice-letter).

DWP [excludes](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/housing_benefit/applicable_income/housing_benefit_applicable_income.py) certain income types through disregards, such as partial earnings and specific benefit payments. These include higher partial earnings disregards for lone parents, full disregards for benefits like Personal Independence Payment, and partial disregards for pension contributions and childcare costs. DWP [sets](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/housing_benefit/non_dep_deduction/housing_benefit_non_dep_deductions.py) the non-dependent deduction amount based on the non-dependent’s income and circumstances. A non-dependent is an adult such as an adult child or parent who lives with the claimant and is expected to contribute to housing costs.

#### Economic analysis

PolicyEngine projects that Housing Benefit will cost [£7.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80663) in 2025-26, 34.5% less than the UK government's estimate of [£11.6 billion](https://www.gov.uk/government/publications/benefit-expenditure-and-caseload-tables-2024) for 2025-26. Figure 3 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://gist.github.com/vahid-ahmadi/73f7361aedf338796c5ecdf64d3822f1) receiving £10,000 in Housing Benefit per year. Removing this benefit reduces the household's net income in the low-income range. Figure 4 shows this effect on household net income.

**. Household net income with and without Housing Benefit**

[Chart: . Household net income with and without Housing Benefit]

### Tax Credits

HMRC provided [Tax Credits](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/tax_credits.py) to increase the incomes of families with children and individuals in low-paid work. The system included two components—Child Tax Credit and Working Tax Credit—which claimants could receive separately or together. In [April 2025](https://www.gov.uk/tax-credits-have-ended), HMRC ended all Tax Credit payments and instructed claimants to apply for Universal Credit or Pension Credit to continue receiving support.

- PolicyEngine calculates Tax Credits using the following steps:
- Calculate the maximum entitlement for both Child Tax Credit and Working Tax Credit.
- Determine the relevant income threshold, which differs for claimants receiving both credits versus Child Tax Credit only.
- Reduce the entitlement by 41% of income above the threshold, withdrawing Working Tax Credit first, followed by Child Tax Credit.
- Exclude payments below the minimum threshold.

Tax Credits include two main components, which PolicyEngine models as follows:

- **Child Tax Credit (CTC)**: In 2025, HMRC paid Child Tax Credit to families with children, regardless of employment status. The credit included a £570 annual family element for households with at least one qualifying child, and a £3,455 annual child element for each eligible child. HMRC also paid additional amounts for children with disabilities. The two-child limit applied to children born after April 2017.

- **Working Tax Credit (WTC)**: In 2025, HMRC paid Working Tax Credit to individuals in low-paid work. It provided a basic element of £2,435 per year to all eligible claimants and added further amounts for couples, lone parents, and those working at least 30 hours per week. HMRC also covered up to 70% of eligible childcare costs—capped at £175 per week for one child or £300 for two or more children—through a dedicated childcare element.

HMRC reduces Tax Credits by 41% of income above the relevant threshold: £7,455 for households receiving both WTC and CTC, and £18,725 for those receiving CTC only. For every £1 above the threshold, HMRC withdraws 41p in Tax Credits.

#### Economic analysis

PolicyEngine projects that Tax Credits will cost less than [£1 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80677) in 2025-26, in line with the UK government's estimate of less than £1 billion for 2025-26.

### Pension Credit

DWP provides [Pension Credit](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pension_credit/pension_credit.py) to pensioners whose income falls below a specified threshold. DWP divides Pension Credit into two parts: Guarantee Credit and Savings Credit. PolicyEngine applies a 70% take-up rate to reflect that not all eligible pensioners claim the benefit. This rate represents the proportion of eligible individuals who receive payments. We incorporate this behavioural assumption to produce more accurate aggregate estimates. PolicyEngine calculates Pension Credit using the following steps:

- Check whether the household includes at least one person of State Pension age.
- Calculate Guarantee Credit entitlement.
- Calculate Savings Credit entitlement, if applicable.
- Combine the two components.
- Apply the take-up rate to simulate real-world claiming behaviour.

Pension Credit includes two main components, which we describe in detail below:

- **Guarantee Credit**: DWP [tops up](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pension_credit/guarantee_credit/guarantee_credit.py) weekly income to a guaranteed minimum level. In 2025, it sets the minimum at £218.15 per week for singles and £332.95 for couples. DWP adds further amounts for severe disability, caring responsibilities, and dependent children. PolicyEngine calculates the shortfall between the applicable minimum (including any additions) and the claimant’s assessed income, and pays that amount as Guarantee Credit.

- **Savings Credit**: DWP [pays](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pension_credit/savings_credit/savings_credit.py) Savings Credit to pensioners with modest savings or income above the basic State Pension level. It's only available to those who reached State Pension age before April 2016. For 2025, the income threshold is £189.80 per week for singles and £301.22 per week for couples. The amount increases at a rate of 60% of income above the threshold, then decreases at 40% of income above the minimum guarantee level. PolicyEngine calculates Savings Credit using the following methodology:

- Check if the claimant reached State Pension age before April 2016.
- Determine relevant income for calculating Savings Credit.
- Calculate the maximum possible Savings Credit as 60% of the difference between the minimum guarantee and the threshold.
- Award Savings Credit at 60% of income above the threshold, up to the maximum.
- Reduce the award by 40% of income above the minimum guarantee.

#### Economic analysis

PolicyEngine projects that Pension Credit will cost [£7.4 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80685) in 2025-26, 23.3% more than the UK government's estimate of [£6.0 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-pensioner-benefits/) for 2025-26. Figure 5 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.pythonReproducibility&reform=1&region=uk&timePeriod=2025&baseline=80685&household=53633) with a 70-year-old adult. Removing Pension Credit reduces the household’s net income in the low-income range. Figure 6 shows this effect on household net income.

**. Household net income with and without Pension Credit**

[Chart: . Household net income with and without Pension Credit]

## Non-means-tested benefits

Non-means-tested benefits address specific needs or circumstances, regardless of household income. Unlike means-tested benefits, these payments remain fixed as income increases. PolicyEngine identifies eligibility based on defined characteristics or conditions rather than financial resources. In the following sections, we describe each non-means-tested programme and explain how we model them.

### Personal Independence Payment (PIP)

DWP provides [Personal Independence Payment (PIP)](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pip/pip.py) to individuals with long-term health conditions or disabilities. The benefit includes two components: daily living and mobility. DWP pays each component at either a standard or enhanced rate, depending on an assessment of the claimant’s needs. PIP replaced Disability Living Allowance for working-age adults and uses a points-based system to determine eligibility and payment levels. PolicyEngine calculates PIP using the following steps:

- Identify individuals with disabilities in the dataset.
- Assign daily living and mobility components based on reported needs.
- Apply the rate for each component.
- Combine both components to determine the total PIP.

For 2025, the [daily living](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pip/daily_living.py) component is £108.55 per week at the enhanced rate and £72.65 per week at the standard rate. The [mobility](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/pip/mobility.py) component is £75.75 per week at the enhanced rate and £28.70 per week at the standard rate.

#### Economic analysis

PolicyEngine projects that PIP will cost [£30.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80686) in 2025-26, 6.6% more than the UK government's estimate of [£28.7 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/) for 2025-26. Figure 7 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=1&region=uk&timePeriod=2025&baseline=80686&household=53477). When the individual receives the mobility component of PIP, they also receive the disability component of Universal Credit, which raises take-home income compared to the scenario without PIP. At lower income levels, this additional benefit increases household income. As earnings rise and the household loses eligibility for Universal Credit, the difference in take-home income between the two scenarios levels off. Figure 8 shows take-home income under both scenarios.

**. Household net income with and without PIP**

[Chart: . Household net income with and without PIP]

### Disability Living Allowance (DLA)

DWP provides [Disability Living Allowance (DLA)](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/dla/dla.py), which includes two components: self-care (equivalent to PIP’s daily living component) and mobility. DWP continues to pay DLA for children, while most working-age adults have transitioned to PIP. Some adults who received DLA before PIP was introduced remain on the benefit under transitional protection. PolicyEngine calculates DLA using the following steps:

- Identify eligible children and protected adults in the dataset.
- Assign the self-care component using a three-tier scheme (higher, middle, or lower rate) based on care needs.
- Assign the mobility component using a two-tier scheme (higher or lower rate) based on the severity of mobility limitations, then apply the appropriate rate.
- Combine both components to calculate the total DLA.

For 2025, the [self-care](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/dla/self_care.py) component has three possible rates: higher (£108.55 per week), middle (£72.65 per week), and lower (£28.70 per week). The [mobility](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/dla/mobility.py) component has two rates: higher (£75.75 per week) and lower (£28.70 per week). We calculate the annual amount by multiplying the weekly rates by 52.

#### Economic analysis

PolicyEngine projects that Disability Living Allowance will cost [£9.3 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80689) in 2025-26, 24.0% more than the UK government's estimate of [£7.5 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/) for 2025-26. Figure 9 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.netIncome&reform=1&region=uk&timePeriod=2025&baseline=80689&household=53482). When the individual receives the mobility component of Disability Living Allowance (DLA), they also qualify for the disability component of Universal Credit, which increases take-home income compared to the scenario without DLA. At lower income levels, this additional benefit raises household income. As earnings increase and the household loses eligibility for Universal Credit, the difference in take-home income between the two scenarios levels off. Figure 10 shows take-home income under both scenarios.

**. Household net income with and without DLA**

[Chart: . Household net income with and without DLA]

### Attendance Allowance

DWP provides [Attendance Allowance](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/attendance_allowance.py) at two rates, based on the level of care required. DWP pays this benefit to individuals who became disabled after reaching State Pension age, since they cannot claim PIP or DLA for the first time after this point. PolicyEngine calculates Attendance Allowance using the following steps:

- Identify individuals over State Pension age with care needs.
- Determine the rate based on whether care is needed during the day, night, or both.
- Assign the weekly rate and calculate the annual amount.

For 2025, the higher rate is £108.55 per week and the lower rate is £72.65 per week. The higher rate applies to those needing care both day and night, or those who are ill. The lower rate applies to those needing care either during the day or at night. PolicyEngine calculates the annual amount by multiplying the weekly rate by 52. DWP uprates all three disability benefits annually using the Consumer Price Index (CPI). This ensures that benefit rates maintain their real value against inflation, protecting the purchasing power of disabled recipients.

#### Economic analysis

PolicyEngine projects that Attendance Allowance will cost [£10.2 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80692) in 2025-26, 27.5% more than the UK government's estimate of [£8.0 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-disability-benefits/) for 2025-26. Figure 11 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=1&region=uk&timePeriod=2025&baseline=80692&household=53560) receiving £5,000 per year in Attendance Allowance. Removing this benefit reduces the household’s net income. Figure 12 shows this effect on household finances.

**. Household net income with and without Attendance Allowance**

[Chart: . Household net income with and without Attendance Allowance]

### Child Benefit

HMRC pays [Child Benefit](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/child_benefit.py) for children under 16, or under 20 if they remain in approved education or training. Unlike means-tested benefits, HMRC pays Child Benefit at a flat rate, regardless of household income. In 2025, the rate is £26.04 per week for the first child and £17.24 per week for each additional child. PolicyEngine calculates Child Benefit using the following steps:

- Identify eligible children in each household.
- Apply the higher rate to the eldest (or only) eligible child.
- Apply the standard rate to additional eligible children.
- Calculate the High Income Child Benefit Charge (HITC), if applicable.
- Determine the net Child Benefit after applying the HITC.

The [High Income Child Benefit Charge (HITC)](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/charges/child_benefit_hitc.py) effectively withdraws this benefit when individual income exceeds £50,000, with complete withdrawal at £60,000. HMRC increases the charge proportionally with income within this range. For each £100 of income above £50,000, it reclaims 1% of the Child Benefit through the tax system.

#### Economic analysis

PolicyEngine projects that Child Benefit will cost [£12.3 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80696) in 2025-26, 1.6% less than the UK government's estimate of [£12.5 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/welfare-spending-child-benefit/#:~:text=Child%20benefit%20is%20a%20cash,the%20UK%20in%202023%2D24.) for 2025-26. Figure 13 shows the distributional impact of this programme.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?reform=1&focus=householdOutput.earnings&region=uk&timePeriod=2025&baseline=80696&household=53314) with £10,000 in annual childcare expenses. Removing Child Benefit reduces the household’s net income. Figure 14 shows this effect on household net income.

**. Household net income with and without Child Benefit**

[Chart: . Household net income with and without Child Benefit]

### State Pension

DWP provides the [State Pension](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/state_pension.py) based on an individual’s National Insurance contribution history rather than their current financial circumstances. PolicyEngine calculates State Pension using the following steps:

- Check whether the individual has reached State Pension age.
- Identify which State Pension scheme applies (pre- or post-April 2016).
- Calculate entitlement based on National Insurance contributions and apply the corresponding rate.

Two schemes apply, depending on when the individual reached State Pension age:

- **[New State Pension](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/dwp/state_pension/new_state_pension/)**: For those reaching State Pension age on or after April 6, 2016. For 2025, the full rate is £221.20 per week, reduced proportionally for those with fewer than 35 qualifying years of National Insurance contributions (minimum 10 years required). The calculation multiplies the full rate by the fraction of qualifying years divided by 35, with a minimum threshold of 10 qualifying years.

- **[Basic State Pension](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/dwp/state_pension/basic_state_pension/)**: For those who reached State Pension age before April 6, 2016. For 2025, the full rate is £169.50 per week, plus Additional State Pension based on earnings-related contributions. The Basic State Pension requires 30 qualifying years for a full pension, with a proportional reduction for those with fewer years.

Both schemes apply the [triple lock](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/dwp/state_pension/triple_lock/) for annual uprating, increasing pensions by whichever is highest: inflation, earnings growth, or a fixed rate of 2.5%. PolicyEngine evaluates all three measures each year and applies the maximum value to model the triple lock.

### Winter Fuel Payment

DWP pays the [Winter Fuel Payment](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dwp/WFA.py) as an annual payment to older individuals to cover winter heating costs. PolicyEngine calculates Winter Fuel Payment using the following steps:

- Identify households with members of eligible age.
- Determine the payment rate based on age and household composition.
- Assign the annual payment amount.

In 2025, DWP pays £200 to households with someone aged 66 to 79 and £300 to those with someone aged 80 or over. In households with multiple pensioners, DWP allocates the payment to ensure no household receives more than the maximum amount.

In Scotland, the Pension Age Winter Heating Payment (PAWHP) has [replaced](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/social_security_scotland/pawhp.py) this benefit, with similar rate structure. This reflects the devolution of certain benefits to the Scottish government, which has implemented its own version of the payment with similar eligibility criteria and rates.

#### Economic analysis

PolicyEngine projects that Winter Fuel Payment will cost less than [£1 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80702) in 2025-26, in line with the UK government's estimate of less than £1 billion for 2025-26.

### Tax-free childcare

HMRC operates the [Tax-Free Childcare](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/tax_free_childcare/tax_free_childcare.py) scheme, which adds a government top-up to parental childcare payments made through an online account. Parents deposit funds into the account, and HMRC adds a contribution based on the total amount paid. PolicyEngine calculates Tax-Free Childcare using the following steps:

- Identify households with eligible children.
- Check income conditions and work requirements for parents.
- Calculate childcare expenses and the corresponding government contribution.
- Apply the maximum contribution cap per child.

In 2025, the government contributes 20% of childcare costs, effectively adding £2 for every £8 parents spend. The annual top-up is capped at £2,000 per standard child and £4,000 per disabled child. This 20% rate mirrors the value of basic rate income tax relief. Eligibility criteria include age requirements (children under 12, or under 17 if disabled), income conditions, and work requirements (both parents must generally be working, with exceptions for disability).

#### Economic analysis

PolicyEngine projects that tax-free childcare will cost [£0.6 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83892) in 2024-25, in line with the UK government's estimate of [£0.6 billion](https://www.gov.uk/government/statistics/tax-free-childcare-statistics-september-2024) for 2024-25. Figure 15 shows the distributional effect of this benefit.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=73038&region=uk&timePeriod=2025&baseline=76821&household=51616) with one child aged 3. These households become eligible for Tax-Free Childcare (TFC) when the earner makes at least [£9,516](https://www.gov.uk/tax-free-childcare) per year at age 21 or older. The benefit ends at £100,000, creating a drop in take-home income. This threshold creates a gap between households just above and just below the eligibility cutoff. Figure 16 shows this effect on household net income.

**. Household net income with and without TFC**

[Chart: . Household net income with and without TFC]

Households with income just above £100,000 lose eligibility, resulting in a sharp drop in their childcare entitlement—often described as an earnings cliff. At this threshold, families transition from receiving childcare funding to losing it entirely.

### Universal childcare entitlement

The Department for Education (DfE) provides the [universal childcare entitlement](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/universal_childcare_entitlement/universal_childcare_entitlement.py), which grants free childcare hours to all children aged 3 to 4, regardless of parental income or work status. PolicyEngine calculates universal childcare entitlement using the following steps:

- Identify children aged [3 to 4 years old](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/universal_childcare_entitlement/universal_childcare_entitlement_eligible.py).
- Apply the standard entitlement of 570 hours per year.
- Calculate the funding amount using the applicable funding rate.

In 2025, the entitlement provides 570 hours per year—equivalent to 15 hours per week over 38 weeks—funded at £5.88 per hour. This results in an annual in-kind value of £3,351.60 per eligible child.

#### Economic analysis

PolicyEngine projects that universal childcare entitlement will cost [£1.6 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2024&baseline=83887) in 2024-25, 5.9% less than the UK government's estimate of [£1.7 billion](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) for 2024-25. Figure 17 shows the distributional impact of this benefit.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?reform=1&focus=householdOutput.earnings&region=uk&timePeriod=2025&baseline=82975&household=53312) with one child aged 3. Households cannot receive Tax-Free Childcare (TFC) and universal childcare at the same time. Figure 18 shows household net income based on the head's employment income.

**. Household net income with and without universal childcare entitlement**

[Chart: . Household net income with and without universal childcare entitlement]

### Extended childcare entitlement

DfE provides the [extended childcare entitlement](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/extended_childcare_entitlement/extended_childcare_entitlement.py), which offers additional free childcare hours to working parents. This extends the universal entitlement by adding 15 hours per week for children aged 3 to 4, and from 2024, it begins to cover younger children as well. PolicyEngine calculates extended childcare entitlement using the following steps:

- Identify children in eligible age ranges.
- Check parental work and income conditions.
- Apply the hourly entitlement based on the child's age.
- Calculate the funding amount using age-specific rates.

In 2025, the entitlement varies by child age: children aged 9 to 23 months and 2 years receive 15 hours per week, increasing to 30 hours per week in 2026, while children aged 3 to 4 years receive 30 hours per week, which combines the universal 15 hours with an additional 15 hours.

The funding rates vary by age: £11.22 per hour for children under 2, £8.28 per hour for 2-year-olds, and £5.88 per hour for children aged 3 and over. These different rates reflect the higher staffing requirements and costs of caring for younger children.

#### Economic analysis

PolicyEngine projects that extended childcare entitlement will cost [£2.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83897&uk_local_areas_beta=true) in 2024-25, 4.0% more than the UK government's estimate of [£2.5 billion](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) for 2024-25. Figure 19 shows the distributional effect of this benefit.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=1&region=uk&timePeriod=2025&baseline=80613&household=53312) with one child aged 3. Households become eligible for extended childcare entitlement when earning at least [£9,516 annually](https://www.gov.uk/free-childcare-if-working/check-youre-eligible) for adults aged 21 or over. The benefit ends at £100,000, causing a drop in take-home pay. Households earning above this threshold lose eligibility entirely. Figure 20 shows this effect on household net income.

**. Household net income with and without extended childcare entitlement**

[Chart: . Household net income with and without extended childcare entitlement]

### Targeted childcare entitlement

DfE provides the [targeted childcare entitlement](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/targeted_childcare_entitlement/targeted_childcare_entitlement.py), which offers free childcare to 2-year-olds in lower-income families. PolicyEngine calculates targeted childcare entitlement using the following steps:

- Identify children aged 2 years old.
- Check if the family receives qualifying benefits or meets income criteria.
- Apply the standard entitlement of 570 hours per year.
- Calculate the funding amount using the 2-year-old rate.

In 2025, the programme provides 570 hours per year (15 hours per week over 38 weeks), funded at £8.28 per hour. This results in an annual value of £4,719.60 per eligible child. The Department for Education grants eligibility to families receiving qualifying benefits or meeting income thresholds: under £16,190 per year for Tax Credit recipients, or earned income below £15,400 per year for those on Universal Credit.

#### Economic analysis

PolicyEngine projects that targeted childcare entitlement will cost [£0.5 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2024&baseline=83888) in 2024-25, in line with the UK government's estimate of [£0.6 billion](https://skillsfunding.service.gov.uk/view-latest-funding/national-funding-allocations/DSG/2024-to-2025) for 2024-25. Figure 21 shows the distributional effect of this benefit.

[Chart: type: bar]

#### Gross salary vs take-home pay at the household level

We plot net income for a [single-earner household](https://legacy.policyengine.org/uk/household?focus=householdOutput.earnings&reform=1&region=uk&timePeriod=2025&baseline=82974&household=53310) with one child aged 2. Figure 22 shows household net income based on the head’s employment income.

**. Household net income with and without targeted childcare entitlement**

[Chart: . Household net income with and without targeted childcare entitlement]

### Care to Learn

DfE provides the [Care to Learn](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/dfe/study_childcare_entitlement/study_childcare_entitlement.py) programme, which covers childcare costs for young parents in education. PolicyEngine calculates Care to Learn using the following steps:

- Identify eligible young parents under 20 years old.
- Verify they are in non-tertiary education (not university or higher education).
- Check if they live in England and are not apprentices.
- Calculate the funding amount based on regional rates (London versus outside London).

In 2025, the scheme provides weekly payments up to £195 for those living in London and £180 for those outside London. PolicyEngine multiplies this weekly amount by the number of weeks in a year, resulting in annual values up to £10,140 for London residents and £9,360 for those outside London.

To [qualify](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/dfe/care_to_learn), claimants must be under 20, live in England, be in eligible education, and not be apprentices. The Family Resources Survey does not include relevant cases, so PolicyEngine cannot estimate the economic impact of this programme. However, PolicyEngine implements the programme and includes it in household benefit calculations.

### Energy Bills Support

The UK government introduced several temporary programmes to reduce household energy costs. These schemes were delivered by HM Treasury and local authorities, depending on the mechanism:

- **[Energy Bills Credit](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/treasury/energy_bills_rebate/energy_bills_credit.py)**: HM Treasury provided £400 per household as monthly reductions on electricity bills from October 2022 to March 2023. The discount applied automatically to all domestic electricity accounts over six monthly instalments. The government concluded the scheme in [March 2024](https://www.gov.uk/guidance/energy-bills-discount-scheme) and did not extend it beyond the winter period.

- **[Council Tax Rebate](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/treasury/energy_bills_rebate/council_tax_rebate.py)**: Local authorities paid £150 to households in Council Tax bands A–D in England, with similar programmes in devolved nations. Councils distributed these payments between April and September 2022, and the scheme officially closed in [November 2022](https://www.gov.uk/guidance/council-tax-rebate-factsheet).

- **[Energy Price Guarantee](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/treasury/price_cap_subsidy/energy_price_cap_subsidy.py)**: HM Treasury capped typical household energy bills at £2,500 per year by limiting unit prices for gas and electricity. The government compensated energy suppliers for the difference between market rates and the guaranteed cap. This scheme ended in [June 2023](https://www.gov.uk/government/publications/energy-bills-support/energy-price-guarantee-up-until-30-june-2023).

### Cost of Living Support Payment

HMRC and DWP provided the [Cost of Living Support Payment](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/treasury/cost_of_living_support/cost_of_living_support_payment.py) as a one-off payment to households facing higher living costs. For the 2022–23 period, the payments included:

- £650 for recipients of means-tested benefits, paid in two instalments.
- £150 for recipients of disability benefits.
- £300 for pensioners eligible for the Winter Fuel Payment.

## Conclusion

PolicyEngine models the current UK benefits system and potential reforms, showing distributional impacts by income decile. Users analyse how benefit changes affect household incomes, government budgets, and behavioural responses such as labour supply. The model captures how benefit design influences household decisions and economic outcomes. We invite you to explore these policy effects on the PolicyEngine interface.



---

---
# Idaho’s New Individual Income Tax Changes
Slug: idaho-2025-tax-change
Date: 2025-04-01
Authors: David Trimmer
Tags: us, us-id, featured, policy
Description: The lower top marginal rate and larger grocery tax credit will cost the state $225 million in 2025.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "On March 6th, Governor Brad Little (ID-R) signed [House Bill 40](https://legislature.idaho.gov/sessioninfo/2025/legislation/H0040/), lowering the state's top marginal income tax rate from 5.695% to 5.3%.[^1] A week later, he signed [House Bill 231](https://legislature.idaho.gov/sessioninfo/2025/legislation/h0231/), which raised the state’s grocery tax credit from $120 (or $140 for filers aged 65 or older) to $155.[^2]\n",
    "\n",
    "We at PolicyEngine have updated our model to reflect these changes and analyzed their effects on the state of Idaho and its residents.\n",
    "\n",
    "\n",
    "Key results for 2025:\n",
    "\n",
    "* Reduces state revenues by $225 million\n",
    "* Benefits 87% of Idaho residents\n",
    "* Has no effect on the Supplemental Poverty Measure \n",
    "* Increase the Gini index of inequality by 0.01%\n",
    "\n",
    "*Use PolicyEngine to view the [full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=id&timePeriod=2025&baseline=80392) or calculate the [effect on your household](https://legacy.policyengine.org/us/household?focus=intro&reform=2&region=id&timePeriod=2025&baseline=80392).*\n",
    "\n",
    "[^1]: House Bill 40 also lowered the corporate tax rate to 5.3%, expanded the exemption for military pensions and removed capital gains on precious metals. We did not include these provisions in our analysis.\n",
    "\n",
    "[^2]: House Bill 231 also allows filers to itemize grocery receipts to claim a grocery tax credit of $250. We did not include this provision in our analysis."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "from IPython.display import Markdown\n",
    "import pandas as pd\n",
    "import plotly.express as px\n",
    "import plotly.graph_objects as go\n",
    "\n",
    "\n",
    "# Define PolicyEngine's color palette\n",
    "BLACK = \"#000000\"\n",
    "BLUE_LIGHT = \"#D8E6F3\"\n",
    "BLUE_PRIMARY = \"#2C6496\"\n",
    "DARK_BLUE_HOVER = \"#1d3e5e\"\n",
    "DARK_GRAY = \"#616161\"\n",
    "DARKEST_BLUE = \"#0C1A27\"\n",
    "GRAY = \"#808080\"\n",
    "LIGHT_GRAY = \"#F2F2F2\"\n",
    "MEDIUM_DARK_GRAY = \"#D2D2D2\"\n",
    "MEDIUM_LIGHT_GRAY = \"#BDBDBD\"\n",
    "WHITE = \"#FFFFFF\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Tax Reforms\n",
    "\n",
    "Idaho has undergone several tax reforms in recent years. However, in 2024, [Idaho has two tax brackets](https://tax.idaho.gov/taxes/income-tax/individual-income/individual-income-tax-rate-schedule/): one at 0% and another at 5.695%. For single filers, the 5.695% rate does not apply until their taxable income exceeds $4,673. House Bill 40 reduces the 5.695% rate to 5.3%. \n",
    "\n",
    "In 2025, using inflation projections from the Congressional Budget Office, this new rate would apply when a single filer’s taxable income reaches $4,777. Table 1 shows when the new marginal tax rate would apply based on filing status. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 1: Taxable Income Where Idaho’s Top Marginal Tax Rate Applies Based on Filing Status in 2025**\n",
       "\n",
       "| Filing Status                                  | Taxable Income Threshold ($)   |\n",
       "|:-----------------------------------------------|:-------------------------------|\n",
       "| Head of Household, Joint, and Surviving Spouse | 9,553                          |\n",
       "| Single and Separate                            | 4,777                          |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the household impacts\n",
    "filing_status = [\n",
    "    \"Head of Household, Joint, and Surviving Spouse\",\n",
    "    \"Single and Separate\",\n",
    "]\n",
    "income_threshold = [9553, 4777]\n",
    "\n",
    "\n",
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Filing Status\": filing_status,\n",
    "        \"Taxable Income Threshold ($)\": income_threshold,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Filing Status\"] = df[\"Filing Status\"]\n",
    "df[\"Taxable Income Threshold ($)\"] = df[\"Taxable Income Threshold ($)\"].apply(\n",
    "    add_thousands_separator\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Table 1: Taxable Income Where Idaho’s Top Marginal Tax Rate Applies Based on Filing Status in 2025**\\n\\n\"\n",
    "    + df.to_markdown(index=False)\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The [grocery tax credit](https://tax.idaho.gov/wp-content/uploads/forms/EIN00046/EIN00046_10-23-2024.pdf#page=11) provides a fully refundable credit to households based on the number of family members. The grocery tax credit is not subject to any income limits or phase-outs, meaning any household in Idaho can claim the credit. \n",
    "\n",
    "The only exception is if a household receives benefits for the Supplemental Nutrition Assistance Program (SNAP)  throughout the year, they do not qualify for the credit. In 2024, the credit’s value was $120 per member, with an additional $20 benefit for claimants 65 or over. House Bill 231 raises the credit value to $155 while eliminating the $20 supplement for elderly household members. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Household Impacts\n",
    "\n",
    "The two examined income tax changes have different effects on households based on their composition and earnings. Here, we consider some examples, as displayed in Table 2.\n",
    "\n",
    "A childless adult with no earnings [will be unaffected by either tax provision](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=id&timePeriod=2025&baseline=80392&household=52245). Since single filers in Idaho can take a standard deduction of $14,600 and the top marginal tax rate does not go into effect until they have $4,673 of taxable income, a childless adult must earn $19,273 before their net income would be affected by the rate change. Additionally, since a childless adult with no earnings, but who meets [SNAP’s work requirements](https://www.fns.usda.gov/snap/work-requirements) (ex., is participating in a work program at least 80 hours per month), is eligible for SNAP benefits, the increase in grocery tax credit does not change their net income either. They would have to earn over $20,000 to no longer qualify for SNAP and therefore be eligible for the grocery tax credit. \n",
    "\n",
    "A single parent with two kids earning $50,000 annually [will gain $176](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=id&timePeriod=2025&baseline=80392&household=52247). As their income excludes them from SNAP benefits, the household qualifies for the grocery tax credit, which increases by $35 per household member for a total of $105. Since the household's taxable income is subject to the reduced top marginal tax rate, their tax liability is reduced by $71.\n",
    "\n",
    "Finally, an elderly couple with no children and $200,000 of annual earnings will see their [net income increase by $214](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252). Since each spouse was scheduled to receive $140 in grocery credits ($120 plus the $20 aged amount) and will now receive $155 each, their total allotment increases by $30. Additionally, the top marginal rate cut lowers their state income tax liability by $184. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 2: Change in Net Income Based on Household Composition in 2025**\n",
       "\n",
       "| Household Composition                    |   Change in Net Income ($) |\n",
       "|:-----------------------------------------|---------------------------:|\n",
       "| Single, No Children, No Earnings         |                          0 |\n",
       "| Single, Two Children, $50,000            |                        176 |\n",
       "| Married (Elderly), No Children, $200,000 |                        214 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the household impacts\n",
    "household_composition = [\n",
    "    \"Single, No Children, No Earnings\",\n",
    "    \"Single, Two Children, $50,000\",\n",
    "    \"Married (Elderly), No Children, $200,000\",\n",
    "]\n",
    "income_change = [0, 176, 214]\n",
    "\n",
    "\n",
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Household Composition\": household_composition,\n",
    "        \"Change in Net Income ($)\": income_change,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Household Composition\"] = df[\"Household Composition\"]\n",
    "df[\"Change in Net Income ($)\"] = df[\"Change in Net Income ($)\"].apply(\n",
    "    add_thousands_separator\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Table 2: Change in Net Income Based on Household Composition in 2025**\\n\\n\"\n",
    "    + df.to_markdown(index=False)\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The figure below displays how a single parent of two’s net income changes as household earnings vary for tax year 2025. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Figure 1: Change in Net Income for a Single Parent of Two Children in 2025**\n",
       "\n",
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income=%{x}\\u003cbr\\u003eChange in net income=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,34000,35000,39000,39500,40000,40500,41000,41500,42000,42500,43000,43500,44000,44500,45000,45500,46000,46500,47000,47500,48000,48500,49000,49500,50000,50500,51000,51500,52000,52500,53000,53500,54000,54500,55000,55500,56000,56500,57000,57500,58000,58500,59000,59500,60000,60500,61000,61500,62000,62500,63000,63500,64000,64500,65000,65500,66000,66500,67000,67500,68000,68500,69000,69500,70000,70500,71000,71500,72000,72500,73000,73500,74000,74500,75000,75500,76000,76500,77000,77500,78000,78500,79000,79500,80000,80500,81000,81500,82000,82500,83000,83500,84000,84500,85000,85500,86000,86500,87000,87500,88000,88500,89000,89500,90000,90500,91000,91500,92000,92500,93000,93500,94000,94500,95000,95500,96000,96500,97000,97500,98000,98500,99000,99500,100000,100500,101000,101500,102000,102500,103000,103500,104000,104500,105000,105500,106000,106500,107000,107500,108000,108500,109000,109500,110000,110500,111000,111500,112000,112500,113000,113500,114000,114500,115000,115500,116000,116500,117000,117500,118000,118500,119000,119500,120000,120500,121000,121500,122000,122500,123000,123500,124000,124500,125000,125500,126000,126500,127000,127500,128000,128500,129000,129500,130000,130500,131000,131500,132000,132500,133000,133500,134000,134500,135000,135500,136000,136500,137000,137500,138000,138500,139000,139500,140000,140500,141000,141500,142000,142500,143000,143500,144000,144500,145000,145500,146000,146500,147000,147500,148000,148500,149000,149500,150000,150500,151000,151500,152000,152500,153000,153500,154000,154500,155000,155500,156000,156500,157000,157500,158000,158500,159000,159500,160000,160500,161000,161500,162000,162500,163000,163500,164000,164500,165000,165500,166000,166500,167000,167500,168000,168500,169000,169500,170000,170500,171000,171500,172000,172500,173000,173500,174000,174500,175000,175500,176000,176500,177000,177500,178000,178500,179000,179500,180000,180500,181000,181500,182000,182500,183000,183500,184000,184500,185000,185500,186000,186500,187000,187500,188000,188500,189000,189500,190000,190500,191000,191500,192000,192500,193000,193500,194000,194500,195000,195500,196000,196500,197000,197500,198000,198500,199000,199500,200000],\"xaxis\":\"x\",\"y\":[0.0,0.0,105.0,105.0,119.0,136.0,138.0,140.0,142.0,144.0,146.0,148.0,150.0,152.0,154.0,156.0,158.0,160.0,162.0,164.0,166.0,167.97,169.93,171.9,173.87,175.84,177.8,179.77,181.74,183.7,185.67,187.64,189.61,191.57,193.54,195.51,197.48,199.44,201.41,203.38,205.34,207.31,209.28,211.25,213.21,215.18,217.15,219.11,221.08,223.05,225.02,226.98,228.95,230.92,232.89,234.85,236.82,238.79,240.75,242.72,244.69,246.66,248.62,250.59,252.56,254.52,256.49,258.46,260.43,262.39,264.36,266.33,268.3,270.26,272.23,274.2,276.16,278.13,280.1,282.07,284.03,286.0,287.97,289.93,291.9,293.87,295.84,297.8,299.77,301.74,303.7,305.67,307.64,309.61,311.57,313.54,315.51,317.48,319.44,321.41,323.38,325.34,327.31,329.28,331.25,333.21,335.18,337.15,339.11,341.08,343.05,345.02,346.98,348.95,350.92,352.89,354.85,356.82,358.79,360.75,362.72,364.69,366.66,368.62,370.59,372.56,374.52,376.49,378.46,380.43,382.39,384.36,386.33,388.3,390.26,392.23,394.2,396.16,398.13,400.1,402.07,404.03,406.0,407.97,409.93,411.9,413.87,415.84,417.8,419.77,421.74,423.7,425.67,427.64,429.61,431.57,433.54,435.51,437.48,439.44,441.41,443.38,445.34,447.31,449.28,451.25,453.21,455.18,457.15,459.11,461.08,463.05,465.02,466.98,468.95,470.92,472.89,474.85,476.82,478.79,480.75,482.72,484.69,486.66,488.62,490.59,492.56,494.52,496.49,498.46,500.43,502.39,504.36,506.33,508.3,510.26,512.23,514.2,516.16,518.13,520.1,522.07,524.03,526.0,527.97,529.93,531.9,533.87,535.84,537.8,539.77,541.74,543.7,545.67,547.64,549.61,551.57,553.54,555.51,557.48,559.44,561.41,563.38,565.34,567.31,569.28,571.25,573.21,575.18,577.15,579.11,581.08,583.05,585.02,586.98,588.95,590.92,592.89,594.85,596.82,598.79,600.75,602.72,604.69,606.66,608.62,610.59,612.56,614.52,616.49,618.46,620.43,622.39,624.36,626.33,628.3,630.26,632.23,634.2,636.16,638.13,640.1,642.07,644.03,646.0,647.97,649.93,651.9,653.87,655.84,657.8,659.77,661.74,663.7,665.67,667.64,669.61,671.57,673.54,675.51,677.48,679.44,681.41,683.38,685.34,687.31,689.28,691.25,693.21,695.18,697.15,699.11,701.08,703.05,705.02,706.98,708.95,710.92,712.89,714.85,716.82,718.79,720.75,722.72,724.69,726.66,728.62,730.59,732.56,734.52,736.49,738.46,740.43,742.39,744.36,746.33,748.3,750.26,752.23,754.2,756.16,758.13,760.1,762.07,764.03,766.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Household head employment income ($)\"},\"tickformat\":\",\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Change in Household Net Income by Employment Income\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "employment_income = [\n",
    "    0,\n",
    "    34000,\n",
    "    35000,\n",
    "    39000,\n",
    "    39500,\n",
    "    40000,\n",
    "    40500,\n",
    "    41000,\n",
    "    41500,\n",
    "    42000,\n",
    "    42500,\n",
    "    43000,\n",
    "    43500,\n",
    "    44000,\n",
    "    44500,\n",
    "    45000,\n",
    "    45500,\n",
    "    46000,\n",
    "    46500,\n",
    "    47000,\n",
    "    47500,\n",
    "    48000,\n",
    "    48500,\n",
    "    49000,\n",
    "    49500,\n",
    "    50000,\n",
    "    50500,\n",
    "    51000,\n",
    "    51500,\n",
    "    52000,\n",
    "    52500,\n",
    "    53000,\n",
    "    53500,\n",
    "    54000,\n",
    "    54500,\n",
    "    55000,\n",
    "    55500,\n",
    "    56000,\n",
    "    56500,\n",
    "    57000,\n",
    "    57500,\n",
    "    58000,\n",
    "    58500,\n",
    "    59000,\n",
    "    59500,\n",
    "    60000,\n",
    "    60500,\n",
    "    61000,\n",
    "    61500,\n",
    "    62000,\n",
    "    62500,\n",
    "    63000,\n",
    "    63500,\n",
    "    64000,\n",
    "    64500,\n",
    "    65000,\n",
    "    65500,\n",
    "    66000,\n",
    "    66500,\n",
    "    67000,\n",
    "    67500,\n",
    "    68000,\n",
    "    68500,\n",
    "    69000,\n",
    "    69500,\n",
    "    70000,\n",
    "    70500,\n",
    "    71000,\n",
    "    71500,\n",
    "    72000,\n",
    "    72500,\n",
    "    73000,\n",
    "    73500,\n",
    "    74000,\n",
    "    74500,\n",
    "    75000,\n",
    "    75500,\n",
    "    76000,\n",
    "    76500,\n",
    "    77000,\n",
    "    77500,\n",
    "    78000,\n",
    "    78500,\n",
    "    79000,\n",
    "    79500,\n",
    "    80000,\n",
    "    80500,\n",
    "    81000,\n",
    "    81500,\n",
    "    82000,\n",
    "    82500,\n",
    "    83000,\n",
    "    83500,\n",
    "    84000,\n",
    "    84500,\n",
    "    85000,\n",
    "    85500,\n",
    "    86000,\n",
    "    86500,\n",
    "    87000,\n",
    "    87500,\n",
    "    88000,\n",
    "    88500,\n",
    "    89000,\n",
    "    89500,\n",
    "    90000,\n",
    "    90500,\n",
    "    91000,\n",
    "    91500,\n",
    "    92000,\n",
    "    92500,\n",
    "    93000,\n",
    "    93500,\n",
    "    94000,\n",
    "    94500,\n",
    "    95000,\n",
    "    95500,\n",
    "    96000,\n",
    "    96500,\n",
    "    97000,\n",
    "    97500,\n",
    "    98000,\n",
    "    98500,\n",
    "    99000,\n",
    "    99500,\n",
    "    100000,\n",
    "    100500,\n",
    "    101000,\n",
    "    101500,\n",
    "    102000,\n",
    "    102500,\n",
    "    103000,\n",
    "    103500,\n",
    "    104000,\n",
    "    104500,\n",
    "    105000,\n",
    "    105500,\n",
    "    106000,\n",
    "    106500,\n",
    "    107000,\n",
    "    107500,\n",
    "    108000,\n",
    "    108500,\n",
    "    109000,\n",
    "    109500,\n",
    "    110000,\n",
    "    110500,\n",
    "    111000,\n",
    "    111500,\n",
    "    112000,\n",
    "    112500,\n",
    "    113000,\n",
    "    113500,\n",
    "    114000,\n",
    "    114500,\n",
    "    115000,\n",
    "    115500,\n",
    "    116000,\n",
    "    116500,\n",
    "    117000,\n",
    "    117500,\n",
    "    118000,\n",
    "    118500,\n",
    "    119000,\n",
    "    119500,\n",
    "    120000,\n",
    "    120500,\n",
    "    121000,\n",
    "    121500,\n",
    "    122000,\n",
    "    122500,\n",
    "    123000,\n",
    "    123500,\n",
    "    124000,\n",
    "    124500,\n",
    "    125000,\n",
    "    125500,\n",
    "    126000,\n",
    "    126500,\n",
    "    127000,\n",
    "    127500,\n",
    "    128000,\n",
    "    128500,\n",
    "    129000,\n",
    "    129500,\n",
    "    130000,\n",
    "    130500,\n",
    "    131000,\n",
    "    131500,\n",
    "    132000,\n",
    "    132500,\n",
    "    133000,\n",
    "    133500,\n",
    "    134000,\n",
    "    134500,\n",
    "    135000,\n",
    "    135500,\n",
    "    136000,\n",
    "    136500,\n",
    "    137000,\n",
    "    137500,\n",
    "    138000,\n",
    "    138500,\n",
    "    139000,\n",
    "    139500,\n",
    "    140000,\n",
    "    140500,\n",
    "    141000,\n",
    "    141500,\n",
    "    142000,\n",
    "    142500,\n",
    "    143000,\n",
    "    143500,\n",
    "    144000,\n",
    "    144500,\n",
    "    145000,\n",
    "    145500,\n",
    "    146000,\n",
    "    146500,\n",
    "    147000,\n",
    "    147500,\n",
    "    148000,\n",
    "    148500,\n",
    "    149000,\n",
    "    149500,\n",
    "    150000,\n",
    "    150500,\n",
    "    151000,\n",
    "    151500,\n",
    "    152000,\n",
    "    152500,\n",
    "    153000,\n",
    "    153500,\n",
    "    154000,\n",
    "    154500,\n",
    "    155000,\n",
    "    155500,\n",
    "    156000,\n",
    "    156500,\n",
    "    157000,\n",
    "    157500,\n",
    "    158000,\n",
    "    158500,\n",
    "    159000,\n",
    "    159500,\n",
    "    160000,\n",
    "    160500,\n",
    "    161000,\n",
    "    161500,\n",
    "    162000,\n",
    "    162500,\n",
    "    163000,\n",
    "    163500,\n",
    "    164000,\n",
    "    164500,\n",
    "    165000,\n",
    "    165500,\n",
    "    166000,\n",
    "    166500,\n",
    "    167000,\n",
    "    167500,\n",
    "    168000,\n",
    "    168500,\n",
    "    169000,\n",
    "    169500,\n",
    "    170000,\n",
    "    170500,\n",
    "    171000,\n",
    "    171500,\n",
    "    172000,\n",
    "    172500,\n",
    "    173000,\n",
    "    173500,\n",
    "    174000,\n",
    "    174500,\n",
    "    175000,\n",
    "    175500,\n",
    "    176000,\n",
    "    176500,\n",
    "    177000,\n",
    "    177500,\n",
    "    178000,\n",
    "    178500,\n",
    "    179000,\n",
    "    179500,\n",
    "    180000,\n",
    "    180500,\n",
    "    181000,\n",
    "    181500,\n",
    "    182000,\n",
    "    182500,\n",
    "    183000,\n",
    "    183500,\n",
    "    184000,\n",
    "    184500,\n",
    "    185000,\n",
    "    185500,\n",
    "    186000,\n",
    "    186500,\n",
    "    187000,\n",
    "    187500,\n",
    "    188000,\n",
    "    188500,\n",
    "    189000,\n",
    "    189500,\n",
    "    190000,\n",
    "    190500,\n",
    "    191000,\n",
    "    191500,\n",
    "    192000,\n",
    "    192500,\n",
    "    193000,\n",
    "    193500,\n",
    "    194000,\n",
    "    194500,\n",
    "    195000,\n",
    "    195500,\n",
    "    196000,\n",
    "    196500,\n",
    "    197000,\n",
    "    197500,\n",
    "    198000,\n",
    "    198500,\n",
    "    199000,\n",
    "    199500,\n",
    "    200000,\n",
    "]\n",
    "\n",
    "net_income_change = [\n",
    "    0,\n",
    "    0,\n",
    "    105,\n",
    "    105,\n",
    "    119,\n",
    "    136,\n",
    "    138,\n",
    "    140,\n",
    "    142,\n",
    "    144,\n",
    "    146,\n",
    "    148,\n",
    "    150,\n",
    "    152,\n",
    "    154,\n",
    "    156,\n",
    "    158,\n",
    "    160,\n",
    "    162,\n",
    "    164,\n",
    "    166,\n",
    "    167.97,\n",
    "    169.93,\n",
    "    171.9,\n",
    "    173.87,\n",
    "    175.84,\n",
    "    177.8,\n",
    "    179.77,\n",
    "    181.74,\n",
    "    183.7,\n",
    "    185.67,\n",
    "    187.64,\n",
    "    189.61,\n",
    "    191.57,\n",
    "    193.54,\n",
    "    195.51,\n",
    "    197.48,\n",
    "    199.44,\n",
    "    201.41,\n",
    "    203.38,\n",
    "    205.34,\n",
    "    207.31,\n",
    "    209.28,\n",
    "    211.25,\n",
    "    213.21,\n",
    "    215.18,\n",
    "    217.15,\n",
    "    219.11,\n",
    "    221.08,\n",
    "    223.05,\n",
    "    225.02,\n",
    "    226.98,\n",
    "    228.95,\n",
    "    230.92,\n",
    "    232.89,\n",
    "    234.85,\n",
    "    236.82,\n",
    "    238.79,\n",
    "    240.75,\n",
    "    242.72,\n",
    "    244.69,\n",
    "    246.66,\n",
    "    248.62,\n",
    "    250.59,\n",
    "    252.56,\n",
    "    254.52,\n",
    "    256.49,\n",
    "    258.46,\n",
    "    260.43,\n",
    "    262.39,\n",
    "    264.36,\n",
    "    266.33,\n",
    "    268.3,\n",
    "    270.26,\n",
    "    272.23,\n",
    "    274.2,\n",
    "    276.16,\n",
    "    278.13,\n",
    "    280.1,\n",
    "    282.07,\n",
    "    284.03,\n",
    "    286,\n",
    "    287.97,\n",
    "    289.93,\n",
    "    291.9,\n",
    "    293.87,\n",
    "    295.84,\n",
    "    297.8,\n",
    "    299.77,\n",
    "    301.74,\n",
    "    303.7,\n",
    "    305.67,\n",
    "    307.64,\n",
    "    309.61,\n",
    "    311.57,\n",
    "    313.54,\n",
    "    315.51,\n",
    "    317.48,\n",
    "    319.44,\n",
    "    321.41,\n",
    "    323.38,\n",
    "    325.34,\n",
    "    327.31,\n",
    "    329.28,\n",
    "    331.25,\n",
    "    333.21,\n",
    "    335.18,\n",
    "    337.15,\n",
    "    339.11,\n",
    "    341.08,\n",
    "    343.05,\n",
    "    345.02,\n",
    "    346.98,\n",
    "    348.95,\n",
    "    350.92,\n",
    "    352.89,\n",
    "    354.85,\n",
    "    356.82,\n",
    "    358.79,\n",
    "    360.75,\n",
    "    362.72,\n",
    "    364.69,\n",
    "    366.66,\n",
    "    368.62,\n",
    "    370.59,\n",
    "    372.56,\n",
    "    374.52,\n",
    "    376.49,\n",
    "    378.46,\n",
    "    380.43,\n",
    "    382.39,\n",
    "    384.36,\n",
    "    386.33,\n",
    "    388.3,\n",
    "    390.26,\n",
    "    392.23,\n",
    "    394.2,\n",
    "    396.16,\n",
    "    398.13,\n",
    "    400.1,\n",
    "    402.07,\n",
    "    404.03,\n",
    "    406,\n",
    "    407.97,\n",
    "    409.93,\n",
    "    411.9,\n",
    "    413.87,\n",
    "    415.84,\n",
    "    417.8,\n",
    "    419.77,\n",
    "    421.74,\n",
    "    423.7,\n",
    "    425.67,\n",
    "    427.64,\n",
    "    429.61,\n",
    "    431.57,\n",
    "    433.54,\n",
    "    435.51,\n",
    "    437.48,\n",
    "    439.44,\n",
    "    441.41,\n",
    "    443.38,\n",
    "    445.34,\n",
    "    447.31,\n",
    "    449.28,\n",
    "    451.25,\n",
    "    453.21,\n",
    "    455.18,\n",
    "    457.15,\n",
    "    459.11,\n",
    "    461.08,\n",
    "    463.05,\n",
    "    465.02,\n",
    "    466.98,\n",
    "    468.95,\n",
    "    470.92,\n",
    "    472.89,\n",
    "    474.85,\n",
    "    476.82,\n",
    "    478.79,\n",
    "    480.75,\n",
    "    482.72,\n",
    "    484.69,\n",
    "    486.66,\n",
    "    488.62,\n",
    "    490.59,\n",
    "    492.56,\n",
    "    494.52,\n",
    "    496.49,\n",
    "    498.46,\n",
    "    500.43,\n",
    "    502.39,\n",
    "    504.36,\n",
    "    506.33,\n",
    "    508.3,\n",
    "    510.26,\n",
    "    512.23,\n",
    "    514.2,\n",
    "    516.16,\n",
    "    518.13,\n",
    "    520.1,\n",
    "    522.07,\n",
    "    524.03,\n",
    "    526,\n",
    "    527.97,\n",
    "    529.93,\n",
    "    531.9,\n",
    "    533.87,\n",
    "    535.84,\n",
    "    537.8,\n",
    "    539.77,\n",
    "    541.74,\n",
    "    543.7,\n",
    "    545.67,\n",
    "    547.64,\n",
    "    549.61,\n",
    "    551.57,\n",
    "    553.54,\n",
    "    555.51,\n",
    "    557.48,\n",
    "    559.44,\n",
    "    561.41,\n",
    "    563.38,\n",
    "    565.34,\n",
    "    567.31,\n",
    "    569.28,\n",
    "    571.25,\n",
    "    573.21,\n",
    "    575.18,\n",
    "    577.15,\n",
    "    579.11,\n",
    "    581.08,\n",
    "    583.05,\n",
    "    585.02,\n",
    "    586.98,\n",
    "    588.95,\n",
    "    590.92,\n",
    "    592.89,\n",
    "    594.85,\n",
    "    596.82,\n",
    "    598.79,\n",
    "    600.75,\n",
    "    602.72,\n",
    "    604.69,\n",
    "    606.66,\n",
    "    608.62,\n",
    "    610.59,\n",
    "    612.56,\n",
    "    614.52,\n",
    "    616.49,\n",
    "    618.46,\n",
    "    620.43,\n",
    "    622.39,\n",
    "    624.36,\n",
    "    626.33,\n",
    "    628.3,\n",
    "    630.26,\n",
    "    632.23,\n",
    "    634.2,\n",
    "    636.16,\n",
    "    638.13,\n",
    "    640.1,\n",
    "    642.07,\n",
    "    644.03,\n",
    "    646,\n",
    "    647.97,\n",
    "    649.93,\n",
    "    651.9,\n",
    "    653.87,\n",
    "    655.84,\n",
    "    657.8,\n",
    "    659.77,\n",
    "    661.74,\n",
    "    663.7,\n",
    "    665.67,\n",
    "    667.64,\n",
    "    669.61,\n",
    "    671.57,\n",
    "    673.54,\n",
    "    675.51,\n",
    "    677.48,\n",
    "    679.44,\n",
    "    681.41,\n",
    "    683.38,\n",
    "    685.34,\n",
    "    687.31,\n",
    "    689.28,\n",
    "    691.25,\n",
    "    693.21,\n",
    "    695.18,\n",
    "    697.15,\n",
    "    699.11,\n",
    "    701.08,\n",
    "    703.05,\n",
    "    705.02,\n",
    "    706.98,\n",
    "    708.95,\n",
    "    710.92,\n",
    "    712.89,\n",
    "    714.85,\n",
    "    716.82,\n",
    "    718.79,\n",
    "    720.75,\n",
    "    722.72,\n",
    "    724.69,\n",
    "    726.66,\n",
    "    728.62,\n",
    "    730.59,\n",
    "    732.56,\n",
    "    734.52,\n",
    "    736.49,\n",
    "    738.46,\n",
    "    740.43,\n",
    "    742.39,\n",
    "    744.36,\n",
    "    746.33,\n",
    "    748.3,\n",
    "    750.26,\n",
    "    752.23,\n",
    "    754.2,\n",
    "    756.16,\n",
    "    758.13,\n",
    "    760.1,\n",
    "    762.07,\n",
    "    764.03,\n",
    "    766,\n",
    "]\n",
    "\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in net income\": net_income_change,\n",
    "    }\n",
    ")\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in net income\",\n",
    "    color_discrete_sequence=[BLUE_PRIMARY],\n",
    "    title=\"Change in Household Net Income by Employment Income\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Household head employment income ($)\",\n",
    "    yaxis_title=\"Change in net income ($)\",\n",
    "    xaxis_tickformat=\",\",\n",
    "    yaxis_tickformat=\",\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Figure 1: Change in Net Income for a Single Parent of Two Children in 2025**\\n\\n\"\n",
    "    + f\"```plotly\\n{fig.to_json()}\\n```\"\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Statewide Impacts\n",
    "\n",
    "Using PolicyEngine static modeling, lowering Idaho’s top marginal tax rate will reduce state revenues by [$170.4 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=id&timePeriod=2025&baseline=80396) for tax year 2025. Raising the value of the Idaho grocery tax credit will cost [$54.5 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=id&timePeriod=2025&baseline=80387). With both policies, the combined state budgetary impact is [$224.9 million](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252).\n",
    "\n",
    "87% of residents in Idaho will see [an increase in their net income](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252). The range of residents being net beneficiaries varies based on their income decile. 46% of residents in the lowest income decile will see their net income increase, while 100% in the highest two deciles will see a gain. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Figure 2: Winners of Idaho’s Income Tax Changes by Decile**\n",
       "\n",
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"87%\"],\"textposition\":\"inside\",\"x\":[87],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"13%\"],\"textposition\":\"inside\",\"x\":[13],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"2.4%\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[2.4,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"43%\",\"71%\",\"82%\",\"81%\",\"95%\",\"96%\",\"100%\",\"99%\",\"100%\",\"100%\"],\"textposition\":\"inside\",\"x\":[43,71,82,81,95,96,100,99,100,100],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"54%\",\"29%\",\"18%\",\"19%\",\"5%\",\"4%\",\"\",\"1%\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[54,29,18,19,5,4,0,1,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"matches\":\"x2\",\"showticklabels\":false,\"title\":{\"text\":\"\"},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.902,1.0]},\"xaxis2\":{\"anchor\":\"y2\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Population share\",\"standoff\":20},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis2\":{\"anchor\":\"x2\",\"domain\":[0.0,0.882],\"title\":{\"text\":\"Income Decile\",\"standoff\":15},\"automargin\":true},\"title\":{\"text\":\"Winners of Idaho's Income Tax Changes by Decile\",\"x\":0.8},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"legend\":{\"orientation\":\"v\",\"yanchor\":\"top\",\"y\":1.0,\"xanchor\":\"right\",\"x\":1.5,\"traceorder\":\"normal\",\"itemsizing\":\"constant\"},\"margin\":{\"l\":50,\"r\":160,\"b\":100,\"t\":100,\"pad\":4},\"barmode\":\"stack\",\"height\":600,\"width\":900,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from plotly.subplots import make_subplots\n",
    "\n",
    "# Income deciles\n",
    "deciles = list(range(1, 11))\n",
    "\n",
    "# Data for tax cut effects\n",
    "gain_more_than_5pct = [2.4, 0, 0, 0, 0, 0, 0, 0, 0, 0]  # Dark blue\n",
    "gain_less_than_5pct = [43, 71, 82, 81, 95, 96, 100, 99, 100, 100]  # Light blue\n",
    "no_change = [54, 29, 18, 19, 5, 4, 0, 1, 0, 0]  # Neutral grey\n",
    "loss_less_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Light red (empty in this case)\n",
    "loss_more_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Dark red (empty in this case)\n",
    "\n",
    "# Direct input values for the \"All\" category\n",
    "all_gain_more = 0\n",
    "all_gain_less = 87\n",
    "all_no_change = 13\n",
    "all_loss_less = 0\n",
    "all_loss_more = 0\n",
    "\n",
    "# Create labels for deciles\n",
    "labels_deciles = [f\"{i}\" for i in deciles]\n",
    "\n",
    "# Create DataFrame for deciles\n",
    "df_deciles = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": labels_deciles,\n",
    "        \"Gain more than 5%\": gain_more_than_5pct,\n",
    "        \"Gain less than 5%\": gain_less_than_5pct,\n",
    "        \"No change\": no_change,\n",
    "        \"Loss less than 5%\": loss_less_than_5pct,\n",
    "        \"Loss more than 5%\": loss_more_than_5pct,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create DataFrame for All\n",
    "df_all = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": [\"All\"],\n",
    "        \"Gain more than 5%\": [all_gain_more],\n",
    "        \"Gain less than 5%\": [all_gain_less],\n",
    "        \"No change\": [all_no_change],\n",
    "        \"Loss less than 5%\": [all_loss_less],\n",
    "        \"Loss more than 5%\": [all_loss_more],\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the final combined figure with a subplot\n",
    "fig = make_subplots(\n",
    "    rows=2,\n",
    "    cols=1,\n",
    "    shared_xaxes=True,\n",
    "    vertical_spacing=0.02,\n",
    "    row_heights=[0.1, 0.9],\n",
    ")\n",
    "\n",
    "# Add traces for \"All\" category - first row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Add traces for deciles - second row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Update layout\n",
    "fig.update_layout(\n",
    "    barmode=\"stack\",\n",
    "    title=\"Winners of Idaho's Income Tax Changes by Decile\",\n",
    "    title_x=0.8,\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis=dict(title=\"\", ticksuffix=\"%\", range=[0, 100]),\n",
    "    xaxis2=dict(\n",
    "        title=dict(\n",
    "            text=\"Population share\",\n",
    "            standoff=20,  # Increase standoff to move title down\n",
    "        ),\n",
    "        ticksuffix=\"%\",\n",
    "        range=[0, 100],\n",
    "    ),\n",
    "    yaxis2=dict(\n",
    "        automargin=True,\n",
    "        title=dict(\n",
    "            text=\"Income Decile\",\n",
    "            standoff=15,  # Increase standoff to move title left\n",
    "        ),\n",
    "    ),\n",
    "    legend=dict(\n",
    "        orientation=\"v\",\n",
    "        yanchor=\"top\",\n",
    "        y=1.0,\n",
    "        xanchor=\"right\",\n",
    "        x=1.5,\n",
    "        traceorder=\"normal\",\n",
    "        itemsizing=\"constant\",\n",
    "    ),\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 160, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    height=600,\n",
    "    width=900,  # Explicitly set width to accommodate legend\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(\n",
    "    \"**Figure 2: Winners of Idaho’s Income Tax Changes by Decile**\\n\\n\"\n",
    "    + f\"```plotly\\n{fig.to_json()}\\n```\"\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The tax package will provide an [average benefit of $292 per household](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252), ranging from $25 in the bottom income decile to $1,193 in the top decile (as defined by the nationwide income distribution)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Figure 3: Average Benefit of Idaho’s Income Tax Changes by Decile**\n",
       "\n",
       "```plotly\n",
       "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile: %{x}\\u003cbr\\u003eAverage impact: $%{y:,.0f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"$25\",\"$74\",\"$120\",\"$151\",\"$250\",\"$300\",\"$365\",\"$454\",\"$602\",\"$1193\"],\"textposition\":\"auto\",\"x\":[1,2,3,4,5,6,7,8,9,10],\"xaxis\":\"x\",\"y\":[25,74,120,151,250,300,365,454,602,1193],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Average impact ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Income Distribution of Idaho's Income Tax Changes by Decile\"},\"barmode\":\"relative\",\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Average impact by decile data\n",
    "deciles = list(range(1, 11))\n",
    "avg_impact = [25, 74, 120, 151, 250, 300, 365, 454, 602, 1193]\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": deciles,\n",
    "        \"Average impact\": avg_impact,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Format dollar values for display\n",
    "dollar_text = [f\"${x}\" for x in avg_impact]\n",
    "\n",
    "fig = (\n",
    "    px.bar(\n",
    "        df,\n",
    "        x=\"Income decile\",\n",
    "        y=\"Average impact\",\n",
    "        text=dollar_text,  # Dollar values with $ sign\n",
    "        color_discrete_sequence=[BLUE_PRIMARY],\n",
    "        title=\"Income Distribution of Idaho's Income Tax Changes by Decile\",\n",
    "    )\n",
    "    .update_layout(\n",
    "        font=dict(family=\"Roboto Serif\"),\n",
    "        xaxis_title=\"Income decile\",\n",
    "        yaxis_title=\"Average impact ($)\",\n",
    "        xaxis_tickvals=list(range(1, 11)),\n",
    "        yaxis_tickformat=\",\",\n",
    "        showlegend=False,\n",
    "        font_color=BLACK,\n",
    "        margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "        annotations=[\n",
    "            {\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.25,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"text\": \"Source: PolicyEngine US\",\n",
    "                \"showarrow\": False,\n",
    "                \"font\": {\n",
    "                    \"family\": \"Roboto Serif\",\n",
    "                    \"size\": 10,\n",
    "                    \"color\": DARK_GRAY,\n",
    "                },\n",
    "            }\n",
    "        ],\n",
    "        images=[\n",
    "            {\n",
    "                \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.2,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"sizex\": 0.1,\n",
    "                \"sizey\": 0.1,\n",
    "                \"xanchor\": \"right\",\n",
    "                \"yanchor\": \"bottom\",\n",
    "            }\n",
    "        ],\n",
    "    )\n",
    "    .update_traces(\n",
    "        hovertemplate=\"Income decile: %{x}<br>Average impact: $%{y:,.0f}<extra></extra>\"\n",
    "    )\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Figure 3: Average Benefit of Idaho’s Income Tax Changes by Decile**\\n\\n\"\n",
    "    + f\"```plotly\\n{fig.to_json()}\\n```\"\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The tax changes are projected to have [no effect on poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252) or deep poverty while increasing the state’s Gini index of inequality [by 0.01%](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252). "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Conclusion\n",
    "\n",
    "The analyzed individual income tax changes from Idaho’s 2025 legislative session will lower state revenues by $224.9 million in 2025, or $292 per household. Households in higher income deciles will benefit more than those in lower income deciles on an [absolute](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252) and [relative](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=2&region=id&timePeriod=2025&baseline=80392&household=52252) basis. The bill will not affect the state’s supplemental poverty measure and increase the Gini index of income inequality by 0.01%. \n",
    "\n",
    "As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.\n",
    "\n",
    "We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "policyengine",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.16"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}



---

---
# Taxes in PolicyEngine
Slug: uk-taxes-post
Date: 2025-04-08 00:00:00
Authors: Vahid Ahmadi, Nikhil Woodruff
Tags: uk, policy, featured, tax
Description: PolicyEngine models different tax components in the UK, including direct taxes, indirect taxes, and proposed taxes.

---

This post provides an overview of how taxes are modelled in PolicyEngine UK. It details both existing taxes in the UK tax system and proposed/contributed taxes that are simulated within our platform. Each tax component is linked to its specific implementation in the codebase, making this post a technical reference for understanding how tax calculations are performed in the PolicyEngine UK microsimulation model.

The post is organised into three main sections. First, we explain direct taxes (income tax, national insurance, and capital gains tax), which are collected directly from individuals and businesses. Next, we cover indirect taxes (VAT and fuel duty) which are embedded in the prices of goods and services. Finally, we explore both existing property and land taxes (including stamp duty variations across UK nations, business rates, and council tax) and contributed/proposed taxes (such as carbon tax, wealth tax, land value tax, and others) that are modelled in PolicyEngine but not currently implemented in the UK.

Table 1 below summarises key metrics for each tax in the UK system, comparing PolicyEngine's 2025-26 fiscal year revenue projections with those from the government (such as the Office for Budget Responsibility) and showing the percentage difference between them. While PolicyEngine models interactions from instituting or repealing tax and benefit programmes, this chart shows only the direct revenue collected from each tax, for consistency with government reports. In the following sections, we dive deeper into each of these taxes, examining their structure, implementation, and distributional impact across income groups.

**Table 1: Summary of UK tax revenue estimates for 2025-26 (£ billions)**

| Programme                     | PolicyEngine                                                                                                                            | Government                                                                                                                                                                                                                                                                                                                 | Agency | Difference |
| ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ---------- |
| Income tax                    | [322.2](https://gist.github.com/vahid-ahmadi/505f1a571d3e71e594a4565b75380c56)                                                          | [328.7](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/income-tax/)                                                                                                                                                                                                                                           | OBR    | -2.0%      |
| National Insurance            | [179.7](https://gist.github.com/vahid-ahmadi/699656a3705a44c817473d06c7f5d8f6)                                                          | [198.8](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/national-insurance-contributions-nics/)                                                                                                                                                                                                                | OBR    | -9.6%      |
| Capital gains tax             | [17.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79852)  | [16.2](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/capital-gains-tax/)                                                                                                                                                                                                                                     | OBR    | +6.8%      |
| VAT                           | [198.6](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79853) | [182.1](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/vat/)                                                                                                                                                                                                                                                  | OBR    | +9.1%      |
| Fuel duty                     | [28.3](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79854)  | [27.3](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/fuel-duties/)                                                                                                                                                                                                                                           | OBR    | +3.7%      |
| Property transaction taxes    | [12.5](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=81619)  | [15.1](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/property-transaction-taxes/)                                                                                                                                                                                                                            | OBR    | -17.2%     |
| Business rates (England only) | [24.3](https://gist.github.com/vahid-ahmadi/1d2f4af86a1f171b8339b860beb4cc37)                                                           | [27.8](https://www.gov.uk/government/statistics/national-non-domestic-rates-collected-by-councils-in-england-forecast-2025-to-2026/national-non-domestic-rates-collected-by-councils-in-england-forecast-for-2025-to-2026#:~:text=Local%20authorities%20estimate%20the%20non,scheme%20are%20taken%20into%20consideration.) | DLUHC  | -12.6%     |

## Direct taxes

Direct taxes are collected from individuals and businesses based on income, profits or gains. The three main direct taxes in the UK system—income tax, National Insurance, and capital gains tax—work together to tax different forms of income and wealth accrual. Our projections in this section are underpinned by data from the UK's Family Resources Survey (FRS) and the Survey of Personal Incomes (SPI), with validation against official HMRC statistics. In this post, all estimates provided are static estimates. PolicyEngine models behavioural responses to policy changes as well.

### Income tax

HMRC administers this tax using a band system with different rates for certain income types, implemented in PolicyEngine via the [`income_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/income_tax.py) variable.

- **Standard income tax components**
  These are the main rate bands that determine tax payments on different portions of income. The UK uses a system where portions of income are taxed at different rates.
  - **Basic rate**: Applied to taxable income between the personal allowance and higher rate threshold at a rate of 20% for 2025, calculated in PolicyEngine as [`basic_rate_earned_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_liability/basic_rate_earned_income_tax.py).
  - **Higher rate**: Applied to taxable income between the higher rate threshold (£37,700 above personal allowance in 2025) and additional rate threshold at a rate of 40% for 2025, calculated in PolicyEngine as [`higher_rate_earned_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_liability/higher_rate_earned_income_tax.py).
  - **Additional rate**: Applied to taxable income over the additional rate threshold (£125,140 in 2025) at a rate of 45% for 2025, calculated in PolicyEngine as [`add_rate_earned_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_liability/add_rate_earned_income_tax.py).

- **Income tax bases**
  These represent the different sources of income subject to income tax in the UK. Each type has specific rules about deductions, allowances and sometimes different tax rates.
  - **Employment income**: Income from employment, including salaries, wages, bonuses and employment benefits. This income type is taxed through the PAYE system and represented by the [`taxable_employment_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_employment_income.py) variable.
  - **Self-employment income**: Income from self-employment, freelance work or running a business as a sole trader. Self-employed individuals pay income tax on profits after business expenses, calculated as [`taxable_self_employment_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_self_employment_income.py).
  - **Pension income**: Income from state pensions, workplace pensions and private pensions, calculated as [`taxable_pension_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_pension_income.py) in PolicyEngine.
  - **Property income**: Income from renting out property, after deducting allowable expenses. This includes rental from UK and overseas properties owned by UK residents, calculated as [`taxable_property_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_property_income.py).
  - **Dividend income**: Income from company dividends, taxed at lower rates than other income (8.75% basic rate, 33.75% higher rate, and 39.35% additional rate for 2025). A dividend allowance of £500 for 2025 applies before dividend tax rates, with taxable amounts calculated as [`taxable_dividend_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_dividend_income.py).
  - **Savings interest income**: Interest earned on savings accounts, bonds and other interest-bearing investments. The personal savings allowance permits taxpayers to earn some interest tax-free, with eligible starter rate income calculated as [`savings_starter_rate_income`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_savings_income/savings_starter_rate_income.py).
  - **Miscellaneous income**: Other taxable income including royalties, trust income and casual earnings, calculated as [`taxable_miscellaneous_income`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_miscellaneous_income.py).
  - **Social security income**: The UK taxes state pension, incapacity benefit, contributory jobseeker's allowance, contributory employment and support allowance, and carer's allowance. The UK does not tax other benefits such as universal credit and personal independence payment. PolicyEngine calculates this as [`taxable_social_security_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bases/taxable_social_security_income.py).

- **Allowances and reliefs**
  These are amounts that can be earned tax-free or deductions that reduce taxable income, defined by various parameters and calculated as part of [`allowances`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/allowances).
  - **Personal allowance**: The amount of income that can be earned before paying income tax, set at £12,570 in 2025-26. The UK reduces the personal allowance at a 50% rate when income exceeds £100,000. PolicyEngine represents this in the [`personal_allowance`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/allowances) variable.
  - **Marriage allowance**: Allows a spouse or civil partner to transfer 10% of their personal allowance. Only available when the higher earner is a basic rate taxpayer and the lower earner has unused allowance, calculated as [`marriage_allowance`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/allowances/marriage_allowance.py).
  - **Dividend allowance**: Tax-free allowance for dividend income set at £500 in 2025, defined by the `dividend_allowance` parameter in [`dividend_allowance.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/income_tax/allowances/dividend_allowance.yaml).
  - **Trading allowance**: The UK excludes up to £1,000 of trading income for self-employed individuals in 2025-26. Claiming this prevents deduction of business expenses from income, set through the `trading_allowance` parameter in [`trading_allowance.yaml`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/income_tax/allowances).
  - **Property allowance**: The UK excludes up to £1,000 of property income from taxation in 2025-26. PolicyEngine represents this value in the `property_allowance` parameter in [`property_allowance.yaml`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/income_tax/allowances).
  - **Tax-free savings income**: The UK exempts savings-interest income up to £1,000 for basic-rate taxpayers, £500 for higher-rate taxpayers, and £0 for additional-rate taxpayers in 2025. PolicyEngine applies this allowance through the savings-income bracketisation process in [`bracketized_savings_income`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_savings_income/), using the rates defined in [`savings_starter_rate_income`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/bracketized_savings_income/savings_starter_rate_income.py).
  - **Loss relief**: Allows business or property losses to be offset against other income to reduce tax, calculated as [`loss_relief`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/reliefs/loss_relief.py).
  - **Capital allowances**: Tax relief for businesses on the cost of purchasing assets used in the business. These allow businesses to deduct the cost of machinery, equipment and vehicles from taxable profits. PolicyEngine represents this in the [`capital_allowances`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/reliefs/capital_allowances.py) variable.

- **Income tax charges**
  These are tax charges that withdraw benefits or allowances in specific circumstances, implemented in [`variables/gov/hmrc/income_tax/charges`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/variables/gov/hmrc/income_tax/charges/).
  - **Child benefit high income tax charge (HITC)**: A tax charge on high earners who or whose partner receives child benefit. Child benefit rates in 2025 are £26.04 per week for the eldest child and £17.24 per week for each additional child. The HITC withdraws this benefit when income exceeds a threshold, with full withdrawal at a higher threshold, calculated as [`child_benefit_hitc`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/income_tax/charges/child_benefit_hitc.py).

PolicyEngine projects that the UK will collect [£322.2 billion](https://gist.github.com/vahid-ahmadi/505f1a571d3e71e594a4565b75380c56) in income tax revenue in 2025, 2.0% less than the OBR's forecast of [£328.7 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/income-tax/). Figure 1 shows the distributional impact of this programme.

[Chart: type: bar]

### National Insurance

National Insurance operates alongside income tax and funds state benefits and the NHS.
National Insurance consists of contributions paid by employees, employers and the self-employed, with overall liability calculated as [`national_insurance`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/national_insurance.py).

- **Class 1** (Employees and employers)
  These are contributions paid on employee earnings above the primary threshold.
  - **Primary contributions (employees)**: Paid by employees at 8% on earnings between the primary threshold (£241.73 per week in 2025) and upper earnings limit, with a lower rate above the upper limit. This is deducted via the PAYE system alongside income tax, calculated as [`ni_class_1_employee_primary`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_1/ni_class_1_employee_primary.py).
  - **Secondary contributions (employers)**: Paid by employers at a flat rate on employee earnings above the secondary threshold. This represents a cost for employers and affects employment costs, calculated as [`ni_class_1_employer`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_1/ni_class_1_employer.py).
  - **Additional rate contributions**: The UK levies a rate of National Insurance on employment income in excess of the upper earnings limit, calculated as [`ni_class_1_employee_additional`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_1/ni_class_1_employee_additional.py).

- **Class 2** (Self-employed - flat rate)
  A flat weekly rate paid by self-employed people with profits above the small profits threshold, calculated as [`ni_class_2`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_2/ni_class_2.py).
- **Class 3** (Voluntary contributions)
  Optional contributions people can make to fill gaps in their National Insurance record, calculated as [`ni_class_3`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_3/ni_class_3.py).
- **Class 4** (Self-employed - percentage-based)
  Percentage-based contributions paid by self-employed people on their profits. They function similar to income tax with different rates applied to different profit levels, calculated as [`ni_class_4`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_4/ni_class_4.py).
  - **Main rate**: Paid on self-employed profits between the lower profits limit and upper profits limit, calculated as [`ni_class_4_main`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_4/ni_class_4_main.py).
  - **Additional rate**: Paid on self-employed profits above the upper profits limit, calculated as [`ni_class_4_maximum`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/national_insurance/class_4/ni_class_4_maximum.py).

PolicyEngine projects that the UK will collect [£179.7 billion](https://gist.github.com/vahid-ahmadi/699656a3705a44c817473d06c7f5d8f6) in National Insurance revenue in 2025, 9.6% less than the OBR's forecast of [£198.8 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/national-insurance-contributions-nics/). Figure 2 shows the distributional impact of this programme.

[Chart: type: bar]

### Capital gains tax

Capital gains tax applies to profits from asset sales, unlike income tax and National Insurance which apply to earnings.
Capital gains tax is charged on the profit when selling or disposing of an asset that has increased in value. It applies to most assets including investments, second properties and business assets, but not main residences, calculated as [`capital_gains_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/capital_gains_tax/capital_gains_tax.py).

- **Basic rate (10%)**: Applied to gains for basic rate taxpayers on most assets (18% on residential property for 2025). The applicable rate depends on the taxpayer's income tax band and the asset type, defined by the [`basic_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/cgt/basic_rate.yaml) parameter.
- **Higher rate (20%)**: Applied to gains for higher and additional rate taxpayers (28% on residential property for 2025), defined by the [`higher_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/cgt/higher_rate.yaml) parameter.
- **Annual exempt amount**: A tax-free allowance for capital gains set at £3,000 in 2025, defined by the [`annual_exempt_amount`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/cgt/annual_exempt_amount.yaml) parameter.

**Data imputation**:
Since capital gains are not directly observed in the Family Resources Survey (FRS) data, they are imputed using a joint distribution approach based on data from "[Capital Gains and UK Inequality](https://ideas.repec.org/p/wrk/warwec/1260.html)" paper by Arun Advani and Andy Summers. This dataset provides detailed percentiles of capital gains (p05, p10, p25, p50, p75, p90, p95) across more than 60 income bands, enabling the model to fit a spline to each band's percentiles to create a joint distribution. For each individual in the simulation, the probability of having capital gains is determined by their income band, and if they are modelled to have gains, the amount is randomly sampled from the relevant spline. These values are then uprated from 2017 to present day using the OBR's non-labour income forecast, allowing the model to accurately account for the concentration of capital gains among higher income individuals.

**Behavioural responses**:
The PolicyEngine-UK model incorporates behavioural responses through the [`capital_gains_behavioural_response`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/capital_gains_tax/responses.py) variable, which captures how individuals change realisation decisions in response to tax changes. This modelling is controlled by an elasticity parameter, which can be adjusted to simulate different levels of taxpayer sensitivity. For more information, you can read [this post](https://policyengine.org/uk/research/behavioural-responses).

PolicyEngine projects that the UK will collect [£17.3 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79852) in capital gains tax revenue in 2025, 6.8% more than the OBR's forecast of [£16.2 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/capital-gains-tax/). Figure 3 shows the distributional impact of this programme.

[Chart: type: bar]

### Council tax/domestic rates

Residential properties are subject to council tax, except in Northern Ireland which uses domestic rates.
Council tax is a local tax on domestic properties in England, Scotland and Wales, funding local services. In PolicyEngine, we apply the reported amounts from the Family Resources Survey data. Northern Ireland uses a rates system based on rental values rather than the banded approach of council tax, calculated as [`domestic_rates`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/local_authorities/domestic_rates.py).

## Indirect taxes

Indirect taxes are collected by intermediaries and passed to the government. They form part of the price of goods and services that consumers pay. Our indirect tax simulations rely on consumption data imputed to the Family Resources Survey dataset, calibrated to match aggregate statistics from HMRC and other government sources. In this post, all estimates provided are static estimates.

### Value added tax (VAT)

VAT generates revenue for the UK government.
VAT is a consumption tax placed on products and services at each stage where value is added, calculated in PolicyEngine as [`vat`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/vat.py).

- **Standard rate (20%)**: Applied to most goods and services in the UK in 2025, defined by the [`standard_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/vat/standard_rate.yaml) parameter.
- **Reduced rate (5%)**: Applied to certain goods and services including domestic fuel and children's car seats in 2025, defined by the [`reduced_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/vat/reduced_rate.yaml) parameter.

The VAT calculation sums the tax from standard-rated items (consumption × 20%) and reduced-rated items (consumption × 5%), then divides by a factor to account for under-reporting. This approach ensures that modelled VAT revenue aligns with official government statistics.

**Data imputation**:
The consumption data for VAT calculations comes from the Living Costs and Food Survey (LCFS), which follows the Classification of Individual Consumption by Purpose (COICOP) system. Due to under-reporting in survey data, the calculation is divided by 0.38 to match official HMRC VAT receipts. The model assumes that approximately 50% of consumption is subject to the standard VAT rate, while about 3% is subject to the reduced rate (primarily domestic fuel), as specified by the [`reduced_rate_share`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/vat/reduced_rate_share.yaml) parameter. The remaining consumption is either zero-rated or exempt. Consumption data is uprated using the OBR's Consumer Price Index forecast.

PolicyEngine projects that the UK will collect [£198.6 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79853) in value added tax (VAT) revenue in 2025, 9.1% more than the OBR's forecast of [£182.1 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/vat/). Figure 4 shows the distributional impact of this programme.

[Chart: type: bar]

### Fuel duty

The UK applies excise duties to specific products, including fuels.
Fuel duty is an excise tax charged on purchases of petrol, diesel and other fuels for vehicles or heating, calculated as [`fuel_duty`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/fuel_duty/fuel_duty.py).

- **Petrol and diesel rates**: Set at £0.5795 per litre for both petrol and diesel in 2025, defined by the [`petrol_and_diesel`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/fuel_duty/petrol_and_diesel.yaml) parameter.

PolicyEngine projects that the UK will collect [£28.3 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79854) in fuel duty revenue in 2025, 3.7% more than the OBR's forecast of [£27.3 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/fuel-duties/). Figure 5 shows the distributional impact of this programme.

[Chart: type: bar]

## Property and land taxes

The UK tax system includes taxes on property ownership, occupation and transactions. These taxes vary by nation and property type. Our property tax simulations use property values from the Family Resources Survey enhanced with housing market data and transaction patterns. Property transaction taxes (SDLT, LBTT, LTT) are modelled assuming a 4.5% annual property turnover rate. All estimates in this section are static estimates that do not reflect potential changes in property ownership or transaction behaviour due to tax changes.

Since property transactions are infrequent events for most households, PolicyEngine's model employs a smoothing mechanism that converts one-time transaction taxes into expected annual values. Rather than simulating which specific households purchase property in a given year, our approach multiplies each household's potential tax liability by the annual property sale rate (4.5%). This provides a representation of the economic burden of transaction taxes across the population over time. First-time buyer relief eligibility is modelled probabilistically based on age brackets derived from HMRC statistics, and both residential and non-residential property transactions are included in the calculations. Corporate property tax incidence is also distributed to households based on shareholding patterns to provide a comprehensive view of property tax burdens.

The Office for Budget Responsibility (OBR) estimates that revenue from property transaction taxes, including Stamp Duty Land Tax (SDLT), Land and Buildings Transaction Tax (LBTT), and Land Transaction Tax (LTT), for 2025-26 is [£15.1 billion](https://obr.uk/forecasts-in-depth/tax-by-tax-spend-by-spend/property-transaction-taxes/).

### Stamp duty land tax (SDLT) - England & Northern Ireland

SDLT is a tax paid when purchasing property over certain price thresholds in England and Northern Ireland, calculated as [`stamp_duty_land_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/stamp_duty_land_tax.py). In PolicyEgine, the calculation splits into residential and non-residential components for both purchases and rentals. For residential properties, tax rates vary based on purchase type (first-time vs. subsequent, main vs. additional residence), with bracket taxation applying higher rates only to portions above each threshold. Additional properties face surcharges when exceeding minimum thresholds. Rental agreements are taxed on the net present value of rent. Corporate transactions distribute tax burden to households based on shareholding percentages and statistical revenue values. Expected revenue is calculated using a 4.5% annual property turnover rate, representing the estimated percentage of property value changing hands yearly.

- **Residential property**
  These rates apply to homes and residential properties with different structures for different buyer types, defined in [`residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/residential/).
  - **Main residence rates (including first-time buyer relief)**: Standard rates apply in bands from the nil-rate band (£0) to portions over the highest threshold. For 2025, thresholds are £0, £125,000, £250,000, £925,000, and £1,500,000, with corresponding rates of 0%, 2%, 5%, 10%, and 12%. First-time buyers receive relief with higher nil-rate thresholds and reduced rates up to a maximum property value, defined in property-specific rate files within [`residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/residential/).
  - **Additional property surcharge**: An extra percentage of SDLT is charged on additional residential properties over a threshold, defined in the surcharge parameters within [`residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/residential/).
  - **Rental agreements**: SDLT applies to the net present value of rent over the lease term when exceeding a threshold, defined by residential rent parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/residential/rent.yaml).

- **Non-residential property**
  These apply to commercial property purchases like shops, offices and agricultural land, defined in [`non_residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/non_residential/).
  - **Purchase rates**: Rates apply in bands from the nil-rate band to portions over higher thresholds, defined by non-residential purchase parameters in [`purchase.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/non_residential/purchase.yaml).
  - **Rental agreements**: SDLT applies to the net present value of commercial lease rent above a threshold, defined by non-residential rent parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/stamp_duty/non_residential/rent.yaml).

PolicyEngine projects that the UK will collect [£11.4 billion](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=79870) in stamp duty revenue in 2025. Figure 6 shows the distributional impact of this programme.

[Chart: type: bar]

### Land and buildings transaction tax (LBTT) - Scotland

Scotland uses a different property transaction tax than England and Northern Ireland. Land and Buildings Transaction Tax (LBTT) is Scotland's equivalent to SDLT, applying to property and land transactions in Scotland, calculated as [`lbtt`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/revenue_scotland/lbtt.py). PolicyEngine implements Scotland-specific rate schedules with brackets, differentiating between first-time buyers and standard purchases. Additional property transactions incur both standard tax plus a percentage-based surcharge on the entire property value, creating a higher effective rate on second homes. Rental agreements use net present value calculation, taxing only the difference between previous and current cumulative rent. The tax applies exclusively to Scottish residents through a country code filter. Expected revenue is calculated using a 4.5% annual property turnover rate, representing the estimated percentage of total residential property value changing hands yearly. Non-residential transactions use separate rate schedules for both purchases and rental agreements.

- **Residential property**
  Scotland's residential property transaction tax applies to home purchases with specific rates, defined in [`residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/residential/).
  - **Standard rates**: Rates apply in bands with thresholds at £0, £145,000, £250,000, £325,000, and £750,000 for 2025, with corresponding rates of 0%, 2%, 5%, 10%, and 12%, defined by the [`rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/residential/rate.yaml) parameter.
  - **First-time buyer relief**: First-time buyers pay no LBTT up to a higher threshold than standard purchases, defined by the [`first_time_buyer_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/residential/first_time_buyer_rate.yaml) parameter.
  - **Additional dwelling supplement**: A surcharge applies to additional residential properties over a threshold, defined by the [`additional_residence_surcharge`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/residential/additional_residence_surcharge.yaml) parameter.
  - **Rental agreements**: LBTT applies to the net present value of residential lease rent above a threshold, defined by the rent parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/rent.yaml).

- **Non-residential property**
  These apply to commercial property transactions in Scotland with distinct rates, defined in [`non_residential.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/non_residential.yaml).
  - **Purchase rates**: Rates apply in bands from the nil-rate band to portions over higher thresholds, defined by specific band parameters in [`non_residential.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/non_residential.yaml).
  - **Rental agreements**: LBTT applies to the net present value of commercial lease rent above a threshold, defined by specific rent parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/revenue_scotland/lbtt/rent.yaml).

PolicyEngine projects that the UK will collect [£669.0 million](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=1&region=uk&timePeriod=2025&baseline=80006) in land and buildings transaction tax revenue in 2025. Figure 7 shows the distributional impact of this programme.

[Chart: type: bar]

### Land transaction tax (LTT) - Wales

Wales has its own property transaction tax system. Land Transaction Tax (LTT) is Wales' equivalent to SDLT, applying to property and land transactions in Wales, calculated as [`land_transaction_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/wra/land_transaction_tax.py). LTT implements separate calculation pathways for primary residences and higher-rate properties, each with distinct progressive bracket structures. Unlike SDLT and LBTT implementations, no specific first-time buyer relief appears in the LTT coding structure. The tax applies to both property purchases and rental agreements, with rental calculations using an incremental approach on net present values. Geographic restriction ensures only Welsh households face LTT liability through country code comparison. Non-residential transactions use separate rate schedules for both purchases and rentals. Expected revenue is calculated by applying a 4.5% annual property turnover rate to the whole property stock, representing the estimated percentage of total residential property value changing hands yearly.

- **Residential property**
  Wales' residential property transaction tax applies to home purchases with its own rate structure, defined in [`residential`](https://github.com/PolicyEngine/policyengine-uk/tree/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/residential/).
  - **Primary residence rates**: Rates apply in bands with thresholds at £0, £180,000, £250,000, £400,000, £750,000, and £1,500,000 for 2025, with corresponding rates of 0%, 3.5%, 5%, 7.5%, 10%, and 12%, defined by the [`primary`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/residential/primary.yaml) parameter.
  - **Higher rates for additional properties**: A surcharge applies to purchases of additional residential properties, defined by the [`higher_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/residential/higher_rate.yaml) parameter.
  - **Rental agreements**: LTT applies to the net present value of residential lease rent above thresholds, defined by specific rent parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/rent.yaml).

- **Non-residential property**
  These apply to commercial property purchases and leases in Wales with specific rates, defined in [`non_residential.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/non_residential.yaml).
  - **Purchase rates**: Rates apply in bands from the nil-rate band to portions over higher thresholds, defined by specific band parameters in [`non_residential.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/non_residential.yaml).
  - **Rental agreements**: LTT applies to the net present value of commercial lease rent with threshold and rate structures, defined by specific rental parameters in [`rent.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/wra/land_transaction_tax/rent.yaml).

PolicyEngine projects that the UK will collect [£388.3 million](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80023) in land transaction tax revenue in 2025. Figure 8 shows the distributional impact of this programme.

[Chart: type: bar]

### Business rates

The UK imposes annual taxes on property occupation, including business rates for non-domestic properties like shops, offices, and factories. At PolicyEngine, business rates are modelled as a corporate tax with incidence distributed to households based on their shareholding in the corporate sector. The model allocates the total business rates revenue from each UK nation (England, Scotland, Wales, and Northern Ireland) to households in proportion to their corporate wealth holdings through the [business_rates](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/gov/hmrc/business_rates.py) variable. Business rates are set by central government but collected by local authorities. The economic incidence of business rates is represented by distributing the total revenue burden based on households' corporate wealth holdings, reflecting the assumption that business rates are ultimately paid by shareholders through reduced returns on investments.

- **Corporate tax on non-domestic properties**: Calculated as a percentage (the multiplier) of a property's assessed rateable value, defined in business rates statistics parameters in [`statistics.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/business_rates/statistics.yaml).
- **Regional variation (England, Scotland, Wales, Northern Ireland)**: Each nation sets its own multipliers and relief schemes, creating regional differences, defined in region-specific sections within [`statistics.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/hmrc/business_rates/statistics.yaml).

PolicyEngine projects that the UK will collect [£24.3 billion](https://legacy.policyengine.org/uk/policy?reform=1&focus=policyOutput.policyBreakdown&region=uk&timePeriod=2025&baseline=80029) in business rates revenue in 2025, 12.6% less than the UK government's estimate of [£27.8 billion](https://www.gov.uk/government/statistics/national-non-domestic-rates-collected-by-councils-in-england-forecast-2025-to-2026/national-non-domestic-rates-collected-by-councils-in-england-forecast-for-2025-to-2026#:~:text=Local%20authorities%20estimate%20the%20non,scheme%20are%20taken%20into%20consideration.) for England alone in 2025-2026. Figure 9 shows the distributional impact of this programme.

[Chart: type: bar]

## Contributed/proposed taxes

Beyond modelling the existing UK tax system, PolicyEngine also includes several proposed taxes that are not currently implemented. These allow users to explore potential policy reforms and understand their distributional and revenue implications. Our simulations of proposed taxes use a combination of existing Family Resources Survey data enhanced with wealth, consumption, and carbon emissions data from sources including the Wealth and Assets Survey and national environmental accounts. In this post, all estimates for these proposed taxes are static estimates.

### Carbon tax

Carbon taxes can be used to price emissions and influence production and consumption patterns.
A carbon tax is a levy on carbon emissions required to produce goods and services, calculated in PolicyEngine as [`carbon_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/carbon_tax.py).

- **Per-ton CO2 emission tax**: A fixed monetary amount charged per ton of carbon dioxide equivalent emitted, defined by the carbon tax rate parameter in [`carbon_tax.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/ubi_center/carbon_tax.yaml).

- **Consumer and corporate incidence modelling**: PolicyEngine models how the tax burden would be shared between consumers and producers in the [`carbon_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/carbon_tax.py) variable implementation.
- **Applied to carbon consumption**: The tax applies to the carbon footprint of household consumption across categories, using household carbon intensity variables in [`carbon.py`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/household/consumption/carbon.py).

### Wealth tax

A wealth tax would apply to the total value of an individual's assets, calculated as [`wealth_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/wealth_tax.py).

- **Annual tax on total household wealth**: A percentage tax applied to a household's total net wealth above a threshold, defined by wealth tax rate parameters in [`wealth_tax.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/ubi_center/wealth_tax.yaml).
- **Progressive rate structure based on wealth brackets**: Higher tax rates would apply to larger wealth holdings, similar to income tax bands, defined by wealth tax bracket parameters in [`wealth_tax.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/ubi_center/wealth_tax.yaml).

#### Non-primary residence wealth tax

Some wealth tax proposals exempt the main residence from taxation.
This is a targeted wealth tax that would exempt one's main residence but tax other assets, calculated as [`non_primary_residence_wealth_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/cec/non_primary_residence_wealth_tax.py).

- **Wealth tax that exempts main residence**: Applies only to assets beyond a household's primary home, defined by wealth tax exemption parameters in [`non_primary_residence_wealth_tax.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/cec/non_primary_residence_wealth_tax.yaml).
- **Applied to all other wealth including secondary properties, financial assets, etc.**: Would capture investment properties, shares, bonds, business assets and other wealth forms through the non-primary wealth components in [`non_primary_residence_wealth_tax.py`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/cec/non_primary_residence_wealth_tax.py).

### Land value tax (LVT)

Land value tax focuses on the value of land itself, not the buildings or improvements on it.
Land value tax is a levy on the unimproved value of land, disregarding buildings or other improvements, calculated as [`land_value_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/land_value_tax.py).

- **Tax on land value separate from improvements**: Only the underlying land value is taxed, not buildings or developments on the land. This differs from council tax and business rates, which tax the combined property value, defined by land value tax rate parameters in [`land_value_tax.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/ubi_center/land_value_tax.yaml).
- LVT includes the following components:
  - **General land value tax**: A base rate applied to all land values regardless of use or ownership type. This would capture land value derived from location and public infrastructure, included in the [`land_value_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/land_value_tax.py) calculation.
  - **Household land value tax**: A rate applied specifically to land under residential use. This could replace council tax with a system not dependent on outdated valuations, included in the residential component of [`land_value_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/land_value_tax.py).
  - **Corporate land value tax**: A rate applied to commercially used land. This could replace or supplement business rates, potentially reducing business investment distortions, included in the commercial component of [`land_value_tax`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/ubi_center/land_value_tax.py).

### Private school VAT

The UK government has introduced [VAT on private school fees](https://commonslibrary.parliament.uk/research-briefings/cbp-10125/) from January 1, 2025, ending the previous exemption for private education, calculated in [`private_school_vat.py`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/labour/private_school_vat.py) in PolicyEngine. This policy change applies the standard 20% VAT rate to private school fees that were historically exempt from VAT as part of the general exemption for educational services.

- **VAT applied to private school fees**: The standard VAT rate would apply to fees currently exempt as educational services, defined by private school VAT rate parameters in [`private_school_vat.yaml`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/parameters/gov/contrib/labour/private_school_vat.yaml).
- **Modelling by household income**: PolicyEngine models which household income groups would bear the burden of this tax in the [`private_school_vat`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/labour/private_school_vat.py) implementation.
- **Adjusts for actual private school attendance rates**: The model accounts for varying private school attendance rates across income groups using the [`private_school_attendance_rate`](https://github.com/PolicyEngine/policyengine-uk/blob/master/policyengine_uk/variables/contrib/labour/private_school_vat.py) parameter.

## Conclusion

PolicyEngine models the current UK tax system and potential reforms, with tax impacts presented by income decile. Users can analyse how changes to taxes affect government revenue and household incomes.



---

---
# Utah Cuts Income Tax Rate and Expands Credits
Slug: utah-income-tax-changes
Date: 2025-05-01
Authors: David Trimmer
Tags: us, us-ut, featured, policy
Description: Utah’s latest individual income tax changes will lower state revenues by $96 million and raise net income for 62% of residents in 2025.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "57532d02",
   "metadata": {},
   "source": [
    "[On March 26,](https://governor.utah.gov/press/gov-cox-signs-100-bills-in-the-2025-general-legislative-session/) Governor Spencer Cox (R-UT) signed [HB106](https://le.utah.gov/~2025/bills/static/HB0106.html) and [SB71](https://le.utah.gov/~2025/bills/static/SB0071.html), bills that amend Utah’s individual income tax code. HB106 reduces the state’s flat income tax rate from 4.55% to 4.5% and expands the state’s nonrefundable Child Tax Credit (CTC) to children under the age of 6 (previously limited to kids 1-4).[^1] SB71 expands the state’s Social Security credit (which offsets any tax liability from Social Security benefits) by increasing the income thresholds at which the credit begins to phase out by 20%. Each change applies for tax year 2025. \n",
    "\n",
    "We at PolicyEngine have updated our model to reflect these changes and analyzed their effects on the state of Utah and its residents.\n",
    "\n",
    "\n",
    "Key results for 2025:\n",
    "\n",
    "* Reduces state revenues by $96 million\n",
    "* Benefits 62% of Utah residents\n",
    "* Has no effect on the Supplemental Poverty Measure \n",
    "* Lowers the Gini index of inequality by 0.001%\n",
    "\n",
    "*Use PolicyEngine to [view the full results](https://legacy.policyengine.org/us/policy?focus=policyOutput.policyBreakdown&reform=2&region=ut&timePeriod=2025&baseline=81314) or calculate the [effect on your household.](https://legacy.policyengine.org/us/household?focus=intro&reform=2&region=ut&timePeriod=2025&baseline=81314)*\n",
    "\n",
    "[^1]: HB106 also reduces the state’s corporate tax rate to 4.5% and establishes a nonrefundable credit for employer-provided childcare. We did not include these provisions in our analysis.  \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 126,
   "id": "0a7c5dbe",
   "metadata": {},
   "outputs": [],
   "source": [
    "from IPython.display import Markdown\n",
    "import plotly.express as px\n",
    "import plotly.graph_objects as go\n",
    "import pandas as pd\n",
    "\n",
    "\n",
    "# Define PolicyEngine's color palette\n",
    "BLACK = \"#000000\"\n",
    "BLUE_LIGHT = \"#D8E6F3\"\n",
    "BLUE_PRIMARY = \"#2C6496\"\n",
    "DARK_BLUE_HOVER = \"#1d3e5e\"\n",
    "DARK_GRAY = \"#616161\"\n",
    "DARKEST_BLUE = \"#0C1A27\"\n",
    "GRAY = \"#808080\"\n",
    "LIGHT_GRAY = \"#F2F2F2\"\n",
    "MEDIUM_DARK_GRAY = \"#D2D2D2\"\n",
    "MEDIUM_LIGHT_GRAY = \"#BDBDBD\"\n",
    "WHITE = \"#FFFFFF\""
   ]
  },
  {
   "cell_type": "markdown",
   "id": "59f0e433",
   "metadata": {},
   "source": [
    "## Tax Reforms\n",
    "\n",
    "The reduction in Utah’s income tax rate to 4.5% via HB106 will mark the 4th year in a row in which the flat tax has been cut. In 2021, the state’s income tax rate stood at 4.95% before dropping to 4.85% in 2022, 4.65% in 2023, and 4.55% in 2024. \n",
    "\n",
    "In addition to the income tax cut, HB106 has modified the nonrefundable CTC by increasing the number of kids eligible for the credit. In 2025, households can now claim children who are either under the age of 1 or exactly 5 years old. Previously, only children between 1 and 4 qualified. The changes will result in all children below the age of 6 being eligible. The $1,000 credit will offset the tax liability of households with children in the new age range. However, since it is nonrefundable, households with a state tax liability below $1,000 will not receive the entire credit. The credit begins to phase out at 10% starting at $43,000 for single households and $54,000 for married couples. \n",
    "\n",
    "The Social Security credit in Utah acts as a nonrefundable credit that offsets any tax liability that is derived from benefits stemming from Social Security. Households must have AGI below certain thresholds for their entire Social Security tax liability to be eliminated. Those above will see their credit phased out by 2.5%. SB71 modified the thresholds as follows: The threshold for single households increases from $45,000 to $54,000, while those who are married but file separately will see their threshold increase from $37,500 to $45,000. All other filing statuses’ Social Security threshold will increase from $75,000 to $90,000. \n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "4fdc30e4",
   "metadata": {},
   "source": [
    "## Household Impacts\n",
    "\n",
    "As there are several components to the tax package, different household compositions will see unique impacts to their net income.\n",
    "Most households will benefit solely from the reduction in the state's income tax rate. However, additional benefits apply to two groups: middle-income households with newborns and 5 year old children or families that receive Social Security benefits and have earnings above the old Social Security credit thresholds. For example, a single adult earning $50,000 will see a [$25 reduction in their tax liability](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52568) solely due to the income tax rate cut. However, a single parent with the same annual income and a child who is 5 years old would [gain $325](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52567) as the nonrefundable Child Tax Credit would lower their tax liability by an additional $300. Figure 1 displays the change in net income for this household as earnings rise. \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 127,
   "id": "9b795fab",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income=%{x}\\u003cbr\\u003eChange in net income=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"showlegend\":false,\"x\":[0,200,400,600,800,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000,3200,3400,3600,3800,4000,4200,4400,4600,4800,5000,5200,5400,5600,5800,6000,6200,6400,6600,6800,7000,7200,7400,7600,7800,8000,8200,8400,8600,8800,9000,9200,9400,9600,9800,10000,10200,10400,10600,10800,11000,11200,11400,11600,11800,12000,12200,12400,12600,12800,13000,13200,13400,13600,13800,14000,14200,14400,14600,14800,15000,15200,15400,15600,15800,16000,16200,16400,16600,16800,17000,17200,17400,17600,17800,18000,18200,18400,18600,18800,19000,19200,19400,19600,19800,20000,20200,20400,20600,20800,21000,21200,21400,21600,21800,22000,22200,22400,22600,22800,23000,23200,23400,23600,23800,24000,24200,24400,24600,24800,25000,25200,25400,25600,25800,26000,26200,26400,26600,26800,27000,27200,27400,27600,27800,28000,28200,28400,28600,28800,29000,29200,29400,29600,29800,30000,30200,30400,30600,30800,31000,31200,31400,31600,31800,32000,32200,32400,32600,32800,33000,33200,33400,33600,33800,34000,34200,34400,34600,34800,35000,35200,35400,35600,35800,36000,36200,36400,36600,36800,37000,37200,37400,37600,37800,38000,38200,38400,38600,38800,39000,39200,39400,39600,39800,40000,40200,40400,40600,40800,41000,41200,41400,41600,41800,42000,42200,42400,42600,42800,43000,43200,43400,43600,43800,44000,44200,44400,44600,44800,45000,45200,45400,45600,45800,46000,46200,46400,46600,46800,47000,47200,47400,47600,47800,48000,48200,48400,48600,48800,49000,49200,49400,49600,49800,50000,50200,50400,50600,50800,51000,51200,51400,51600,51800,52000,52200,52400,52600,52800,53000,53200,53400,53600,53800,54000,54200,54400,54600,54800,55000,55200,55400,55600,55800,56000,56200,56400,56600,56800,57000,57200,57400,57600,57800,58000,58200,58400,58600,58800,59000,59200,59400,59600,59800,60000,60200,60400,60600,60800,61000,61200,61400,61600,61800,62000,62200,62400,62600,62800,63000,63200,63400,63600,63800,64000,64200,64400,64600,64800,65000,65200,65400,65600,65800,66000,66200,66400,66600,66800,67000,67200,67400,67600,67800,68000,68200,68400,68600,68800,69000,69200,69400,69600,69800,70000,70200,70400,70600,70800,71000,71200,71400,71600,71800,72000,72200,72400,72600,72800,73000,73200,73400,73600,73800,74000,74200,74400,74600,74800,75000,75200,75400,75600,75800,76000,76200,76400,76600,76800,77000,77200,77400,77600,77800,78000,78200,78400,78600,78800,79000,79200,79400,79600,79800,80000,80200,80400,80600,80800,81000,81200,81400,81600,81800,82000,82200,82400,82600,82800,83000,83200,83400,83600,83800,84000,84200,84400,84600,84800,85000,85200,85400,85600,85800,86000,86200,86400,86600,86800,87000,87200,87400,87600,87800,88000,88200,88400,88600,88800,89000,89200,89400,89600,89800,90000,90200,90400,90600,90800,91000,91200,91400,91600,91800,92000,92200,92400,92600,92800,93000,93200,93400,93600,93800,94000,94200,94400,94600,94800,95000,95200,95400,95600,95800,96000,96200,96400,96600,96800,97000,97200,97400,97600,97800,98000,98200,98400,98600,98800,99000,99200,99400,99600,99800,100000,100200,100400,100600,100800,101000,101200,101400,101600,101800,102000,102200,102400,102600,102800,103000,103200,103400,103600,103800,104000,104200,104400,104600,104800,105000,105200,105400,105600,105800,106000,106200,106400,106600,106800,107000,107200,107400,107600,107800,108000,108200,108400,108600,108800,109000,109200,109400,109600,109800,110000,110200,110400,110600,110800,111000,111200,111400,111600,111800,112000,112200,112400,112600,112800,113000,113200,113400,113600,113800,114000,114200,114400,114600,114800,115000,115200,115400,115600,115800,116000,116200,116400,116600,116800,117000,117200,117400,117600,117800,118000,118200,118400,118600,118800,119000,119200,119400,119600,119800,120000,120200,120400,120600,120800,121000,121200,121400,121600,121800,122000,122200,122400,122600,122800,123000,123200,123400,123600,123800,124000,124200,124400,124600,124800,125000,125200,125400,125600,125800,126000,126200,126400,126600,126800,127000,127200,127400,127600,127800,128000,128200,128400,128600,128800,129000,129200,129400,129600,129800,130000,130200,130400,130600,130800,131000,131200,131400,131600,131800,132000,132200,132400,132600,132800,133000,133200,133400,133600,133800,134000,134200,134400,134600,134800,135000,135200,135400,135600,135800,136000,136200,136400,136600,136800,137000,137200,137400,137600,137800,138000,138200,138400,138600,138800,139000,139200,139400,139600,139800,140000,140200,140400,140600,140800,141000,141200,141400,141600,141800,142000,142200,142400,142600,142800,143000,143200,143400,143600,143800,144000,144200,144400,144600,144800,145000,145200,145400,145600,145800,146000,146200,146400,146600,146800,147000,147200,147400,147600,147800,148000,148200,148400,148600,148800,149000,149200,149400,149600,149800,150000,150200,150400,150600,150800,151000,151200,151400,151600,151800,152000,152200,152400,152600,152800,153000,153200,153400,153600,153800,154000,154200,154400,154600,154800,155000,155200,155400,155600,155800,156000,156200,156400,156600,156800,157000,157200,157400,157600,157800,158000,158200,158400,158600,158800,159000,159200,159400,159600,159800,160000,160200,160400,160600,160800,161000,161200,161400,161600,161800,162000,162200,162400,162600,162800,163000,163200,163400,163600,163800,164000,164200,164400,164600,164800,165000,165200,165400,165600,165800,166000,166200,166400,166600,166800,167000,167200,167400,167600,167800,168000,168200,168400,168600,168800,169000,169200,169400,169600,169800,170000,170200,170400,170600,170800,171000,171200,171400,171600,171800,172000,172200,172400,172600,172800,173000,173200,173400,173600,173800,174000,174200,174400,174600,174800,175000,175200,175400,175600,175800,176000,176200,176400,176600,176800,177000,177200,177400,177600,177800,178000,178200,178400,178600,178800,179000,179200,179400,179600,179800,180000,180200,180400,180600,180800,181000,181200,181400,181600,181800,182000,182200,182400,182600,182800,183000,183200,183400,183600,183800,184000,184200,184400,184600,184800,185000,185200,185400,185600,185800,186000,186200,186400,186600,186800,187000,187200,187400,187600,187800,188000,188200,188400,188600,188800,189000,189200,189400,189600,189800,190000,190200,190400,190600,190800,191000,191200,191400,191600,191800,192000,192200,192400,192600,192800,193000,193200,193400,193600,193800,194000,194200,194400,194600,194800,195000,195200,195400,195600,195800,196000,196200,196400,196600,196800,197000,197200,197400,197600,197800,198000,198200,198400,198600,198800,199000,199200,199400,199600,199800,200000],\"xaxis\":\"x\",\"y\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,37,56,75,94,113,132,151,170,189,208,227,246,265,284,303,322,341,360,379,398,417,436,455,474,493,512,531,550,569,588,607,626,645,664,683,702,721,704,683,662,641,620,599,578,557,536,516,495,474,453,432,411,390,369,348,327,307,286,265,244,223,202,181,160,139,119,98,77,56,35,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,41,41,42,42,42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,43,43,44,44,44,44,44,44,44,44,44,45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,47,47,48,48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,50,50,50,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,54,54,54,54,54,54,54,54,54,54,55,55,55,55,55,55,55,55,55,56,56,56,56,56,56,56,56,56,56,57,57,57,57,57,57,57,57,57,58,58,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59,59,60,60,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62,62,62,63,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,68,68,68,68,68,68,68,68,68,68,69,69,69,69,69,69,69,69,69,70,70,70,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,72,73,73,73,73,73,73,73,73,73,73,74,74,74,74,74,74,74,74,74,75,75,75,75,75,75,75,75,75,75,76,76,76,76,76,76,76,76,76,77,77,77,77,77,77,77,77,77,77,78,78,78,78,78,78,78,78,78,79,79,79,79,79,79,79,79,79,79,80,80,80,80,80,80,80,80,80,81,81,81,81,81,81,81,81,81,81,82,82,82,82,82,82,82,82,82,83,83,83,83,83,83,83,83,83,83,84,84,84,84,84,84,84,84,84,85,85,85,85,85,85,85,85,85,85,86,86,86,86,86,86,86,86,86,87,87,87,87,87,87,87,87,87,87,88,88,88,88,88,88,88,88,88,89,89,89,89,89,89,89,89,89,89,90,90,90,90,90,90,90,90,90,90,91,91,91,91,91,91,91,91,91,92,92,92,92,92,92,92,92,92,92,93,93,93,93,93,93,93,93,93,94,94,94,94,94,94,94,94,94,94,95,95,95,95,95,95,95,95,95,96,96,96,96,96,96,96,96,96,96,97,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,98,98,98,99,99,99,99,99,99,99,99,99,100,100,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,101,101,102,102,102,102,102,102,102,102,102,102,103,103,103,103,103,103,103,103,103,104,104,104,104,104,104,104,104,104,104,105,105,105,105],\"yaxis\":\"y\",\"type\":\"scattergl\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Household head employment income ($)\"},\"tickformat\":\",\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Figure 1: Change in Net Income for a Single Parent of a 5 year old\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 127,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "employment_income = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0,\n",
    "        200,\n",
    "        400,\n",
    "        600,\n",
    "        800,\n",
    "        1000,\n",
    "        1200,\n",
    "        1400,\n",
    "        1600,\n",
    "        1800,\n",
    "        2000,\n",
    "        2200,\n",
    "        2400,\n",
    "        2600,\n",
    "        2800,\n",
    "        3000,\n",
    "        3200,\n",
    "        3400,\n",
    "        3600,\n",
    "        3800,\n",
    "        4000,\n",
    "        4200,\n",
    "        4400,\n",
    "        4600,\n",
    "        4800,\n",
    "        5000,\n",
    "        5200,\n",
    "        5400,\n",
    "        5600,\n",
    "        5800,\n",
    "        6000,\n",
    "        6200,\n",
    "        6400,\n",
    "        6600,\n",
    "        6800,\n",
    "        7000,\n",
    "        7200,\n",
    "        7400,\n",
    "        7600,\n",
    "        7800,\n",
    "        8000,\n",
    "        8200,\n",
    "        8400,\n",
    "        8600,\n",
    "        8800,\n",
    "        9000,\n",
    "        9200,\n",
    "        9400,\n",
    "        9600,\n",
    "        9800,\n",
    "        10000,\n",
    "        10200,\n",
    "        10400,\n",
    "        10600,\n",
    "        10800,\n",
    "        11000,\n",
    "        11200,\n",
    "        11400,\n",
    "        11600,\n",
    "        11800,\n",
    "        12000,\n",
    "        12200,\n",
    "        12400,\n",
    "        12600,\n",
    "        12800,\n",
    "        13000,\n",
    "        13200,\n",
    "        13400,\n",
    "        13600,\n",
    "        13800,\n",
    "        14000,\n",
    "        14200,\n",
    "        14400,\n",
    "        14600,\n",
    "        14800,\n",
    "        15000,\n",
    "        15200,\n",
    "        15400,\n",
    "        15600,\n",
    "        15800,\n",
    "        16000,\n",
    "        16200,\n",
    "        16400,\n",
    "        16600,\n",
    "        16800,\n",
    "        17000,\n",
    "        17200,\n",
    "        17400,\n",
    "        17600,\n",
    "        17800,\n",
    "        18000,\n",
    "        18200,\n",
    "        18400,\n",
    "        18600,\n",
    "        18800,\n",
    "        19000,\n",
    "        19200,\n",
    "        19400,\n",
    "        19600,\n",
    "        19800,\n",
    "        20000,\n",
    "        20200,\n",
    "        20400,\n",
    "        20600,\n",
    "        20800,\n",
    "        21000,\n",
    "        21200,\n",
    "        21400,\n",
    "        21600,\n",
    "        21800,\n",
    "        22000,\n",
    "        22200,\n",
    "        22400,\n",
    "        22600,\n",
    "        22800,\n",
    "        23000,\n",
    "        23200,\n",
    "        23400,\n",
    "        23600,\n",
    "        23800,\n",
    "        24000,\n",
    "        24200,\n",
    "        24400,\n",
    "        24600,\n",
    "        24800,\n",
    "        25000,\n",
    "        25200,\n",
    "        25400,\n",
    "        25600,\n",
    "        25800,\n",
    "        26000,\n",
    "        26200,\n",
    "        26400,\n",
    "        26600,\n",
    "        26800,\n",
    "        27000,\n",
    "        27200,\n",
    "        27400,\n",
    "        27600,\n",
    "        27800,\n",
    "        28000,\n",
    "        28200,\n",
    "        28400,\n",
    "        28600,\n",
    "        28800,\n",
    "        29000,\n",
    "        29200,\n",
    "        29400,\n",
    "        29600,\n",
    "        29800,\n",
    "        30000,\n",
    "        30200,\n",
    "        30400,\n",
    "        30600,\n",
    "        30800,\n",
    "        31000,\n",
    "        31200,\n",
    "        31400,\n",
    "        31600,\n",
    "        31800,\n",
    "        32000,\n",
    "        32200,\n",
    "        32400,\n",
    "        32600,\n",
    "        32800,\n",
    "        33000,\n",
    "        33200,\n",
    "        33400,\n",
    "        33600,\n",
    "        33800,\n",
    "        34000,\n",
    "        34200,\n",
    "        34400,\n",
    "        34600,\n",
    "        34800,\n",
    "        35000,\n",
    "        35200,\n",
    "        35400,\n",
    "        35600,\n",
    "        35800,\n",
    "        36000,\n",
    "        36200,\n",
    "        36400,\n",
    "        36600,\n",
    "        36800,\n",
    "        37000,\n",
    "        37200,\n",
    "        37400,\n",
    "        37600,\n",
    "        37800,\n",
    "        38000,\n",
    "        38200,\n",
    "        38400,\n",
    "        38600,\n",
    "        38800,\n",
    "        39000,\n",
    "        39200,\n",
    "        39400,\n",
    "        39600,\n",
    "        39800,\n",
    "        40000,\n",
    "        40200,\n",
    "        40400,\n",
    "        40600,\n",
    "        40800,\n",
    "        41000,\n",
    "        41200,\n",
    "        41400,\n",
    "        41600,\n",
    "        41800,\n",
    "        42000,\n",
    "        42200,\n",
    "        42400,\n",
    "        42600,\n",
    "        42800,\n",
    "        43000,\n",
    "        43200,\n",
    "        43400,\n",
    "        43600,\n",
    "        43800,\n",
    "        44000,\n",
    "        44200,\n",
    "        44400,\n",
    "        44600,\n",
    "        44800,\n",
    "        45000,\n",
    "        45200,\n",
    "        45400,\n",
    "        45600,\n",
    "        45800,\n",
    "        46000,\n",
    "        46200,\n",
    "        46400,\n",
    "        46600,\n",
    "        46800,\n",
    "        47000,\n",
    "        47200,\n",
    "        47400,\n",
    "        47600,\n",
    "        47800,\n",
    "        48000,\n",
    "        48200,\n",
    "        48400,\n",
    "        48600,\n",
    "        48800,\n",
    "        49000,\n",
    "        49200,\n",
    "        49400,\n",
    "        49600,\n",
    "        49800,\n",
    "        50000,\n",
    "        50200,\n",
    "        50400,\n",
    "        50600,\n",
    "        50800,\n",
    "        51000,\n",
    "        51200,\n",
    "        51400,\n",
    "        51600,\n",
    "        51800,\n",
    "        52000,\n",
    "        52200,\n",
    "        52400,\n",
    "        52600,\n",
    "        52800,\n",
    "        53000,\n",
    "        53200,\n",
    "        53400,\n",
    "        53600,\n",
    "        53800,\n",
    "        54000,\n",
    "        54200,\n",
    "        54400,\n",
    "        54600,\n",
    "        54800,\n",
    "        55000,\n",
    "        55200,\n",
    "        55400,\n",
    "        55600,\n",
    "        55800,\n",
    "        56000,\n",
    "        56200,\n",
    "        56400,\n",
    "        56600,\n",
    "        56800,\n",
    "        57000,\n",
    "        57200,\n",
    "        57400,\n",
    "        57600,\n",
    "        57800,\n",
    "        58000,\n",
    "        58200,\n",
    "        58400,\n",
    "        58600,\n",
    "        58800,\n",
    "        59000,\n",
    "        59200,\n",
    "        59400,\n",
    "        59600,\n",
    "        59800,\n",
    "        60000,\n",
    "        60200,\n",
    "        60400,\n",
    "        60600,\n",
    "        60800,\n",
    "        61000,\n",
    "        61200,\n",
    "        61400,\n",
    "        61600,\n",
    "        61800,\n",
    "        62000,\n",
    "        62200,\n",
    "        62400,\n",
    "        62600,\n",
    "        62800,\n",
    "        63000,\n",
    "        63200,\n",
    "        63400,\n",
    "        63600,\n",
    "        63800,\n",
    "        64000,\n",
    "        64200,\n",
    "        64400,\n",
    "        64600,\n",
    "        64800,\n",
    "        65000,\n",
    "        65200,\n",
    "        65400,\n",
    "        65600,\n",
    "        65800,\n",
    "        66000,\n",
    "        66200,\n",
    "        66400,\n",
    "        66600,\n",
    "        66800,\n",
    "        67000,\n",
    "        67200,\n",
    "        67400,\n",
    "        67600,\n",
    "        67800,\n",
    "        68000,\n",
    "        68200,\n",
    "        68400,\n",
    "        68600,\n",
    "        68800,\n",
    "        69000,\n",
    "        69200,\n",
    "        69400,\n",
    "        69600,\n",
    "        69800,\n",
    "        70000,\n",
    "        70200,\n",
    "        70400,\n",
    "        70600,\n",
    "        70800,\n",
    "        71000,\n",
    "        71200,\n",
    "        71400,\n",
    "        71600,\n",
    "        71800,\n",
    "        72000,\n",
    "        72200,\n",
    "        72400,\n",
    "        72600,\n",
    "        72800,\n",
    "        73000,\n",
    "        73200,\n",
    "        73400,\n",
    "        73600,\n",
    "        73800,\n",
    "        74000,\n",
    "        74200,\n",
    "        74400,\n",
    "        74600,\n",
    "        74800,\n",
    "        75000,\n",
    "        75200,\n",
    "        75400,\n",
    "        75600,\n",
    "        75800,\n",
    "        76000,\n",
    "        76200,\n",
    "        76400,\n",
    "        76600,\n",
    "        76800,\n",
    "        77000,\n",
    "        77200,\n",
    "        77400,\n",
    "        77600,\n",
    "        77800,\n",
    "        78000,\n",
    "        78200,\n",
    "        78400,\n",
    "        78600,\n",
    "        78800,\n",
    "        79000,\n",
    "        79200,\n",
    "        79400,\n",
    "        79600,\n",
    "        79800,\n",
    "        80000,\n",
    "        80200,\n",
    "        80400,\n",
    "        80600,\n",
    "        80800,\n",
    "        81000,\n",
    "        81200,\n",
    "        81400,\n",
    "        81600,\n",
    "        81800,\n",
    "        82000,\n",
    "        82200,\n",
    "        82400,\n",
    "        82600,\n",
    "        82800,\n",
    "        83000,\n",
    "        83200,\n",
    "        83400,\n",
    "        83600,\n",
    "        83800,\n",
    "        84000,\n",
    "        84200,\n",
    "        84400,\n",
    "        84600,\n",
    "        84800,\n",
    "        85000,\n",
    "        85200,\n",
    "        85400,\n",
    "        85600,\n",
    "        85800,\n",
    "        86000,\n",
    "        86200,\n",
    "        86400,\n",
    "        86600,\n",
    "        86800,\n",
    "        87000,\n",
    "        87200,\n",
    "        87400,\n",
    "        87600,\n",
    "        87800,\n",
    "        88000,\n",
    "        88200,\n",
    "        88400,\n",
    "        88600,\n",
    "        88800,\n",
    "        89000,\n",
    "        89200,\n",
    "        89400,\n",
    "        89600,\n",
    "        89800,\n",
    "        90000,\n",
    "        90200,\n",
    "        90400,\n",
    "        90600,\n",
    "        90800,\n",
    "        91000,\n",
    "        91200,\n",
    "        91400,\n",
    "        91600,\n",
    "        91800,\n",
    "        92000,\n",
    "        92200,\n",
    "        92400,\n",
    "        92600,\n",
    "        92800,\n",
    "        93000,\n",
    "        93200,\n",
    "        93400,\n",
    "        93600,\n",
    "        93800,\n",
    "        94000,\n",
    "        94200,\n",
    "        94400,\n",
    "        94600,\n",
    "        94800,\n",
    "        95000,\n",
    "        95200,\n",
    "        95400,\n",
    "        95600,\n",
    "        95800,\n",
    "        96000,\n",
    "        96200,\n",
    "        96400,\n",
    "        96600,\n",
    "        96800,\n",
    "        97000,\n",
    "        97200,\n",
    "        97400,\n",
    "        97600,\n",
    "        97800,\n",
    "        98000,\n",
    "        98200,\n",
    "        98400,\n",
    "        98600,\n",
    "        98800,\n",
    "        99000,\n",
    "        99200,\n",
    "        99400,\n",
    "        99600,\n",
    "        99800,\n",
    "        100000,\n",
    "        100200,\n",
    "        100400,\n",
    "        100600,\n",
    "        100800,\n",
    "        101000,\n",
    "        101200,\n",
    "        101400,\n",
    "        101600,\n",
    "        101800,\n",
    "        102000,\n",
    "        102200,\n",
    "        102400,\n",
    "        102600,\n",
    "        102800,\n",
    "        103000,\n",
    "        103200,\n",
    "        103400,\n",
    "        103600,\n",
    "        103800,\n",
    "        104000,\n",
    "        104200,\n",
    "        104400,\n",
    "        104600,\n",
    "        104800,\n",
    "        105000,\n",
    "        105200,\n",
    "        105400,\n",
    "        105600,\n",
    "        105800,\n",
    "        106000,\n",
    "        106200,\n",
    "        106400,\n",
    "        106600,\n",
    "        106800,\n",
    "        107000,\n",
    "        107200,\n",
    "        107400,\n",
    "        107600,\n",
    "        107800,\n",
    "        108000,\n",
    "        108200,\n",
    "        108400,\n",
    "        108600,\n",
    "        108800,\n",
    "        109000,\n",
    "        109200,\n",
    "        109400,\n",
    "        109600,\n",
    "        109800,\n",
    "        110000,\n",
    "        110200,\n",
    "        110400,\n",
    "        110600,\n",
    "        110800,\n",
    "        111000,\n",
    "        111200,\n",
    "        111400,\n",
    "        111600,\n",
    "        111800,\n",
    "        112000,\n",
    "        112200,\n",
    "        112400,\n",
    "        112600,\n",
    "        112800,\n",
    "        113000,\n",
    "        113200,\n",
    "        113400,\n",
    "        113600,\n",
    "        113800,\n",
    "        114000,\n",
    "        114200,\n",
    "        114400,\n",
    "        114600,\n",
    "        114800,\n",
    "        115000,\n",
    "        115200,\n",
    "        115400,\n",
    "        115600,\n",
    "        115800,\n",
    "        116000,\n",
    "        116200,\n",
    "        116400,\n",
    "        116600,\n",
    "        116800,\n",
    "        117000,\n",
    "        117200,\n",
    "        117400,\n",
    "        117600,\n",
    "        117800,\n",
    "        118000,\n",
    "        118200,\n",
    "        118400,\n",
    "        118600,\n",
    "        118800,\n",
    "        119000,\n",
    "        119200,\n",
    "        119400,\n",
    "        119600,\n",
    "        119800,\n",
    "        120000,\n",
    "        120200,\n",
    "        120400,\n",
    "        120600,\n",
    "        120800,\n",
    "        121000,\n",
    "        121200,\n",
    "        121400,\n",
    "        121600,\n",
    "        121800,\n",
    "        122000,\n",
    "        122200,\n",
    "        122400,\n",
    "        122600,\n",
    "        122800,\n",
    "        123000,\n",
    "        123200,\n",
    "        123400,\n",
    "        123600,\n",
    "        123800,\n",
    "        124000,\n",
    "        124200,\n",
    "        124400,\n",
    "        124600,\n",
    "        124800,\n",
    "        125000,\n",
    "        125200,\n",
    "        125400,\n",
    "        125600,\n",
    "        125800,\n",
    "        126000,\n",
    "        126200,\n",
    "        126400,\n",
    "        126600,\n",
    "        126800,\n",
    "        127000,\n",
    "        127200,\n",
    "        127400,\n",
    "        127600,\n",
    "        127800,\n",
    "        128000,\n",
    "        128200,\n",
    "        128400,\n",
    "        128600,\n",
    "        128800,\n",
    "        129000,\n",
    "        129200,\n",
    "        129400,\n",
    "        129600,\n",
    "        129800,\n",
    "        130000,\n",
    "        130200,\n",
    "        130400,\n",
    "        130600,\n",
    "        130800,\n",
    "        131000,\n",
    "        131200,\n",
    "        131400,\n",
    "        131600,\n",
    "        131800,\n",
    "        132000,\n",
    "        132200,\n",
    "        132400,\n",
    "        132600,\n",
    "        132800,\n",
    "        133000,\n",
    "        133200,\n",
    "        133400,\n",
    "        133600,\n",
    "        133800,\n",
    "        134000,\n",
    "        134200,\n",
    "        134400,\n",
    "        134600,\n",
    "        134800,\n",
    "        135000,\n",
    "        135200,\n",
    "        135400,\n",
    "        135600,\n",
    "        135800,\n",
    "        136000,\n",
    "        136200,\n",
    "        136400,\n",
    "        136600,\n",
    "        136800,\n",
    "        137000,\n",
    "        137200,\n",
    "        137400,\n",
    "        137600,\n",
    "        137800,\n",
    "        138000,\n",
    "        138200,\n",
    "        138400,\n",
    "        138600,\n",
    "        138800,\n",
    "        139000,\n",
    "        139200,\n",
    "        139400,\n",
    "        139600,\n",
    "        139800,\n",
    "        140000,\n",
    "        140200,\n",
    "        140400,\n",
    "        140600,\n",
    "        140800,\n",
    "        141000,\n",
    "        141200,\n",
    "        141400,\n",
    "        141600,\n",
    "        141800,\n",
    "        142000,\n",
    "        142200,\n",
    "        142400,\n",
    "        142600,\n",
    "        142800,\n",
    "        143000,\n",
    "        143200,\n",
    "        143400,\n",
    "        143600,\n",
    "        143800,\n",
    "        144000,\n",
    "        144200,\n",
    "        144400,\n",
    "        144600,\n",
    "        144800,\n",
    "        145000,\n",
    "        145200,\n",
    "        145400,\n",
    "        145600,\n",
    "        145800,\n",
    "        146000,\n",
    "        146200,\n",
    "        146400,\n",
    "        146600,\n",
    "        146800,\n",
    "        147000,\n",
    "        147200,\n",
    "        147400,\n",
    "        147600,\n",
    "        147800,\n",
    "        148000,\n",
    "        148200,\n",
    "        148400,\n",
    "        148600,\n",
    "        148800,\n",
    "        149000,\n",
    "        149200,\n",
    "        149400,\n",
    "        149600,\n",
    "        149800,\n",
    "        150000,\n",
    "        150200,\n",
    "        150400,\n",
    "        150600,\n",
    "        150800,\n",
    "        151000,\n",
    "        151200,\n",
    "        151400,\n",
    "        151600,\n",
    "        151800,\n",
    "        152000,\n",
    "        152200,\n",
    "        152400,\n",
    "        152600,\n",
    "        152800,\n",
    "        153000,\n",
    "        153200,\n",
    "        153400,\n",
    "        153600,\n",
    "        153800,\n",
    "        154000,\n",
    "        154200,\n",
    "        154400,\n",
    "        154600,\n",
    "        154800,\n",
    "        155000,\n",
    "        155200,\n",
    "        155400,\n",
    "        155600,\n",
    "        155800,\n",
    "        156000,\n",
    "        156200,\n",
    "        156400,\n",
    "        156600,\n",
    "        156800,\n",
    "        157000,\n",
    "        157200,\n",
    "        157400,\n",
    "        157600,\n",
    "        157800,\n",
    "        158000,\n",
    "        158200,\n",
    "        158400,\n",
    "        158600,\n",
    "        158800,\n",
    "        159000,\n",
    "        159200,\n",
    "        159400,\n",
    "        159600,\n",
    "        159800,\n",
    "        160000,\n",
    "        160200,\n",
    "        160400,\n",
    "        160600,\n",
    "        160800,\n",
    "        161000,\n",
    "        161200,\n",
    "        161400,\n",
    "        161600,\n",
    "        161800,\n",
    "        162000,\n",
    "        162200,\n",
    "        162400,\n",
    "        162600,\n",
    "        162800,\n",
    "        163000,\n",
    "        163200,\n",
    "        163400,\n",
    "        163600,\n",
    "        163800,\n",
    "        164000,\n",
    "        164200,\n",
    "        164400,\n",
    "        164600,\n",
    "        164800,\n",
    "        165000,\n",
    "        165200,\n",
    "        165400,\n",
    "        165600,\n",
    "        165800,\n",
    "        166000,\n",
    "        166200,\n",
    "        166400,\n",
    "        166600,\n",
    "        166800,\n",
    "        167000,\n",
    "        167200,\n",
    "        167400,\n",
    "        167600,\n",
    "        167800,\n",
    "        168000,\n",
    "        168200,\n",
    "        168400,\n",
    "        168600,\n",
    "        168800,\n",
    "        169000,\n",
    "        169200,\n",
    "        169400,\n",
    "        169600,\n",
    "        169800,\n",
    "        170000,\n",
    "        170200,\n",
    "        170400,\n",
    "        170600,\n",
    "        170800,\n",
    "        171000,\n",
    "        171200,\n",
    "        171400,\n",
    "        171600,\n",
    "        171800,\n",
    "        172000,\n",
    "        172200,\n",
    "        172400,\n",
    "        172600,\n",
    "        172800,\n",
    "        173000,\n",
    "        173200,\n",
    "        173400,\n",
    "        173600,\n",
    "        173800,\n",
    "        174000,\n",
    "        174200,\n",
    "        174400,\n",
    "        174600,\n",
    "        174800,\n",
    "        175000,\n",
    "        175200,\n",
    "        175400,\n",
    "        175600,\n",
    "        175800,\n",
    "        176000,\n",
    "        176200,\n",
    "        176400,\n",
    "        176600,\n",
    "        176800,\n",
    "        177000,\n",
    "        177200,\n",
    "        177400,\n",
    "        177600,\n",
    "        177800,\n",
    "        178000,\n",
    "        178200,\n",
    "        178400,\n",
    "        178600,\n",
    "        178800,\n",
    "        179000,\n",
    "        179200,\n",
    "        179400,\n",
    "        179600,\n",
    "        179800,\n",
    "        180000,\n",
    "        180200,\n",
    "        180400,\n",
    "        180600,\n",
    "        180800,\n",
    "        181000,\n",
    "        181200,\n",
    "        181400,\n",
    "        181600,\n",
    "        181800,\n",
    "        182000,\n",
    "        182200,\n",
    "        182400,\n",
    "        182600,\n",
    "        182800,\n",
    "        183000,\n",
    "        183200,\n",
    "        183400,\n",
    "        183600,\n",
    "        183800,\n",
    "        184000,\n",
    "        184200,\n",
    "        184400,\n",
    "        184600,\n",
    "        184800,\n",
    "        185000,\n",
    "        185200,\n",
    "        185400,\n",
    "        185600,\n",
    "        185800,\n",
    "        186000,\n",
    "        186200,\n",
    "        186400,\n",
    "        186600,\n",
    "        186800,\n",
    "        187000,\n",
    "        187200,\n",
    "        187400,\n",
    "        187600,\n",
    "        187800,\n",
    "        188000,\n",
    "        188200,\n",
    "        188400,\n",
    "        188600,\n",
    "        188800,\n",
    "        189000,\n",
    "        189200,\n",
    "        189400,\n",
    "        189600,\n",
    "        189800,\n",
    "        190000,\n",
    "        190200,\n",
    "        190400,\n",
    "        190600,\n",
    "        190800,\n",
    "        191000,\n",
    "        191200,\n",
    "        191400,\n",
    "        191600,\n",
    "        191800,\n",
    "        192000,\n",
    "        192200,\n",
    "        192400,\n",
    "        192600,\n",
    "        192800,\n",
    "        193000,\n",
    "        193200,\n",
    "        193400,\n",
    "        193600,\n",
    "        193800,\n",
    "        194000,\n",
    "        194200,\n",
    "        194400,\n",
    "        194600,\n",
    "        194800,\n",
    "        195000,\n",
    "        195200,\n",
    "        195400,\n",
    "        195600,\n",
    "        195800,\n",
    "        196000,\n",
    "        196200,\n",
    "        196400,\n",
    "        196600,\n",
    "        196800,\n",
    "        197000,\n",
    "        197200,\n",
    "        197400,\n",
    "        197600,\n",
    "        197800,\n",
    "        198000,\n",
    "        198200,\n",
    "        198400,\n",
    "        198600,\n",
    "        198800,\n",
    "        199000,\n",
    "        199200,\n",
    "        199400,\n",
    "        199600,\n",
    "        199800,\n",
    "        200000,\n",
    "    ]\n",
    "]\n",
    "net_income = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        17.839844,\n",
    "        36.83203,\n",
    "        55.82422,\n",
    "        74.82031,\n",
    "        93.81641,\n",
    "        112.8125,\n",
    "        131.8086,\n",
    "        150.80078,\n",
    "        169.79688,\n",
    "        188.79297,\n",
    "        207.78516,\n",
    "        226.77734,\n",
    "        245.77344,\n",
    "        264.76953,\n",
    "        283.76562,\n",
    "        302.7578,\n",
    "        321.7539,\n",
    "        340.7461,\n",
    "        359.7422,\n",
    "        378.73828,\n",
    "        397.73438,\n",
    "        416.72656,\n",
    "        435.72266,\n",
    "        454.71484,\n",
    "        473.71094,\n",
    "        492.70703,\n",
    "        511.69922,\n",
    "        530.6953,\n",
    "        549.6875,\n",
    "        568.6836,\n",
    "        587.6797,\n",
    "        606.6758,\n",
    "        625.66797,\n",
    "        644.66406,\n",
    "        663.65625,\n",
    "        682.65234,\n",
    "        701.64844,\n",
    "        720.6406,\n",
    "        703.5586,\n",
    "        682.66406,\n",
    "        661.77344,\n",
    "        640.8789,\n",
    "        619.9844,\n",
    "        599.09375,\n",
    "        578.2031,\n",
    "        557.3086,\n",
    "        536.41406,\n",
    "        515.52344,\n",
    "        494.6289,\n",
    "        473.73828,\n",
    "        452.84375,\n",
    "        431.94922,\n",
    "        411.0547,\n",
    "        390.16406,\n",
    "        369.27344,\n",
    "        348.375,\n",
    "        327.48828,\n",
    "        306.59375,\n",
    "        285.69922,\n",
    "        264.8047,\n",
    "        243.91016,\n",
    "        223.02344,\n",
    "        202.125,\n",
    "        181.23438,\n",
    "        160.33984,\n",
    "        139.44531,\n",
    "        118.55469,\n",
    "        97.66406,\n",
    "        76.76953,\n",
    "        55.875,\n",
    "        34.98047,\n",
    "        26.5625,\n",
    "        26.667969,\n",
    "        26.773438,\n",
    "        26.878906,\n",
    "        26.984375,\n",
    "        27.085938,\n",
    "        27.195312,\n",
    "        27.296875,\n",
    "        27.402344,\n",
    "        27.507812,\n",
    "        27.613281,\n",
    "        27.71875,\n",
    "        27.820312,\n",
    "        27.925781,\n",
    "        28.03125,\n",
    "        28.136719,\n",
    "        28.242188,\n",
    "        28.34375,\n",
    "        28.453125,\n",
    "        28.554688,\n",
    "        28.664062,\n",
    "        28.765625,\n",
    "        28.871094,\n",
    "        28.976562,\n",
    "        29.082031,\n",
    "        29.1875,\n",
    "        29.292969,\n",
    "        29.398438,\n",
    "        29.5,\n",
    "        29.609375,\n",
    "        29.710938,\n",
    "        29.820312,\n",
    "        29.921875,\n",
    "        30.023438,\n",
    "        30.132812,\n",
    "        30.238281,\n",
    "        30.339844,\n",
    "        30.445312,\n",
    "        30.550781,\n",
    "        30.65625,\n",
    "        30.757812,\n",
    "        30.867188,\n",
    "        30.96875,\n",
    "        31.078125,\n",
    "        31.183594,\n",
    "        31.289062,\n",
    "        31.390625,\n",
    "        31.496094,\n",
    "        31.601562,\n",
    "        31.710938,\n",
    "        31.8125,\n",
    "        31.917969,\n",
    "        32.023438,\n",
    "        32.125,\n",
    "        32.234375,\n",
    "        32.335938,\n",
    "        32.4375,\n",
    "        32.546875,\n",
    "        32.648438,\n",
    "        32.757812,\n",
    "        32.859375,\n",
    "        32.96875,\n",
    "        33.070312,\n",
    "        33.171875,\n",
    "        33.28125,\n",
    "        33.38672,\n",
    "        33.492188,\n",
    "        33.59375,\n",
    "        33.703125,\n",
    "        33.804688,\n",
    "        33.910156,\n",
    "        34.015625,\n",
    "        34.125,\n",
    "        34.226562,\n",
    "        34.33203,\n",
    "        34.4375,\n",
    "        34.54297,\n",
    "        34.64453,\n",
    "        34.75,\n",
    "        34.85547,\n",
    "        34.964844,\n",
    "        35.0625,\n",
    "        35.171875,\n",
    "        35.277344,\n",
    "        35.382812,\n",
    "        35.484375,\n",
    "        35.59375,\n",
    "        35.695312,\n",
    "        35.796875,\n",
    "        35.90625,\n",
    "        36.015625,\n",
    "        36.11328,\n",
    "        36.21875,\n",
    "        36.32422,\n",
    "        36.433594,\n",
    "        36.535156,\n",
    "        36.64453,\n",
    "        36.75,\n",
    "        36.851562,\n",
    "        36.95703,\n",
    "        37.0625,\n",
    "        37.16797,\n",
    "        37.26953,\n",
    "        37.375,\n",
    "        37.48047,\n",
    "        37.585938,\n",
    "        37.6875,\n",
    "        37.796875,\n",
    "        37.902344,\n",
    "        38.007812,\n",
    "        38.109375,\n",
    "        38.21875,\n",
    "        38.320312,\n",
    "        38.42578,\n",
    "        38.53125,\n",
    "        38.640625,\n",
    "        38.73828,\n",
    "        38.847656,\n",
    "        38.953125,\n",
    "        39.058594,\n",
    "        39.160156,\n",
    "        39.265625,\n",
    "        39.375,\n",
    "        39.476562,\n",
    "        39.578125,\n",
    "        39.6875,\n",
    "        39.789062,\n",
    "        39.890625,\n",
    "        40.0,\n",
    "        40.109375,\n",
    "        40.21875,\n",
    "        40.3125,\n",
    "        40.421875,\n",
    "        40.523438,\n",
    "        40.632812,\n",
    "        40.734375,\n",
    "        40.835938,\n",
    "        40.945312,\n",
    "        41.046875,\n",
    "        41.15625,\n",
    "        41.265625,\n",
    "        41.359375,\n",
    "        41.46875,\n",
    "        41.578125,\n",
    "        41.679688,\n",
    "        41.78125,\n",
    "        41.890625,\n",
    "        41.992188,\n",
    "        42.09375,\n",
    "        42.203125,\n",
    "        42.3125,\n",
    "        42.421875,\n",
    "        42.515625,\n",
    "        42.625,\n",
    "        42.734375,\n",
    "        42.835938,\n",
    "        42.9375,\n",
    "        43.046875,\n",
    "        43.148438,\n",
    "        43.25,\n",
    "        43.359375,\n",
    "        43.46875,\n",
    "        43.578125,\n",
    "        43.679688,\n",
    "        43.78125,\n",
    "        43.882812,\n",
    "        43.992188,\n",
    "        44.09375,\n",
    "        44.203125,\n",
    "        44.304688,\n",
    "        44.40625,\n",
    "        44.515625,\n",
    "        44.617188,\n",
    "        44.71875,\n",
    "        44.835938,\n",
    "        44.929688,\n",
    "        45.039062,\n",
    "        45.148438,\n",
    "        45.25,\n",
    "        45.351562,\n",
    "        45.46875,\n",
    "        45.5625,\n",
    "        45.671875,\n",
    "        45.78125,\n",
    "        45.875,\n",
    "        45.984375,\n",
    "        46.085938,\n",
    "        46.1875,\n",
    "        46.296875,\n",
    "        46.40625,\n",
    "        46.507812,\n",
    "        46.609375,\n",
    "        46.71875,\n",
    "        46.820312,\n",
    "        46.929688,\n",
    "        47.03125,\n",
    "        47.140625,\n",
    "        47.242188,\n",
    "        47.351562,\n",
    "        47.460938,\n",
    "        47.5625,\n",
    "        47.664062,\n",
    "        47.773438,\n",
    "        47.875,\n",
    "        47.976562,\n",
    "        48.085938,\n",
    "        48.1875,\n",
    "        48.296875,\n",
    "        48.398438,\n",
    "        48.507812,\n",
    "        48.609375,\n",
    "        48.710938,\n",
    "        48.820312,\n",
    "        48.929688,\n",
    "        49.03125,\n",
    "        49.140625,\n",
    "        49.234375,\n",
    "        49.34375,\n",
    "        49.453125,\n",
    "        49.554688,\n",
    "        49.65625,\n",
    "        49.765625,\n",
    "        49.867188,\n",
    "        49.976562,\n",
    "        50.078125,\n",
    "        50.1875,\n",
    "        50.289062,\n",
    "        50.398438,\n",
    "        50.5,\n",
    "        50.601562,\n",
    "        50.710938,\n",
    "        50.820312,\n",
    "        50.921875,\n",
    "        51.023438,\n",
    "        51.125,\n",
    "        51.234375,\n",
    "        51.34375,\n",
    "        51.4375,\n",
    "        51.554688,\n",
    "        51.65625,\n",
    "        51.757812,\n",
    "        51.867188,\n",
    "        51.96875,\n",
    "        52.078125,\n",
    "        52.1875,\n",
    "        52.28125,\n",
    "        52.390625,\n",
    "        52.5,\n",
    "        52.601562,\n",
    "        52.703125,\n",
    "        52.8125,\n",
    "        52.90625,\n",
    "        53.015625,\n",
    "        53.125,\n",
    "        53.226562,\n",
    "        53.328125,\n",
    "        53.445312,\n",
    "        53.546875,\n",
    "        53.648438,\n",
    "        53.757812,\n",
    "        53.859375,\n",
    "        53.960938,\n",
    "        54.078125,\n",
    "        54.171875,\n",
    "        54.28125,\n",
    "        54.382812,\n",
    "        54.484375,\n",
    "        54.59375,\n",
    "        54.695312,\n",
    "        54.804688,\n",
    "        54.914062,\n",
    "        55.007812,\n",
    "        55.117188,\n",
    "        55.226562,\n",
    "        55.328125,\n",
    "        55.429688,\n",
    "        55.546875,\n",
    "        55.648438,\n",
    "        55.75,\n",
    "        55.859375,\n",
    "        55.953125,\n",
    "        56.0625,\n",
    "        56.171875,\n",
    "        56.265625,\n",
    "        56.375,\n",
    "        56.484375,\n",
    "        56.585938,\n",
    "        56.695312,\n",
    "        56.796875,\n",
    "        56.90625,\n",
    "        57.007812,\n",
    "        57.117188,\n",
    "        57.21875,\n",
    "        57.328125,\n",
    "        57.429688,\n",
    "        57.539062,\n",
    "        57.640625,\n",
    "        57.742188,\n",
    "        57.851562,\n",
    "        57.953125,\n",
    "        58.054688,\n",
    "        58.164062,\n",
    "        58.265625,\n",
    "        58.375,\n",
    "        58.476562,\n",
    "        58.585938,\n",
    "        58.6875,\n",
    "        58.796875,\n",
    "        58.898438,\n",
    "        59.007812,\n",
    "        59.109375,\n",
    "        59.21875,\n",
    "        59.320312,\n",
    "        59.421875,\n",
    "        59.53125,\n",
    "        59.632812,\n",
    "        59.734375,\n",
    "        59.84375,\n",
    "        59.945312,\n",
    "        60.046875,\n",
    "        60.15625,\n",
    "        60.257812,\n",
    "        60.367188,\n",
    "        60.476562,\n",
    "        60.578125,\n",
    "        60.679688,\n",
    "        60.789062,\n",
    "        60.898438,\n",
    "        61.0,\n",
    "        61.109375,\n",
    "        61.203125,\n",
    "        61.3125,\n",
    "        61.421875,\n",
    "        61.515625,\n",
    "        61.632812,\n",
    "        61.734375,\n",
    "        61.84375,\n",
    "        61.945312,\n",
    "        62.054688,\n",
    "        62.148438,\n",
    "        62.265625,\n",
    "        62.367188,\n",
    "        62.46875,\n",
    "        62.578125,\n",
    "        62.671875,\n",
    "        62.78125,\n",
    "        62.890625,\n",
    "        62.992188,\n",
    "        63.101562,\n",
    "        63.203125,\n",
    "        63.3125,\n",
    "        63.414062,\n",
    "        63.515625,\n",
    "        63.625,\n",
    "        63.734375,\n",
    "        63.835938,\n",
    "        63.945312,\n",
    "        64.03906,\n",
    "        64.140625,\n",
    "        64.25,\n",
    "        64.359375,\n",
    "        64.46875,\n",
    "        64.57031,\n",
    "        64.67969,\n",
    "        64.77344,\n",
    "        64.88281,\n",
    "        64.984375,\n",
    "        65.09375,\n",
    "        65.19531,\n",
    "        65.296875,\n",
    "        65.40625,\n",
    "        65.50781,\n",
    "        65.61719,\n",
    "        65.72656,\n",
    "        65.828125,\n",
    "        65.9375,\n",
    "        66.03125,\n",
    "        66.140625,\n",
    "        66.25,\n",
    "        66.359375,\n",
    "        66.46094,\n",
    "        66.5625,\n",
    "        66.66406,\n",
    "        66.77344,\n",
    "        66.88281,\n",
    "        66.984375,\n",
    "        67.08594,\n",
    "        67.19531,\n",
    "        67.296875,\n",
    "        67.40625,\n",
    "        67.50781,\n",
    "        67.61719,\n",
    "        67.71875,\n",
    "        67.828125,\n",
    "        67.921875,\n",
    "        68.03125,\n",
    "        68.140625,\n",
    "        68.25,\n",
    "        68.34375,\n",
    "        68.44531,\n",
    "        68.55469,\n",
    "        68.66406,\n",
    "        68.765625,\n",
    "        68.875,\n",
    "        68.97656,\n",
    "        69.08594,\n",
    "        69.1875,\n",
    "        69.28906,\n",
    "        69.390625,\n",
    "        69.50781,\n",
    "        69.60156,\n",
    "        69.71094,\n",
    "        69.8125,\n",
    "        69.921875,\n",
    "        70.02344,\n",
    "        70.140625,\n",
    "        70.24219,\n",
    "        70.34375,\n",
    "        70.453125,\n",
    "        70.55469,\n",
    "        70.65625,\n",
    "        70.75781,\n",
    "        70.86719,\n",
    "        70.96875,\n",
    "        71.078125,\n",
    "        71.17969,\n",
    "        71.28906,\n",
    "        71.390625,\n",
    "        71.49219,\n",
    "        71.609375,\n",
    "        71.71094,\n",
    "        71.8125,\n",
    "        71.91406,\n",
    "        72.02344,\n",
    "        72.13281,\n",
    "        72.22656,\n",
    "        72.33594,\n",
    "        72.44531,\n",
    "        72.546875,\n",
    "        72.64844,\n",
    "        72.75781,\n",
    "        72.859375,\n",
    "        72.96875,\n",
    "        73.07031,\n",
    "        73.171875,\n",
    "        73.28125,\n",
    "        73.38281,\n",
    "        73.484375,\n",
    "        73.59375,\n",
    "        73.703125,\n",
    "        73.80469,\n",
    "        73.90625,\n",
    "        74.015625,\n",
    "        74.125,\n",
    "        74.234375,\n",
    "        74.33594,\n",
    "        74.42969,\n",
    "        74.53906,\n",
    "        74.64844,\n",
    "        74.75781,\n",
    "        74.859375,\n",
    "        74.96094,\n",
    "        75.0625,\n",
    "        75.171875,\n",
    "        75.28125,\n",
    "        75.38281,\n",
    "        75.484375,\n",
    "        75.59375,\n",
    "        75.703125,\n",
    "        75.80469,\n",
    "        75.90625,\n",
    "        76.015625,\n",
    "        76.11719,\n",
    "        76.22656,\n",
    "        76.328125,\n",
    "        76.42969,\n",
    "        76.53906,\n",
    "        76.640625,\n",
    "        76.74219,\n",
    "        76.85156,\n",
    "        76.96094,\n",
    "        77.0625,\n",
    "        77.171875,\n",
    "        77.27344,\n",
    "        77.38281,\n",
    "        77.47656,\n",
    "        77.58594,\n",
    "        77.69531,\n",
    "        77.796875,\n",
    "        77.89844,\n",
    "        78.00781,\n",
    "        78.109375,\n",
    "        78.21875,\n",
    "        78.32031,\n",
    "        78.42969,\n",
    "        78.53906,\n",
    "        78.63281,\n",
    "        78.734375,\n",
    "        78.85156,\n",
    "        78.953125,\n",
    "        79.05469,\n",
    "        79.15625,\n",
    "        79.265625,\n",
    "        79.375,\n",
    "        79.484375,\n",
    "        79.578125,\n",
    "        79.6875,\n",
    "        79.796875,\n",
    "        79.89844,\n",
    "        80.0,\n",
    "        80.10156,\n",
    "        80.203125,\n",
    "        80.32031,\n",
    "        80.421875,\n",
    "        80.52344,\n",
    "        80.625,\n",
    "        80.734375,\n",
    "        80.84375,\n",
    "        80.94531,\n",
    "        81.046875,\n",
    "        81.15625,\n",
    "        81.265625,\n",
    "        81.36719,\n",
    "        81.46875,\n",
    "        81.578125,\n",
    "        81.67969,\n",
    "        81.78906,\n",
    "        81.890625,\n",
    "        82.0,\n",
    "        82.109375,\n",
    "        82.203125,\n",
    "        82.3125,\n",
    "        82.421875,\n",
    "        82.52344,\n",
    "        82.625,\n",
    "        82.72656,\n",
    "        82.83594,\n",
    "        82.94531,\n",
    "        83.046875,\n",
    "        83.14844,\n",
    "        83.25,\n",
    "        83.359375,\n",
    "        83.46875,\n",
    "        83.578125,\n",
    "        83.67969,\n",
    "        83.78125,\n",
    "        83.890625,\n",
    "        84.0,\n",
    "        84.09375,\n",
    "        84.203125,\n",
    "        84.296875,\n",
    "        84.40625,\n",
    "        84.515625,\n",
    "        84.625,\n",
    "        84.71875,\n",
    "        84.828125,\n",
    "        84.9375,\n",
    "        85.046875,\n",
    "        85.140625,\n",
    "        85.25,\n",
    "        85.359375,\n",
    "        85.46094,\n",
    "        85.57031,\n",
    "        85.671875,\n",
    "        85.77344,\n",
    "        85.88281,\n",
    "        85.984375,\n",
    "        86.09375,\n",
    "        86.19531,\n",
    "        86.30469,\n",
    "        86.40625,\n",
    "        86.50781,\n",
    "        86.625,\n",
    "        86.71875,\n",
    "        86.828125,\n",
    "        86.92969,\n",
    "        87.03125,\n",
    "        87.140625,\n",
    "        87.24219,\n",
    "        87.35156,\n",
    "        87.453125,\n",
    "        87.5625,\n",
    "        87.671875,\n",
    "        87.77344,\n",
    "        87.875,\n",
    "        87.984375,\n",
    "        88.078125,\n",
    "        88.1875,\n",
    "        88.296875,\n",
    "        88.39844,\n",
    "        88.50781,\n",
    "        88.609375,\n",
    "        88.71875,\n",
    "        88.82031,\n",
    "        88.92969,\n",
    "        89.03125,\n",
    "        89.125,\n",
    "        89.24219,\n",
    "        89.35156,\n",
    "        89.453125,\n",
    "        89.55469,\n",
    "        89.65625,\n",
    "        89.765625,\n",
    "        89.875,\n",
    "        89.96875,\n",
    "        90.078125,\n",
    "        90.1875,\n",
    "        90.296875,\n",
    "        90.390625,\n",
    "        90.5,\n",
    "        90.59375,\n",
    "        90.703125,\n",
    "        90.828125,\n",
    "        90.9375,\n",
    "        91.03125,\n",
    "        91.140625,\n",
    "        91.234375,\n",
    "        91.34375,\n",
    "        91.4375,\n",
    "        91.546875,\n",
    "        91.65625,\n",
    "        91.765625,\n",
    "        91.875,\n",
    "        91.96875,\n",
    "        92.078125,\n",
    "        92.171875,\n",
    "        92.28125,\n",
    "        92.390625,\n",
    "        92.5,\n",
    "        92.59375,\n",
    "        92.703125,\n",
    "        92.8125,\n",
    "        92.921875,\n",
    "        93.015625,\n",
    "        93.125,\n",
    "        93.234375,\n",
    "        93.328125,\n",
    "        93.4375,\n",
    "        93.546875,\n",
    "        93.65625,\n",
    "        93.75,\n",
    "        93.859375,\n",
    "        93.96875,\n",
    "        94.078125,\n",
    "        94.171875,\n",
    "        94.28125,\n",
    "        94.375,\n",
    "        94.484375,\n",
    "        94.59375,\n",
    "        94.703125,\n",
    "        94.8125,\n",
    "        94.90625,\n",
    "        95.015625,\n",
    "        95.109375,\n",
    "        95.21875,\n",
    "        95.328125,\n",
    "        95.421875,\n",
    "        95.53125,\n",
    "        95.640625,\n",
    "        95.75,\n",
    "        95.859375,\n",
    "        95.953125,\n",
    "        96.0625,\n",
    "        96.171875,\n",
    "        96.265625,\n",
    "        96.375,\n",
    "        96.484375,\n",
    "        96.59375,\n",
    "        96.6875,\n",
    "        96.8125,\n",
    "        96.90625,\n",
    "        97.015625,\n",
    "        97.109375,\n",
    "        97.21875,\n",
    "        97.328125,\n",
    "        97.4375,\n",
    "        97.53125,\n",
    "        97.640625,\n",
    "        97.75,\n",
    "        97.859375,\n",
    "        97.953125,\n",
    "        98.046875,\n",
    "        98.171875,\n",
    "        98.265625,\n",
    "        98.375,\n",
    "        98.484375,\n",
    "        98.59375,\n",
    "        98.6875,\n",
    "        98.8125,\n",
    "        98.90625,\n",
    "        99.015625,\n",
    "        99.109375,\n",
    "        99.21875,\n",
    "        99.3125,\n",
    "        99.421875,\n",
    "        99.53125,\n",
    "        99.640625,\n",
    "        99.75,\n",
    "        99.84375,\n",
    "        99.953125,\n",
    "        100.0625,\n",
    "        100.15625,\n",
    "        100.265625,\n",
    "        100.375,\n",
    "        100.46875,\n",
    "        100.59375,\n",
    "        100.6875,\n",
    "        100.796875,\n",
    "        100.90625,\n",
    "        101.0,\n",
    "        101.109375,\n",
    "        101.203125,\n",
    "        101.328125,\n",
    "        101.421875,\n",
    "        101.53125,\n",
    "        101.625,\n",
    "        101.734375,\n",
    "        101.84375,\n",
    "        101.9375,\n",
    "        102.046875,\n",
    "        102.15625,\n",
    "        102.265625,\n",
    "        102.375,\n",
    "        102.46875,\n",
    "        102.578125,\n",
    "        102.6875,\n",
    "        102.78125,\n",
    "        102.890625,\n",
    "        102.984375,\n",
    "        103.109375,\n",
    "        103.1875,\n",
    "        103.3125,\n",
    "        103.40625,\n",
    "        103.515625,\n",
    "        103.625,\n",
    "        103.71875,\n",
    "        103.84375,\n",
    "        103.953125,\n",
    "        104.03125,\n",
    "        104.15625,\n",
    "        104.25,\n",
    "        104.375,\n",
    "        104.46875,\n",
    "        104.578125,\n",
    "        104.671875,\n",
    "        104.78125,\n",
    "        104.890625,\n",
    "    ]\n",
    "]\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in net income\": net_income,\n",
    "    }\n",
    ")\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in net income\",\n",
    "    color_discrete_sequence=[BLUE_PRIMARY],\n",
    "    title=\"Figure 1: Change in Net Income for a Single Parent of a 5 year old\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Household head employment income ($)\",\n",
    "    yaxis_title=\"Change in net income ($)\",\n",
    "    xaxis_tickformat=\",\",\n",
    "    yaxis_tickformat=\",\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "e8335e5c",
   "metadata": {},
   "source": [
    "While this household now qualifies for the $1,000 CTC, they will not be eligible for the maximum amount at any income level. Since the household’s tax liability does not reach $1,000 until the CTC begins to phase out at $43,000, the maximum benefit that the household will receive from the CTC is $699.\n",
    "\n",
    "For an elderly couple where one spouse earns $60,000 from their job and the other receives $30,000 from Social Security, their [net income increases by $293.](https://legacy.policyengine.org/us/household?focus=householdOutput.netIncome&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) The reduction of the income tax rate would decrease their tax liability by $43, while increasing the Social Security credit’s phaseout threshold would allow the household to receive $250 more from the credit. Figure 2 shows the change in net income for this household as earnings rise.  \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 128,
   "id": "c3394f4a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[  0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.         0.         0.         0.         0.\n",
      "   0.         0.        17.839844  36.83203   55.82422   74.82031\n",
      "  93.81641  112.8125   131.8086   150.80078  169.79688  188.79297\n",
      " 207.78516  226.77734  245.77344  264.76953  283.76562  302.7578\n",
      " 321.7539   340.7461   359.7422   378.73828  397.73438  416.72656\n",
      " 435.72266  454.71484  473.71094  492.70703  511.69922  530.6953\n",
      " 549.6875   568.6836   587.6797   606.6758   625.66797  644.66406\n",
      " 663.65625  682.65234  701.64844  720.6406   703.5586   682.66406\n",
      " 661.77344  640.8789   619.9844   599.09375  578.2031   557.3086\n",
      " 536.41406  515.52344  494.6289   473.73828  452.84375  431.94922\n",
      " 411.0547   390.16406  369.27344  348.375    327.48828  306.59375\n",
      " 285.69922  264.8047   243.91016  223.02344  202.125    181.23438\n",
      " 160.33984  139.44531  118.55469   97.66406   76.76953   55.875\n",
      "  34.98047   26.5625    26.667969  26.773438  26.878906  26.984375\n",
      "  27.085938  27.195312  27.296875  27.402344  27.507812  27.613281\n",
      "  27.71875   27.820312  27.925781  28.03125   28.136719  28.242188\n",
      "  28.34375   28.453125  28.554688  28.664062  28.765625  28.871094\n",
      "  28.976562  29.082031  29.1875    29.292969  29.398438  29.5\n",
      "  29.609375  29.710938  29.820312  29.921875  30.023438  30.132812\n",
      "  30.238281  30.339844  30.445312  30.550781  30.65625   30.757812\n",
      "  30.867188  30.96875   31.078125  31.183594  31.289062  31.390625\n",
      "  31.496094  31.601562  31.710938  31.8125    31.917969  32.023438\n",
      "  32.125     32.234375  32.335938  32.4375    32.546875  32.648438\n",
      "  32.757812  32.859375  32.96875   33.070312  33.171875  33.28125\n",
      "  33.38672   33.492188  33.59375   33.703125  33.804688  33.910156\n",
      "  34.015625  34.125     34.226562  34.33203   34.4375    34.54297\n",
      "  34.64453   34.75      34.85547   34.964844  35.0625    35.171875\n",
      "  35.277344  35.382812  35.484375  35.59375   35.695312  35.796875\n",
      "  35.90625   36.015625  36.11328   36.21875   36.32422   36.433594\n",
      "  36.535156  36.64453   36.75      36.851562  36.95703   37.0625\n",
      "  37.16797   37.26953   37.375     37.48047   37.585938  37.6875\n",
      "  37.796875  37.902344  38.007812  38.109375  38.21875   38.320312\n",
      "  38.42578   38.53125   38.640625  38.73828   38.847656  38.953125\n",
      "  39.058594  39.160156  39.265625  39.375     39.476562  39.578125\n",
      "  39.6875    39.789062  39.890625  40.        40.109375  40.21875\n",
      "  40.3125    40.421875  40.523438  40.632812  40.734375  40.835938\n",
      "  40.945312  41.046875  41.15625   41.265625  41.359375  41.46875\n",
      "  41.578125  41.679688  41.78125   41.890625  41.992188  42.09375\n",
      "  42.203125  42.3125    42.421875  42.515625  42.625     42.734375\n",
      "  42.835938  42.9375    43.046875  43.148438  43.25      43.359375\n",
      "  43.46875   43.578125  43.679688  43.78125   43.882812  43.992188\n",
      "  44.09375   44.203125  44.304688  44.40625   44.515625  44.617188\n",
      "  44.71875   44.835938  44.929688  45.039062  45.148438  45.25\n",
      "  45.351562  45.46875   45.5625    45.671875  45.78125   45.875\n",
      "  45.984375  46.085938  46.1875    46.296875  46.40625   46.507812\n",
      "  46.609375  46.71875   46.820312  46.929688  47.03125   47.140625\n",
      "  47.242188  47.351562  47.460938  47.5625    47.664062  47.773438\n",
      "  47.875     47.976562  48.085938  48.1875    48.296875  48.398438\n",
      "  48.507812  48.609375  48.710938  48.820312  48.929688  49.03125\n",
      "  49.140625  49.234375  49.34375   49.453125  49.554688  49.65625\n",
      "  49.765625  49.867188  49.976562  50.078125  50.1875    50.289062\n",
      "  50.398438  50.5       50.601562  50.710938  50.820312  50.921875\n",
      "  51.023438  51.125     51.234375  51.34375   51.4375    51.554688\n",
      "  51.65625   51.757812  51.867188  51.96875   52.078125  52.1875\n",
      "  52.28125   52.390625  52.5       52.601562  52.703125  52.8125\n",
      "  52.90625   53.015625  53.125     53.226562  53.328125  53.445312\n",
      "  53.546875  53.648438  53.757812  53.859375  53.960938  54.078125\n",
      "  54.171875  54.28125   54.382812  54.484375  54.59375   54.695312\n",
      "  54.804688  54.914062  55.007812  55.117188  55.226562  55.328125\n",
      "  55.429688  55.546875  55.648438  55.75      55.859375  55.953125\n",
      "  56.0625    56.171875  56.265625  56.375     56.484375  56.585938\n",
      "  56.695312  56.796875  56.90625   57.007812  57.117188  57.21875\n",
      "  57.328125  57.429688  57.539062  57.640625  57.742188  57.851562\n",
      "  57.953125  58.054688  58.164062  58.265625  58.375     58.476562\n",
      "  58.585938  58.6875    58.796875  58.898438  59.007812  59.109375\n",
      "  59.21875   59.320312  59.421875  59.53125   59.632812  59.734375\n",
      "  59.84375   59.945312  60.046875  60.15625   60.257812  60.367188\n",
      "  60.476562  60.578125  60.679688  60.789062  60.898438  61.\n",
      "  61.109375  61.203125  61.3125    61.421875  61.515625  61.632812\n",
      "  61.734375  61.84375   61.945312  62.054688  62.148438  62.265625\n",
      "  62.367188  62.46875   62.578125  62.671875  62.78125   62.890625\n",
      "  62.992188  63.101562  63.203125  63.3125    63.414062  63.515625\n",
      "  63.625     63.734375  63.835938  63.945312  64.03906   64.140625\n",
      "  64.25      64.359375  64.46875   64.57031   64.67969   64.77344\n",
      "  64.88281   64.984375  65.09375   65.19531   65.296875  65.40625\n",
      "  65.50781   65.61719   65.72656   65.828125  65.9375    66.03125\n",
      "  66.140625  66.25      66.359375  66.46094   66.5625    66.66406\n",
      "  66.77344   66.88281   66.984375  67.08594   67.19531   67.296875\n",
      "  67.40625   67.50781   67.61719   67.71875   67.828125  67.921875\n",
      "  68.03125   68.140625  68.25      68.34375   68.44531   68.55469\n",
      "  68.66406   68.765625  68.875     68.97656   69.08594   69.1875\n",
      "  69.28906   69.390625  69.50781   69.60156   69.71094   69.8125\n",
      "  69.921875  70.02344   70.140625  70.24219   70.34375   70.453125\n",
      "  70.55469   70.65625   70.75781   70.86719   70.96875   71.078125\n",
      "  71.17969   71.28906   71.390625  71.49219   71.609375  71.71094\n",
      "  71.8125    71.91406   72.02344   72.13281   72.22656   72.33594\n",
      "  72.44531   72.546875  72.64844   72.75781   72.859375  72.96875\n",
      "  73.07031   73.171875  73.28125   73.38281   73.484375  73.59375\n",
      "  73.703125  73.80469   73.90625   74.015625  74.125     74.234375\n",
      "  74.33594   74.42969   74.53906   74.64844   74.75781   74.859375\n",
      "  74.96094   75.0625    75.171875  75.28125   75.38281   75.484375\n",
      "  75.59375   75.703125  75.80469   75.90625   76.015625  76.11719\n",
      "  76.22656   76.328125  76.42969   76.53906   76.640625  76.74219\n",
      "  76.85156   76.96094   77.0625    77.171875  77.27344   77.38281\n",
      "  77.47656   77.58594   77.69531   77.796875  77.89844   78.00781\n",
      "  78.109375  78.21875   78.32031   78.42969   78.53906   78.63281\n",
      "  78.734375  78.85156   78.953125  79.05469   79.15625   79.265625\n",
      "  79.375     79.484375  79.578125  79.6875    79.796875  79.89844\n",
      "  80.        80.10156   80.203125  80.32031   80.421875  80.52344\n",
      "  80.625     80.734375  80.84375   80.94531   81.046875  81.15625\n",
      "  81.265625  81.36719   81.46875   81.578125  81.67969   81.78906\n",
      "  81.890625  82.        82.109375  82.203125  82.3125    82.421875\n",
      "  82.52344   82.625     82.72656   82.83594   82.94531   83.046875\n",
      "  83.14844   83.25      83.359375  83.46875   83.578125  83.67969\n",
      "  83.78125   83.890625  84.        84.09375   84.203125  84.296875\n",
      "  84.40625   84.515625  84.625     84.71875   84.828125  84.9375\n",
      "  85.046875  85.140625  85.25      85.359375  85.46094   85.57031\n",
      "  85.671875  85.77344   85.88281   85.984375  86.09375   86.19531\n",
      "  86.30469   86.40625   86.50781   86.625     86.71875   86.828125\n",
      "  86.92969   87.03125   87.140625  87.24219   87.35156   87.453125\n",
      "  87.5625    87.671875  87.77344   87.875     87.984375  88.078125\n",
      "  88.1875    88.296875  88.39844   88.50781   88.609375  88.71875\n",
      "  88.82031   88.92969   89.03125   89.125     89.24219   89.35156\n",
      "  89.453125  89.55469   89.65625   89.765625  89.875     89.96875\n",
      "  90.078125  90.1875    90.296875  90.390625  90.5       90.59375\n",
      "  90.703125  90.828125  90.9375    91.03125   91.140625  91.234375\n",
      "  91.34375   91.4375    91.546875  91.65625   91.765625  91.875\n",
      "  91.96875   92.078125  92.171875  92.28125   92.390625  92.5\n",
      "  92.59375   92.703125  92.8125    92.921875  93.015625  93.125\n",
      "  93.234375  93.328125  93.4375    93.546875  93.65625   93.75\n",
      "  93.859375  93.96875   94.078125  94.171875  94.28125   94.375\n",
      "  94.484375  94.59375   94.703125  94.8125    94.90625   95.015625\n",
      "  95.109375  95.21875   95.328125  95.421875  95.53125   95.640625\n",
      "  95.75      95.859375  95.953125  96.0625    96.171875  96.265625\n",
      "  96.375     96.484375  96.59375   96.6875    96.8125    96.90625\n",
      "  97.015625  97.109375  97.21875   97.328125  97.4375    97.53125\n",
      "  97.640625  97.75      97.859375  97.953125  98.046875  98.171875\n",
      "  98.265625  98.375     98.484375  98.59375   98.6875    98.8125\n",
      "  98.90625   99.015625  99.109375  99.21875   99.3125    99.421875\n",
      "  99.53125   99.640625  99.75      99.84375   99.953125 100.0625\n",
      " 100.15625  100.265625 100.375    100.46875  100.59375  100.6875\n",
      " 100.796875 100.90625  101.       101.109375 101.203125 101.328125\n",
      " 101.421875 101.53125  101.625    101.734375 101.84375  101.9375\n",
      " 102.046875 102.15625  102.265625 102.375    102.46875  102.578125\n",
      " 102.6875   102.78125  102.890625 102.984375 103.109375 103.1875\n",
      " 103.3125   103.40625  103.515625 103.625    103.71875  103.84375\n",
      " 103.953125 104.03125  104.15625  104.25     104.375    104.46875\n",
      " 104.578125 104.671875 104.78125  104.890625]\n"
     ]
    }
   ],
   "source": [
    "from policyengine_us import Simulation\n",
    "from policyengine_core.reforms import Reform\n",
    "\n",
    "baseline = Reform.from_dict(\n",
    "    {\n",
    "        \"gov.states.ut.tax.income.rate\": {\"2025-01-01.2100-12-31\": 0.0455},\n",
    "        \"gov.states.ut.tax.income.credits.ctc.child_age_threshold[0].amount\": {\n",
    "            \"2025-01-01.2100-12-31\": False\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ctc.child_age_threshold[2].threshold\": {\n",
    "            \"2025-01-01.2100-12-31\": 5\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ss_benefits.phase_out.threshold.JOINT\": {\n",
    "            \"2025-01-01.2100-12-31\": 75000\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ss_benefits.phase_out.threshold.SINGLE\": {\n",
    "            \"2025-01-01.2100-12-31\": 45000\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ss_benefits.phase_out.threshold.SEPARATE\": {\n",
    "            \"2025-01-01.2100-12-31\": 37500\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ss_benefits.phase_out.threshold.SURVIVING_SPOUSE\": {\n",
    "            \"2025-01-01.2100-12-31\": 75000\n",
    "        },\n",
    "        \"gov.states.ut.tax.income.credits.ss_benefits.phase_out.threshold.HEAD_OF_HOUSEHOLD\": {\n",
    "            \"2025-01-01.2100-12-31\": 75000\n",
    "        },\n",
    "    },\n",
    "    country_id=\"us\",\n",
    ")\n",
    "\n",
    "\n",
    "situation = {\n",
    "    \"people\": {\n",
    "        \"you\": {\"age\": {\"2025\": 35}},\n",
    "        \"your first dependent\": {\"age\": {\"2025\": 5}},\n",
    "    },\n",
    "    \"families\": {\"your family\": {\"members\": [\"you\", \"your first dependent\"]}},\n",
    "    \"spm_units\": {\n",
    "        \"your household\": {\"members\": [\"you\", \"your first dependent\"]}\n",
    "    },\n",
    "    \"tax_units\": {\n",
    "        \"your tax unit\": {\"members\": [\"you\", \"your first dependent\"]}\n",
    "    },\n",
    "    \"households\": {\n",
    "        \"your household\": {\n",
    "            \"members\": [\"you\", \"your first dependent\"],\n",
    "            \"state_name\": {\"2025\": \"UT\"},\n",
    "        }\n",
    "    },\n",
    "    \"marital_units\": {\n",
    "        \"your marital unit\": {\"members\": [\"you\"]},\n",
    "        \"your first dependent's marital unit\": {\n",
    "            \"members\": [\"your first dependent\"],\n",
    "            \"marital_unit_id\": {\"2025\": 1},\n",
    "        },\n",
    "    },\n",
    "    \"axes\": [\n",
    "        [{\"name\": \"employment_income\", \"count\": 1000, \"min\": 0, \"max\": 200000}]\n",
    "    ],\n",
    "}\n",
    "simulation = Simulation(situation=situation)\n",
    "simulation_reform = Simulation(situation=situation, reform=baseline)\n",
    "\n",
    "output = simulation.calculate(\"household_net_income\", 2025)\n",
    "income_reform = simulation_reform.calculate(\"household_net_income\", 2025)\n",
    "change_in_net_income = output - income_reform\n",
    "print(change_in_net_income)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 129,
   "id": "c68665d9",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.839844,36.83203,55.82422,74.82031,93.81641,112.8125,131.8086,150.80078,169.79688,188.79297,207.78516,226.77734,245.77344,264.76953,283.76562,302.7578,321.7539,340.7461,359.7422,378.73828,397.73438,416.72656,435.72266,454.71484,473.71094,492.70703,511.69922,530.6953,549.6875,568.6836,587.6797,606.6758,625.66797,644.66406,663.65625,682.65234,701.64844,720.6406,703.5586,682.66406,661.77344,640.8789,619.9844,599.09375,578.2031,557.3086,536.41406,515.52344,494.6289,473.73828,452.84375,431.94922,411.0547,390.16406,369.27344,348.375,327.48828,306.59375,285.69922,264.8047,243.91016,223.02344,202.125,181.23438,160.33984,139.44531,118.55469,97.66406,76.76953,55.875,34.98047,26.5625,26.667969,26.773438,26.878906,26.984375,27.085938,27.195312,27.296875,27.402344,27.507812,27.613281,27.71875,27.820312,27.925781,28.03125,28.136719,28.242188,28.34375,28.453125,28.554688,28.664062,28.765625,28.871094,28.976562,29.082031,29.1875,29.292969,29.398438,29.5,29.609375,29.710938,29.820312,29.921875,30.023438,30.132812,30.238281,30.339844,30.445312,30.550781,30.65625,30.757812,30.867188,30.96875,31.078125,31.183594,31.289062,31.390625,31.496094,31.601562,31.710938,31.8125,31.917969,32.023438,32.125,32.234375,32.335938,32.4375,32.546875,32.648438,32.757812,32.859375,32.96875,33.070312,33.171875,33.28125,33.38672,33.492188,33.59375,33.703125,33.804688,33.910156,34.015625,34.125,34.226562,34.33203,34.4375,34.54297,34.64453,34.75,34.85547,34.964844,35.0625,35.171875,35.277344,35.382812,35.484375,35.59375,35.695312,35.796875,35.90625,36.015625,36.11328,36.21875,36.32422,36.433594,36.535156,36.64453,36.75,36.851562,36.95703,37.0625,37.16797,37.26953,37.375,37.48047,37.585938,37.6875,37.796875,37.902344,38.007812,38.109375,38.21875,38.320312,38.42578,38.53125,38.640625,38.73828,38.847656,38.953125,39.058594,39.160156,39.265625,39.375,39.476562,39.578125,39.6875,39.789062,39.890625,40.0,40.109375,40.21875,40.3125,40.421875,40.523438,40.632812,40.734375,40.835938,40.945312,41.046875,41.15625,41.265625,41.359375,41.46875,41.578125,41.679688,41.78125,41.890625,41.992188,42.09375,42.203125,42.3125,42.421875,42.515625,42.625,42.734375,42.835938,42.9375,43.046875,43.148438,43.25,43.359375,43.46875,43.578125,43.679688,43.78125,43.882812,43.992188,44.09375,44.203125,44.304688,44.40625,44.515625,44.617188,44.71875,44.835938,44.929688,45.039062,45.148438,45.25,45.351562,45.46875,45.5625,45.671875,45.78125,45.875,45.984375,46.085938,46.1875,46.296875,46.40625,46.507812,46.609375,46.71875,46.820312,46.929688,47.03125,47.140625,47.242188,47.351562,47.460938,47.5625,47.664062,47.773438,47.875,47.976562,48.085938,48.1875,48.296875,48.398438,48.507812,48.609375,48.710938,48.820312,48.929688,49.03125,49.140625,49.234375,49.34375,49.453125,49.554688,49.65625,49.765625,49.867188,49.976562,50.078125,50.1875,50.289062,50.398438,50.5,50.601562,50.710938,50.820312,50.921875,51.023438,51.125,51.234375,51.34375,51.4375,51.554688,51.65625,51.757812,51.867188,51.96875,52.078125,52.1875,52.28125,52.390625,52.5,52.601562,52.703125,52.8125,52.90625,53.015625,53.125,53.226562,53.328125,53.445312,53.546875,53.648438,53.757812,53.859375,53.960938,54.078125,54.171875,54.28125,54.382812,54.484375,54.59375,54.695312,54.804688,54.914062,55.007812,55.117188,55.226562,55.328125,55.429688,55.546875,55.648438,55.75,55.859375,55.953125,56.0625,56.171875,56.265625,56.375,56.484375,56.585938,56.695312,56.796875,56.90625,57.007812,57.117188,57.21875,57.328125,57.429688,57.539062,57.640625,57.742188,57.851562,57.953125,58.054688,58.164062,58.265625,58.375,58.476562,58.585938,58.6875,58.796875,58.898438,59.007812,59.109375,59.21875,59.320312,59.421875,59.53125,59.632812,59.734375,59.84375,59.945312,60.046875,60.15625,60.257812,60.367188,60.476562,60.578125,60.679688,60.789062,60.898438,61.0,61.109375,61.203125,61.3125,61.421875,61.515625,61.632812,61.734375,61.84375,61.945312,62.054688,62.148438,62.265625,62.367188,62.46875,62.578125,62.671875,62.78125,62.890625,62.992188,63.101562,63.203125,63.3125,63.414062,63.515625,63.625,63.734375,63.835938,63.945312,64.03906,64.140625,64.25,64.359375,64.46875,64.57031,64.67969,64.77344,64.88281,64.984375,65.09375,65.19531,65.296875,65.40625,65.50781,65.61719,65.72656,65.828125,65.9375,66.03125,66.140625,66.25,66.359375,66.46094,66.5625,66.66406,66.77344,66.88281,66.984375,67.08594,67.19531,67.296875,67.40625,67.50781,67.61719,67.71875,67.828125,67.921875,68.03125,68.140625,68.25,68.34375,68.44531,68.55469,68.66406,68.765625,68.875,68.97656,69.08594,69.1875,69.28906,69.390625,69.50781,69.60156,69.71094,69.8125,69.921875,70.02344,70.140625,70.24219,70.34375,70.453125,70.55469,70.65625,70.75781,70.86719,70.96875,71.078125,71.17969,71.28906,71.390625,71.49219,71.609375,71.71094,71.8125,71.91406,72.02344,72.13281,72.22656,72.33594,72.44531,72.546875,72.64844,72.75781,72.859375,72.96875,73.07031,73.171875,73.28125,73.38281,73.484375,73.59375,73.703125,73.80469,73.90625,74.015625,74.125,74.234375,74.33594,74.42969,74.53906,74.64844,74.75781,74.859375,74.96094,75.0625,75.171875,75.28125,75.38281,75.484375,75.59375,75.703125,75.80469,75.90625,76.015625,76.11719,76.22656,76.328125,76.42969,76.53906,76.640625,76.74219,76.85156,76.96094,77.0625,77.171875,77.27344,77.38281,77.47656,77.58594,77.69531,77.796875,77.89844,78.00781,78.109375,78.21875,78.32031,78.42969,78.53906,78.63281,78.734375,78.85156,78.953125,79.05469,79.15625,79.265625,79.375,79.484375,79.578125,79.6875,79.796875,79.89844,80.0,80.10156,80.203125,80.32031,80.421875,80.52344,80.625,80.734375,80.84375,80.94531,81.046875,81.15625,81.265625,81.36719,81.46875,81.578125,81.67969,81.78906,81.890625,82.0,82.109375,82.203125,82.3125,82.421875,82.52344,82.625,82.72656,82.83594,82.94531,83.046875,83.14844,83.25,83.359375,83.46875,83.578125,83.67969,83.78125,83.890625,84.0,84.09375,84.203125,84.296875,84.40625,84.515625,84.625,84.71875,84.828125,84.9375,85.046875,85.140625,85.25,85.359375,85.46094,85.57031,85.671875,85.77344,85.88281,85.984375,86.09375,86.19531,86.30469,86.40625,86.50781,86.625,86.71875,86.828125,86.92969,87.03125,87.140625,87.24219,87.35156,87.453125,87.5625,87.671875,87.77344,87.875,87.984375,88.078125,88.1875,88.296875,88.39844,88.50781,88.609375,88.71875,88.82031,88.92969,89.03125,89.125,89.24219,89.35156,89.453125,89.55469,89.65625,89.765625,89.875,89.96875,90.078125,90.1875,90.296875,90.390625,90.5,90.59375,90.703125,90.828125,90.9375,91.03125,91.140625,91.234375,91.34375,91.4375,91.546875,91.65625,91.765625,91.875,91.96875,92.078125,92.171875,92.28125,92.390625,92.5,92.59375,92.703125,92.8125,92.921875,93.015625,93.125,93.234375,93.328125,93.4375,93.546875,93.65625,93.75,93.859375,93.96875,94.078125,94.171875,94.28125,94.375,94.484375,94.59375,94.703125,94.8125,94.90625,95.015625,95.109375,95.21875,95.328125,95.421875,95.53125,95.640625,95.75,95.859375,95.953125,96.0625,96.171875,96.265625,96.375,96.484375,96.59375,96.6875,96.8125,96.90625,97.015625,97.109375,97.21875,97.328125,97.4375,97.53125,97.640625,97.75,97.859375,97.953125,98.046875,98.171875,98.265625,98.375,98.484375,98.59375,98.6875,98.8125,98.90625,99.015625,99.109375,99.21875,99.3125,99.421875,99.53125,99.640625,99.75,99.84375,99.953125,100.0625,100.15625,100.265625,100.375,100.46875,100.59375,100.6875,100.796875,100.90625,101.0,101.109375,101.203125,101.328125,101.421875,101.53125,101.625,101.734375,101.84375,101.9375,102.046875,102.15625,102.265625,102.375,102.46875,102.578125,102.6875,102.78125,102.890625,102.984375,103.109375,103.1875,103.3125,103.40625,103.515625,103.625,103.71875,103.84375,103.953125,104.03125,104.15625,104.25,104.375,104.46875,104.578125,104.671875,104.78125,104.890625]\n"
     ]
    }
   ],
   "source": [
    "print(\"[\" + \",\".join(map(str, change_in_net_income)) + \"]\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 130,
   "id": "2c74841d",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n",
      " 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]\n"
     ]
    }
   ],
   "source": [
    "baseline_ss_credit = simulation.calculate(\n",
    "    \"ut_ss_benefits_credit\", map_to=\"household\", period=2025\n",
    ")\n",
    "reform_ss_credit = simulation_reform.calculate(\n",
    "    \"ut_ss_benefits_credit\", map_to=\"household\", period=2025\n",
    ")\n",
    "difference_credit = baseline_ss_credit - reform_ss_credit\n",
    "print(difference_credit.round(0))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "id": "a8ba8024",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income=%{x}\\u003cbr\\u003eChange in net income=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,17000,18000,19000,20000,21000,22000,23000,24000,25000,26000,27000,28000,29000,30000,31000,32000,33000,34000,35000,36000,37000,38000,39000,40000,41000,42000,43000,44000,45000,46000,47000,48000,49000,50000,51000,52000,53000,54000,55000,56000,57000,58000,59000,60000,61000,62000,63000,64000,65000,66000,67000,68000,69000,70000,71000,72000,73000,74000,75000,76000,77000,78000,79000,80000,81000,82000,83000,84000,85000,86000,87000,88000,89000,90000,91000,92000,93000,94000,95000,96000,97000,98000,99000,100000,101000,102000,103000,104000,105000,106000,107000,108000,109000,110000,111000,112000,113000,114000,115000,116000,117000,118000,119000,120000,121000,122000,123000,124000,125000,126000,127000,128000,129000,130000,131000,132000,133000,134000,135000,136000,137000,138000,139000,140000,141000,142000,143000,144000,145000,146000,147000,148000,149000,150000,151000,152000,153000,154000,155000,156000,157000,158000,159000,160000,161000,162000,163000,164000,165000,166000,167000,168000,169000,170000,171000,172000,173000,174000,175000,176000,177000,178000,179000,180000,181000,182000,183000,184000,185000,186000,187000,188000,189000,190000,191000,192000,193000,194000,195000,196000,197000,198000,199000,200000],\"xaxis\":\"x\",\"y\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,20,21,21,22,22,23,23,24,24,25,25,73,106,133,160,187,214,241,268,295,322,348,375,402,408,408,409,409,410,410,411,411,412,412,413,413,414,415,415,416,416,417,417,418,418,419,419,420,420,421,421,422,422,423,397,371,345,319,293,268,242,216,190,164,139,113,87,68,69,69,70,70,71,71,72,72,73,73,74,74,75,75,76,77,77,78,78,79,79,80,80,81,81,82,82,83,83,84,84,85,85,86,87,87,88,88,89,89,90,90,91,91,92,92,93,93,94,94,95,95,96,97,97,98,98,99,99,100,100,101,101,102,102,103,103,104,104,105,106,106,107,107,108,108,109,109,110,110,111,111,112,112,113,113,114,114,115,116,116,117,117,118],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Household head employment income ($)\"},\"tickformat\":\",\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Figure 2: Change in Net Income for an Elderly Married Couple with \\u003cbr\\u003e$30,000 in Social Security Benefits\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 131,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "employment_income = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0,\n",
    "        1000,\n",
    "        2000,\n",
    "        3000,\n",
    "        4000,\n",
    "        5000,\n",
    "        6000,\n",
    "        7000,\n",
    "        8000,\n",
    "        9000,\n",
    "        10000,\n",
    "        11000,\n",
    "        12000,\n",
    "        13000,\n",
    "        14000,\n",
    "        15000,\n",
    "        16000,\n",
    "        17000,\n",
    "        18000,\n",
    "        19000,\n",
    "        20000,\n",
    "        21000,\n",
    "        22000,\n",
    "        23000,\n",
    "        24000,\n",
    "        25000,\n",
    "        26000,\n",
    "        27000,\n",
    "        28000,\n",
    "        29000,\n",
    "        30000,\n",
    "        31000,\n",
    "        32000,\n",
    "        33000,\n",
    "        34000,\n",
    "        35000,\n",
    "        36000,\n",
    "        37000,\n",
    "        38000,\n",
    "        39000,\n",
    "        40000,\n",
    "        41000,\n",
    "        42000,\n",
    "        43000,\n",
    "        44000,\n",
    "        45000,\n",
    "        46000,\n",
    "        47000,\n",
    "        48000,\n",
    "        49000,\n",
    "        50000,\n",
    "        51000,\n",
    "        52000,\n",
    "        53000,\n",
    "        54000,\n",
    "        55000,\n",
    "        56000,\n",
    "        57000,\n",
    "        58000,\n",
    "        59000,\n",
    "        60000,\n",
    "        61000,\n",
    "        62000,\n",
    "        63000,\n",
    "        64000,\n",
    "        65000,\n",
    "        66000,\n",
    "        67000,\n",
    "        68000,\n",
    "        69000,\n",
    "        70000,\n",
    "        71000,\n",
    "        72000,\n",
    "        73000,\n",
    "        74000,\n",
    "        75000,\n",
    "        76000,\n",
    "        77000,\n",
    "        78000,\n",
    "        79000,\n",
    "        80000,\n",
    "        81000,\n",
    "        82000,\n",
    "        83000,\n",
    "        84000,\n",
    "        85000,\n",
    "        86000,\n",
    "        87000,\n",
    "        88000,\n",
    "        89000,\n",
    "        90000,\n",
    "        91000,\n",
    "        92000,\n",
    "        93000,\n",
    "        94000,\n",
    "        95000,\n",
    "        96000,\n",
    "        97000,\n",
    "        98000,\n",
    "        99000,\n",
    "        100000,\n",
    "        101000,\n",
    "        102000,\n",
    "        103000,\n",
    "        104000,\n",
    "        105000,\n",
    "        106000,\n",
    "        107000,\n",
    "        108000,\n",
    "        109000,\n",
    "        110000,\n",
    "        111000,\n",
    "        112000,\n",
    "        113000,\n",
    "        114000,\n",
    "        115000,\n",
    "        116000,\n",
    "        117000,\n",
    "        118000,\n",
    "        119000,\n",
    "        120000,\n",
    "        121000,\n",
    "        122000,\n",
    "        123000,\n",
    "        124000,\n",
    "        125000,\n",
    "        126000,\n",
    "        127000,\n",
    "        128000,\n",
    "        129000,\n",
    "        130000,\n",
    "        131000,\n",
    "        132000,\n",
    "        133000,\n",
    "        134000,\n",
    "        135000,\n",
    "        136000,\n",
    "        137000,\n",
    "        138000,\n",
    "        139000,\n",
    "        140000,\n",
    "        141000,\n",
    "        142000,\n",
    "        143000,\n",
    "        144000,\n",
    "        145000,\n",
    "        146000,\n",
    "        147000,\n",
    "        148000,\n",
    "        149000,\n",
    "        150000,\n",
    "        151000,\n",
    "        152000,\n",
    "        153000,\n",
    "        154000,\n",
    "        155000,\n",
    "        156000,\n",
    "        157000,\n",
    "        158000,\n",
    "        159000,\n",
    "        160000,\n",
    "        161000,\n",
    "        162000,\n",
    "        163000,\n",
    "        164000,\n",
    "        165000,\n",
    "        166000,\n",
    "        167000,\n",
    "        168000,\n",
    "        169000,\n",
    "        170000,\n",
    "        171000,\n",
    "        172000,\n",
    "        173000,\n",
    "        174000,\n",
    "        175000,\n",
    "        176000,\n",
    "        177000,\n",
    "        178000,\n",
    "        179000,\n",
    "        180000,\n",
    "        181000,\n",
    "        182000,\n",
    "        183000,\n",
    "        184000,\n",
    "        185000,\n",
    "        186000,\n",
    "        187000,\n",
    "        188000,\n",
    "        189000,\n",
    "        190000,\n",
    "        191000,\n",
    "        192000,\n",
    "        193000,\n",
    "        194000,\n",
    "        195000,\n",
    "        196000,\n",
    "        197000,\n",
    "        198000,\n",
    "        199000,\n",
    "        200000,\n",
    "    ]\n",
    "]\n",
    "net_income_change = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        9.027344,\n",
    "        20.03125,\n",
    "        20.554688,\n",
    "        21.085938,\n",
    "        21.609375,\n",
    "        22.140625,\n",
    "        22.65625,\n",
    "        23.1875,\n",
    "        23.71875,\n",
    "        24.242188,\n",
    "        24.773438,\n",
    "        25.304688,\n",
    "        73.46094,\n",
    "        106.49219,\n",
    "        133.375,\n",
    "        160.25781,\n",
    "        187.14062,\n",
    "        214.01562,\n",
    "        240.89844,\n",
    "        267.77344,\n",
    "        294.65625,\n",
    "        321.53125,\n",
    "        348.41406,\n",
    "        375.29688,\n",
    "        402.1797,\n",
    "        407.6797,\n",
    "        408.20312,\n",
    "        408.72656,\n",
    "        409.2578,\n",
    "        409.78906,\n",
    "        410.3125,\n",
    "        410.84375,\n",
    "        411.3672,\n",
    "        411.89844,\n",
    "        412.42188,\n",
    "        412.9453,\n",
    "        413.46875,\n",
    "        414.0078,\n",
    "        414.53125,\n",
    "        415.04688,\n",
    "        415.57812,\n",
    "        416.10938,\n",
    "        416.6328,\n",
    "        417.16406,\n",
    "        417.6953,\n",
    "        418.21875,\n",
    "        418.75,\n",
    "        419.27344,\n",
    "        419.79688,\n",
    "        420.32812,\n",
    "        420.85156,\n",
    "        421.3828,\n",
    "        421.91406,\n",
    "        422.4375,\n",
    "        422.60156,\n",
    "        396.76562,\n",
    "        370.9453,\n",
    "        345.125,\n",
    "        319.29688,\n",
    "        293.46875,\n",
    "        267.64062,\n",
    "        241.82031,\n",
    "        215.99219,\n",
    "        190.16406,\n",
    "        164.33594,\n",
    "        138.50781,\n",
    "        112.6875,\n",
    "        86.86719,\n",
    "        68.09375,\n",
    "        68.61719,\n",
    "        69.140625,\n",
    "        69.671875,\n",
    "        70.19531,\n",
    "        70.734375,\n",
    "        71.25,\n",
    "        71.78125,\n",
    "        72.30469,\n",
    "        72.83594,\n",
    "        73.359375,\n",
    "        73.890625,\n",
    "        74.40625,\n",
    "        74.94531,\n",
    "        75.47656,\n",
    "        76.0,\n",
    "        76.52344,\n",
    "        77.046875,\n",
    "        77.578125,\n",
    "        78.109375,\n",
    "        78.63281,\n",
    "        79.15625,\n",
    "        79.6875,\n",
    "        80.21875,\n",
    "        80.74219,\n",
    "        81.265625,\n",
    "        81.796875,\n",
    "        82.3125,\n",
    "        82.84375,\n",
    "        83.375,\n",
    "        83.90625,\n",
    "        84.421875,\n",
    "        84.953125,\n",
    "        85.46875,\n",
    "        86.015625,\n",
    "        86.53125,\n",
    "        87.0625,\n",
    "        87.59375,\n",
    "        88.109375,\n",
    "        88.640625,\n",
    "        89.1875,\n",
    "        89.71875,\n",
    "        90.234375,\n",
    "        90.765625,\n",
    "        91.28125,\n",
    "        91.8125,\n",
    "        92.34375,\n",
    "        92.859375,\n",
    "        93.390625,\n",
    "        93.921875,\n",
    "        94.4375,\n",
    "        94.96875,\n",
    "        95.484375,\n",
    "        96.015625,\n",
    "        96.5625,\n",
    "        97.078125,\n",
    "        97.609375,\n",
    "        98.125,\n",
    "        98.65625,\n",
    "        99.1875,\n",
    "        99.71875,\n",
    "        100.25,\n",
    "        100.765625,\n",
    "        101.296875,\n",
    "        101.828125,\n",
    "        102.34375,\n",
    "        102.875,\n",
    "        103.40625,\n",
    "        103.9375,\n",
    "        104.453125,\n",
    "        104.984375,\n",
    "        105.515625,\n",
    "        106.03125,\n",
    "        106.5625,\n",
    "        107.09375,\n",
    "        107.625,\n",
    "        108.15625,\n",
    "        108.6875,\n",
    "        109.1875,\n",
    "        109.71875,\n",
    "        110.265625,\n",
    "        110.78125,\n",
    "        111.3125,\n",
    "        111.84375,\n",
    "        112.359375,\n",
    "        112.890625,\n",
    "        113.40625,\n",
    "        113.9375,\n",
    "        114.46875,\n",
    "        115.0,\n",
    "        115.53125,\n",
    "        116.046875,\n",
    "        116.578125,\n",
    "        117.109375,\n",
    "        117.640625,\n",
    "    ]\n",
    "]\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in net income\": net_income_change,\n",
    "    }\n",
    ")\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in net income\",\n",
    "    color_discrete_sequence=[BLUE_PRIMARY],\n",
    "    title=\"Figure 2: Change in Net Income for an Elderly Married Couple with <br>$30,000 in Social Security Benefits\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Household head employment income ($)\",\n",
    "    yaxis_title=\"Change in net income ($)\",\n",
    "    xaxis_tickformat=\",\",\n",
    "    yaxis_tickformat=\",\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "8c688013",
   "metadata": {},
   "source": [
    "Due to the increases in the thresholds, the household will see an increase in its Social Security credit allotment from $51,000 to $110,500 in earnings (excluding Social Security benefits). However, their Social Security credit drops between $19,000 and $50,500, due to their overall tax liability dropping, resulting in the non-refundable credit offsetting less income tax. The maximum increase in the credit that this household composition would gain is $362, if their earnings are between $64,500 and $95,500 (see Figure 3). Table 1 summarizes these households and their change in net income.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 132,
   "id": "09b5359b",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"Employment Income=%{x}\\u003cbr\\u003eChange in net income=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"x\":[0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000,17000,18000,19000,20000,21000,22000,23000,24000,25000,26000,27000,28000,29000,30000,31000,32000,33000,34000,35000,36000,37000,38000,39000,40000,41000,42000,43000,44000,45000,46000,47000,48000,49000,50000,51000,52000,53000,54000,55000,56000,57000,58000,59000,60000,61000,62000,63000,64000,65000,66000,67000,68000,69000,70000,71000,72000,73000,74000,75000,76000,77000,78000,79000,80000,81000,82000,83000,84000,85000,86000,87000,88000,89000,90000,91000,92000,93000,94000,95000,96000,97000,98000,99000,100000,101000,102000,103000,104000,105000,106000,107000,108000,109000,110000,111000,112000,113000,114000,115000,116000,117000,118000,119000,120000,121000,122000,123000,124000,125000,126000,127000,128000,129000,130000,131000,132000,133000,134000,135000,136000,137000,138000,139000,140000,141000,142000,143000,144000,145000,146000,147000,148000,149000,150000,151000,152000,153000,154000,155000,156000,157000,158000,159000,160000,161000,162000,163000,164000,165000,166000,167000,168000,169000,170000,171000,172000,173000,174000,175000,176000,177000,178000,179000,180000,181000,182000,183000,184000,185000,186000,187000,188000,189000,190000,191000,192000,193000,194000,195000,196000,197000,198000,199000,200000],\"xaxis\":\"x\",\"y\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-2,-2,-2,-2,-3,-3,-3,-4,-4,-5,-5,-5,-6,-6,-7,-7,-8,-8,-9,-9,-9,-10,-10,-11,-11,-12,-12,35,67,94,120,146,173,199,226,252,278,305,331,357,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,362,336,309,283,256,230,204,177,151,125,98,72,46,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Household head employment income ($)\"},\"tickformat\":\",\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Change in net income ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Figure 3: Change in Total Social Security Credit Allotment for a \\u003cbr\\u003eMarried Couple with $30,000 in Social Security Benefits\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 132,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "employment_income = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0,\n",
    "        1000,\n",
    "        2000,\n",
    "        3000,\n",
    "        4000,\n",
    "        5000,\n",
    "        6000,\n",
    "        7000,\n",
    "        8000,\n",
    "        9000,\n",
    "        10000,\n",
    "        11000,\n",
    "        12000,\n",
    "        13000,\n",
    "        14000,\n",
    "        15000,\n",
    "        16000,\n",
    "        17000,\n",
    "        18000,\n",
    "        19000,\n",
    "        20000,\n",
    "        21000,\n",
    "        22000,\n",
    "        23000,\n",
    "        24000,\n",
    "        25000,\n",
    "        26000,\n",
    "        27000,\n",
    "        28000,\n",
    "        29000,\n",
    "        30000,\n",
    "        31000,\n",
    "        32000,\n",
    "        33000,\n",
    "        34000,\n",
    "        35000,\n",
    "        36000,\n",
    "        37000,\n",
    "        38000,\n",
    "        39000,\n",
    "        40000,\n",
    "        41000,\n",
    "        42000,\n",
    "        43000,\n",
    "        44000,\n",
    "        45000,\n",
    "        46000,\n",
    "        47000,\n",
    "        48000,\n",
    "        49000,\n",
    "        50000,\n",
    "        51000,\n",
    "        52000,\n",
    "        53000,\n",
    "        54000,\n",
    "        55000,\n",
    "        56000,\n",
    "        57000,\n",
    "        58000,\n",
    "        59000,\n",
    "        60000,\n",
    "        61000,\n",
    "        62000,\n",
    "        63000,\n",
    "        64000,\n",
    "        65000,\n",
    "        66000,\n",
    "        67000,\n",
    "        68000,\n",
    "        69000,\n",
    "        70000,\n",
    "        71000,\n",
    "        72000,\n",
    "        73000,\n",
    "        74000,\n",
    "        75000,\n",
    "        76000,\n",
    "        77000,\n",
    "        78000,\n",
    "        79000,\n",
    "        80000,\n",
    "        81000,\n",
    "        82000,\n",
    "        83000,\n",
    "        84000,\n",
    "        85000,\n",
    "        86000,\n",
    "        87000,\n",
    "        88000,\n",
    "        89000,\n",
    "        90000,\n",
    "        91000,\n",
    "        92000,\n",
    "        93000,\n",
    "        94000,\n",
    "        95000,\n",
    "        96000,\n",
    "        97000,\n",
    "        98000,\n",
    "        99000,\n",
    "        100000,\n",
    "        101000,\n",
    "        102000,\n",
    "        103000,\n",
    "        104000,\n",
    "        105000,\n",
    "        106000,\n",
    "        107000,\n",
    "        108000,\n",
    "        109000,\n",
    "        110000,\n",
    "        111000,\n",
    "        112000,\n",
    "        113000,\n",
    "        114000,\n",
    "        115000,\n",
    "        116000,\n",
    "        117000,\n",
    "        118000,\n",
    "        119000,\n",
    "        120000,\n",
    "        121000,\n",
    "        122000,\n",
    "        123000,\n",
    "        124000,\n",
    "        125000,\n",
    "        126000,\n",
    "        127000,\n",
    "        128000,\n",
    "        129000,\n",
    "        130000,\n",
    "        131000,\n",
    "        132000,\n",
    "        133000,\n",
    "        134000,\n",
    "        135000,\n",
    "        136000,\n",
    "        137000,\n",
    "        138000,\n",
    "        139000,\n",
    "        140000,\n",
    "        141000,\n",
    "        142000,\n",
    "        143000,\n",
    "        144000,\n",
    "        145000,\n",
    "        146000,\n",
    "        147000,\n",
    "        148000,\n",
    "        149000,\n",
    "        150000,\n",
    "        151000,\n",
    "        152000,\n",
    "        153000,\n",
    "        154000,\n",
    "        155000,\n",
    "        156000,\n",
    "        157000,\n",
    "        158000,\n",
    "        159000,\n",
    "        160000,\n",
    "        161000,\n",
    "        162000,\n",
    "        163000,\n",
    "        164000,\n",
    "        165000,\n",
    "        166000,\n",
    "        167000,\n",
    "        168000,\n",
    "        169000,\n",
    "        170000,\n",
    "        171000,\n",
    "        172000,\n",
    "        173000,\n",
    "        174000,\n",
    "        175000,\n",
    "        176000,\n",
    "        177000,\n",
    "        178000,\n",
    "        179000,\n",
    "        180000,\n",
    "        181000,\n",
    "        182000,\n",
    "        183000,\n",
    "        184000,\n",
    "        185000,\n",
    "        186000,\n",
    "        187000,\n",
    "        188000,\n",
    "        189000,\n",
    "        190000,\n",
    "        191000,\n",
    "        192000,\n",
    "        193000,\n",
    "        194000,\n",
    "        195000,\n",
    "        196000,\n",
    "        197000,\n",
    "        198000,\n",
    "        199000,\n",
    "        200000,\n",
    "    ]\n",
    "]\n",
    "net_income_change = [\n",
    "    round(x)\n",
    "    for x in [\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        -0.0,\n",
    "        -0.0,\n",
    "        -1.0,\n",
    "        -1.0,\n",
    "        -1.0,\n",
    "        -2.0,\n",
    "        -2.0,\n",
    "        -2.0,\n",
    "        -2.0,\n",
    "        -3.0,\n",
    "        -3.0,\n",
    "        -3.0,\n",
    "        -4.0,\n",
    "        -4.0,\n",
    "        -5.0,\n",
    "        -5.0,\n",
    "        -5.0,\n",
    "        -6.0,\n",
    "        -6.0,\n",
    "        -7.0,\n",
    "        -7.0,\n",
    "        -8.0,\n",
    "        -8.0,\n",
    "        -9.0,\n",
    "        -9.0,\n",
    "        -9.0,\n",
    "        -10.0,\n",
    "        -10.0,\n",
    "        -11.0,\n",
    "        -11.0,\n",
    "        -12.0,\n",
    "        -12.0,\n",
    "        35.0,\n",
    "        67.0,\n",
    "        94.0,\n",
    "        120.0,\n",
    "        146.0,\n",
    "        173.0,\n",
    "        199.0,\n",
    "        226.0,\n",
    "        252.0,\n",
    "        278.0,\n",
    "        305.0,\n",
    "        331.0,\n",
    "        357.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        362.0,\n",
    "        336.0,\n",
    "        309.0,\n",
    "        283.0,\n",
    "        256.0,\n",
    "        230.0,\n",
    "        204.0,\n",
    "        177.0,\n",
    "        151.0,\n",
    "        125.0,\n",
    "        98.0,\n",
    "        72.0,\n",
    "        46.0,\n",
    "        19.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "        0.0,\n",
    "    ]\n",
    "]\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Employment Income\": employment_income,\n",
    "        \"Change in net income\": net_income_change,\n",
    "    }\n",
    ")\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Employment Income\",\n",
    "    y=\"Change in net income\",\n",
    "    color_discrete_sequence=[BLUE_PRIMARY],\n",
    "    title=\"Figure 3: Change in Total Social Security Credit Allotment for a <br>Married Couple with $30,000 in Social Security Benefits\",\n",
    ").update_layout(\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis_title=\"Household head employment income ($)\",\n",
    "    yaxis_title=\"Change in net income ($)\",\n",
    "    xaxis_tickformat=\",\",\n",
    "    yaxis_tickformat=\",\",\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 133,
   "id": "dfe41d43",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "**Table 1: Change in Net Income Based on Household Composition**\n",
       "\n",
       "| Household Composition                                                          | Change in Net Income ($)   |\n",
       "|:-------------------------------------------------------------------------------|:---------------------------|\n",
       "| Single, No Children, $50,000                                                   | 61                         |\n",
       "| Single, One Child (5 year old), $50,000                                        | 277                        |\n",
       "| Married, No Children, $60,000 (Additional $30,000 in Social Security Benefits) | 1,177                      |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 133,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Create a table for the household impacts\n",
    "household_composition = [\n",
    "    \"Single, No Children, $50,000\",\n",
    "    \"Single, One Child (5 year old), $50,000\",\n",
    "    \"Married, No Children, $60,000 (Additional $30,000 in Social Security Benefits)\",\n",
    "]\n",
    "change_in_net_income = [61, 277, 1177]\n",
    "\n",
    "\n",
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Household Composition\": household_composition,\n",
    "        \"Change in Net Income ($)\": change_in_net_income,\n",
    "    }\n",
    ")\n",
    "\n",
    "df[\"Household Composition\"] = df[\"Household Composition\"]\n",
    "df[\"Change in Net Income ($)\"] = df[\"Change in Net Income ($)\"].apply(\n",
    "    add_thousands_separator\n",
    ")\n",
    "\n",
    "Markdown(\n",
    "    \"**Table 1: Change in Net Income Based on Household Composition**\\n\\n\"\n",
    "    + df.to_markdown(index=False)\n",
    ")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6c7c9b7c",
   "metadata": {},
   "source": [
    "## Statewide Impacts\n",
    "\n",
    "For tax year 2025, Utah’s latest income tax changes will [reduce state revenues by $95.5 million,](https://legacy.policyengine.org/us/policy?focus=policyOutput.budgetaryImpact.overall&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) according to PolicyEngine’s static modeling.\n",
    "\n",
    "The tax changes will raise the net income of [62.3% of residents in Utah.](https://legacy.policyengine.org/us/policy?focus=policyOutput.winnersAndLosers.incomeDecile&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) The percentage of residents in each income decile who are net beneficiaries will vary. For example, 13% of residents in the lowest income decile will see their net income increase, while 89% in the highest decile will have a larger after-tax income.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 134,
   "id": "dd2a9466",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"62%\"],\"textposition\":\"inside\",\"x\":[62],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"38%\"],\"textposition\":\"inside\",\"x\":[38],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":true,\"text\":[\"\"],\"textposition\":\"inside\",\"x\":[0],\"y\":[\"All\"],\"type\":\"bar\",\"xaxis\":\"x\",\"yaxis\":\"y\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain more than 5%\",\"marker\":{\"color\":\"#2C6496\"},\"name\":\"Gain more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Gain less than 5%\",\"marker\":{\"color\":\"#D8E6F3\"},\"name\":\"Gain less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"14%\",\"34%\",\"50%\",\"66%\",\"70%\",\"71%\",\"74%\",\"78%\",\"77%\",\"89%\"],\"textposition\":\"inside\",\"x\":[14,34,50,66,70,71,74,78,77,89],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"No change\",\"marker\":{\"color\":\"#F2F2F2\"},\"name\":\"No change\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"86%\",\"66%\",\"50%\",\"34%\",\"30%\",\"29%\",\"26%\",\"22%\",\"23%\",\"11%\"],\"textposition\":\"inside\",\"x\":[86,66,50,34,30,29,26,22,23,11],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss less than 5%\",\"marker\":{\"color\":\"#D2D2D2\"},\"name\":\"Loss less than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"},{\"hovertemplate\":\"%{x}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Loss more than 5%\",\"marker\":{\"color\":\"#616161\"},\"name\":\"Loss more than 5%\",\"orientation\":\"h\",\"showlegend\":false,\"text\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"textposition\":\"inside\",\"x\":[0,0,0,0,0,0,0,0,0,0],\"y\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"type\":\"bar\",\"xaxis\":\"x2\",\"yaxis\":\"y2\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"matches\":\"x2\",\"showticklabels\":false,\"title\":{\"text\":\"\"},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.902,1.0]},\"xaxis2\":{\"anchor\":\"y2\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Population share\",\"standoff\":20},\"ticksuffix\":\"%\",\"range\":[0,100]},\"yaxis2\":{\"anchor\":\"x2\",\"domain\":[0.0,0.882],\"title\":{\"text\":\"Income Decile\",\"standoff\":15},\"automargin\":true},\"title\":{\"text\":\"Figure 4: Winners of Utah\\u2019s Income Tax Package by Decile\",\"x\":0.8},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"legend\":{\"orientation\":\"v\",\"yanchor\":\"top\",\"y\":1.0,\"xanchor\":\"right\",\"x\":1.5,\"traceorder\":\"normal\",\"itemsizing\":\"constant\"},\"margin\":{\"l\":50,\"r\":160,\"b\":100,\"t\":100,\"pad\":4},\"barmode\":\"stack\",\"height\":600,\"width\":900,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 134,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from plotly.subplots import make_subplots\n",
    "\n",
    "# Income deciles\n",
    "deciles = list(range(1, 11))\n",
    "\n",
    "# Data for tax cut effects\n",
    "gain_more_than_5pct = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]  # Dark blue\n",
    "gain_less_than_5pct = [14, 34, 50, 66, 70, 71, 74, 78, 77, 89]  # Light blue\n",
    "no_change = [86, 66, 50, 34, 30, 29, 26, 22, 23, 11]  # Neutral grey\n",
    "loss_less_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Light red (empty in this case)\n",
    "loss_more_than_5pct = [\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "    0,\n",
    "]  # Dark red (empty in this case)\n",
    "\n",
    "# Direct input values for the \"All\" category\n",
    "all_gain_more = 0\n",
    "all_gain_less = 62\n",
    "all_no_change = 38\n",
    "all_loss_less = 0\n",
    "all_loss_more = 0\n",
    "\n",
    "# Create labels for deciles\n",
    "labels_deciles = [f\"{i}\" for i in deciles]\n",
    "\n",
    "# Create DataFrame for deciles\n",
    "df_deciles = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": labels_deciles,\n",
    "        \"Gain more than 5%\": gain_more_than_5pct,\n",
    "        \"Gain less than 5%\": gain_less_than_5pct,\n",
    "        \"No change\": no_change,\n",
    "        \"Loss less than 5%\": loss_less_than_5pct,\n",
    "        \"Loss more than 5%\": loss_more_than_5pct,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create DataFrame for All\n",
    "df_all = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": [\"All\"],\n",
    "        \"Gain more than 5%\": [all_gain_more],\n",
    "        \"Gain less than 5%\": [all_gain_less],\n",
    "        \"No change\": [all_no_change],\n",
    "        \"Loss less than 5%\": [all_loss_less],\n",
    "        \"Loss more than 5%\": [all_loss_more],\n",
    "    }\n",
    ")\n",
    "\n",
    "# Create the final combined figure with a subplot\n",
    "fig = make_subplots(\n",
    "    rows=2,\n",
    "    cols=1,\n",
    "    shared_xaxes=True,\n",
    "    vertical_spacing=0.02,\n",
    "    row_heights=[0.1, 0.9],\n",
    ")\n",
    "\n",
    "# Add traces for \"All\" category - first row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Gain less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss less than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_all[\"Income decile\"],\n",
    "        x=df_all[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_all[\"Loss more than 5%\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=True,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=1,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Add traces for deciles - second row\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain more than 5%\"],\n",
    "        name=\"Gain more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_PRIMARY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Gain less than 5%\"],\n",
    "        name=\"Gain less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=BLUE_LIGHT,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Gain less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Gain less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"No change\"],\n",
    "        name=\"No change\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=LIGHT_GRAY,\n",
    "        text=[f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"No change\"]],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"No change\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss less than 5%\"],\n",
    "        name=\"Loss less than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=MEDIUM_DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss less than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss less than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "fig.add_trace(\n",
    "    go.Bar(\n",
    "        y=df_deciles[\"Income decile\"],\n",
    "        x=df_deciles[\"Loss more than 5%\"],\n",
    "        name=\"Loss more than 5%\",\n",
    "        orientation=\"h\",\n",
    "        marker_color=DARK_GRAY,\n",
    "        text=[\n",
    "            f\"{x}%\" if x > 0 else \"\" for x in df_deciles[\"Loss more than 5%\"]\n",
    "        ],\n",
    "        textposition=\"inside\",\n",
    "        legendgroup=\"Loss more than 5%\",\n",
    "        showlegend=False,\n",
    "        hovertemplate=\"%{x}<extra></extra>\",\n",
    "    ),\n",
    "    row=2,\n",
    "    col=1,\n",
    ")\n",
    "\n",
    "# Update layout\n",
    "fig.update_layout(\n",
    "    barmode=\"stack\",\n",
    "    title=\"Figure 4: Winners of Utah’s Income Tax Package by Decile\",\n",
    "    title_x=0.8,\n",
    "    font=dict(family=\"Roboto Serif\"),\n",
    "    xaxis=dict(title=\"\", ticksuffix=\"%\", range=[0, 100]),\n",
    "    xaxis2=dict(\n",
    "        title=dict(\n",
    "            text=\"Population share\",\n",
    "            standoff=20,  # Increase standoff to move title down\n",
    "        ),\n",
    "        ticksuffix=\"%\",\n",
    "        range=[0, 100],\n",
    "    ),\n",
    "    yaxis2=dict(\n",
    "        automargin=True,\n",
    "        title=dict(\n",
    "            text=\"Income Decile\",\n",
    "            standoff=15,  # Increase standoff to move title left\n",
    "        ),\n",
    "    ),\n",
    "    legend=dict(\n",
    "        orientation=\"v\",\n",
    "        yanchor=\"top\",\n",
    "        y=1.0,\n",
    "        xanchor=\"right\",\n",
    "        x=1.5,\n",
    "        traceorder=\"normal\",\n",
    "        itemsizing=\"constant\",\n",
    "    ),\n",
    "    font_color=BLACK,\n",
    "    margin={\"l\": 50, \"r\": 160, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "    height=600,\n",
    "    width=900,  # Explicitly set width to accommodate legend\n",
    "    annotations=[\n",
    "        {\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.25,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"text\": \"Source: PolicyEngine US\",\n",
    "            \"showarrow\": False,\n",
    "            \"font\": {\"family\": \"Roboto Serif\", \"size\": 10, \"color\": DARK_GRAY},\n",
    "        }\n",
    "    ],\n",
    "    images=[\n",
    "        {\n",
    "            \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "            \"x\": 1,\n",
    "            \"y\": -0.2,\n",
    "            \"xref\": \"paper\",\n",
    "            \"yref\": \"paper\",\n",
    "            \"sizex\": 0.1,\n",
    "            \"sizey\": 0.1,\n",
    "            \"xanchor\": \"right\",\n",
    "            \"yanchor\": \"bottom\",\n",
    "        }\n",
    "    ],\n",
    ")\n",
    "\n",
    "# Display the figure\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "f94929b0",
   "metadata": {},
   "source": [
    "Utah’s new tax package will provide an [average benefit of $82](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.average&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) per household, ranging from $8 in the bottom income decile to $249 in the top decile (as defined by the nationwide income distribution).\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 135,
   "id": "0931868e",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "```plotly\n",
       "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile: %{x}\\u003cbr\\u003eAverage impact: $%{y:,.0f}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"$8\",\"$42\",\"$56\",\"$78\",\"$86\",\"$103\",\"$97\",\"$103\",\"$116\",\"$249\"],\"textposition\":\"auto\",\"x\":[1,2,3,4,5,6,7,8,9,10],\"xaxis\":\"x\",\"y\":[8,42,56,78,86,103,97,103,116,249],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"histogram2dcontour\":[{\"type\":\"histogram2dcontour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"choropleth\":[{\"type\":\"choropleth\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"histogram2d\":[{\"type\":\"histogram2d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmap\":[{\"type\":\"heatmap\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"heatmapgl\":[{\"type\":\"heatmapgl\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"contourcarpet\":[{\"type\":\"contourcarpet\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"contour\":[{\"type\":\"contour\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"surface\":[{\"type\":\"surface\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]}],\"mesh3d\":[{\"type\":\"mesh3d\",\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"parcoords\":[{\"type\":\"parcoords\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolargl\":[{\"type\":\"scatterpolargl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"scattergeo\":[{\"type\":\"scattergeo\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterpolar\":[{\"type\":\"scatterpolar\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"scattergl\":[{\"type\":\"scattergl\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatter3d\":[{\"type\":\"scatter3d\",\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattermapbox\":[{\"type\":\"scattermapbox\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scatterternary\":[{\"type\":\"scatterternary\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"scattercarpet\":[{\"type\":\"scattercarpet\",\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}}}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"minorgridcolor\":\"white\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}],\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"#E5ECF6\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}]},\"layout\":{\"autotypenumbers\":\"strict\",\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"hovermode\":\"closest\",\"hoverlabel\":{\"align\":\"left\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"#E5ECF6\",\"polar\":{\"bgcolor\":\"#E5ECF6\",\"angularaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"radialaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"ternary\":{\"bgcolor\":\"#E5ECF6\",\"aaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"},\"caxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\"}},\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]]},\"xaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"yaxis\":{\"gridcolor\":\"white\",\"linecolor\":\"white\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"white\",\"automargin\":true,\"zerolinewidth\":2},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"yaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2},\"zaxis\":{\"backgroundcolor\":\"#E5ECF6\",\"gridcolor\":\"white\",\"linecolor\":\"white\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"white\",\"gridwidth\":2}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"geo\":{\"bgcolor\":\"white\",\"landcolor\":\"#E5ECF6\",\"subunitcolor\":\"white\",\"showland\":true,\"showlakes\":true,\"lakecolor\":\"white\"},\"title\":{\"x\":0.05},\"mapbox\":{\"style\":\"light\"}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10]},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Average impact ($)\"},\"tickformat\":\",\"},\"legend\":{\"tracegroupgap\":0},\"title\":{\"text\":\"Figure 5: Average Benefit of Utah\\u2019s Income Tax Changes by Decile\"},\"barmode\":\"relative\",\"font\":{\"family\":\"Roboto Serif\",\"color\":\"#000000\"},\"margin\":{\"l\":50,\"r\":50,\"b\":100,\"t\":100,\"pad\":4},\"showlegend\":false,\"annotations\":[{\"font\":{\"color\":\"#616161\",\"family\":\"Roboto Serif\",\"size\":10},\"showarrow\":false,\"text\":\"Source: PolicyEngine US\",\"x\":1,\"xref\":\"paper\",\"y\":-0.25,\"yref\":\"paper\"}],\"images\":[{\"sizex\":0.1,\"sizey\":0.1,\"source\":\"\/assets/logos/policyengine/teal-square.png\",\"x\":1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}]}}\n",
       "```"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 135,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Average impact by decile data\n",
    "deciles = list(range(1, 11))\n",
    "avg_impact = [8, 42, 56, 78, 86, 103, 97, 103, 116, 249]\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Income decile\": deciles,\n",
    "        \"Average impact\": avg_impact,\n",
    "    }\n",
    ")\n",
    "\n",
    "# Format dollar values for display\n",
    "dollar_text = [f\"${x}\" for x in avg_impact]\n",
    "\n",
    "fig = (\n",
    "    px.bar(\n",
    "        df,\n",
    "        x=\"Income decile\",\n",
    "        y=\"Average impact\",\n",
    "        text=dollar_text,  # Dollar values with $ sign\n",
    "        color_discrete_sequence=[BLUE_PRIMARY],\n",
    "        title=\"Figure 5: Average Benefit of Utah’s Income Tax Changes by Decile\",\n",
    "    )\n",
    "    .update_layout(\n",
    "        font=dict(family=\"Roboto Serif\"),\n",
    "        xaxis_title=\"Income decile\",\n",
    "        yaxis_title=\"Average impact ($)\",\n",
    "        xaxis_tickvals=list(range(1, 11)),\n",
    "        yaxis_tickformat=\",\",\n",
    "        showlegend=False,\n",
    "        font_color=BLACK,\n",
    "        margin={\"l\": 50, \"r\": 50, \"b\": 100, \"t\": 100, \"pad\": 4},\n",
    "        annotations=[\n",
    "            {\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.25,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"text\": \"Source: PolicyEngine US\",\n",
    "                \"showarrow\": False,\n",
    "                \"font\": {\n",
    "                    \"family\": \"Roboto Serif\",\n",
    "                    \"size\": 10,\n",
    "                    \"color\": DARK_GRAY,\n",
    "                },\n",
    "            }\n",
    "        ],\n",
    "        images=[\n",
    "            {\n",
    "                \"source\": \"/assets/logos/policyengine/teal-square.png\",\n",
    "                \"x\": 1,\n",
    "                \"y\": -0.2,\n",
    "                \"xref\": \"paper\",\n",
    "                \"yref\": \"paper\",\n",
    "                \"sizex\": 0.1,\n",
    "                \"sizey\": 0.1,\n",
    "                \"xanchor\": \"right\",\n",
    "                \"yanchor\": \"bottom\",\n",
    "            }\n",
    "        ],\n",
    "    )\n",
    "    .update_traces(\n",
    "        hovertemplate=\"Income decile: %{x}<br>Average impact: $%{y:,.0f}<extra></extra>\"\n",
    "    )\n",
    ")\n",
    "\n",
    "Markdown(f\"```plotly\\n{fig.to_json()}\\n```\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "6a495589",
   "metadata": {},
   "source": [
    "We project the tax changes to have [no effect on poverty](https://legacy.policyengine.org/us/policy?focus=policyOutput.povertyImpact.regular.byAge&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) or deep poverty while reducing the state’s Gini index of inequality by [0.001%.](https://legacy.policyengine.org/us/policy?focus=policyOutput.inequalityImpact&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) \n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d6fee538",
   "metadata": {},
   "source": [
    "## Conclusion\n",
    "\n",
    "Utah’s changes to its individual income tax will lower state revenues by $96 million in 2025. The provisions will provide an average benefit of $82 to households; those in higher-income deciles will benefit more than lower-income households in [dollar terms.](https://legacy.policyengine.org/us/policy?focus=policyOutput.distributionalImpact.incomeDecile.relative&reform=2&region=ut&timePeriod=2025&baseline=81314&household=52553) The bill will not affect the state’s Supplemental Poverty Measure, and it lower the Gini index of income inequality by 0.001%.\n",
    "\n",
    "As policymakers evaluate reforms such as these, analytical tools like PolicyEngine offer critical insights into the impacts on diverse household compositions and the broader economy.\n",
    "\n",
    "We invite you to explore our [additional analyses](https://legacy.policyengine.org/us/research) and use [PolicyEngine](https://legacy.policyengine.org/us) to calculate your own tax benefits or design custom policy reforms.\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "policyengine",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.16"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}



---

---
# Reform UK's tax-benefit reform proposals
Slug: farage-speech-may-2025
Date: 2025-05-27 19:00:00
Authors: Nikhil Woodruff
Tags: uk, policy, featured
Description: Nigel Farage has confirmed that Reform UK's manifesto will include four tax-benefit reforms that PolicyEngine estimates would cost £75 billion in 2025-26.

---

{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 75,
   "id": "c86ae1b1",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\u001b[2mUsing Python 3.11.11 environment at: /Users/nikhilwoodruff/policyengine/policyengine-app/.venv\u001b[0m\n",
      "Name: policyengine-uk\n",
      "Version: 2.28.1\n",
      "Location: /Users/nikhilwoodruff/policyengine/policyengine-app/.venv/lib/python3.11/site-packages\n",
      "Requires: microdf-python, policyengine-core\n",
      "Required-by: policyengine\n"
     ]
    }
   ],
   "source": [
    "!uv pip show policyengine-uk"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "9cf7ac94",
   "metadata": {},
   "source": [
    "Reform UK leader Nigel Farage today confirmed four tax-benefit policy reforms would be included in the party's manifesto for the next general election in a [speech](https://www.bbc.co.uk/news/articles/c5yx062pvlvo) in central London. The party had previously included three of these reforms in its 2024 general election manifesto, committing to:\n",
    "\n",
    "* Increase the Personal Allowance from £12,570 to £20,000\n",
    "* Increase the higher rate threshold from £50,270 to £70,000\n",
    "* Raise the Marriage Allowance maximum rate from 10% to 25%\n",
    "\n",
    "Today Farage confirmed that the party would include these reforms in the next general election manifesto, alongside a fourth commitment to repeal the two-child benefit cap on Universal Credit and Child Tax Credit payments. In the following sections, we summarise how these policies work today and quantify their impact using PolicyEngine's tax-benefit microsimulation model.\n",
    "\n",
    "_[See how these reforms would affect your household here.](https://legacy.policyengine.org/uk/household?reform=85289&focus=intro&region=uk&timePeriod=2025&baseline=1&uk_local_areas_beta=false)_\n",
    "\n",
    "## Current policy\n",
    "\n",
    "### Personal Allowance\n",
    "\n",
    "The government exempts the first £12,570 of an individual's income from income tax, known as the [**Personal Allowance**](https://www.gov.uk/income-tax-rates). The personal allowance is gradually reduced for individuals earning over £100,000, with a complete withdrawal at £125,140. The government has frozen this threshold since 2021, and is scheduled to remain at this level until 2028.\n",
    "\n",
    "### Higher rate threshold\n",
    "\n",
    "The **higher rate threshold** is the income level at which individuals start paying the higher rate of income tax (40%). Currently, this threshold is set at £37,000 (it is added to the Personal Allowance, so the effective threshold is £50,270). The government has frozen this threshold since 2021, and is scheduled to remain at this level until 2028.\n",
    "\n",
    "### Marriage Allowance\n",
    "\n",
    "The [**Marriage Allowance**](https://www.gov.uk/marriage-allowance) permits couples to transfer 10% of any unused personal allowance between spouses when one earns below the Personal Allowance threshold and the other pays the basic rate.\n",
    "\n",
    "### Two-child limit\n",
    "\n",
    "The two-child limit removes the entitlement of children born after April 2017 to Universal Credit and Child Tax Credit child element payments, if they are the third or subsequent child in a family, unless [exceptions](https://www.gov.uk/guidance/child-tax-credit-exceptions-to-the-2-child-limit#overview) apply.\n",
    "\n",
    "## Economic impacts\n",
    "\n",
    "PolicyEngine's model [estimates](https://legacy.policyengine.org/uk/policy?reform=85289&focus=policyOutput.budgetaryImpact&region=uk&timePeriod=2025&baseline=1&uk_local_areas_beta=false&simYears=5) that these reforms would cost £75 billion in 2025-26, rising to £78 billion in 2029-30. Over the five-year window from 2025-26 to 2029-30, the total cost of these reforms would be £391 billion. Table 1 below shows the estimated costs of each reform.\n",
    "\n",
    "*Table 1: Estimated revenue impacts of Reform UK's tax-benefit proposals (£ billion)*\n",
    "| Policy                                   |   2025-26 |   2026-27 |   2027-28 |   2028-29 |   2029-30 |   2025-30 |\n",
    "|:-----------------------------------------|-------:|-------:|-------:|-------:|-------:|----------:|\n",
    "| Repeal the two-child limit               |   -1.7 |   -1.8 |   -1.9 |   -2.2 |   -2.3 |      -9.9 |\n",
    "| Raise the Personal Allowance to £20,000  |  -50.7 |  -51.5 |  -52.4 |  -49.1 |  -45.5 |    -249.3 |\n",
    "| Set the higher rate threshold to £70,000 |  -22.2 |  -23.8 |  -25.5 |  -27.2 |  -29.3 |    -128   |\n",
    "| Raise the Marriage Allowance rate to 25% |   -0.7 |   -0.7 |   -0.8 |   -0.8 |   -0.9 |      -3.9 |\n",
    "| Total                                    |  -75.3 |  -77.9 |  -80.5 |  -79.3 |  -78.1 |    -391.1 |\n",
    "\n",
    "\n",
    "We also estimate that these reforms would benefit 82% of people in 2025, increase the Gini coefficient of income inequality by less than 0.1%, and reduce poverty (absolute before housing costs) by 8.6%. The reforms would raise the net incomes of households in the bottom decile by 1.3% and the top decile by 4.2%.\n",
    "\n",
    "```plotly\n",
    "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"x=%{x}\\u003cbr\\u003ey=%{y}\\u003cbr\\u003etext=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"1.3%\",\"3.1%\",\"4.8%\",\"4.2%\",\"4.3%\",\"5.1%\",\"5.4%\",\"5.3%\",\"6.0%\",\"4.2%\"],\"textposition\":\"auto\",\"x\":[0,1,2,3,4,5,6,7,8,9],\"xaxis\":\"x\",\"y\":[0.012648342807095678,0.03132008664442573,0.04759230794458184,0.04246238057867267,0.04266858638634309,0.05059255780943398,0.05389949484255953,0.053063795971100475,0.06013410923690721,0.04171578019282118],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10],\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Relative net income change\"},\"tickformat\":\".0%\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"legend\":{\"tracegroupgap\":0},\"margin\":{\"t\":120,\"b\":120,\"l\":120,\"r\":120},\"barmode\":\"relative\",\"title\":{\"text\":\"Impact of Reform UK tax-benefit policies by income decile\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"height\":600,\"width\":800,\"plot_bgcolor\":\"#F4F4F4\",\"paper_bgcolor\":\"#F4F4F4\",\"images\":[{\"sizex\":0.15,\"sizey\":0.15,\"source\":\"https:\\u002f\\u002fraw.githubusercontent.com\\u002fPolicyEngine\\u002fpolicyengine-app\\u002fmaster\\u002fsrc\\u002fimages\\u002flogos\\u002fpolicyengine\\u002fteal.png\",\"x\":1.1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"annotations\":[{\"showarrow\":false,\"text\":\"Source: PolicyEngine UK tax-benefit microsimulation model (version 2.28.1)\",\"x\":0,\"xanchor\":\"left\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"modebar\":{\"bgcolor\":\"#F4F4F4\",\"color\":\"#F4F4F4\",\"activecolor\":\"#F4F4F4\"},\"uniformtext\":{\"mode\":\"hide\",\"minsize\":12}}}\n",
    "\n",
    "```\n",
    "\n",
    "To view more results, visit the [PolicyEngine UK microsimulation model](https://legacy.policyengine.org/uk/policy?reform=85289&focus=policyOutput.budgetaryImpact&region=uk&timePeriod=2025&baseline=1&uk_local_areas_beta=false&simYears=5) and our [household calculator](https://legacy.policyengine.org/uk/household?reform=85289&focus=intro&region=uk&timePeriod=2025&baseline=1&uk_local_areas_beta=false) for this suite of reforms."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "id": "f4e70450",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, enhanced_frs_2022_23.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n"
     ]
    }
   ],
   "source": [
    "from policyengine import Simulation\n",
    "\n",
    "sim = Simulation(\n",
    "    country=\"uk\",\n",
    "    scope=\"macro\",\n",
    "    reform={\n",
    "        \"gov.hmrc.income_tax.allowances.personal_allowance.amount\": 20_000,\n",
    "        \"gov.hmrc.income_tax.rates.uk[1].threshold\": 50_000,\n",
    "        \"gov.hmrc.income_tax.allowances.marriage_allowance.max\": 0.25,\n",
    "        \"gov.dwp.universal_credit.elements.child.limit.child_count\": 90,\n",
    "    },\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 79,
   "id": "e9c0cb57",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, parliamentary_constituency_weights.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, parliamentary_constituency_weights.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, parliamentary_constituency_weights.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, parliamentary_constituency_weights.h5 to parliamentary_constituency_weights.h5\n",
      "INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No metadata found for blob, so it has no version attached.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, constituencies_2024.csv. Using latest version: None\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, constituencies_2024.csv, None to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, constituencies_2024.csv.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, constituencies_2024.csv to constituencies_2024.csv\n"
     ]
    }
   ],
   "source": [
    "result = sim.calculate_economy_comparison()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 111,
   "id": "059323e2",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"x=%{x}\\u003cbr\\u003ey=%{y}\\u003cbr\\u003etext=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"1.3%\",\"3.1%\",\"4.8%\",\"4.2%\",\"4.3%\",\"5.1%\",\"5.4%\",\"5.3%\",\"6.0%\",\"4.2%\"],\"textposition\":\"auto\",\"x\":[0,1,2,3,4,5,6,7,8,9],\"xaxis\":\"x\",\"y\":[0.012648342807095678,0.03132008664442573,0.04759230794458184,0.04246238057867267,0.04266858638634309,0.05059255780943398,0.05389949484255953,0.053063795971100475,0.06013410923690721,0.04171578019282118],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"tickvals\":[1,2,3,4,5,6,7,8,9,10],\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Relative net income change\"},\"tickformat\":\".0%\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"legend\":{\"tracegroupgap\":0},\"margin\":{\"t\":120,\"b\":120,\"l\":120,\"r\":120},\"barmode\":\"relative\",\"title\":{\"text\":\"Impact of Reform UK tax-benefit policies by income decile\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"height\":600,\"width\":800,\"plot_bgcolor\":\"#F4F4F4\",\"paper_bgcolor\":\"#F4F4F4\",\"images\":[{\"sizex\":0.15,\"sizey\":0.15,\"source\":\"https:\\u002f\\u002fraw.githubusercontent.com\\u002fPolicyEngine\\u002fpolicyengine-app\\u002fmaster\\u002fsrc\\u002fimages\\u002flogos\\u002fpolicyengine\\u002fteal.png\",\"x\":1.1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"annotations\":[{\"showarrow\":false,\"text\":\"Source: PolicyEngine UK tax-benefit microsimulation model (version 2.28.1)\",\"x\":0,\"xanchor\":\"left\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"modebar\":{\"bgcolor\":\"#F4F4F4\",\"color\":\"#F4F4F4\",\"activecolor\":\"#F4F4F4\"},\"uniformtext\":{\"mode\":\"hide\",\"minsize\":12}}}\n"
     ]
    }
   ],
   "source": [
    "from policyengine.utils.charts import *\n",
    "import plotly.express as px\n",
    "import pandas as pd\n",
    "\n",
    "fig = px.bar(\n",
    "    y=result.decile.relative,\n",
    "    text=[f\"{x:.1%}\" for x in result.decile.relative.values()],\n",
    "    color_discrete_sequence=[BLUE],\n",
    ").update_layout(\n",
    "    title=\"Impact of Reform UK tax-benefit policies by income decile\",\n",
    "    xaxis_title=\"Income decile\",\n",
    "    xaxis_tickvals=list(range(1, 11)),\n",
    "    yaxis_title=\"Relative net income change\",\n",
    "    yaxis_tickformat=\".0%\",\n",
    ")\n",
    "\n",
    "print(format_fig(fig).update_layout().to_json())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "1b19d9f2",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "a8a4b9b9",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "  0%|          | 0/4 [00:00<?, ?it/s]INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, enhanced_frs_2022_23.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'gov.dwp.universal_credit.elements.child.limit.child_count': 90} Repeal the two-child limit\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|██████████| 5/5 [00:52<00:00, 10.54s/it]\n",
      " 25%|██▌       | 1/4 [00:54<02:42, 54.10s/it]INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, enhanced_frs_2022_23.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'gov.dwp.universal_credit.elements.child.limit.child_count': 90, 'gov.hmrc.income_tax.allowances.personal_allowance.amount': 20000, 'gov.hmrc.income_tax.rates.uk[1].threshold': 30270} Raise the Personal Allowance to £20,000\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|██████████| 5/5 [00:49<00:00,  9.97s/it]\n",
      " 50%|█████     | 2/4 [01:45<01:44, 52.39s/it]INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, enhanced_frs_2022_23.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'gov.dwp.universal_credit.elements.child.limit.child_count': 90, 'gov.hmrc.income_tax.allowances.personal_allowance.amount': 20000, 'gov.hmrc.income_tax.rates.uk[1].threshold': 50000} Set the higher rate threshold to £70,000\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|██████████| 5/5 [00:49<00:00,  9.98s/it]\n",
      " 75%|███████▌  | 3/4 [02:36<00:51, 51.83s/it]INFO:root:Using Google Cloud Storage for download.\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.11.6\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.11.6 to cache\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache exists and crc is unchanged for policyengine-uk-data-private, enhanced_frs_2022_23.h5.\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{'gov.dwp.universal_credit.elements.child.limit.child_count': 90, 'gov.hmrc.income_tax.allowances.personal_allowance.amount': 20000, 'gov.hmrc.income_tax.rates.uk[1].threshold': 50000, 'gov.hmrc.income_tax.allowances.marriage_allowance.max': 0.25} Raise the Marriage Allowance rate to 25%\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|██████████| 5/5 [00:49<00:00,  9.86s/it]\n",
      "100%|██████████| 4/4 [03:26<00:00, 51.74s/it]\n"
     ]
    }
   ],
   "source": [
    "from policyengine import Simulation\n",
    "\n",
    "raise_pa = {\n",
    "    \"gov.hmrc.income_tax.allowances.personal_allowance.amount\": 20_000,\n",
    "    \"gov.hmrc.income_tax.rates.uk[1].threshold\": 37_700 - (20_000 - 12_570),\n",
    "}\n",
    "higher_rate_threshold = {\n",
    "    \"gov.hmrc.income_tax.rates.uk[1].threshold\": 50_000,\n",
    "}\n",
    "raise_ma_rate = {\n",
    "    \"gov.hmrc.income_tax.allowances.marriage_allowance.max\": 0.25,\n",
    "}\n",
    "repeal_two_child_limit = {\n",
    "    \"gov.dwp.universal_credit.elements.child.limit.child_count\": 90,\n",
    "}\n",
    "\n",
    "policy_reforms = [\n",
    "    repeal_two_child_limit,\n",
    "    raise_pa,\n",
    "    higher_rate_threshold,\n",
    "    raise_ma_rate,\n",
    "]\n",
    "policy_reform_names = [\n",
    "    \"Repeal the two-child limit\",\n",
    "    \"Raise the Personal Allowance to £20,000\",\n",
    "    \"Set the higher rate threshold to £70,000\",\n",
    "    \"Raise the Marriage Allowance rate to 25%\",\n",
    "]\n",
    "\n",
    "years = []\n",
    "debt_impacts = []\n",
    "policies = []\n",
    "\n",
    "from tqdm import tqdm\n",
    "\n",
    "for i in tqdm(range(len(policy_reforms))):\n",
    "    reform = {}\n",
    "    for j in range(i + 1):\n",
    "        reform.update(policy_reforms[j])\n",
    "\n",
    "    sim = Simulation(\n",
    "        country=\"uk\",\n",
    "        scope=\"macro\",\n",
    "        reform=reform,\n",
    "    )\n",
    "    print(reform, policy_reform_names[i])\n",
    "\n",
    "    for year in tqdm(range(2025, 2030)):\n",
    "        debt_impact = (\n",
    "            sim.reform_simulation.calculate(\"gov_balance\", year).sum() / 1e9\n",
    "            - sim.baseline_simulation.calculate(\"gov_balance\", year).sum()\n",
    "            / 1e9\n",
    "        )\n",
    "        years.append(year)\n",
    "        debt_impacts.append(debt_impact)\n",
    "        policies.append(policy_reform_names[i])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "id": "56e44931",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "\n",
    "df = pd.DataFrame(\n",
    "    {\n",
    "        \"Year\": years,\n",
    "        \"Debt impact (£ billions)\": debt_impacts,\n",
    "        \"Policy\": policies,\n",
    "    }\n",
    ")\n",
    "\n",
    "df = df.pivot(\n",
    "    columns=\"Year\", index=\"Policy\", values=\"Debt impact (£ billions)\"\n",
    ")\n",
    "df = df.iloc[[2, 1, 3, 0]]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 67,
   "id": "35291e14",
   "metadata": {},
   "outputs": [],
   "source": [
    "df.values[1:] = df.values[1:] - df.values[:-1]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 68,
   "id": "7f1230a9",
   "metadata": {},
   "outputs": [],
   "source": [
    "df[\"2025-29\"] = df.sum(axis=1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "id": "0c7d8a5a",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Add 'total' row\n",
    "df.loc[\"Total\"] = df.sum(numeric_only=True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 71,
   "id": "d2b5d2eb",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "| Policy                                   |   2025 |   2026 |   2027 |   2028 |   2029 |   2025-29 |\n",
      "|:-----------------------------------------|-------:|-------:|-------:|-------:|-------:|----------:|\n",
      "| Repeal the two-child limit               |   -1.7 |   -1.8 |   -1.9 |   -2.2 |   -2.3 |      -9.9 |\n",
      "| Raise the Personal Allowance to £20,000  |  -50.7 |  -51.5 |  -52.4 |  -49.1 |  -45.5 |    -249.3 |\n",
      "| Set the higher rate threshold to £70,000 |  -22.2 |  -23.8 |  -25.5 |  -27.2 |  -29.3 |    -128   |\n",
      "| Raise the Marriage Allowance rate to 25% |   -0.7 |   -0.7 |   -0.8 |   -0.8 |   -0.9 |      -3.9 |\n",
      "| Total                                    |  -75.3 |  -77.9 |  -80.5 |  -79.3 |  -78.1 |    -391.1 |\n"
     ]
    }
   ],
   "source": [
    "print(df.round(1).to_markdown(index=True))"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": ".venv",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.11"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}



---

---
# Extending the Winter Fuel Allowance
Slug: wfa-means-test
Date: 2025-06-11 11:00:00
Authors: Nikhil Woodruff
Tags: uk, policy, featured
Description: The government has reversed its Winter Fuel Allowance means testing, expanding eligibility to 9 million pensioners through a £35,000 income threshold.

---

{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Labour government has announced changes to its Winter Fuel Allowance policy, expanding eligibility from 1.5 million to 9 million pensioners in England and Wales. The new £35,000 income threshold replaces the previous restriction to Pension Credit recipients only.\n",
    "\n",
    "\n",
    "## Original policy\n",
    "\n",
    "The Winter Fuel Payment provides £200 for households with someone of State Pension age and £300 for households with someone aged 80 or over.\n",
    "\n",
    "In July 2024, the government [restricted Winter Fuel Payments](https://commonslibrary.parliament.uk/research-briefings/cbp-10094/) to pensioners receiving Pension Credit or other means-tested benefits. The Department of Work and Pensions [reports](https://www.gov.uk/government/news/nine-million-pensioners-to-receive-winter-fuel-payments-this-winter) that this reduced the number of recipients from 11.4 million to 1.5 million pensioners - a reduction of 9.9 million people.\n",
    "\n",
    "\n",
    "## New policy\n",
    "\n",
    "From winter 2025/26, all people above State Pension age in England and Wales with taxable income of £35,000 or less will receive Winter Fuel Payments; the amounts do not change. Those with income above £35,000 will receive the payment, but have it recovered through HMRC via PAYE or Self-Assessment.\n",
    "\n",
    "The £35,000 threshold applies to individual income, not household income. If any person is eligible under this taxable income means test, the DWP will pay the benefit amount to the household.\n",
    "\n",
    "\n",
    "## Household impacts\n",
    "\n",
    "For a single 70-year old, the new policy increases their net income by £200 between around £11,000 (where Pension Credit entitlement ends) and £35,000 in taxable income.\n",
    "\n",
    "```plotly\n",
    "{\"data\":[{\"hovertemplate\":\"variable=Reform\\u003cbr\\u003eIncome=%{x}\\u003cbr\\u003evalue=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Reform\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Reform\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0.0,1189.689453125,2379.37890625,3569.068115234375,4758.7578125,5948.44677734375,7138.13623046875,8327.826171875,9517.515625,10707.2041015625,11896.8935546875,13086.5830078125,14276.2724609375,15465.9619140625,16655.65234375,17845.341796875,19035.03125,20224.720703125,21414.408203125,22604.09765625,23793.787109375,24983.4765625,26173.166015625,27362.85546875,28552.544921875,29742.234375,30931.923828125,32121.61328125,33311.3046875,34500.9921875,35690.68359375,36880.37109375,38070.0625,39259.75,40449.44140625,41639.12890625,42828.81640625,44018.5078125,45208.1953125,46397.88671875,47587.57421875,48777.265625,49966.953125,51156.64453125,52346.33203125,53536.0234375,54725.7109375,55915.40234375,57105.08984375,58294.78125,59484.46875,60674.16015625,61863.84765625,63053.5390625,64243.2265625,65432.91796875,66622.609375,67812.296875,69001.984375,70191.671875,71381.3671875,72571.0546875,73760.7421875,74950.4296875,76140.125,77329.8125,78519.5,79709.1875,80898.8828125,82088.5703125,83278.2578125,84467.9453125,85657.6328125,86847.328125,88037.015625,89226.703125,90416.390625,91606.0859375,92795.7734375,93985.4609375,95175.1484375,96364.84375,97554.53125,98744.21875,99933.90625,101123.6015625,102313.2890625,103502.9765625,104692.6640625,105882.359375,107072.046875,108261.734375,109451.421875,110641.1171875,111830.8046875,113020.4921875,114210.1796875,115399.875,116589.5625,117779.25,118968.9375],\"xaxis\":\"x\",\"y\":[200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hovertemplate\":\"variable=Baseline\\u003cbr\\u003eIncome=%{x}\\u003cbr\\u003evalue=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Baseline\",\"line\":{\"color\":\"#808080\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Baseline\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0.0,1189.689453125,2379.37890625,3569.068115234375,4758.7578125,5948.44677734375,7138.13623046875,8327.826171875,9517.515625,10707.2041015625,11896.8935546875,13086.5830078125,14276.2724609375,15465.9619140625,16655.65234375,17845.341796875,19035.03125,20224.720703125,21414.408203125,22604.09765625,23793.787109375,24983.4765625,26173.166015625,27362.85546875,28552.544921875,29742.234375,30931.923828125,32121.61328125,33311.3046875,34500.9921875,35690.68359375,36880.37109375,38070.0625,39259.75,40449.44140625,41639.12890625,42828.81640625,44018.5078125,45208.1953125,46397.88671875,47587.57421875,48777.265625,49966.953125,51156.64453125,52346.33203125,53536.0234375,54725.7109375,55915.40234375,57105.08984375,58294.78125,59484.46875,60674.16015625,61863.84765625,63053.5390625,64243.2265625,65432.91796875,66622.609375,67812.296875,69001.984375,70191.671875,71381.3671875,72571.0546875,73760.7421875,74950.4296875,76140.125,77329.8125,78519.5,79709.1875,80898.8828125,82088.5703125,83278.2578125,84467.9453125,85657.6328125,86847.328125,88037.015625,89226.703125,90416.390625,91606.0859375,92795.7734375,93985.4609375,95175.1484375,96364.84375,97554.53125,98744.21875,99933.90625,101123.6015625,102313.2890625,103502.9765625,104692.6640625,105882.359375,107072.046875,108261.734375,109451.421875,110641.1171875,111830.8046875,113020.4921875,114210.1796875,115399.875,116589.5625,117779.25,118968.9375],\"xaxis\":\"x\",\"y\":[200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Taxable income\"},\"tickprefix\":\"\\u00a3\",\"tickformat\":\",.0f\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Winter Fuel Allowance\"},\"tickprefix\":\"\\u00a3\",\"tickformat\":\",.0f\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"legend\":{\"title\":{\"text\":\"\"},\"tracegroupgap\":0},\"margin\":{\"t\":120,\"b\":120,\"l\":120,\"r\":120},\"title\":{\"text\":\"Winter Fuel Allowance by taxable income for a 70-year-old\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"height\":600,\"width\":800,\"plot_bgcolor\":\"#F4F4F4\",\"paper_bgcolor\":\"#F4F4F4\",\"images\":[{\"sizex\":0.15,\"sizey\":0.15,\"source\":\"https:\\u002f\\u002fraw.githubusercontent.com\\u002fPolicyEngine\\u002fpolicyengine-app\\u002fmaster\\u002fsrc\\u002fimages\\u002flogos\\u002fpolicyengine\\u002fteal.png\",\"x\":1.1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"annotations\":[{\"showarrow\":false,\"text\":\"Source: PolicyEngine UK tax-benefit microsimulation model (version 2.32.0)\",\"x\":0,\"xanchor\":\"left\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"modebar\":{\"bgcolor\":\"#F4F4F4\",\"color\":\"#F4F4F4\",\"activecolor\":\"#F4F4F4\"},\"uniformtext\":{\"mode\":\"hide\",\"minsize\":12}}}\n",
    "```\n",
    "\n",
    "## Economic impacts\n",
    "\n",
    "We [estimate](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=85980&region=uk&timePeriod=2025&baseline=1) this reform will increase the deficit by £1.33 billion per year (the government estimates £1.26 billion in 2025/26), totaling £6.6 billion over the next five years.\n",
    "\n",
    "| Net revenue impact (billions) | 2025-26 | 2026-27 | 2027-28 | 2028-29 | 2029-30 | 2025-30 |\n",
    "|-------------------------------|---------|---------|---------|---------|---------|---------|\n",
    "| Tax                          | 0.0     | 0.0     | 0.0     | 0.0     | 0.0     | 0.0     |\n",
    "| Benefits                     | 1.3     | 1.3     | 1.3     | 1.3     | 1.3     | 6.6     |\n",
    "| **Total**                    | **-1.3** | **-1.3** | **-1.3** | **-1.3** | **-1.3** | **-6.6** |\n",
    "\n",
    "\n",
    "We estimate that the reform will also benefit the second income decile the most in 2025, with the top three deciles benefitting by less than 0.1%.\n",
    "\n",
    "```plotly\n",
    "{\"data\":[{\"alignmentgroup\":\"True\",\"hovertemplate\":\"Income decile=%{x}\\u003cbr\\u003eRelative net income change=%{y}\\u003cbr\\u003etext=%{text}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"\",\"marker\":{\"color\":\"#2C6496\",\"pattern\":{\"shape\":\"\"}},\"name\":\"\",\"offsetgroup\":\"\",\"orientation\":\"v\",\"showlegend\":false,\"text\":[\"0.16%\",\"0.26%\",\"0.24%\",\"0.19%\",\"0.19%\",\"0.13%\",\"0.11%\",\"0.02%\",\"0.02%\",\"0.01%\"],\"textposition\":\"auto\",\"x\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\"],\"xaxis\":\"x\",\"y\":[0.0016286845773460803,0.0025985178524429438,0.0023843406664892223,0.0018586896728699704,0.0018596998204870117,0.0013138312658149721,0.0011071005875686042,0.00024795528943022133,0.0002456897607750285,5.1435862897925305e-05],\"yaxis\":\"y\",\"type\":\"bar\"}],\"layout\":{\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Income decile\"},\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Relative net income change\"},\"tickformat\":\".1%\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"legend\":{\"tracegroupgap\":0},\"margin\":{\"t\":120,\"b\":120,\"l\":120,\"r\":120},\"barmode\":\"relative\",\"uniformtext\":{\"minsize\":12,\"mode\":\"hide\"},\"title\":{\"text\":\"Relative net income change by income decile of expanding WFA eligibility\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"height\":600,\"width\":800,\"plot_bgcolor\":\"#F4F4F4\",\"paper_bgcolor\":\"#F4F4F4\",\"images\":[{\"sizex\":0.15,\"sizey\":0.15,\"source\":\"https:\\u002f\\u002fraw.githubusercontent.com\\u002fPolicyEngine\\u002fpolicyengine-app\\u002fmaster\\u002fsrc\\u002fimages\\u002flogos\\u002fpolicyengine\\u002fteal.png\",\"x\":1.1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"annotations\":[{\"showarrow\":false,\"text\":\"Source: PolicyEngine UK tax-benefit microsimulation model (version 2.28.2)\",\"x\":0,\"xanchor\":\"left\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"modebar\":{\"bgcolor\":\"#F4F4F4\",\"color\":\"#F4F4F4\",\"activecolor\":\"#F4F4F4\"}}}\n",
    "\n",
    "```\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/Users/nikhilwoodruff/policyengine/policyengine-app/.venv/lib/python3.11/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html\n",
      "  from .autonotebook import tqdm as notebook_tqdm\n",
      "No data provided, using default dataset: gs://policyengine-uk-data-private/enhanced_frs_2022_23.h5\n",
      "Downloading enhanced_frs_2022_23.h5 from bucket policyengine-uk-data-private\n",
      "INFO:root:Using Google Cloud Storage for download.\n",
      "INFO:root:Metadata for blob policyengine-uk-data-private, enhanced_frs_2022_23.h5 has version: 1.13.1\n",
      "WARNING:root:No version specified for policyengine-uk-data-private, enhanced_frs_2022_23.h5. Using latest version: 1.13.1\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Syncing policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.13.1 to cache\n",
      "INFO:root:Blob policyengine-uk-data-private, /b/policyengine-uk-data-private/o/enhanced_frs_2022_23.h5 has version 1.13.1\n",
      "INFO:policyengine.utils.data.simplified_google_storage_client:Crc for policyengine-uk-data-private, enhanced_frs_2022_23.h5 is xBsZfQ==\n",
      "INFO:root:Blob policyengine-uk-data-private, /b/policyengine-uk-data-private/o/enhanced_frs_2022_23.h5 has version 1.13.1\n",
      "INFO:policyengine.utils.data.simplified_google_storage_client:Downloaded policyengine-uk-data-private, enhanced_frs_2022_23.h5, version:1.13.1\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Downloaded new version of policyengine-uk-data-private, enhanced_frs_2022_23.h5, 1.13.1 with crc xBsZfQ==\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Cache updated for {id_string}\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Copying downloaded data for policyengine-uk-data-private, enhanced_frs_2022_23.h5 to enhanced_frs_2022_23.h5\n",
      "INFO:policyengine.utils.data.caching_google_storage_client:Data successfully copied to enhanced_frs_2022_23.h5 with version 1.13.1\n",
      "INFO:root:Data loaded\n",
      "INFO:root:Simulations initialised\n",
      "INFO:root:Output functions loaded\n"
     ]
    },
    {
     "data": {
      "text/markdown": [
       "[See the forecast change in PolicyEngine](https://legacy.policyengine.org/uk/policy?reform=85983&baseline=85984&region=uk&timePeriod=2029)"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from policyengine import Simulation\n",
    "\n",
    "\n",
    "ORIGINAL_MEANS_TESTED = {\n",
    "    \"gov.dwp.winter_fuel_payment.eligibility.taxable_income_test.maximum_taxable_income\": {\n",
    "        \"2025\": 0,\n",
    "        \"2026\": 0,\n",
    "        \"2027\": 0,\n",
    "        \"2028\": 0,\n",
    "        \"2029\": 0,\n",
    "    },\n",
    "    \"gov.dwp.winter_fuel_payment.eligibility.taxable_income_test.use_maximum_taxable_income\": {\n",
    "        \"2025\": False,\n",
    "        \"2026\": False,\n",
    "        \"2027\": False,\n",
    "        \"2028\": False,\n",
    "        \"2029\": False,\n",
    "    },\n",
    "}\n",
    "\n",
    "NEW_MEANS_TESTED = {\n",
    "    \"gov.dwp.winter_fuel_payment.eligibility.taxable_income_test.maximum_taxable_income\": {\n",
    "        \"2025\": 35_000,\n",
    "        \"2026\": 35_000,\n",
    "        \"2027\": 35_000,\n",
    "        \"2028\": 35_000,\n",
    "        \"2029\": 35_000,\n",
    "    },\n",
    "    \"gov.dwp.winter_fuel_payment.eligibility.taxable_income_test.use_maximum_taxable_income\": {\n",
    "        \"2025\": True,\n",
    "        \"2026\": True,\n",
    "        \"2027\": True,\n",
    "        \"2028\": True,\n",
    "        \"2029\": True,\n",
    "    },\n",
    "}\n",
    "\n",
    "sim = Simulation(\n",
    "    country=\"uk\",\n",
    "    scope=\"macro\",\n",
    "    baseline=ORIGINAL_MEANS_TESTED,\n",
    "    reform=NEW_MEANS_TESTED,\n",
    ")\n",
    "\n",
    "from policyengine_core.reforms import Reform\n",
    "from IPython.display import Markdown\n",
    "import pandas as pd\n",
    "\n",
    "baseline = Reform.from_dict(ORIGINAL_MEANS_TESTED, country_id=\"uk\")\n",
    "reform = Reform.from_dict(NEW_MEANS_TESTED, country_id=\"uk\")\n",
    "\n",
    "link = f\"https://legacy.policyengine.org/uk/policy?reform={reform.api_id}&baseline={baseline.api_id}&region=uk&timePeriod=2029\"\n",
    "\n",
    "Markdown(f\"[See the forecast change in PolicyEngine]({link})\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:Simulations initialised\n",
      "INFO:root:Output functions loaded\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "{\"data\":[{\"hovertemplate\":\"variable=Reform\\u003cbr\\u003eIncome=%{x}\\u003cbr\\u003evalue=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Reform\",\"line\":{\"color\":\"#2C6496\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Reform\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0.0,1189.689453125,2379.37890625,3569.068115234375,4758.7578125,5948.44677734375,7138.13623046875,8327.826171875,9517.515625,10707.2041015625,11896.8935546875,13086.5830078125,14276.2724609375,15465.9619140625,16655.65234375,17845.341796875,19035.03125,20224.720703125,21414.408203125,22604.09765625,23793.787109375,24983.4765625,26173.166015625,27362.85546875,28552.544921875,29742.234375,30931.923828125,32121.61328125,33311.3046875,34500.9921875,35690.68359375,36880.37109375,38070.0625,39259.75,40449.44140625,41639.12890625,42828.81640625,44018.5078125,45208.1953125,46397.88671875,47587.57421875,48777.265625,49966.953125,51156.64453125,52346.33203125,53536.0234375,54725.7109375,55915.40234375,57105.08984375,58294.78125,59484.46875,60674.16015625,61863.84765625,63053.5390625,64243.2265625,65432.91796875,66622.609375,67812.296875,69001.984375,70191.671875,71381.3671875,72571.0546875,73760.7421875,74950.4296875,76140.125,77329.8125,78519.5,79709.1875,80898.8828125,82088.5703125,83278.2578125,84467.9453125,85657.6328125,86847.328125,88037.015625,89226.703125,90416.390625,91606.0859375,92795.7734375,93985.4609375,95175.1484375,96364.84375,97554.53125,98744.21875,99933.90625,101123.6015625,102313.2890625,103502.9765625,104692.6640625,105882.359375,107072.046875,108261.734375,109451.421875,110641.1171875,111830.8046875,113020.4921875,114210.1796875,115399.875,116589.5625,117779.25,118968.9375],\"xaxis\":\"x\",\"y\":[200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"},{\"hovertemplate\":\"variable=Baseline\\u003cbr\\u003eIncome=%{x}\\u003cbr\\u003evalue=%{y}\\u003cextra\\u003e\\u003c\\u002fextra\\u003e\",\"legendgroup\":\"Baseline\",\"line\":{\"color\":\"#808080\",\"dash\":\"solid\"},\"marker\":{\"symbol\":\"circle\"},\"mode\":\"lines\",\"name\":\"Baseline\",\"orientation\":\"v\",\"showlegend\":true,\"x\":[0.0,1189.689453125,2379.37890625,3569.068115234375,4758.7578125,5948.44677734375,7138.13623046875,8327.826171875,9517.515625,10707.2041015625,11896.8935546875,13086.5830078125,14276.2724609375,15465.9619140625,16655.65234375,17845.341796875,19035.03125,20224.720703125,21414.408203125,22604.09765625,23793.787109375,24983.4765625,26173.166015625,27362.85546875,28552.544921875,29742.234375,30931.923828125,32121.61328125,33311.3046875,34500.9921875,35690.68359375,36880.37109375,38070.0625,39259.75,40449.44140625,41639.12890625,42828.81640625,44018.5078125,45208.1953125,46397.88671875,47587.57421875,48777.265625,49966.953125,51156.64453125,52346.33203125,53536.0234375,54725.7109375,55915.40234375,57105.08984375,58294.78125,59484.46875,60674.16015625,61863.84765625,63053.5390625,64243.2265625,65432.91796875,66622.609375,67812.296875,69001.984375,70191.671875,71381.3671875,72571.0546875,73760.7421875,74950.4296875,76140.125,77329.8125,78519.5,79709.1875,80898.8828125,82088.5703125,83278.2578125,84467.9453125,85657.6328125,86847.328125,88037.015625,89226.703125,90416.390625,91606.0859375,92795.7734375,93985.4609375,95175.1484375,96364.84375,97554.53125,98744.21875,99933.90625,101123.6015625,102313.2890625,103502.9765625,104692.6640625,105882.359375,107072.046875,108261.734375,109451.421875,110641.1171875,111830.8046875,113020.4921875,114210.1796875,115399.875,116589.5625,117779.25,118968.9375],\"xaxis\":\"x\",\"y\":[200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,200.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],\"yaxis\":\"y\",\"type\":\"scatter\"}],\"layout\":{\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmapgl\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmapgl\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"xaxis\":{\"anchor\":\"y\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Taxable income\"},\"tickprefix\":\"\\u00a3\",\"tickformat\":\",.0f\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"yaxis\":{\"anchor\":\"x\",\"domain\":[0.0,1.0],\"title\":{\"text\":\"Winter Fuel Allowance\"},\"tickprefix\":\"\\u00a3\",\"tickformat\":\",.0f\",\"gridcolor\":\"#F4F4F4\",\"zerolinecolor\":\"#F4F4F4\",\"ticksuffix\":\"\"},\"legend\":{\"title\":{\"text\":\"\"},\"tracegroupgap\":0},\"margin\":{\"t\":120,\"b\":120,\"l\":120,\"r\":120},\"title\":{\"text\":\"Winter Fuel Allowance by taxable income for a 70-year-old\"},\"font\":{\"family\":\"Roboto Serif\",\"color\":\"black\"},\"height\":600,\"width\":800,\"plot_bgcolor\":\"#F4F4F4\",\"paper_bgcolor\":\"#F4F4F4\",\"images\":[{\"sizex\":0.15,\"sizey\":0.15,\"source\":\"https:\\u002f\\u002fraw.githubusercontent.com\\u002fPolicyEngine\\u002fpolicyengine-app\\u002fmaster\\u002fsrc\\u002fimages\\u002flogos\\u002fpolicyengine\\u002fteal.png\",\"x\":1.1,\"xanchor\":\"right\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"annotations\":[{\"showarrow\":false,\"text\":\"Source: PolicyEngine UK tax-benefit microsimulation model (version 2.32.0)\",\"x\":0,\"xanchor\":\"left\",\"xref\":\"paper\",\"y\":-0.2,\"yanchor\":\"bottom\",\"yref\":\"paper\"}],\"modebar\":{\"bgcolor\":\"#F4F4F4\",\"color\":\"#F4F4F4\",\"activecolor\":\"#F4F4F4\"},\"uniformtext\":{\"mode\":\"hide\",\"minsize\":12}}}\n"
     ]
    }
   ],
   "source": [
    "household = Simulation(\n",
    "    country=\"uk\",\n",
    "    scope=\"household\",\n",
    "    baseline=ORIGINAL_MEANS_TESTED,\n",
    "    reform=NEW_MEANS_TESTED,\n",
    "    data={\n",
    "        \"people\": {\n",
    "            \"person\": {\n",
    "                \"age\": 70,\n",
    "            }\n",
    "        },\n",
    "        \"axes\": [\n",
    "            [\n",
    "                {\n",
    "                    \"name\": \"private_pension_income\",\n",
    "                    \"min\": 0,\n",
    "                    \"max\": 100_000,\n",
    "                    \"count\": 101,\n",
    "                }\n",
    "            ]\n",
    "        ],\n",
    "    },\n",
    ")\n",
    "\n",
    "import plotly.express as px\n",
    "\n",
    "df = pd.DataFrame()\n",
    "df[\"Reform\"] = household.reform_simulation.calculate(\n",
    "    \"winter_fuel_allowance\", 2025\n",
    ")\n",
    "df[\"Baseline\"] = household.baseline_simulation.calculate(\n",
    "    \"winter_fuel_allowance\", 2025\n",
    ")\n",
    "df[\"Income\"] = household.baseline_simulation.calculate(\n",
    "    \"private_pension_income\", 2025\n",
    ")\n",
    "\n",
    "from policyengine.utils.charts import *\n",
    "\n",
    "\n",
    "fig = px.line(\n",
    "    df,\n",
    "    x=\"Income\",\n",
    "    y=[\"Reform\", \"Baseline\"],\n",
    "    color_discrete_sequence=[BLUE, GRAY],\n",
    ").update_layout(\n",
    "    title=\"Winter Fuel Allowance by taxable income for a 70-year-old\",\n",
    "    yaxis_title=\"Winter Fuel Allowance\",\n",
    "    xaxis_title=\"Taxable income\",\n",
    "    yaxis_tickprefix=\"£\",\n",
    "    xaxis_tickprefix=\"£\",\n",
    "    yaxis_tickformat=\",.0f\",\n",
    "    xaxis_tickformat=\",.0f\",\n",
    "    legend_title_text=\"\",\n",
    ")\n",
    "\n",
    "\n",
    "print(format_fig(fig).to_json())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Poverty rates\n",
    "\n",
    "The government reports annually on four poverty metrics:\n",
    "\n",
    "* **Absolute poverty before housing costs**: households with income below 60% of the 2010/11 median income, adjusted for inflation.\n",
    "* **Absolute poverty after housing costs**: households with income below 60% of the 2010/11 median income after housing costs, adjusted for inflation.\n",
    "* **Relative poverty before housing costs**: households with income below 60% of the median income in the current year.\n",
    "* **Relative poverty after housing costs**: households with income below 60% of the median incomeafter housing costs in the current year .\n",
    "\n",
    "For each of these metrics, we simulate the change in the poverty rate and headcount as a result of the policy change. All reported years are fiscal years."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "def get_poverty(simulation, year, absolute, bhc, rate):\n",
    "    population = simulation.calculate(\"person_id\", year).count()\n",
    "    if absolute:\n",
    "        if bhc:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_poverty\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "        else:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_poverty_ahc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "    else:\n",
    "        if bhc:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_relative_poverty_bhc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "        else:\n",
    "            in_poverty = simulation.calculate(\n",
    "                \"in_relative_poverty_ahc\", year, map_to=\"person\"\n",
    "            ).sum()\n",
    "\n",
    "    if rate:\n",
    "        return round(in_poverty / population * 100, 1)\n",
    "\n",
    "    else:\n",
    "        return round(in_poverty / 1e3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 2: Absolute poverty before housing costs\n",
       "\n",
       "|   Year |   Baseline rate (%) | Baseline headcount (thousands)   |   Reform rate (%) | Reform headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|--------------------:|:---------------------------------|------------------:|:-------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                11.2 | 7,889                            |              11.2 | 7,857                          |                     0 |                               -32 |\n",
       "|   2026 |                11.2 | 7,928                            |              11.2 | 7,898                          |                     0 |                               -30 |\n",
       "|   2027 |                11.3 | 8,065                            |              11.3 | 8,038                          |                     0 |                               -27 |\n",
       "|   2028 |                11.3 | 8,102                            |              11.3 | 8,074                          |                     0 |                               -28 |\n",
       "|   2029 |                11.4 | 8,196                            |              11.4 | 8,173                          |                     0 |                               -23 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def add_thousands_separator(x):\n",
    "    return \"{:,}\".format(x)\n",
    "\n",
    "\n",
    "def get_rate_table(absolute, bhc, i):\n",
    "    years = []\n",
    "    poverty_rates_autumn = []\n",
    "    headcounts_autumn = []\n",
    "    poverty_rates_spring = []\n",
    "    headcounts_spring = []\n",
    "    change_rates = []\n",
    "    change_headcounts = []\n",
    "    for year in range(2025, 2030):\n",
    "        years.append(year)\n",
    "        poverty_rates_autumn.append(\n",
    "            get_poverty(\n",
    "                sim.baseline_simulation, year, absolute, bhc, rate=True\n",
    "            )\n",
    "        )\n",
    "        poverty_rates_spring.append(\n",
    "            get_poverty(sim.reform_simulation, year, absolute, bhc, rate=True)\n",
    "        )\n",
    "        headcounts_autumn.append(\n",
    "            get_poverty(\n",
    "                sim.baseline_simulation, year, absolute, bhc, rate=False\n",
    "            )\n",
    "        )\n",
    "        headcounts_spring.append(\n",
    "            get_poverty(sim.reform_simulation, year, absolute, bhc, rate=False)\n",
    "        )\n",
    "        change_rates.append(\n",
    "            round(poverty_rates_spring[-1] - poverty_rates_autumn[-1], 1)\n",
    "        )\n",
    "        change_headcounts.append(\n",
    "            round(headcounts_spring[-1] - headcounts_autumn[-1], 0)\n",
    "        )\n",
    "\n",
    "    df = pd.DataFrame(\n",
    "        {\n",
    "            \"Year\": years,\n",
    "            \"Baseline rate (%)\": poverty_rates_autumn,\n",
    "            \"Baseline headcount (thousands)\": headcounts_autumn,\n",
    "            \"Reform rate (%)\": poverty_rates_spring,\n",
    "            \"Reform headcount (thousands)\": headcounts_spring,\n",
    "            \"Change in rate (pp)\": change_rates,\n",
    "            \"Change in headcount (thousands)\": change_headcounts,\n",
    "        }\n",
    "    )\n",
    "\n",
    "    for col in df.columns:\n",
    "        if \"thousands\" in col:\n",
    "            df[col] = df[col].apply(add_thousands_separator)\n",
    "\n",
    "    title = \"Absolute poverty\" if absolute else \"Relative poverty\"\n",
    "    title += \" before housing costs\" if bhc else \" after housing costs\"\n",
    "\n",
    "    return Markdown(\n",
    "        f\"Table {i}: {title}\\n\\n\" + df.set_index(\"Year\").to_markdown()\n",
    "    )\n",
    "\n",
    "\n",
    "get_rate_table(absolute=True, bhc=True, i=2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 3: Absolute poverty after housing costs\n",
       "\n",
       "|   Year |   Baseline rate (%) | Baseline headcount (thousands)   |   Reform rate (%) | Reform headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|--------------------:|:---------------------------------|------------------:|:-------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                16.7 | 11,708                           |              16.7 | 11,694                         |                   0   |                               -14 |\n",
       "|   2026 |                16.9 | 11,928                           |              16.9 | 11,910                         |                   0   |                               -18 |\n",
       "|   2027 |                17.3 | 12,294                           |              17.3 | 12,278                         |                   0   |                               -16 |\n",
       "|   2028 |                17.4 | 12,408                           |              17.3 | 12,388                         |                  -0.1 |                               -20 |\n",
       "|   2029 |                17.4 | 12,516                           |              17.4 | 12,496                         |                   0   |                               -20 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=True, bhc=False, i=3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 4: Relative poverty before housing costs\n",
       "\n",
       "|   Year |   Baseline rate (%) | Baseline headcount (thousands)   |   Reform rate (%) | Reform headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|--------------------:|:---------------------------------|------------------:|:-------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                17.8 | 12,511                           |              17.8 | 12,491                         |                   0   |                               -20 |\n",
       "|   2026 |                17.9 | 12,661                           |              17.9 | 12,618                         |                   0   |                               -43 |\n",
       "|   2027 |                18.2 | 12,946                           |              18.2 | 12,921                         |                   0   |                               -25 |\n",
       "|   2028 |                18.2 | 13,026                           |              18.2 | 12,987                         |                   0   |                               -39 |\n",
       "|   2029 |                18.4 | 13,184                           |              18.3 | 13,126                         |                  -0.1 |                               -58 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=False, bhc=True, i=4)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 5: Relative poverty after housing costs\n",
       "\n",
       "|   Year |   Baseline rate (%) | Baseline headcount (thousands)   |   Reform rate (%) | Reform headcount (thousands)   |   Change in rate (pp) |   Change in headcount (thousands) |\n",
       "|-------:|--------------------:|:---------------------------------|------------------:|:-------------------------------|----------------------:|----------------------------------:|\n",
       "|   2025 |                24.3 | 17,067                           |              24.3 | 17,049                         |                   0   |                               -18 |\n",
       "|   2026 |                24.2 | 17,082                           |              24.2 | 17,073                         |                   0   |                                -9 |\n",
       "|   2027 |                24.3 | 17,302                           |              24.3 | 17,277                         |                   0   |                               -25 |\n",
       "|   2028 |                24.5 | 17,471                           |              24.4 | 17,454                         |                  -0.1 |                               -17 |\n",
       "|   2029 |                24.6 | 17,673                           |              24.8 | 17,763                         |                   0.2 |                                90 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_rate_table(absolute=False, bhc=False, i=5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Inequality\n",
    "\n",
    "We also project income inequality metrics in PolicyEngine's open source model, including the Gini coefficient, the share of income held by the top 10 percent, and the share of income held by the top 1 percent."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 6: Gini coefficient\n",
       "\n",
       "|   Year |   Baseline |   Reform |   Change (pp) |   Change (%) |\n",
       "|-------:|-----------:|---------:|--------------:|-------------:|\n",
       "|   2025 |       37.3 |     37.2 |          -0.1 |         -0.2 |\n",
       "|   2026 |       37.5 |     37.4 |          -0.1 |         -0.2 |\n",
       "|   2027 |       37.5 |     37.5 |          -0.1 |         -0.1 |\n",
       "|   2028 |       37.6 |     37.6 |          -0.1 |         -0.1 |\n",
       "|   2029 |       37.7 |     37.6 |          -0.1 |         -0.1 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def get_inequality_table(metric, i):\n",
    "    years = []\n",
    "    autumn_values = []\n",
    "    spring_values = []\n",
    "    change_values = []\n",
    "    change_values_pct = []\n",
    "\n",
    "    for year in range(2025, 2030):\n",
    "        if metric == \"Gini coefficient\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).gini()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).gini()\n",
    "                * 100\n",
    "            )\n",
    "        elif metric == \"Top 10% share\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_10_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_10_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "        elif metric == \"Top 1% share\":\n",
    "            autumn_values.append(\n",
    "                sim.baseline_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_1_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "            spring_values.append(\n",
    "                sim.reform_simulation.calculate(\n",
    "                    \"equiv_household_net_income\", year\n",
    "                ).top_1_pct_share()\n",
    "                * 100\n",
    "            )\n",
    "        years.append(year)\n",
    "        change_values.append(round(spring_values[-1] - autumn_values[-1], 1))\n",
    "        change_values_pct.append(\n",
    "            round(\n",
    "                (spring_values[-1] - autumn_values[-1])\n",
    "                / autumn_values[-1]\n",
    "                * 100,\n",
    "                1,\n",
    "            )\n",
    "        )\n",
    "\n",
    "    df = pd.DataFrame(\n",
    "        {\n",
    "            \"Year\": years,\n",
    "            \"Baseline\": autumn_values,\n",
    "            \"Reform\": spring_values,\n",
    "            \"Change (pp)\": change_values,\n",
    "            \"Change (%)\": change_values_pct,\n",
    "        }\n",
    "    )\n",
    "\n",
    "    df[\"Baseline\"] = df[\"Baseline\"].round(1)\n",
    "    df[\"Reform\"] = df[\"Reform\"].round(1)\n",
    "\n",
    "    return Markdown(\n",
    "        f\"Table {i}: {metric}\\n\\n\" + df.set_index(\"Year\").to_markdown()\n",
    "    )\n",
    "\n",
    "\n",
    "get_inequality_table(\"Gini coefficient\", i=6)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 7: Top 10% share\n",
       "\n",
       "|   Year |   Baseline |   Reform |   Change (pp) |   Change (%) |\n",
       "|-------:|-----------:|---------:|--------------:|-------------:|\n",
       "|   2025 |       29   |     29   |            -0 |         -0.1 |\n",
       "|   2026 |       29.2 |     29.1 |            -0 |         -0.1 |\n",
       "|   2027 |       29.2 |     29.2 |            -0 |         -0.1 |\n",
       "|   2028 |       29.3 |     29.3 |            -0 |         -0.1 |\n",
       "|   2029 |       29.3 |     29.3 |            -0 |         -0   |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_inequality_table(\"Top 10% share\", i=7)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/markdown": [
       "Table 8: Top 1% share\n",
       "\n",
       "|   Year |   Baseline |   Reform |   Change (pp) |   Change (%) |\n",
       "|-------:|-----------:|---------:|--------------:|-------------:|\n",
       "|   2025 |        9.7 |      9.7 |            -0 |         -0.1 |\n",
       "|   2026 |        9.8 |      9.8 |            -0 |         -0.1 |\n",
       "|   2027 |        9.9 |      9.9 |            -0 |         -0.1 |\n",
       "|   2028 |       10   |     10   |            -0 |         -0.1 |\n",
       "|   2029 |       10.1 |     10   |            -0 |         -0.1 |"
      ],
      "text/plain": [
       "<IPython.core.display.Markdown object>"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "get_inequality_table(\"Top 1% share\", i=8)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "View the full PolicyEngine analysis [here](https://legacy.policyengine.org/uk/policy?focus=policyOutput.policyBreakdown&reform=85980&region=uk&timePeriod=2025&baseline=1) and use our household [calculator](https://legacy.policyengine.org/uk/household?focus=intro&reform=85980&region=uk&timePeriod=2025&baseline=1) to see how these changes affect individual households."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": ".venv",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.13"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}



---

---
# How changing the VAT threshold affects UK revenues
Slug: uk-vat-thresholds
Date: 2025-09-10 11:00:00
Authors: Vahid Ahmadi
Tags: uk, policy, featured
Description: PolicyEngine's new firm microsimulation model estimates revenue and business impacts of VAT thresholds from £70,000 to £120,000.

---

The UK requires businesses to register for VAT and charge customers 20% on their sales once annual turnover reaches [£90,000](https://www.gov.uk/vat-registration-thresholds), up from [£85,000](https://www.gov.uk/government/publications/vat-increasing-the-registration-and-deregistration-thresholds/increasing-the-vat-registration-threshold) in 2024-25. The Telegraph [reported](https://www.telegraph.co.uk/business/2025/08/30/reeves-talks-to-raise-vat-threshold-battle-to-grow-economy/) that Chancellor Rachel Reeves is considering further increases to the VAT threshold.

We analyse how VAT threshold changes between £70,000 and £120,000 would affect revenues and the number of VAT-paying firms for the 2026-27 fiscal year. We constructed synthetic firm microdata to generate these projections and compare them with HMRC's official estimates.

## Methodology

We calibrated synthetic firm microdata to official UK business statistics from two sources: [ONS UK Business statistics](https://www.ons.gov.uk/businessindustryandtrade/business/activitysizeandlocation) for overall firm distributions and [HMRC VAT statistics](https://www.gov.uk/government/statistics/value-added-tax-vat-annual-statistics) for VAT-registered businesses.

Figure 1 shows the distribution of UK firms by turnover band in 2024 according to ONS business statistics.

[Chart: type: bar]

ONS data shows 32.1% of UK firms have turnover between £100,000 and £249,000, with 14.3% below £50,000 and 19.7% in the £50,000-£99,000 range. Most UK businesses operate with turnover below £250,000.

Figure 2 presents the distribution of VAT-registered firms by turnover band in 2024-25 from HMRC statistics.

[Chart: type: bar]

HMRC data shows 31.1% of VAT-registered firms have turnover between £1 and £90,000, just below the registration threshold, with 14.0% in the £90,000-£150,000 band.

We constructed synthetic firm microdata through multi-objective optimisation that matches both ONS firm structures and HMRC targets. The data captures firms by industry classification, turnover bands, employee counts, and VAT tax liability.

Figure 3 shows the resulting distribution of UK firms by annual turnover in 2024.

[Chart: type: bar]

The distribution shows drops in firm density above both the £90,000 VAT threshold and the £150,000 [VAT Flat Rate Scheme](https://www.gov.uk/vat-flat-rate-scheme) limit, which offers simplified VAT accounting for smaller businesses.

We construct the initial synthetic firm set for 2024-25, then age turnover and VAT liability values to 2026-27 using growth factors from the [OBR's Retail Price Index forecasts](https://obr.uk/efo/economic-and-fiscal-outlook-march-2024/#annex-a), maintaining the same number of firms. Projections assume no behavioral responses to threshold changes.

## Comparison with HMRC projections

HMRC published revenue projections for raising the VAT threshold from [£85,000 to £90,000](https://www.gov.uk/government/publications/vat-increasing-the-registration-and-deregistration-thresholds/increasing-the-vat-registration-threshold#summary-of-impacts) across the 2024-29 period. My colleague Max Ghenis [confirmed](https://maxghenis.substack.com/p/vat-thresholds-revenues-and-the-role) that HMRC assumed baseline thresholds of £85,000 in 2024-25, £87,000 in 2025-26, £89,000 in 2026-27, and £92,000 in 2028-29. Figure 4 compares PolicyEngine's estimates with HMRC's projections.

[Chart: type: bar]

Both models project revenue losses in the first four years, followed by gains in 2028-29. HMRC estimates a [£185 million](https://www.gov.uk/government/publications/vat-increasing-the-registration-and-deregistration-thresholds/increasing-the-vat-registration-threshold#summary-of-impacts) loss in 2025-26; PolicyEngine projects £184 million. The 2028-29 revenue increase occurs because HMRC's baseline assumes the threshold would grow with inflation to £92,000 by that point, so fixing it at £90,000 captures more firms. PolicyEngine's estimates deviate an average 12.3% from HMRC's projections across all five years.

## Revenue impacts

Figure 7 shows revenue impacts for different thresholds in 2026-27.

[Chart: type: scatter]

In 2026-27, a £70,000 threshold would generate approximately £642 million additional revenue while a £120,000 threshold would reduce revenue by approximately £1.1 billion.

## Impact on VAT-paying firms

Figure 5 shows how different threshold levels change the number of VAT-paying firms in 2026-27.

[Chart: type: scatter]

A £70,000 threshold would add approximately 109,000 firms to VAT registration in 2026-27, while a £120,000 threshold would remove approximately 116,000 firms.

## Conclusion

Our synthetic firm microsimulation model shows that VAT threshold changes affect government revenues and the number of VAT-registered businesses. Raising the threshold to £100,000 would remove approximately 48,000 firms from VAT registration in 2026-27, reducing revenue by approximately £371 million.

This analysis represents PolicyEngine's first application of firm-level microsimulation to UK tax policy. In the coming weeks, we'll apply this VAT model to evaluate other policy alternatives, including sector-specific thresholds, phase-ins, and mechanisms to address cliff effects.



---

---
# Testing multi-agent AI workflows for policy research
Slug: multi-agent-workflows-policy-research
Date: 2025-10-28
Authors: Vahid Ahmadi
Tags: uk, us, featured, technology, ai
Description: A multi-agent Claude Code system fared better on distributional analysis than benefit interactions; insights inform our forthcoming plugin.

---

When we finished our [UK carbon dividend analysis](https://policyengine.org/uk/research/uk-carbon-tax-dividend) this autumn, we wondered whether [Claude Code's](https://claude.com/claude-code) multi-agent system could have automated parts of the research workflow. We tested it on a similar policy analysis to find out.

## Building a multi-agent research workflow

Using Claude Code, we configured three [specialised agents](https://docs.claude.com/en/docs/claude-code/agents) to handle different parts of a policy analysis pipeline. The first agent fetches PolicyEngine microsimulation data from our GitHub repositories and documentation. The second writes analysis scripts using our [Python package](https://github.com/PolicyEngine/policyengine-uk). The third generates formatted research output from the results.

We stored each agent as a markdown file in [`.claude/agents/`](https://docs.claude.com/en/docs/claude-code/agents#creating-custom-agents), defining their specific roles and tools. The data fetching agent got access to GitHub APIs and PolicyEngine documentation. The script writer could execute Python and access our policyengine-uk package. The report generator worked with markdown formatting and [Plotly](https://plotly.com/) visualisations.

![](/images/posts/multi-agent-workflows-policy-research/claude-code-interface.png)

Claude Code automatically routes tasks to the appropriate agent based on the request. When we asked it to analyse a carbon tax scenario, it handled the coordination without explicit instructions about which agent should do what.

![](/images/posts/multi-agent-workflows-policy-research/create-agent-dialog.png)

## What worked

For standard distributional analyses—calculating poverty rates, Gini coefficients, and decile-level impacts—the workflow produced output matching our manual approach. The agents correctly structured PolicyEngine API calls and generated properly formatted charts.

The system saved the most time on repetitive tasks. Once we configured the agents for UK distributional analysis, we needed minimal adjustments to run similar analyses on other policies. This matters for our work where we often model multiple versions of the same reform.

The report generator consistently matched PolicyEngine's house style at least as well as our human writers typically do on first attempt. It maintained active voice, avoided subjective adjectives, and led with quantitative findings.

![](/images/posts/multi-agent-workflows-policy-research/policyengine-agents-list.png)

## What didn't work

Complex policy modelling exposed the limits. When calculations required understanding interactions between multiple benefit programmes—like how Universal Credit's taper interacts with Housing Benefit phase-outs—the agents struggled. They would implement each programme correctly in isolation but miss the coordination logic.

We found prompt precision mattered more than expected. An instruction to "analyse carbon tax impacts" produced generic output. We needed specifics: "Calculate relative change in net income by decile, poverty rates by demographic group, and constituency-level winners and losers." The agents don't infer methodological standards the way human researchers do.

We hit an unexpected problem with code review. Our first approach used the script-writing agent to review its own code. This caught syntax errors but missed logical problems. We had to create a separate reviewer agent with different prompting to get meaningful code critique.

![](/images/posts/multi-agent-workflows-policy-research/agents-in-progress.png)

## What we learned

Multi-agent workflows work best when the task has clear boundaries and established patterns. Our monthly policy briefs analysing government reforms fit this pattern. Research exploring new methodologies doesn't.

The technology changes how we think about research automation. Instead of one AI that does everything, specialised agents with defined responsibilities produce more reliable output. This mirrors how a streamlined policy analysis shop might operate—one person pulls data, another writes Python, a third formats the report.

These limitations reveal where human judgement remains essential. When policy interactions get complex, when methodological choices require expertise, or when political context matters for framing, the agents defer to human researchers. That's the right division of labour.

## Addressing the shortcomings

We're working to address these limitations through improved agent configurations and leveraging Anthropic's recently launched [Skills](https://www.anthropic.com/news/skills) and [plugin ecosystem](https://www.anthropic.com/news/claude-code-plugins). Skills allow us to package specific PolicyEngine expertise—like properly structuring benefit programme interactions or applying our methodological standards—into reusable components that Claude Code loads when needed.

We're packaging these insights into the [policyengine-claude plugin](https://github.com/PolicyEngine/policyengine-mcp), which enables other researchers to use Claude Code with PolicyEngine more effectively. The plugin includes specialised agents, pre-configured skills for common policy analyses, and direct database access through the Model Context Protocol.

We'll demonstrate this workflow at our [PolicyEngine 2.0 event](https://www.eventbrite.co.uk/e/policyengine-20-and-the-future-of-public-policy-analysis-tickets-1673065246189?aff=oddtdtcreator) on 3 November in London, where we'll show how these tools work together for real policy analysis. If you're interested in seeing multi-agent workflows in action for policy research, we'd encourage you to attend.

We're deploying this workflow for routine policy updates where the analysis structure stays constant. It won't replace human researchers, but it will free them to focus on questions that require genuine policy expertise rather than technical execution.

